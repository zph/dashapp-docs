<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="release" content="1.0"/><meta name="version" content="master"/><link rel="shortcut icon" href="../../../assets/favicon.ico"/><meta name="generator" content="Gatsby 5.7.0"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:site" content="@mongodb" data-gatsby-head="true"/><meta property="twitter:title" content="Drivers API - MongoDB Manual v5.0 - MongoDB Docs" data-gatsby-head="true"/><meta name="twitter:image" content="https://www.mongodb.com/docs/assets/meta_generic.png" data-gatsby-head="true"/><meta name="twitter:image:alt" content="MongoDB logo featuring a green leaf on a dark green background." data-gatsby-head="true"/><meta property="og:title" content="Drivers API - MongoDB Manual v5.0 - MongoDB Docs" data-gatsby-head="true"/><meta property="og:url" content="https://www.mongodb.com/docs/v5.0/core/transactions-in-applications/" data-gatsby-head="true"/><meta property="og:image" content="https://www.mongodb.com/docs/assets/meta_generic.png" data-gatsby-head="true"/><meta property="og:image:secure_url" content="https://www.mongodb.com/docs/assets/meta_generic.png" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta data-testid="directive-meta" name="robots" content="noindex, nosnippet" data-gatsby-head="true"/><style data-href="/docs/v5.0/styles.9c63f1ad4288a7741960.css" data-identity="gatsby-global-css">.collapsible{border-top:1px solid #e8edeb;margin-top:32px}.collapsible~.collapsible{border-top:none;margin-top:0}.landing-module--fullWidth--e9978{margin:40px auto!important}.landing-module--document--ebe3b{padding:8px 15px 0}hr,input[type=search]{box-sizing:content-box}figure{margin:0}.fa-ul>li,.fa4-ul>li,sub,sup{position:relative}[class*=icon-],button,select{text-transform:none}.charts-icon,.fa4{text-rendering:auto}dt:hover>a.headerlink,h1:hover>a.headerlink,h2:hover>a.headerlink,h3:hover>a.headerlink,h4:hover>a.headerlink,h5:hover>a.headerlink,h6:hover>a.headerlink{visibility:visible}th{padding-right:5px}html{-webkit-tap-highlight-color:transparent}.fa-ul,.fa4-ul{list-style-type:none}*,.content,:after,:before{box-sizing:border-box}table{border-collapse:collapse}@font-face{font-family:Source Code Pro;font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/sourcecodepro/v13/HI_XiYsKILxRpg3hIP6sJ7fM7PqtlsnDs-cv.ttf) format("truetype")}@font-face{font-family:Source Code Pro;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/sourcecodepro/v13/HI_SiYsKILxRpg3hIP6sJ7fM7PqlPevT.ttf) format("truetype")}@font-face{font-family:Source Code Pro;font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/sourcecodepro/v13/HI_XiYsKILxRpg3hIP6sJ7fM7PqtzsjDs-cv.ttf) format("truetype")}@font-face{font-family:Source Code Pro;font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/sourcecodepro/v13/HI_XiYsKILxRpg3hIP6sJ7fM7Pqths7Ds-cv.ttf) format("truetype")} /*!
 * Bootstrap v3.0.0
 *
 * Copyright 2013 Twitter, Inc
 * Licensed under the Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Designed and built with all the love in the world by @mdo and @fat.
 */ /*! normalize.css v2.1.0 | MIT License | git.io/normalize */details,figure,footer,header,input[type=file],main,nav,section,summary{display:block}canvas,video{display:inline-block}select[multiple],select[size]{height:auto}[hidden]{display:none}html{-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;font-family:sans-serif}.open>a,a:active,a:hover{outline:0}h1{margin:.67em 0}b,dt,strong{font-weight:700}h1 .guilabel,h2 .guilabel,h3 .guilabel,h4 .guilabel,h5 .guilabel,h6 .guilabel{font-style:italic}a>em,address,cite{font-style:normal}q{quotes:"\201C""\201D""\2018""\2019"}sub,sup{font-size:75%;line-height:0;vertical-align:baseline}textarea{vertical-align:top}sup{top:-.5em}sub{bottom:-.25em}body.no-scroll,svg:not(:root){overflow:hidden}h1,h2,h3,hr{margin-top:20px}h1,h2,h3,h4,h5,h6,ol,ul{margin-bottom:10px}button,input,select,textarea{font-size:100%;margin:0}hr{margin-bottom:20px}button,input{line-height:normal}body{line-height:1.428571429}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}input[type=checkbox]{box-sizing:border-box;padding:0}input[type=search]{-webkit-appearance:textfield;box-sizing:border-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}table{border-spacing:0;max-width:100%}@media print{blockquote,img,pre,tr{page-break-inside:avoid}*{background:0 0!important;box-shadow:none!important;color:#000!important;text-shadow:none!important}a,a:visited{text-decoration:underline}blockquote,pre{border:1px solid #999}thead{display:table-header-group}@page{margin:2cm .5cm}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}}body,div.highlight{background-color:#fff}body{font-size:14px}button,input,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}button,input,select[multiple],textarea{background-image:none}a:focus,input[type=checkbox]:focus,input[type=file]:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}label{display:inline-block}hr{border-top:1px solid #eee;height:0}small{font-size:85%}div.body td{text-align:left}h1 small,h2 small,h3 small,h4 small,h5 small,h6 small{color:#999;font-weight:400;line-height:1}h4,h5,h6{margin-top:10px}blockquote p:last-child,div.body li>p.first,li div.line-block,ol ol,ol ul,ul ol,ul ul{margin-bottom:0}address{margin-bottom:20px}dd,dt{line-height:1.428571429}blockquote{border-left:5px solid #eee;margin:0 0 20px;padding:10px 20px}blockquote p{font-size:17.5px;font-weight:300;line-height:1.25}blockquote small{color:#999;display:block}blockquote small:before{content:"\2014 \00A0"}blockquote:after,blockquote:before,q:after,q:before{content:""}.container{margin-left:auto;margin-right:auto;padding-left:15px;padding-right:15px}.container:after,.container:before{content:" ";display:table}.container:after{clear:both}.fa-pull-left,.fa4-pull-left{float:left}@media (min-width:768px){.container{max-width:750px}}@media (min-width:992px){.container{max-width:970px}}label:not([for*=-message-rating]){font-weight:700;margin-bottom:5px}input[type=checkbox]{line-height:normal;margin:4px 0 0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}dl{margin-bottom:15px}input[type=checkbox][disabled]{cursor:not-allowed}dd,dd table,dd ul{margin-bottom:10px}.fa-pull-right,.fa4-pull-right{float:right}input[type=text]:disabled{color:#333}th{text-align:left}.fa-fw,.fa-li,.fa-stack-1x,.fa-stack-2x,.fa4-fw,.fa4-li{text-align:center}.line-block .line-block{margin-bottom:0;margin-top:0}.fa,.fab,.fal,.far,.fas,[class*=icon-]{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-style:normal;font-variant:normal;line-height:1}.far,[class*=icon-]{font-weight:400}@media (min-width:1200px){.container{max-width:1170px}}.fa-stack,.fa4{display:inline-block}@font-face{font-family:icomoon;font-style:normal;font-weight:800;src:url(https://media.mongodb.org/fonts/icomoon.eot?qcwgdc);src:url(https://media.mongodb.org/fonts/icomoon.eot?) format("embedded-opentype"),url(https://media.mongodb.org/fonts/icomoon.ttf?qcwgdc) format("truetype"),url(https://media.mongodb.org/fonts/icomoon.woff?qcwgdc) format("woff"),url(https://media.mongodb.org/fonts/icomoon.svg?qcwgdc) format("svg")}[class*=icon-]{speak:none;font-feature-settings:normal;font-family:icomoon}:root{--black:#001e2b;--gray-dark4:#112733;--gray-dark3:#1c2d38;--gray-dark2:#3d4f58;--gray-dark1:#5c6c75;--gray-base:#889397;--gray-light1:#c1c7c6;--gray-light2:#e8edeb;--gray-light3:#f9fbfa;--mongodb-green:#13aa52;--mongodb-green:var(--leaf);--blue-dark3:#0c2657;--blue-dark2:#083c90;--blue-dark1:#1254b7;--blue-base:#016bf8;--blue-light1:#0498ec;--blue-light2:#c3e7fe;--blue-light3:#e1f7ff;--green-dark3:#023430;--green-dark2:#00684a;--green-dark1:#00a35c;--green-base:#00ed64;--green-light1:#71f6ba;--green-light2:#c0fae6;--green-light3:#e3fcf7;--leaf:#13aa52;--fern:#12924f;--forest:#116149;--fog:#b8c4c2;--graphite:#21313c;--white:#fff;--day-spa:#e8edeb;--spring:#91c851;--daffodile:#ffdd49;--mongodb-green-light:#c2e0b4;--mongodb-green-neutral:#eff6ec;--green-secondary:#3c6626;--blush:#f4758b;--blush-light:#f9c7d0;--blush-neutral:#fdf1f2;--air:#c2deff;--air-light:#e7f0f9;--air-neutral:#f3f7fd;--marigold:#f4b65d;--marigold-light:#f6d29d;--marigold-neutral:#fff7ee;--tomato:#ef4c4c;--light-grey-green:#c2e0b4;--light-tan:#f6d29d;--charcoal-grey-two:#424950;--grey-primary:#b3bbc1;--grey-secondary:#616161;--light-grey-primary:#e0e7e8;--light-grey-secondary:#f5f6f7;--primary-shadow:rgba(0,0,0,.1);--mms-alert-blue:#43b1e5;--mms-alert-red:#ef4c4c;--mms-alert-red-dark:color(var(--alert-red) tint(25%));--mms-gray1:#464c4f;--mms-gray5:#babdbe;--mms-green2:#13aa52;--mms-warning-text:#ffb618;--sans-serif:"Euclid Circular A","Helvetica Neue",sans-serif;--monospace:"Source Code Pro",monospace;--hr-style:1px solid #e0e7e8;--hr-style:1px solid var(--light-grey-primary);--image-chevron:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="12" width="7.4"><path d="M1.4 0L0 1.4 4.6 6 0 10.6 1.4 12l6-6z" fill="%2369b241"/></svg>') no-repeat center;--chevron-width:16px;--image-caret:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="4.5" width="7.9"><path d="M7.8.1a.5.5 0 0 0-.4-.1H.5a.5.5 0 0 0-.4.1.5.5 0 0 0-.1.4l.1.3 3.5 3.5a.5.5 0 0 0 .4.2c.1 0 .2 0 .3-.2L7.8.8a.5.5 0 0 0 .1-.3L7.8.1z" fill="%32464c4f"/></svg>') no-repeat center;--caret-width:10px;--exclamation-circle:"\f06a";--check-circle:"\f058";--lg-color-dark-mode:var(--day-spa)} /*!
 * Font Awesome Free 5.3.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */.fa,.fab,.fal,.far,.fas{font-feature-settings:normal;display:inline-block;text-rendering:auto}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x,.fa-stack-2x,.fa4-2x,.fa4-stack-2x{font-size:2em}.fa-3x,.fa4-3x{font-size:3em}.fa-4x,.fa4-4x{font-size:4em}.fa-5x,.fa4-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{width:1.25em}.fa-ul{margin-left:2.5em;padding-left:0}.fa-li{left:-2em;line-height:inherit;position:absolute;width:2em}.fa-border{border:.08em solid #eee;border-radius:.1em;padding:.2em .25em .15em}.fa.fa-pull-left,.fa4.fa4-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fa4.fa4-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin,.fa4-spin{animation:fa-spin 2s linear infinite}.fa-pulse,.fa4-pulse{animation:fa-spin 1s steps(8) infinite}.fa-rotate-90,.fa4-rotate-90{transform:rotate(90deg)}.fa-rotate-180,.fa4-rotate-180{transform:rotate(180deg)}.fa-rotate-270,.fa4-rotate-270{transform:rotate(270deg)}.fa-flip-horizontal,.fa4-flip-horizontal{transform:scaleX(-1)}.fa-flip-vertical,.fa4-flip-vertical{transform:scaleY(-1)}.fa-flip-horizontal.fa-flip-vertical{transform:scale(-1)}:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-rotate-90,:root .fa4-flip-horizontal,:root .fa4-flip-vertical,:root .fa4-rotate-180,:root .fa4-rotate-270,:root .fa4-rotate-90{filter:none}.fa-stack{height:2em;line-height:2em;position:relative;vertical-align:middle;width:2em}.fa4-li{position:absolute}.fa-stack-1x,.fa-stack-2x{left:0;position:absolute;width:100%}.fa-stack-1x,.fa4-stack-1x{line-height:inherit}.fa-inverse,.fa4-inverse{color:#fff}.fa-500px:before,.fa4-500px:before{content:"\f26e"}@font-face{font-family:Font Awesome\ 5 Brands;font-style:normal;font-weight:400;src:url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-brands-400.eot);src:url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-brands-400.eot?#iefix) format("embedded-opentype"),url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-brands-400.woff2) format("woff2"),url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-brands-400.woff) format("woff"),url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-brands-400.ttf) format("truetype"),url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-brands-400.svg#fontawesome) format("svg")}.fab{font-family:Font Awesome\ 5 Brands}.fa,.far,.fas{font-family:Font Awesome\ 5 Free}@font-face{font-family:Font Awesome\ 5 Free;font-style:normal;font-weight:400;src:url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-regular-400.eot);src:url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-regular-400.eot?#iefix) format("embedded-opentype"),url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-regular-400.woff2) format("woff2"),url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-regular-400.woff) format("woff"),url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-regular-400.ttf) format("truetype"),url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-regular-400.svg#fontawesome) format("svg")}@font-face{font-family:Font Awesome\ 5 Free;font-style:normal;font-weight:900;src:url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-solid-900.eot);src:url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-solid-900.eot?#iefix) format("embedded-opentype"),url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-solid-900.woff2) format("woff2"),url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-solid-900.woff) format("woff"),url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-solid-900.ttf) format("truetype"),url(https://use.fontawesome.com/releases/v5.3.1/webfonts/fa-solid-900.svg#fontawesome) format("svg")}.fa,.fas{font-weight:900} /*!
 *  Font Awesome 4.7.0 by @davegandy - http://fontawesome.io - @fontawesome
 *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)
 */@font-face{font-family:FontAwesome4;font-style:normal;font-weight:400;src:url(../../../manual/static/fontawesome4-webfont-20fd1704ea223900efa9fd4e869efb08.woff2) format("woff2"),url(../../../manual/static/fontawesome4-webfont-f691f37e57f04c152e2315ab7dbad881.woff) format("woff"),url(../../../manual/static/fontawesome4-webfont-1e59d2330b4c6deb84b340635ed36249.ttf) format("truetype")}.fa4{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:14px/1 FontAwesome4;font-size:inherit}.charts-icon,.mms-icon,.mms-org-icon{-moz-osx-font-smoothing:grayscale;display:inline-block;font-style:normal}.charts-icon,body{-webkit-font-smoothing:antialiased}.fa4-lg{font-size:1.33333333em;line-height:.75em;vertical-align:-15%}.fa4-stack,img{vertical-align:middle}.fa4-fw{width:1.28571429em}.fa4-ul{margin-left:2.14285714em;padding-left:0}.fa4-li{left:-2.14285714em;top:.14285714em;width:2.14285714em}.fa4-li.fa4-lg{left:-1.85714286em}.fa4-border{border:.08em solid #eee;border-radius:.1em;padding:.2em .25em .15em}@keyframes fa-spin{0%{transform:rotate(0)}to{transform:rotate(359deg)}}.fa4-stack{display:inline-block;height:2em;line-height:2em;position:relative;width:2em}.fa4-stack-1x,.fa4-stack-2x{left:0;position:absolute;text-align:center;width:100%}.mms-icon,.mms-org-icon{font-size:16px;position:relative}.mms-icon:after,.mms-org-icon:after{left:0;position:absolute;top:0}.mms-icon{font-family:MMSIcons-Regular}.mms-org-icon{font-family:MMSOrgIcons-Regular}.charts-icon{font-feature-settings:normal;font-family:ChartsIcons;font-variant:normal;line-height:1}dd{margin-top:3px}div.body{transition:opacity .25s linear}.first{margin-top:0!important}.linenos pre{background-color:transparent}dd{margin-left:30px}.line-block{display:block;margin-bottom:1em;margin-top:1em}.line-block .line-block{margin-left:1.5em}.linenos{float:left;padding-top:24px;width:2em}@media print{div.document{margin:0!important;width:100%}}div td pre{background-color:transparent}@font-face{font-family:MMSIcons-Regular;font-style:normal;font-weight:400;src:url(../../../manual/static/MMSIcons-Regular-5bedbe88351f7667a2a81586d558e5ff.woff2) format("woff2"),url(../../../manual/static/MMSIcons-Regular-d25e35eae17c6f40768c83dc7149b0a8.woff) format("woff"),url(../../../manual/static/MMSIcons-Regular-960c944a07e1714bb4a828f117e5aa8b.ttf) format("truetype")}@font-face{font-family:MMSOrgIcons-Regular;font-style:normal;font-weight:400;src:url(data:font/woff2;base64,d09GMgABAAAAAALEAAoAAAAABlQAAAJ6AAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABlYAgkoKgVyBbQsGAAE2AiQDCAQgBYRtBykbpAVAHoVxw11igYhF0ZQi3vhrPPy3X3rf/AkAOUCVE0nsolYFXGSMASygZQfk6qrrqjaqDkhX7+Ba23CtFxGVfT15MdkNtaQJb3gzixBFvNLIn4BP6P9zLl6J538+xwywCQysaGQzLLA1yDT6QugQD/3Y73lRtZGPXqSZh3umhMjiniq16TKd4q5sH//MRBBJVUFGtnNYrwdVBAQZdjMQgAIFBkGwxldgkJ9xQLUsJGxXKuA/UvkkAKIafukAwyWQkbANOAJAIyANj3RMCkvHD7BcFt7esqE3N6K7Oy7yGj0EMww/xIn68OP06oml0OHXiSLO9xga9aXJ5cXVOFY4u5vEhmi47mH6qhi/6XQe92B6D/J9//e1Yj59f4mfs3S6Vsab4jitvfMJWr+b1oCvCAwzE/V8Jj4ZOYGoNx39fiMELo4KXtvbbeGt95Vzk7km+1ik2YQkG44nn/ZXlrPQzX+rWHRo+hrvfcUSALLiu0Dwscz78qBl7n9taAbljT9IsV5GrQSCTuhm/rkAUkaGQLLNByTUq0cFQLt3EIAuQIBQqwsESY0hEBRqDYMgqzUNgioNZkFQrdYiCOpNaQRBgw6Yr8h1mDSUg9BqDZJmn6HQ6gzJxBtU6fYH1VrDF+qVoiPVYDQsF8dko73NbXZwSv6zLLRAPq542RlZymBFfr7ZlEOI8dAhPLUU1n7lU1p5q2cbS4S5shLQyMDJANMgDPQoWm0ojezauJkhGWuORzMwaWKnge0R4XMxnoWLEyVbhiy7uO3h8pqZ5CBFjChGmIsDpYGLkz6VnZ0LxQ1zsTLQITKYEYRbiUyZjPyeGXRcHHwA9SPfiE4K) format("woff2"),url(data:font/woff;base64,d09GRgABAAAAAAQYAAoAAAAABlQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAAA9AAAAD4AAABWVr1jO2NtYXAAAAE0AAAAPAAAAUoApAFvZ2x5ZgAAAXAAAADcAAAA3CHU3wZoZWFkAAACTAAAAC0AAAA2EIIX4WhoZWEAAAJ8AAAAGAAAACQIXQQDaG10eAAAApQAAAAIAAAACAgAAABsb2NhAAACnAAAAAYAAAAGAG4AAG1heHAAAAKkAAAAHgAAACABDgBVbmFtZQAAAsQAAAE7AAACbdWMZSRwb3N0AAAEAAAAABUAAAApARAAAHicY2BkYWCcwMDKwMHUyXSGgYGhH0IzvmYwYuRgYGBiYGVmwAoC0lxTGBwYPBk8WUDcGBaIMCOIAACY/wesAAB4nGNgYGBmgGAZBkYGEHAB8hjBfBYGDSDNBqQZGZiALM///8EqwPT/HVD1QMDIxkA9wEhYyWAEALzJBw8AAgAAAAAEAAPkACMASAAAJSYvAT4BNS4BJw4BBzM+ATceARcOAQcuAScjHgEXMjY3FzcwARYfAR4BMzI2PwEXHgE7ATUjJy4BDgEPAScuAQ8BIxUzMj8BMAQADmRyKS4E67Cj4xZpFah2hLADA7CEWIwqczDMhUiBNeVJ/TAEHiIIFw0QGgY9NAcZD2hIWgcaHxkGQzEOMBJZutAVEDtmDmRxNYBIsOkEA8qccJACA6+Eg68EAVRGc40CLinjSQHDBy0zCwwSD5doDQ9nsg4PAREPp0kUBRFYZw87eJxjYGRgYADigzb/wuP5bb4ycLMwgMC1jS8bkGkWBuYnQIqDgQnEAwBGJQrYAAAAeJxjYGRgYGEAghgwCWIzMqACJgALRgBtBAAAAAQAAAAAAAAAAG4AAHicY2BkYGBgYvAEYgYwi4GBCwgZGP6D+QwAD88BZAAAeJx1j0tOwzAQhn/3BbQSqqhgh+QFYgEofYhVN+yafRfdp63Th9I4ctxKPQDn4QicgCPQG3AHftIBoVJiefzNN5NxAuACOyjsn0vuPSucMttzCSe4Fi7T3whXyA/CVTTwKFyjfxKu4x6hcAMtOE5QlTNmd3gWVmjiRbiEc7wKl+nfhCvkd+EqrvAhXENTlYXrGKmWcAO3ahGa1LjIm6keb3WYbLO5N+77HJrZOoncoR4Zly9sqrtB56f0e0y+mfW8j3Xs7EoPbOpNklidObs0Ex/Mvc/67XYsPpjYFX/fIOV2iOB5TqExxpYxRMIzw7zw7k8+ZJxhTRsdqR7moyLmWMDyPo0uAnSOvPXf1+TY8LYerUfMPGaPxYo0KCZ+dSdcliYrakuaCX1QTPe0fbS54oP+gF2c9Ak0Y2+kAHicY2BigAAuBuwAKM8IUgMAAdYAEgAAAA==) format("woff"),url(data:font/ttf;base64,AAEAAAAKAIAAAwAgT1MvMla9YzsAAAEoAAAAVmNtYXAApAFvAAABiAAAAUpnbHlmIdTfBgAAAtwAAADcaGVhZBCCF+EAAADQAAAANmhoZWEIXQQDAAAArAAAACRobXR4CAAAAAAAAYAAAAAIbG9jYQBuAAAAAALUAAAABm1heHABDgBVAAABCAAAACBuYW1l1YxlJAAAA7gAAAJtcG9zdAEQAAAAAAYoAAAAKQABAAAEAAAAAFwEAAAAAAAEAAABAAAAAAAAAAAAAAAAAAAAAgABAAAAAQAAwT0HM18PPPUACwQAAAAAANax6YAAAAAA1rHpgAAAAAAEAAPkAAAACAACAAAAAAAAAAEAAAACAEkAAgAAAAAAAgAAAAoACgAAAP8AAAAAAAAAAQQAAZAABQAIAokCzAAAAI8CiQLMAAAB6wAyAQgAAAIABQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUGZFZABAAEkASQQAAAAAXAQAAAAAAAABAAAAAAAABAAAAAQAAAAAAAADAAAAAwAAABwAAQAAAAAARAADAAEAAAAcAAQAKAAAAAYABAABAAIAAABJ//8AAAAAAEn//wAA/7gAAQAAAAAAAAAAAQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbgAAAAIAAAAABAAD5AAjAEgAACUmLwE+ATUuAScOAQczPgE3HgEXDgEHLgEnIx4BFzI2Nxc3MAEWHwEeATMyNj8BFx4BOwE1IycuAQ4BDwEnLgEPASMVMzI/ATAEAA5kcikuBOuwo+MWaRWodoSwAwOwhFiMKnMwzIVIgTXlSf0wBB4iCBcNEBoGPTQHGQ9oSFoHGh8ZBkMxDjASWbrQFRA7Zg5kcTWASLDpBAPKnHCQAgOvhIOvBAFURnONAi4p40kBwwctMwsMEg+XaA0PZ7IODwERD6dJFAURWGcPOwAAABIA3gABAAAAAAAAABUAAAABAAAAAAABAAgAFQABAAAAAAACAAcAHQABAAAAAAADAAgAJAABAAAAAAAEAAgALAABAAAAAAAFAAsANAABAAAAAAAGAAgAPwABAAAAAAAKACsARwABAAAAAAALABMAcgADAAEECQAAACoAhQADAAEECQABABAArwADAAEECQACAA4AvwADAAEECQADABAAzQADAAEECQAEABAA3QADAAEECQAFABYA7QADAAEECQAGABABAwADAAEECQAKAFYBEwADAAEECQALACYBaUdlbmVyYXRlZCBieSBHbHlwaHRlckdseXBodGVyUmVndWxhckdseXBodGVyR2x5cGh0ZXJWZXJzaW9uIDEuMEdseXBodGVyR2VuZXJhdGVkIGJ5IHN2ZzJ0dGYgZnJvbSBGb250ZWxsbyBwcm9qZWN0Lmh0dHA6Ly9mb250ZWxsby5jb20ARwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABHAGwAeQBwAGgAdABlAHIARwBsAHkAcABoAHQAZQByAFIAZQBnAHUAbABhAHIARwBsAHkAcABoAHQAZQByAEcAbAB5AHAAaAB0AGUAcgBWAGUAcgBzAGkAbwBuACAAMQAuADAARwBsAHkAcABoAHQAZQByAEcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAAcwB2AGcAMgB0AHQAZgAgAGYAcgBvAG0AIABGAG8AbgB0AGUAbABsAG8AIABwAHIAbwBqAGUAYwB0AC4AaAB0AHQAcAA6AC8ALwBmAG8AbgB0AGUAbABsAG8ALgBjAG8AbQAAAAACAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAECAAAAAAAA) format("truetype")}@font-face{font-family:ChartsIcons;font-style:normal;font-weight:400;src:url(data:font/woff2;base64,d09GMgABAAAAAAOMAAoAAAAAB0QAAANAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABlYAgkoKg2SDQgsGAAE2AiQDCAQgBYRVBykbYQZRlCxKH+DHgd3wVQRCO8BliGUDodgsi+GD3Az/EXy/H/s99wmuybTT8IwnspdIEmt0n05ITKdbiPJ/iG9pbXsghQtJI6Zd+8mbD7FcSJTqqXBk9/4E2gugjnYlbODuVSF8SD5En+dyfOv5gc1/s+l6c1ATfIEt8l5iRel83gaPo0UJZtgwdtmTe4hc3CrUprN0Dty4x8cPGbUkRcbtv74/szA0MsoBezmAAJIMJYOlxEoUbN+WCaCUCwmLVQXpRvXoy4xFKfjzARwsgRxtwD2+AWgEtNXX1TU0cq6hrra24Zi1ZfPJBUHEEjqYDMTQQykwIWwIJ/TSimQgEBgaEQIqqItRw9lN+/oYg1Xza6lWqKD81izovmKa9l827TRW0QsrAoPumBAcWwGwBO4wGKNG1xnKiA1HHHnM0saAEWZjmyd1B04IHLmp7zlyYoSJpTMN72lLHE16BrXtaWBiZEfBJ7jg1bsIhgl5+TaUJAOxnQThFjjswm4vIxvDlgia3MLBmL2MC/vUMBRr8Ai7g86y7mzDU6CJySl/rNGBuMFFAzn7cosm3P1RydYNXJ7F/pYNcVH96um5w/q2muDp0JAs37kv3CYaNn5u5RJX/Tynai4/KH6k10LWi8ViCdC0XRg0dwpqAY1Hf5ZyhWt4F2sjZ79gG8eQ1ZcqEJ1UxGINTAbBJ65vC/AYRfDxv3PXmq3aFATCJ1+1H6xKV56ASh0h8V+DkHP+h5pGH4KzzxsEb1vbiAWgupOv5SAQbDcXnMYIWf6tJXLwcYdyjdd+NbUSCLatngrzZp7A3ZRrZ+L9JPfaABLq1QNUQ7tftwvky4RSF5IaA8iUhoicmUChwRxKpXnUmzbYo0GHSFPkdZhyAxAavSBp9opMozciZ95R6PZEqdF/1Nv1n2swFhv3w7lFciqCqDpWJfWP2Gxqp5zrr66gvHC0F8P13peI3jWU+eaoeSrj/mPXOXNNvDpz138WWHBlXBUFuSxCOyEWEieFAHxPxQgoFVRbcvl2EoqP5qNtt8/UQrkMIVC81bRjUF/b80n4czyEp5JLEXO5DHIlEjmiUMlFXAaiAggV2hjG081nUkYu1QDU77jCWB0BAAA=) format("woff2"),url(data:font/woff;base64,d09GRgABAAAAAAT4AAoAAAAAB0QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAAA9AAAAD4AAABWVrVjM2NtYXAAAAE0AAAAPAAAAUoAlAF3Z2x5ZgAAAXAAAAGuAAAB5GI+BANoZWFkAAADIAAAAC4AAAA2FExZ3WhoZWEAAANQAAAAHAAAACQI6gN3aG10eAAAA2wAAAAIAAAACAgAAABsb2NhAAADdAAAAAYAAAAGAPIAAG1heHAAAAN8AAAAIAAAACABHQCubmFtZQAAA5wAAAFEAAACVT7oPWZwb3N0AAAE4AAAABUAAAApARAAAHicY2BkYWCcwMDKwMHUyXSGgYGhH0IzvmYwYuRgYGBiYGVmwAoC0lxTGBwYHBkcWUDcGBaIMCOIAACXvwecAAB4nGNgYGBmgGAZBkYGEHAB8hjBfBYGDSDNBqQZGZiALMf//8EqwPT/A1D1QMDIxkA5YCSsZDADALO5Bwd4nC2OsW/TQBjFv89OHaglFDe5C3LatImdcyWf0BEnvShpSaHgJEKVaMXE0goJpFIhdanUobBAQQpiYoKNzVtWxF/B3oGZMLExUMPnhuWe3nu/p+/A+fsVIBfnAK7CAlRAQBN6EMMOPILH8AyO4QWcwXv4AJ8BsNnDtgisvGJVLK/ptqcaN5A8ixSrh8h4+RZq1SCMVATXMF8ucQJF25uBNJuhpfwlOldaytBAefWsa6vimiaQKa+1gTSvYqRMEWSdijKQbpvWbBtRqAPThyK5HJiEK7xjjx4OtyoGOvbWMMFT0sH9yWVoO3jxZT5+gEUnFLpvXdnQImwkpo93dT2gNiGsMerEVvq61l88lZvrlZ74/4pNvtiv7a26XXJTqrvu6nSwftuu8Sn3Ct1Xx+m39Od48OMdKmSZGjwx3f0nUh9I15zIztOgYiRyYrryQEv9XLOqHm/L3XGzyg6P5PZYL3FK5dFhpM92z+mf9lBzrmPrI57PXdcjO5mPd/L3OvbCxaew5fNly1rmfis0fnPpr9xkTqvmj/68LOB3LJy8MQrpSvrr5C0C/AMcw2JeAAB4nGNgZGBgAOIUvgrzeH6brwzcLAwgcGM6VwGM/r+LgYHFDSzOwcAEogD3nAi1AAB4nGNgZGBgYQCCGBD5v4Slh4GRARUwAQA1GAJsBAAAAAQAAAAAAAAAAPIAAAABAAAAAgCiABEAAAAAAAIAAAAKAAoAAAD/AAAAAAAAeJx1kD1Ow0AQhZ/zh0gQBQgamhUFQiA5Px1p6OKaFOkdZx0ncrzWehPJBefhAJyAA3AAGq7AAWh42FOQSHi0O9+8fTuzMoAzfMJD/V1w1eyhw6rmBo5wJdykfi3cIt8Kt9GDL9xhPAh3cY9H4R7OsWYHr3XM6g7Pwh5O8CLcwClehZvU34Rb5HfhNi7xIdyh/iXcxQzfwj3ceE+BzrQNnV6oeamCtMwTp22UhNYVU73cpqEU9T7TtliZTA39QS3sXS92y5FzsYqt2aiJyZxOU6Nya9Y6cn7iXD7u92PR/chsEEAj47II4ZgXUJij5B4gZc6RVLpFRAqZHQpMqSyxpSM8OPnLs+pegRUMZygM+fMHe47/pxfYccKIqkPMOqbHYEOaVN1+3SnDUMmrszWViLpfvdhRHaPPiA/8Pl3s9APzDmqGeJxjYGKAAC4G7AAozwhSAwAB1gASAAAA) format("woff"),url(data:font/ttf;base64,AAEAAAAKAIAAAwAgT1MvMla1YzMAAAEoAAAAVmNtYXAAlAF3AAABiAAAAUpnbHlmYj4EAwAAAtwAAAHkaGVhZBRMWd0AAADQAAAANmhoZWEI6gN3AAAArAAAACRobXR4CAAAAAAAAYAAAAAIbG9jYQDyAAAAAALUAAAABm1heHABHQCuAAABCAAAACBuYW1lPug9ZgAABMAAAAJVcG9zdAEQAAAAAAcYAAAAKQABAAAEAAAAAFwEAAAA/3QEjAABAAAAAAAAAAAAAAAAAAAAAgABAAAAAQAAZA6GO18PPPUACwQAAAAAANiXCnAAAAAA2JcKcP+6AAAERgQAAAAACAACAAAAAAAAAAEAAAACAKIAEQAAAAAAAgAAAAoACgAAAP8AAAAAAAAAAQQAAZAABQAIAokCzAAAAI8CiQLMAAAB6wAyAQgAAAIABQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUGZFZABAAEEAQQQAAAAAXAQAAAAAAAABAAAAAAAABAAAAAQAAAAAAAADAAAAAwAAABwAAQAAAAAARAADAAEAAAAcAAQAKAAAAAYABAABAAIAAABB//8AAAAAAEH//wAA/8AAAQAAAAAAAAAAAQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8gAAABH/ugAABEYEAAAJABIAGwAmADIAOwBGAFEAWgBiAGoAdQB9AIUAjQCTAKEAAAEyOwE1JicGBzAVHgEXNjc1IzAlLgEnBgcVMzAVIisBFRYXPgE3MCUyOwE+ATcmJw4BBxcUFhc2NyY1IyUuAScGBx4BFzMwFSIrARQHFz4BNzAFFB0BPgE3JzAjIgceARc1MBM2Ny4BJxUwIzQ9AQ4BBx4BMzADJicHHgEXMDM+ATcnBgcwAwYHFz4BNzAzHgEXNycDJAATPgE3BAADDgEHMAFCC0lUSEMbAgERC0NIqAF8ARELR0uvC0lUSEMLEQH9uApGUAETESsmNz8GCD03JislqAMkAUQ3IicLEQGoC0lUJUk4Rgb+hCE/HHwsQDwbOyYsQDwbOyYsJkAWHD8hXygaOhs7JuohPxw6GijqRzxBCyEW6hYjEDqDdf7Q/uuKR+mLATABFYpH6YsCFqgDGmBlLDdpLBoDryw4ZicbAqgsrwMaLGk3LDdtNxUeN4pNLFKKMh4Va3AsTYo3HRY3bTcscGszN4VS2wpGUAtINxYWN0YGmQHbBRg3SQuoCkZRB0U4CxL9mis0JBYfBgYfFiQ0KwL4FiwkIDEVETQhJEn8fhAB3wEQeIYCEP4g/vF4hwEAAAAAABIA3gABAAAAAAAAABUAAAABAAAAAAABAAYAFQABAAAAAAACAAcAGwABAAAAAAADAAYAIgABAAAAAAAEAAYAKAABAAAAAAAFAAsALgABAAAAAAAGAAYAOQABAAAAAAAKACsAPwABAAAAAAALABMAagADAAEECQAAACoAfQADAAEECQABAAwApwADAAEECQACAA4AswADAAEECQADAAwAwQADAAEECQAEAAwAzQADAAEECQAFABYA2QADAAEECQAGAAwA7wADAAEECQAKAFYA+wADAAEECQALACYBUUdlbmVyYXRlZCBieSBHbHlwaHRlcmNoYXJ0c1JlZ3VsYXJjaGFydHNjaGFydHNWZXJzaW9uIDEuMGNoYXJ0c0dlbmVyYXRlZCBieSBzdmcydHRmIGZyb20gRm9udGVsbG8gcHJvamVjdC5odHRwOi8vZm9udGVsbG8uY29tAEcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAARwBsAHkAcABoAHQAZQByAGMAaABhAHIAdABzAFIAZQBnAHUAbABhAHIAYwBoAGEAcgB0AHMAYwBoAGEAcgB0AHMAVgBlAHIAcwBpAG8AbgAgADEALgAwAGMAaABhAHIAdABzAEcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAAcwB2AGcAMgB0AHQAZgAgAGYAcgBvAG0AIABGAG8AbgB0AGUAbABsAG8AIABwAHIAbwBqAGUAYwB0AC4AaAB0AHQAcAA6AC8ALwBmAG8AbgB0AGUAbABsAG8ALgBjAG8AbQAAAAACAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAECAAAAAAAA) format("truetype")}@font-face{font-display:swap;font-family:Euclid Circular A;font-style:normal;font-weight:700;src:url(../../../manual/static/EuclidCircularA-Semibold-WebXL-fa7f7a6de763f3fc0ef6d7bce19a5b97.woff) format("woff")}div.document{margin-left:25px}div.section>h1+dl.dbcommand>dt,div.section>h1+dl.expression>dt,div.section>h1+dl.group>dt,div.section>h1+dl.method>dt,div.section>h1+dl.operator>dt,div.section>h1+dl.pipeline>dt,div.section>h1+dl.projection>dt,dl.binary{display:none}.highlight ::-webkit-scrollbar{-webkit-appearance:none;height:5px;width:7px}.highlight ::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.5);border-radius:0;height:0}body{color:#21313c;font-family:Euclid Circular A,Helvetica Neue,Helvetica,Arial,sans-serif;margin:0;padding:0}hr{border:1px solid #b1b4b6}div.body h1+dl,div.body h1+p,div.body h2+dl,div.body h2+p,div.body h3+dl,div.body h3+p,div.body h4+dl,div.body h4+p{padding:0;text-indent:0}a code{font-weight:400}dl.method dt{margin-bottom:24px}dl.method>dt big{font-size:16px;font-weight:300}dl.method>dt em{font-style:normal;font-weight:700}.content{display:flex;font-size:16px;line-height:24px;margin:45px auto 0}@media (max-width:1340px){.document{margin-left:25px}}@media (min-width:1121px) and (max-width:1340px){.document{margin-left:25px}}@media (max-width:1024px){.document{margin-left:25px}}#tooltip-1{z-index:3}

/*!
 * Font Awesome Free 5.3.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */.fa-accessible-icon:before{content:"\f368"}.fa-accusoft:before{content:"\f369"}.fa-ad:before{content:"\f641"}.fa-address-book:before,.fa4-address-book:before{content:"\f2b9"}.fa-address-card:before,.fa4-address-card:before,.fa4-vcard:before{content:"\f2bb"}.fa-adjust:before,.fa4-adjust:before{content:"\f042"}.fa-adn:before,.fa4-adn:before{content:"\f170"}.fa-adversal:before{content:"\f36a"}.fa-affiliatetheme:before{content:"\f36b"}.fa-air-freshener:before{content:"\f5d0"}.fa-algolia:before{content:"\f36c"}.fa-align-center:before,.fa4-align-center:before{content:"\f037"}.fa-align-justify:before,.fa4-align-justify:before{content:"\f039"}.fa-align-left:before,.fa4-align-left:before{content:"\f036"}.fa-align-right:before,.fa4-align-right:before{content:"\f038"}.fa-alipay:before{content:"\f642"}.fa-allergies:before{content:"\f461"}.fa-amazon:before,.fa4-amazon:before{content:"\f270"}.fa-amazon-pay:before{content:"\f42c"}.fa-ambulance:before,.fa4-ambulance:before{content:"\f0f9"}.fa-american-sign-language-interpreting:before,.fa4-american-sign-language-interpreting:before,.fa4-asl-interpreting:before{content:"\f2a3"}.fa-amilia:before{content:"\f36d"}.fa-anchor:before,.fa4-anchor:before{content:"\f13d"}.fa-android:before,.fa4-android:before{content:"\f17b"}.fa-angellist:before,.fa4-angellist:before{content:"\f209"}.fa-angle-double-down:before,.fa4-angle-double-down:before{content:"\f103"}.fa-angle-double-left:before,.fa4-angle-double-left:before{content:"\f100"}.fa-angle-double-right:before,.fa4-angle-double-right:before{content:"\f101"}.fa-angle-double-up:before,.fa4-angle-double-up:before{content:"\f102"}.fa-angle-down:before,.fa4-angle-down:before{content:"\f107"}.fa-angle-left:before,.fa4-angle-left:before{content:"\f104"}.fa-angle-right:before,.fa4-angle-right:before{content:"\f105"}.fa-angle-up:before,.fa4-angle-up:before{content:"\f106"}.fa-angry:before{content:"\f556"}.fa-angrycreative:before{content:"\f36e"}.fa-angular:before{content:"\f420"}.fa-ankh:before{content:"\f644"}.fa-app-store:before{content:"\f36f"}.fa-app-store-ios:before{content:"\f370"}.fa-apper:before{content:"\f371"}.fa-apple:before,.fa4-apple:before{content:"\f179"}.fa-apple-alt:before{content:"\f5d1"}.fa-apple-pay:before{content:"\f415"}.fa-archive:before,.fa4-archive:before{content:"\f187"}.fa-archway:before{content:"\f557"}.fa-arrow-alt-circle-down:before{content:"\f358"}.fa-arrow-alt-circle-left:before{content:"\f359"}.fa-arrow-alt-circle-right:before{content:"\f35a"}.fa-arrow-alt-circle-up:before{content:"\f35b"}.fa-arrow-circle-down:before,.fa4-arrow-circle-down:before{content:"\f0ab"}.fa-arrow-circle-left:before,.fa4-arrow-circle-left:before{content:"\f0a8"}.fa-arrow-circle-right:before,.fa4-arrow-circle-right:before{content:"\f0a9"}.fa-arrow-circle-up:before,.fa4-arrow-circle-up:before{content:"\f0aa"}.fa-arrow-down:before,.fa4-arrow-down:before{content:"\f063"}.fa-arrow-left:before,.fa4-arrow-left:before{content:"\f060"}.fa-arrow-right:before,.fa4-arrow-right:before{content:"\f061"}.fa-arrow-up:before,.fa4-arrow-up:before{content:"\f062"}.fa-arrows-alt:before,.fa4-arrows-alt:before{content:"\f0b2"}.fa-arrows-alt-h:before{content:"\f337"}.fa-arrows-alt-v:before{content:"\f338"}.fa-assistive-listening-systems:before,.fa4-assistive-listening-systems:before{content:"\f2a2"}.fa-asterisk:before,.fa4-asterisk:before{content:"\f069"}.fa-asymmetrik:before{content:"\f372"}.fa-at:before,.fa4-at:before{content:"\f1fa"}.fa-atlas:before{content:"\f558"}.fa-atom:before{content:"\f5d2"}.fa-audible:before{content:"\f373"}.fa-audio-description:before,.fa4-audio-description:before{content:"\f29e"}.fa-autoprefixer:before{content:"\f41c"}.fa-avianex:before{content:"\f374"}.fa-aviato:before{content:"\f421"}.fa-award:before{content:"\f559"}.fa-aws:before{content:"\f375"}.fa-backspace:before{content:"\f55a"}.fa-backward:before,.fa4-backward:before{content:"\f04a"}.fa-balance-scale:before,.fa4-balance-scale:before{content:"\f24e"}.fa-ban:before,.fa4-ban:before{content:"\f05e"}.fa-band-aid:before{content:"\f462"}.fa-bandcamp:before,.fa4-bandcamp:before{content:"\f2d5"}.fa-barcode:before,.fa4-barcode:before{content:"\f02a"}.fa-bars:before,.fa4-bars:before,.fa4-navicon:before,.fa4-reorder:before{content:"\f0c9"}.fa-baseball-ball:before{content:"\f433"}.fa-basketball-ball:before{content:"\f434"}.fa-bath:before,.fa4-bath:before,.fa4-bathtub:before,.fa4-s15:before{content:"\f2cd"}.fa-battery-empty:before,.fa4-battery-0:before,.fa4-battery-empty:before{content:"\f244"}.fa-battery-full:before,.fa4-battery-4:before,.fa4-battery-full:before,.fa4-battery:before{content:"\f240"}.fa-battery-half:before,.fa4-battery-2:before,.fa4-battery-half:before{content:"\f242"}.fa-battery-quarter:before,.fa4-battery-1:before,.fa4-battery-quarter:before{content:"\f243"}.fa-battery-three-quarters:before,.fa4-battery-3:before,.fa4-battery-three-quarters:before{content:"\f241"}.fa-bed:before,.fa4-bed:before,.fa4-hotel:before{content:"\f236"}.fa-beer:before,.fa4-beer:before{content:"\f0fc"}.fa-behance:before,.fa4-behance:before{content:"\f1b4"}.fa-behance-square:before,.fa4-behance-square:before{content:"\f1b5"}.fa-bell:before,.fa4-bell:before{content:"\f0f3"}.fa-bell-slash:before,.fa4-bell-slash:before{content:"\f1f6"}.fa-bezier-curve:before{content:"\f55b"}.fa-bible:before{content:"\f647"}.fa-bicycle:before,.fa4-bicycle:before{content:"\f206"}.fa-bimobject:before{content:"\f378"}.fa-binoculars:before,.fa4-binoculars:before{content:"\f1e5"}.fa-birthday-cake:before,.fa4-birthday-cake:before{content:"\f1fd"}.fa-bitbucket:before,.fa4-bitbucket:before{content:"\f171"}.fa-bitcoin:before{content:"\f379"}.fa-bity:before{content:"\f37a"}.fa-black-tie:before,.fa4-black-tie:before{content:"\f27e"}.fa-blackberry:before{content:"\f37b"}.fa-blender:before{content:"\f517"}.fa-blind:before,.fa4-blind:before{content:"\f29d"}.fa-blogger:before{content:"\f37c"}.fa-blogger-b:before{content:"\f37d"}.fa-bluetooth:before,.fa4-bluetooth:before{content:"\f293"}.fa-bluetooth-b:before,.fa4-bluetooth-b:before{content:"\f294"}.fa-bold:before,.fa4-bold:before{content:"\f032"}.fa-bolt:before,.fa4-bolt:before,.fa4-flash:before{content:"\f0e7"}.fa-bomb:before,.fa4-bomb:before{content:"\f1e2"}.fa-bone:before{content:"\f5d7"}.fa-bong:before{content:"\f55c"}.fa-book:before,.fa4-book:before{content:"\f02d"}.fa-book-open:before{content:"\f518"}.fa-book-reader:before{content:"\f5da"}.fa-bookmark:before,.fa4-bookmark:before{content:"\f02e"}.fa-bowling-ball:before{content:"\f436"}.fa-box:before{content:"\f466"}.fa-box-open:before{content:"\f49e"}.fa-boxes:before{content:"\f468"}.fa-braille:before,.fa4-braille:before{content:"\f2a1"}.fa-brain:before{content:"\f5dc"}.fa-briefcase:before,.fa4-briefcase:before{content:"\f0b1"}.fa-briefcase-medical:before{content:"\f469"}.fa-broadcast-tower:before{content:"\f519"}.fa-broom:before{content:"\f51a"}.fa-brush:before{content:"\f55d"}.fa-btc:before,.fa4-bitcoin:before,.fa4-btc:before{content:"\f15a"}.fa-bug:before,.fa4-bug:before{content:"\f188"}.fa-building:before,.fa4-building:before{content:"\f1ad"}.fa-bullhorn:before,.fa4-bullhorn:before{content:"\f0a1"}.fa-bullseye:before,.fa4-bullseye:before{content:"\f140"}.fa-burn:before{content:"\f46a"}.fa-buromobelexperte:before{content:"\f37f"}.fa-bus:before,.fa4-bus:before{content:"\f207"}.fa-bus-alt:before{content:"\f55e"}.fa-business-time:before{content:"\f64a"}.fa-buysellads:before,.fa4-buysellads:before{content:"\f20d"}.fa-calculator:before,.fa4-calculator:before{content:"\f1ec"}.fa-calendar:before,.fa4-calendar-o:before{content:"\f133"}.fa-calendar-alt:before,.fa4-calendar:before{content:"\f073"}.fa-calendar-check:before,.fa4-calendar-check-o:before{content:"\f274"}.fa-calendar-minus:before,.fa4-calendar-minus-o:before{content:"\f272"}.fa-calendar-plus:before,.fa4-calendar-plus-o:before{content:"\f271"}.fa-calendar-times:before,.fa4-calendar-times-o:before{content:"\f273"}.fa-camera:before,.fa4-camera:before{content:"\f030"}.fa-camera-retro:before,.fa4-camera-retro:before{content:"\f083"}.fa-cannabis:before{content:"\f55f"}.fa-capsules:before{content:"\f46b"}.fa-car:before,.fa4-automobile:before,.fa4-car:before{content:"\f1b9"}.fa-car-alt:before{content:"\f5de"}.fa-car-battery:before{content:"\f5df"}.fa-car-crash:before{content:"\f5e1"}.fa-car-side:before{content:"\f5e4"}.fa-caret-down:before,.fa4-caret-down:before{content:"\f0d7"}.fa-caret-left:before,.fa4-caret-left:before{content:"\f0d9"}.fa-caret-right:before,.fa4-caret-right:before{content:"\f0da"}.fa-caret-square-down:before,.fa4-caret-square-o-down:before,.fa4-toggle-down:before{content:"\f150"}.fa-caret-square-left:before,.fa4-caret-square-o-left:before,.fa4-toggle-left:before{content:"\f191"}.fa-caret-square-right:before,.fa4-caret-square-o-right:before,.fa4-toggle-right:before{content:"\f152"}.fa-caret-square-up:before,.fa4-caret-square-o-up:before,.fa4-toggle-up:before{content:"\f151"}.fa-caret-up:before,.fa4-caret-up:before{content:"\f0d8"}.fa-cart-arrow-down:before,.fa4-cart-arrow-down:before{content:"\f218"}.fa-cart-plus:before,.fa4-cart-plus:before{content:"\f217"}.fa-cc-amazon-pay:before{content:"\f42d"}.fa-cc-amex:before,.fa4-cc-amex:before{content:"\f1f3"}.fa-cc-apple-pay:before{content:"\f416"}.fa-cc-diners-club:before,.fa4-cc-diners-club:before{content:"\f24c"}.fa-cc-discover:before,.fa4-cc-discover:before{content:"\f1f2"}.fa-cc-jcb:before,.fa4-cc-jcb:before{content:"\f24b"}.fa-cc-mastercard:before,.fa4-cc-mastercard:before{content:"\f1f1"}.fa-cc-paypal:before,.fa4-cc-paypal:before{content:"\f1f4"}.fa-cc-stripe:before,.fa4-cc-stripe:before{content:"\f1f5"}.fa-cc-visa:before,.fa4-cc-visa:before{content:"\f1f0"}.fa-centercode:before{content:"\f380"}.fa-certificate:before,.fa4-certificate:before{content:"\f0a3"}.fa-chalkboard:before{content:"\f51b"}.fa-chalkboard-teacher:before{content:"\f51c"}.fa-charging-station:before{content:"\f5e7"}.fa-chart-area:before,.fa4-area-chart:before{content:"\f1fe"}.fa-chart-bar:before,.fa4-bar-chart-o:before,.fa4-bar-chart:before{content:"\f080"}.fa-chart-line:before,.fa4-line-chart:before{content:"\f201"}.fa-chart-pie:before,.fa4-pie-chart:before{content:"\f200"}.fa-check:before,.fa4-check:before{content:"\f00c"}.fa-check-circle:before,.fa4-check-circle:before{content:"\f058"}.fa-check-double:before{content:"\f560"}.fa-check-square:before,.fa4-check-square:before{content:"\f14a"}.fa-chess:before{content:"\f439"}.fa-chess-bishop:before{content:"\f43a"}.fa-chess-board:before{content:"\f43c"}.fa-chess-king:before{content:"\f43f"}.fa-chess-knight:before{content:"\f441"}.fa-chess-pawn:before{content:"\f443"}.fa-chess-queen:before{content:"\f445"}.fa-chess-rook:before{content:"\f447"}.fa-chevron-circle-down:before,.fa4-chevron-circle-down:before{content:"\f13a"}.fa-chevron-circle-left:before,.fa4-chevron-circle-left:before{content:"\f137"}.fa-chevron-circle-right:before,.fa4-chevron-circle-right:before{content:"\f138"}.fa-chevron-circle-up:before,.fa4-chevron-circle-up:before{content:"\f139"}.fa-chevron-down:before,.fa4-chevron-down:before{content:"\f078"}.fa-chevron-left:before,.fa4-chevron-left:before{content:"\f053"}.fa-chevron-right:before,.fa4-chevron-right:before{content:"\f054"}.fa-chevron-up:before,.fa4-chevron-up:before{content:"\f077"}.fa-child:before,.fa4-child:before{content:"\f1ae"}.fa-chrome:before,.fa4-chrome:before{content:"\f268"}.fa-church:before{content:"\f51d"}.fa-circle:before,.fa4-circle:before{content:"\f111"}.fa-circle-notch:before,.fa4-circle-o-notch:before{content:"\f1ce"}.fa-city:before{content:"\f64f"}.fa-clipboard:before{content:"\f328"}.fa-clipboard-check:before{content:"\f46c"}.fa-clipboard-list:before{content:"\f46d"}.fa-clock:before,.fa4-clock-o:before{content:"\f017"}.fa-clone:before,.fa4-clone:before{content:"\f24d"}.fa-closed-captioning:before,.fa4-cc:before{content:"\f20a"}.fa-cloud:before,.fa4-cloud:before{content:"\f0c2"}.fa-cloud-download-alt:before{content:"\f381"}.fa-cloud-upload-alt:before{content:"\f382"}.fa-cloudscale:before{content:"\f383"}.fa-cloudsmith:before{content:"\f384"}.fa-cloudversify:before{content:"\f385"}.fa-cocktail:before{content:"\f561"}.fa-code:before,.fa4-code:before{content:"\f121"}.fa-code-branch:before,.fa4-code-fork:before{content:"\f126"}.fa-codepen:before,.fa4-codepen:before{content:"\f1cb"}.fa-codiepie:before,.fa4-codiepie:before{content:"\f284"}.fa-coffee:before,.fa4-coffee:before{content:"\f0f4"}.fa-cog:before,.fa4-cog:before,.fa4-gear:before{content:"\f013"}.fa-cogs:before,.fa4-cogs:before,.fa4-gears:before{content:"\f085"}.fa-coins:before{content:"\f51e"}.fa-columns:before,.fa4-columns:before{content:"\f0db"}.fa-comment:before,.fa4-comment:before{content:"\f075"}.fa-comment-alt:before,.fa4-commenting:before{content:"\f27a"}.fa-comment-dollar:before{content:"\f651"}.fa-comment-dots:before{content:"\f4ad"}.fa-comment-slash:before{content:"\f4b3"}.fa-comments:before,.fa4-comments:before{content:"\f086"}.fa-comments-dollar:before{content:"\f653"}.fa-compact-disc:before{content:"\f51f"}.fa-compass:before,.fa4-compass:before{content:"\f14e"}.fa-compress:before,.fa4-compress:before{content:"\f066"}.fa-concierge-bell:before{content:"\f562"}.fa-connectdevelop:before,.fa4-connectdevelop:before{content:"\f20e"}.fa-contao:before,.fa4-contao:before{content:"\f26d"}.fa-cookie:before{content:"\f563"}.fa-cookie-bite:before{content:"\f564"}.fa-copy:before,.fa4-copy:before,.fa4-files-o:before{content:"\f0c5"}.fa-copyright:before,.fa4-copyright:before{content:"\f1f9"}.fa-couch:before{content:"\f4b8"}.fa-cpanel:before{content:"\f388"}.fa-creative-commons:before,.fa4-creative-commons:before{content:"\f25e"}.fa-creative-commons-by:before{content:"\f4e7"}.fa-creative-commons-nc:before{content:"\f4e8"}.fa-creative-commons-nc-eu:before{content:"\f4e9"}.fa-creative-commons-nc-jp:before{content:"\f4ea"}.fa-creative-commons-nd:before{content:"\f4eb"}.fa-creative-commons-pd:before{content:"\f4ec"}.fa-creative-commons-pd-alt:before{content:"\f4ed"}.fa-creative-commons-remix:before{content:"\f4ee"}.fa-creative-commons-sa:before{content:"\f4ef"}.fa-creative-commons-sampling:before{content:"\f4f0"}.fa-creative-commons-sampling-plus:before{content:"\f4f1"}.fa-creative-commons-share:before{content:"\f4f2"}.fa-credit-card:before,.fa4-credit-card:before{content:"\f09d"}.fa-crop:before,.fa4-crop:before{content:"\f125"}.fa-crop-alt:before{content:"\f565"}.fa-cross:before{content:"\f654"}.fa-crosshairs:before,.fa4-crosshairs:before{content:"\f05b"}.fa-crow:before{content:"\f520"}.fa-crown:before{content:"\f521"}.fa-css3:before,.fa4-css3:before{content:"\f13c"}.fa-css3-alt:before{content:"\f38b"}.fa-cube:before,.fa4-cube:before{content:"\f1b2"}.fa-cubes:before,.fa4-cubes:before{content:"\f1b3"}.fa-cut:before,.fa4-cut:before,.fa4-scissors:before{content:"\f0c4"}.fa-cuttlefish:before{content:"\f38c"}.fa-d-and-d:before{content:"\f38d"}.fa-dashcube:before,.fa4-dashcube:before{content:"\f210"}.fa-database:before,.fa4-database:before{content:"\f1c0"}.fa-deaf:before,.fa4-deaf:before,.fa4-deafness:before,.fa4-hard-of-hearing:before{content:"\f2a4"}.fa-delicious:before,.fa4-delicious:before{content:"\f1a5"}.fa-deploydog:before{content:"\f38e"}.fa-deskpro:before{content:"\f38f"}.fa-desktop:before,.fa4-desktop:before{content:"\f108"}.fa-deviantart:before,.fa4-deviantart:before{content:"\f1bd"}.fa-dharmachakra:before{content:"\f655"}.fa-diagnoses:before{content:"\f470"}.fa-dice:before{content:"\f522"}.fa-dice-five:before{content:"\f523"}.fa-dice-four:before{content:"\f524"}.fa-dice-one:before{content:"\f525"}.fa-dice-six:before{content:"\f526"}.fa-dice-three:before{content:"\f527"}.fa-dice-two:before{content:"\f528"}.fa-digg:before,.fa4-digg:before{content:"\f1a6"}.fa-digital-ocean:before{content:"\f391"}.fa-digital-tachograph:before{content:"\f566"}.fa-directions:before{content:"\f5eb"}.fa-discord:before{content:"\f392"}.fa-discourse:before{content:"\f393"}.fa-divide:before{content:"\f529"}.fa-dizzy:before{content:"\f567"}.fa-dna:before{content:"\f471"}.fa-dochub:before{content:"\f394"}.fa-docker:before{content:"\f395"}.fa-dollar-sign:before,.fa4-dollar:before,.fa4-usd:before{content:"\f155"}.fa-dolly:before{content:"\f472"}.fa-dolly-flatbed:before{content:"\f474"}.fa-donate:before{content:"\f4b9"}.fa-door-closed:before{content:"\f52a"}.fa-door-open:before{content:"\f52b"}.fa-dot-circle:before,.fa4-dot-circle-o:before{content:"\f192"}.fa-dove:before{content:"\f4ba"}.fa-download:before,.fa4-download:before{content:"\f019"}.fa-draft2digital:before{content:"\f396"}.fa-drafting-compass:before{content:"\f568"}.fa-draw-polygon:before{content:"\f5ee"}.fa-dribbble:before,.fa4-dribbble:before{content:"\f17d"}.fa-dribbble-square:before{content:"\f397"}.fa-dropbox:before,.fa4-dropbox:before{content:"\f16b"}.fa-drum:before{content:"\f569"}.fa-drum-steelpan:before{content:"\f56a"}.fa-drupal:before,.fa4-drupal:before{content:"\f1a9"}.fa-dumbbell:before{content:"\f44b"}.fa-dyalog:before{content:"\f399"}.fa-earlybirds:before{content:"\f39a"}.fa-ebay:before{content:"\f4f4"}.fa-edge:before,.fa4-edge:before{content:"\f282"}.fa-edit:before,.fa4-edit:before,.fa4-pencil-square-o:before{content:"\f044"}.fa-eject:before,.fa4-eject:before{content:"\f052"}.fa-elementor:before{content:"\f430"}.fa-ellipsis-h:before,.fa4-ellipsis-h:before{content:"\f141"}.fa-ellipsis-v:before,.fa4-ellipsis-v:before{content:"\f142"}.fa-ello:before{content:"\f5f1"}.fa-ember:before{content:"\f423"}.fa-empire:before,.fa4-empire:before,.fa4-ge:before{content:"\f1d1"}.fa-envelope:before,.fa4-envelope:before{content:"\f0e0"}.fa-envelope-open:before,.fa4-envelope-open:before{content:"\f2b6"}.fa-envelope-open-text:before{content:"\f658"}.fa-envelope-square:before,.fa4-envelope-square:before{content:"\f199"}.fa-envira:before,.fa4-envira:before{content:"\f299"}.fa-equals:before{content:"\f52c"}.fa-eraser:before,.fa4-eraser:before{content:"\f12d"}.fa-erlang:before{content:"\f39d"}.fa-ethereum:before{content:"\f42e"}.fa-etsy:before,.fa4-etsy:before{content:"\f2d7"}.fa-euro-sign:before,.fa4-eur:before,.fa4-euro:before{content:"\f153"}.fa-exchange-alt:before{content:"\f362"}.fa-exclamation:before,.fa4-exclamation:before{content:"\f12a"}.fa-exclamation-circle:before,.fa4-exclamation-circle:before{content:"\f06a"}.fa-exclamation-triangle:before,.fa4-exclamation-triangle:before,.fa4-warning:before{content:"\f071"}.fa-expand:before,.fa4-expand:before{content:"\f065"}.fa-expand-arrows-alt:before{content:"\f31e"}.fa-expeditedssl:before,.fa4-expeditedssl:before{content:"\f23e"}.fa-external-link-alt:before{content:"\f35d"}.fa-external-link-square-alt:before{content:"\f360"}.fa-eye:before,.fa4-eye:before{content:"\f06e"}.fa-eye-dropper:before,.fa4-eyedropper:before{content:"\f1fb"}.fa-eye-slash:before,.fa4-eye-slash:before{content:"\f070"}.fa-facebook:before,.fa4-facebook-f:before,.fa4-facebook:before{content:"\f09a"}.fa-facebook-f:before{content:"\f39e"}.fa-facebook-messenger:before{content:"\f39f"}.fa-facebook-square:before,.fa4-facebook-square:before{content:"\f082"}.fa-fast-backward:before,.fa4-fast-backward:before{content:"\f049"}.fa-fast-forward:before,.fa4-fast-forward:before{content:"\f050"}.fa-fax:before,.fa4-fax:before{content:"\f1ac"}.fa-feather:before{content:"\f52d"}.fa-feather-alt:before{content:"\f56b"}.fa-female:before,.fa4-female:before{content:"\f182"}.fa-fighter-jet:before,.fa4-fighter-jet:before{content:"\f0fb"}.fa-file:before,.fa4-file:before{content:"\f15b"}.fa-file-alt:before,.fa4-file-text:before{content:"\f15c"}.fa-file-archive:before,.fa4-file-archive-o:before,.fa4-file-zip-o:before{content:"\f1c6"}.fa-file-audio:before,.fa4-file-audio-o:before,.fa4-file-sound-o:before{content:"\f1c7"}.fa-file-code:before,.fa4-file-code-o:before{content:"\f1c9"}.fa-file-contract:before{content:"\f56c"}.fa-file-download:before{content:"\f56d"}.fa-file-excel:before,.fa4-file-excel-o:before{content:"\f1c3"}.fa-file-export:before{content:"\f56e"}.fa-file-image:before,.fa4-file-image-o:before,.fa4-file-photo-o:before,.fa4-file-picture-o:before{content:"\f1c5"}.fa-file-import:before{content:"\f56f"}.fa-file-invoice:before{content:"\f570"}.fa-file-invoice-dollar:before{content:"\f571"}.fa-file-medical:before{content:"\f477"}.fa-file-medical-alt:before{content:"\f478"}.fa-file-pdf:before,.fa4-file-pdf-o:before{content:"\f1c1"}.fa-file-powerpoint:before,.fa4-file-powerpoint-o:before{content:"\f1c4"}.fa-file-prescription:before{content:"\f572"}.fa-file-signature:before{content:"\f573"}.fa-file-upload:before{content:"\f574"}.fa-file-video:before,.fa4-file-movie-o:before,.fa4-file-video-o:before{content:"\f1c8"}.fa-file-word:before,.fa4-file-word-o:before{content:"\f1c2"}.fa-fill:before{content:"\f575"}.fa-fill-drip:before{content:"\f576"}.fa-film:before,.fa4-film:before{content:"\f008"}.fa-filter:before,.fa4-filter:before{content:"\f0b0"}.fa-fingerprint:before{content:"\f577"}.fa-fire:before,.fa4-fire:before{content:"\f06d"}.fa-fire-extinguisher:before,.fa4-fire-extinguisher:before{content:"\f134"}.fa-firefox:before,.fa4-firefox:before{content:"\f269"}.fa-first-aid:before{content:"\f479"}.fa-first-order:before,.fa4-first-order:before{content:"\f2b0"}.fa-first-order-alt:before{content:"\f50a"}.fa-firstdraft:before{content:"\f3a1"}.fa-fish:before{content:"\f578"}.fa-flag:before,.fa4-flag:before{content:"\f024"}.fa-flag-checkered:before,.fa4-flag-checkered:before{content:"\f11e"}.fa-flask:before,.fa4-flask:before{content:"\f0c3"}.fa-flickr:before,.fa4-flickr:before{content:"\f16e"}.fa-flipboard:before{content:"\f44d"}.fa-flushed:before{content:"\f579"}.fa-fly:before{content:"\f417"}.fa-folder:before,.fa4-folder:before{content:"\f07b"}.fa-folder-minus:before{content:"\f65d"}.fa-folder-open:before,.fa4-folder-open:before{content:"\f07c"}.fa-folder-plus:before{content:"\f65e"}.fa-font:before,.fa4-font:before{content:"\f031"}.fa-font-awesome:before,.fa4-fa:before,.fa4-font-awesome:before{content:"\f2b4"}.fa-font-awesome-alt:before{content:"\f35c"}.fa-font-awesome-flag:before{content:"\f425"}.fa-font-awesome-logo-full:before{content:"\f4e6"}.fa-fonticons:before,.fa4-fonticons:before{content:"\f280"}.fa-fonticons-fi:before{content:"\f3a2"}.fa-football-ball:before{content:"\f44e"}.fa-fort-awesome:before,.fa4-fort-awesome:before{content:"\f286"}.fa-fort-awesome-alt:before{content:"\f3a3"}.fa-forumbee:before,.fa4-forumbee:before{content:"\f211"}.fa-forward:before,.fa4-forward:before{content:"\f04e"}.fa-foursquare:before,.fa4-foursquare:before{content:"\f180"}.fa-free-code-camp:before,.fa4-free-code-camp:before{content:"\f2c5"}.fa-freebsd:before{content:"\f3a4"}.fa-frog:before{content:"\f52e"}.fa-frown:before,.fa4-frown-o:before{content:"\f119"}.fa-frown-open:before{content:"\f57a"}.fa-fulcrum:before{content:"\f50b"}.fa-funnel-dollar:before{content:"\f662"}.fa-futbol:before,.fa4-futbol-o:before,.fa4-soccer-ball-o:before{content:"\f1e3"}.fa-galactic-republic:before{content:"\f50c"}.fa-galactic-senate:before{content:"\f50d"}.fa-gamepad:before,.fa4-gamepad:before{content:"\f11b"}.fa-gas-pump:before{content:"\f52f"}.fa-gavel:before,.fa4-gavel:before,.fa4-legal:before{content:"\f0e3"}.fa-gem:before{content:"\f3a5"}.fa-genderless:before,.fa4-genderless:before{content:"\f22d"}.fa-get-pocket:before,.fa4-get-pocket:before{content:"\f265"}.fa-gg:before,.fa4-gg:before{content:"\f260"}.fa-gg-circle:before,.fa4-gg-circle:before{content:"\f261"}.fa-gift:before,.fa4-gift:before{content:"\f06b"}.fa-git:before,.fa4-git:before{content:"\f1d3"}.fa-git-square:before,.fa4-git-square:before{content:"\f1d2"}.fa-github:before,.fa4-github:before{content:"\f09b"}.fa-github-alt:before,.fa4-github-alt:before{content:"\f113"}.fa-github-square:before,.fa4-github-square:before{content:"\f092"}.fa-gitkraken:before{content:"\f3a6"}.fa-gitlab:before,.fa4-gitlab:before{content:"\f296"}.fa-gitter:before{content:"\f426"}.fa-glass-martini:before,.fa4-glass:before{content:"\f000"}.fa-glass-martini-alt:before{content:"\f57b"}.fa-glasses:before{content:"\f530"}.fa-glide:before,.fa4-glide:before{content:"\f2a5"}.fa-glide-g:before,.fa4-glide-g:before{content:"\f2a6"}.fa-globe:before,.fa4-globe:before{content:"\f0ac"}.fa-globe-africa:before{content:"\f57c"}.fa-globe-americas:before{content:"\f57d"}.fa-globe-asia:before{content:"\f57e"}.fa-gofore:before{content:"\f3a7"}.fa-golf-ball:before{content:"\f450"}.fa-goodreads:before{content:"\f3a8"}.fa-goodreads-g:before{content:"\f3a9"}.fa-google:before,.fa4-google:before{content:"\f1a0"}.fa-google-drive:before{content:"\f3aa"}.fa-google-play:before{content:"\f3ab"}.fa-google-plus:before,.fa4-google-plus-circle:before,.fa4-google-plus-official:before{content:"\f2b3"}.fa-google-plus-g:before,.fa4-google-plus:before{content:"\f0d5"}.fa-google-plus-square:before,.fa4-google-plus-square:before{content:"\f0d4"}.fa-google-wallet:before,.fa4-google-wallet:before{content:"\f1ee"}.fa-gopuram:before{content:"\f664"}.fa-graduation-cap:before,.fa4-graduation-cap:before,.fa4-mortar-board:before{content:"\f19d"}.fa-gratipay:before,.fa4-gittip:before,.fa4-gratipay:before{content:"\f184"}.fa-grav:before,.fa4-grav:before{content:"\f2d6"}.fa-greater-than:before{content:"\f531"}.fa-greater-than-equal:before{content:"\f532"}.fa-grimace:before{content:"\f57f"}.fa-grin:before{content:"\f580"}.fa-grin-alt:before{content:"\f581"}.fa-grin-beam:before{content:"\f582"}.fa-grin-beam-sweat:before{content:"\f583"}.fa-grin-hearts:before{content:"\f584"}.fa-grin-squint:before{content:"\f585"}.fa-grin-squint-tears:before{content:"\f586"}.fa-grin-stars:before{content:"\f587"}.fa-grin-tears:before{content:"\f588"}.fa-grin-tongue:before{content:"\f589"}.fa-grin-tongue-squint:before{content:"\f58a"}.fa-grin-tongue-wink:before{content:"\f58b"}.fa-grin-wink:before{content:"\f58c"}.fa-grip-horizontal:before{content:"\f58d"}.fa-grip-vertical:before{content:"\f58e"}.fa-gripfire:before{content:"\f3ac"}.fa-grunt:before{content:"\f3ad"}.fa-gulp:before{content:"\f3ae"}.fa-h-square:before,.fa4-h-square:before{content:"\f0fd"}.fa-hacker-news:before,.fa4-hacker-news:before,.fa4-y-combinator-square:before,.fa4-yc-square:before{content:"\f1d4"}.fa-hacker-news-square:before{content:"\f3af"}.fa-hackerrank:before{content:"\f5f7"}.fa-hamsa:before{content:"\f665"}.fa-hand-holding:before{content:"\f4bd"}.fa-hand-holding-heart:before{content:"\f4be"}.fa-hand-holding-usd:before{content:"\f4c0"}.fa-hand-lizard:before,.fa4-hand-lizard-o:before{content:"\f258"}.fa-hand-paper:before,.fa4-hand-paper-o:before,.fa4-hand-stop-o:before{content:"\f256"}.fa-hand-peace:before,.fa4-hand-peace-o:before{content:"\f25b"}.fa-hand-point-down:before,.fa4-hand-o-down:before{content:"\f0a7"}.fa-hand-point-left:before,.fa4-hand-o-left:before{content:"\f0a5"}.fa-hand-point-right:before,.fa4-hand-o-right:before{content:"\f0a4"}.fa-hand-point-up:before,.fa4-hand-o-up:before{content:"\f0a6"}.fa-hand-pointer:before,.fa4-hand-pointer-o:before{content:"\f25a"}.fa-hand-rock:before,.fa4-hand-grab-o:before,.fa4-hand-rock-o:before{content:"\f255"}.fa-hand-scissors:before,.fa4-hand-scissors-o:before{content:"\f257"}.fa-hand-spock:before,.fa4-hand-spock-o:before{content:"\f259"}.fa-hands:before{content:"\f4c2"}.fa-hands-helping:before{content:"\f4c4"}.fa-handshake:before,.fa4-handshake-o:before{content:"\f2b5"}.fa-hashtag:before,.fa4-hashtag:before{content:"\f292"}.fa-haykal:before{content:"\f666"}.fa-hdd:before,.fa4-hdd-o:before{content:"\f0a0"}.fa-heading:before,.fa4-header:before{content:"\f1dc"}.fa-headphones:before,.fa4-headphones:before{content:"\f025"}.fa-headphones-alt:before{content:"\f58f"}.fa-headset:before{content:"\f590"}.fa-heart:before,.fa4-heart:before{content:"\f004"}.fa-heartbeat:before,.fa4-heartbeat:before{content:"\f21e"}.fa-helicopter:before{content:"\f533"}.fa-highlighter:before{content:"\f591"}.fa-hips:before{content:"\f452"}.fa-hire-a-helper:before{content:"\f3b0"}.fa-history:before,.fa4-history:before{content:"\f1da"}.fa-hockey-puck:before{content:"\f453"}.fa-home:before,.fa4-home:before{content:"\f015"}.fa-hooli:before{content:"\f427"}.fa-hornbill:before{content:"\f592"}.fa-hospital:before,.fa4-hospital-o:before{content:"\f0f8"}.fa-hospital-alt:before{content:"\f47d"}.fa-hospital-symbol:before{content:"\f47e"}.fa-hot-tub:before{content:"\f593"}.fa-hotel:before{content:"\f594"}.fa-hotjar:before{content:"\f3b1"}.fa-hourglass:before,.fa4-hourglass:before{content:"\f254"}.fa-hourglass-end:before,.fa4-hourglass-3:before,.fa4-hourglass-end:before{content:"\f253"}.fa-hourglass-half:before,.fa4-hourglass-2:before,.fa4-hourglass-half:before{content:"\f252"}.fa-hourglass-start:before,.fa4-hourglass-1:before,.fa4-hourglass-start:before{content:"\f251"}.fa-houzz:before,.fa4-houzz:before{content:"\f27c"}.fa-html5:before,.fa4-html5:before{content:"\f13b"}.fa-hubspot:before{content:"\f3b2"}.fa-i-cursor:before,.fa4-i-cursor:before{content:"\f246"}.fa-id-badge:before,.fa4-id-badge:before{content:"\f2c1"}.fa-id-card:before,.fa4-drivers-license:before,.fa4-id-card:before{content:"\f2c2"}.fa-id-card-alt:before{content:"\f47f"}.fa-image:before,.fa4-image:before,.fa4-photo:before,.fa4-picture-o:before{content:"\f03e"}.fa-images:before{content:"\f302"}.fa-imdb:before,.fa4-imdb:before{content:"\f2d8"}.fa-inbox:before,.fa4-inbox:before{content:"\f01c"}.fa-indent:before,.fa4-indent:before{content:"\f03c"}.fa-industry:before,.fa4-industry:before{content:"\f275"}.fa-infinity:before{content:"\f534"}.fa-info:before,.fa4-info:before{content:"\f129"}.fa-info-circle:before,.fa4-info-circle:before{content:"\f05a"}.fa-instagram:before,.fa4-instagram:before{content:"\f16d"}.fa-internet-explorer:before,.fa4-internet-explorer:before{content:"\f26b"}.fa-ioxhost:before,.fa4-ioxhost:before{content:"\f208"}.fa-italic:before,.fa4-italic:before{content:"\f033"}.fa-itunes:before{content:"\f3b4"}.fa-itunes-note:before{content:"\f3b5"}.fa-java:before{content:"\f4e4"}.fa-jedi:before{content:"\f669"}.fa-jedi-order:before{content:"\f50e"}.fa-jenkins:before{content:"\f3b6"}.fa-joget:before{content:"\f3b7"}.fa-joint:before{content:"\f595"}.fa-joomla:before,.fa4-joomla:before{content:"\f1aa"}.fa-journal-whills:before{content:"\f66a"}.fa-js:before{content:"\f3b8"}.fa-js-square:before{content:"\f3b9"}.fa-jsfiddle:before,.fa4-jsfiddle:before{content:"\f1cc"}.fa-kaaba:before{content:"\f66b"}.fa-kaggle:before{content:"\f5fa"}.fa-key:before,.fa4-key:before{content:"\f084"}.fa-keybase:before{content:"\f4f5"}.fa-keyboard:before,.fa4-keyboard-o:before{content:"\f11c"}.fa-keycdn:before{content:"\f3ba"}.fa-khanda:before{content:"\f66d"}.fa-kickstarter:before{content:"\f3bb"}.fa-kickstarter-k:before{content:"\f3bc"}.fa-kiss:before{content:"\f596"}.fa-kiss-beam:before{content:"\f597"}.fa-kiss-wink-heart:before{content:"\f598"}.fa-kiwi-bird:before{content:"\f535"}.fa-korvue:before{content:"\f42f"}.fa-landmark:before{content:"\f66f"}.fa-language:before,.fa4-language:before{content:"\f1ab"}.fa-laptop:before,.fa4-laptop:before{content:"\f109"}.fa-laptop-code:before{content:"\f5fc"}.fa-laravel:before{content:"\f3bd"}.fa-lastfm:before,.fa4-lastfm:before{content:"\f202"}.fa-lastfm-square:before,.fa4-lastfm-square:before{content:"\f203"}.fa-laugh:before{content:"\f599"}.fa-laugh-beam:before{content:"\f59a"}.fa-laugh-squint:before{content:"\f59b"}.fa-laugh-wink:before{content:"\f59c"}.fa-layer-group:before{content:"\f5fd"}.fa-leaf:before,.fa4-leaf:before{content:"\f06c"}.fa-leanpub:before,.fa4-leanpub:before{content:"\f212"}.fa-lemon:before,.fa4-lemon-o:before{content:"\f094"}.fa-less:before{content:"\f41d"}.fa-less-than:before{content:"\f536"}.fa-less-than-equal:before{content:"\f537"}.fa-level-down-alt:before{content:"\f3be"}.fa-level-up-alt:before{content:"\f3bf"}.fa-life-ring:before,.fa4-life-bouy:before,.fa4-life-buoy:before,.fa4-life-ring:before,.fa4-life-saver:before,.fa4-support:before{content:"\f1cd"}.fa-lightbulb:before,.fa4-lightbulb-o:before{content:"\f0eb"}.fa-line:before{content:"\f3c0"}.fa-link:before,.fa4-chain:before,.fa4-link:before{content:"\f0c1"}.fa-linkedin:before,.fa4-linkedin-square:before{content:"\f08c"}.fa-linkedin-in:before,.fa4-linkedin:before{content:"\f0e1"}.fa-linode:before,.fa4-linode:before{content:"\f2b8"}.fa-linux:before,.fa4-linux:before{content:"\f17c"}.fa-lira-sign:before,.fa4-try:before,.fa4-turkish-lira:before{content:"\f195"}.fa-list:before,.fa4-list:before{content:"\f03a"}.fa-list-alt:before,.fa4-list-alt:before{content:"\f022"}.fa-list-ol:before,.fa4-list-ol:before{content:"\f0cb"}.fa-list-ul:before,.fa4-list-ul:before{content:"\f0ca"}.fa-location-arrow:before,.fa4-location-arrow:before{content:"\f124"}.fa-lock:before,.fa4-lock:before{content:"\f023"}.fa-lock-open:before{content:"\f3c1"}.fa-long-arrow-alt-down:before{content:"\f309"}.fa-long-arrow-alt-left:before{content:"\f30a"}.fa-long-arrow-alt-right:before{content:"\f30b"}.fa-long-arrow-alt-up:before{content:"\f30c"}.fa-low-vision:before,.fa4-low-vision:before{content:"\f2a8"}.fa-luggage-cart:before{content:"\f59d"}.fa-lyft:before{content:"\f3c3"}.fa-magento:before{content:"\f3c4"}.fa-magic:before,.fa4-magic:before{content:"\f0d0"}.fa-magnet:before,.fa4-magnet:before{content:"\f076"}.fa-mail-bulk:before{content:"\f674"}.fa-mailchimp:before{content:"\f59e"}.fa-male:before,.fa4-male:before{content:"\f183"}.fa-mandalorian:before{content:"\f50f"}.fa-map:before,.fa4-map:before{content:"\f279"}.fa-map-marked:before{content:"\f59f"}.fa-map-marked-alt:before{content:"\f5a0"}.fa-map-marker:before,.fa4-map-marker:before{content:"\f041"}.fa-map-marker-alt:before{content:"\f3c5"}.fa-map-pin:before,.fa4-map-pin:before{content:"\f276"}.fa-map-signs:before,.fa4-map-signs:before{content:"\f277"}.fa-markdown:before{content:"\f60f"}.fa-marker:before{content:"\f5a1"}.fa-mars:before,.fa4-mars:before{content:"\f222"}.fa-mars-double:before,.fa4-mars-double:before{content:"\f227"}.fa-mars-stroke:before,.fa4-mars-stroke:before{content:"\f229"}.fa-mars-stroke-h:before,.fa4-mars-stroke-h:before{content:"\f22b"}.fa-mars-stroke-v:before,.fa4-mars-stroke-v:before{content:"\f22a"}.fa-mastodon:before{content:"\f4f6"}.fa-maxcdn:before,.fa4-maxcdn:before{content:"\f136"}.fa-medal:before{content:"\f5a2"}.fa-medapps:before{content:"\f3c6"}.fa-medium:before,.fa4-medium:before{content:"\f23a"}.fa-medium-m:before{content:"\f3c7"}.fa-medkit:before,.fa4-medkit:before{content:"\f0fa"}.fa-medrt:before{content:"\f3c8"}.fa-meetup:before,.fa4-meetup:before{content:"\f2e0"}.fa-megaport:before{content:"\f5a3"}.fa-meh:before,.fa4-meh-o:before{content:"\f11a"}.fa-meh-blank:before{content:"\f5a4"}.fa-meh-rolling-eyes:before{content:"\f5a5"}.fa-memory:before{content:"\f538"}.fa-menorah:before{content:"\f676"}.fa-mercury:before,.fa4-mercury:before{content:"\f223"}.fa-microchip:before,.fa4-microchip:before{content:"\f2db"}.fa-microphone:before,.fa4-microphone:before{content:"\f130"}.fa-microphone-alt:before{content:"\f3c9"}.fa-microphone-alt-slash:before{content:"\f539"}.fa-microphone-slash:before,.fa4-microphone-slash:before{content:"\f131"}.fa-microscope:before{content:"\f610"}.fa-microsoft:before{content:"\f3ca"}.fa-minus:before,.fa4-minus:before{content:"\f068"}.fa-minus-circle:before,.fa4-minus-circle:before{content:"\f056"}.fa-minus-square:before,.fa4-minus-square:before{content:"\f146"}.fa-mix:before{content:"\f3cb"}.fa-mixcloud:before,.fa4-mixcloud:before{content:"\f289"}.fa-mizuni:before{content:"\f3cc"}.fa-mobile:before,.fa4-mobile-phone:before,.fa4-mobile:before{content:"\f10b"}.fa-mobile-alt:before{content:"\f3cd"}.fa-modx:before,.fa4-modx:before{content:"\f285"}.fa-monero:before{content:"\f3d0"}.fa-money-bill:before,.fa4-money:before{content:"\f0d6"}.fa-money-bill-alt:before{content:"\f3d1"}.fa-money-bill-wave:before{content:"\f53a"}.fa-money-bill-wave-alt:before{content:"\f53b"}.fa-money-check:before{content:"\f53c"}.fa-money-check-alt:before{content:"\f53d"}.fa-monument:before{content:"\f5a6"}.fa-moon:before,.fa4-moon-o:before{content:"\f186"}.fa-mortar-pestle:before{content:"\f5a7"}.fa-mosque:before{content:"\f678"}.fa-motorcycle:before,.fa4-motorcycle:before{content:"\f21c"}.fa-mouse-pointer:before,.fa4-mouse-pointer:before{content:"\f245"}.fa-music:before,.fa4-music:before{content:"\f001"}.fa-napster:before{content:"\f3d2"}.fa-neos:before{content:"\f612"}.fa-neuter:before,.fa4-neuter:before{content:"\f22c"}.fa-newspaper:before,.fa4-newspaper-o:before{content:"\f1ea"}.fa-nimblr:before{content:"\f5a8"}.fa-nintendo-switch:before{content:"\f418"}.fa-node:before{content:"\f419"}.fa-node-js:before{content:"\f3d3"}.fa-not-equal:before{content:"\f53e"}.fa-notes-medical:before{content:"\f481"}.fa-npm:before{content:"\f3d4"}.fa-ns8:before{content:"\f3d5"}.fa-nutritionix:before{content:"\f3d6"}.fa-object-group:before,.fa4-object-group:before{content:"\f247"}.fa-object-ungroup:before,.fa4-object-ungroup:before{content:"\f248"}.fa-odnoklassniki:before,.fa4-odnoklassniki:before{content:"\f263"}.fa-odnoklassniki-square:before,.fa4-odnoklassniki-square:before{content:"\f264"}.fa-oil-can:before{content:"\f613"}.fa-old-republic:before{content:"\f510"}.fa-om:before{content:"\f679"}.fa-opencart:before,.fa4-opencart:before{content:"\f23d"}.fa-openid:before,.fa4-openid:before{content:"\f19b"}.fa-opera:before,.fa4-opera:before{content:"\f26a"}.fa-optin-monster:before,.fa4-optin-monster:before{content:"\f23c"}.fa-osi:before{content:"\f41a"}.fa-outdent:before,.fa4-dedent:before,.fa4-outdent:before{content:"\f03b"}.fa-page4:before{content:"\f3d7"}.fa-pagelines:before,.fa4-pagelines:before{content:"\f18c"}.fa-paint-brush:before,.fa4-paint-brush:before{content:"\f1fc"}.fa-paint-roller:before{content:"\f5aa"}.fa-palette:before{content:"\f53f"}.fa-palfed:before{content:"\f3d8"}.fa-pallet:before{content:"\f482"}.fa-paper-plane:before,.fa4-paper-plane:before,.fa4-send:before{content:"\f1d8"}.fa-paperclip:before,.fa4-paperclip:before{content:"\f0c6"}.fa-parachute-box:before{content:"\f4cd"}.fa-paragraph:before,.fa4-paragraph:before{content:"\f1dd"}.fa-parking:before{content:"\f540"}.fa-passport:before{content:"\f5ab"}.fa-pastafarianism:before{content:"\f67b"}.fa-paste:before,.fa4-clipboard:before,.fa4-paste:before{content:"\f0ea"}.fa-patreon:before{content:"\f3d9"}.fa-pause:before,.fa4-pause:before{content:"\f04c"}.fa-pause-circle:before,.fa4-pause-circle:before{content:"\f28b"}.fa-paw:before,.fa4-paw:before{content:"\f1b0"}.fa-paypal:before,.fa4-paypal:before{content:"\f1ed"}.fa-peace:before{content:"\f67c"}.fa-pen:before{content:"\f304"}.fa-pen-alt:before{content:"\f305"}.fa-pen-fancy:before{content:"\f5ac"}.fa-pen-nib:before{content:"\f5ad"}.fa-pen-square:before,.fa4-pencil-square:before{content:"\f14b"}.fa-pencil-alt:before{content:"\f303"}.fa-pencil-ruler:before{content:"\f5ae"}.fa-people-carry:before{content:"\f4ce"}.fa-percent:before,.fa4-percent:before{content:"\f295"}.fa-percentage:before{content:"\f541"}.fa-periscope:before{content:"\f3da"}.fa-phabricator:before{content:"\f3db"}.fa-phoenix-framework:before{content:"\f3dc"}.fa-phoenix-squadron:before{content:"\f511"}.fa-phone:before,.fa4-phone:before{content:"\f095"}.fa-phone-slash:before{content:"\f3dd"}.fa-phone-square:before,.fa4-phone-square:before{content:"\f098"}.fa-phone-volume:before,.fa4-volume-control-phone:before{content:"\f2a0"}.fa-php:before{content:"\f457"}.fa-pied-piper:before,.fa4-pied-piper:before{content:"\f2ae"}.fa-pied-piper-alt:before,.fa4-pied-piper-alt:before{content:"\f1a8"}.fa-pied-piper-hat:before{content:"\f4e5"}.fa-pied-piper-pp:before,.fa4-pied-piper-pp:before{content:"\f1a7"}.fa-piggy-bank:before{content:"\f4d3"}.fa-pills:before{content:"\f484"}.fa-pinterest:before,.fa4-pinterest:before{content:"\f0d2"}.fa-pinterest-p:before,.fa4-pinterest-p:before{content:"\f231"}.fa-pinterest-square:before,.fa4-pinterest-square:before{content:"\f0d3"}.fa-place-of-worship:before{content:"\f67f"}.fa-plane:before,.fa4-plane:before{content:"\f072"}.fa-plane-arrival:before{content:"\f5af"}.fa-plane-departure:before{content:"\f5b0"}.fa-play:before,.fa4-play:before{content:"\f04b"}.fa-play-circle:before,.fa4-play-circle:before{content:"\f144"}.fa-playstation:before{content:"\f3df"}.fa-plug:before,.fa4-plug:before{content:"\f1e6"}.fa-plus:before,.fa4-plus:before{content:"\f067"}.fa-plus-circle:before,.fa4-plus-circle:before{content:"\f055"}.fa-plus-square:before,.fa4-plus-square:before{content:"\f0fe"}.fa-podcast:before,.fa4-podcast:before{content:"\f2ce"}.fa-poll:before{content:"\f681"}.fa-poll-h:before{content:"\f682"}.fa-poo:before{content:"\f2fe"}.fa-poop:before{content:"\f619"}.fa-portrait:before{content:"\f3e0"}.fa-pound-sign:before,.fa4-gbp:before{content:"\f154"}.fa-power-off:before,.fa4-power-off:before{content:"\f011"}.fa-pray:before{content:"\f683"}.fa-praying-hands:before{content:"\f684"}.fa-prescription:before{content:"\f5b1"}.fa-prescription-bottle:before{content:"\f485"}.fa-prescription-bottle-alt:before{content:"\f486"}.fa-print:before,.fa4-print:before{content:"\f02f"}.fa-procedures:before{content:"\f487"}.fa-product-hunt:before,.fa4-product-hunt:before{content:"\f288"}.fa-project-diagram:before{content:"\f542"}.fa-pushed:before{content:"\f3e1"}.fa-puzzle-piece:before,.fa4-puzzle-piece:before{content:"\f12e"}.fa-python:before{content:"\f3e2"}.fa-qq:before,.fa4-qq:before{content:"\f1d6"}.fa-qrcode:before,.fa4-qrcode:before{content:"\f029"}.fa-question:before,.fa4-question:before{content:"\f128"}.fa-question-circle:before,.fa4-question-circle:before{content:"\f059"}.fa-quidditch:before{content:"\f458"}.fa-quinscape:before{content:"\f459"}.fa-quora:before,.fa4-quora:before{content:"\f2c4"}.fa-quote-left:before,.fa4-quote-left:before{content:"\f10d"}.fa-quote-right:before,.fa4-quote-right:before{content:"\f10e"}.fa-quran:before{content:"\f687"}.fa-r-project:before{content:"\f4f7"}.fa-random:before,.fa4-random:before{content:"\f074"}.fa-ravelry:before,.fa4-ravelry:before{content:"\f2d9"}.fa-react:before{content:"\f41b"}.fa-readme:before{content:"\f4d5"}.fa-rebel:before,.fa4-ra:before,.fa4-rebel:before,.fa4-resistance:before{content:"\f1d0"}.fa-receipt:before{content:"\f543"}.fa-recycle:before,.fa4-recycle:before{content:"\f1b8"}.fa-red-river:before{content:"\f3e3"}.fa-reddit:before,.fa4-reddit:before{content:"\f1a1"}.fa-reddit-alien:before,.fa4-reddit-alien:before{content:"\f281"}.fa-reddit-square:before,.fa4-reddit-square:before{content:"\f1a2"}.fa-redo:before,.fa4-repeat:before,.fa4-rotate-right:before{content:"\f01e"}.fa-redo-alt:before{content:"\f2f9"}.fa-registered:before,.fa4-registered:before{content:"\f25d"}.fa-rendact:before{content:"\f3e4"}.fa-renren:before,.fa4-renren:before{content:"\f18b"}.fa-reply:before{content:"\f3e5"}.fa-reply-all:before,.fa4-mail-reply-all:before,.fa4-reply-all:before{content:"\f122"}.fa-replyd:before{content:"\f3e6"}.fa-researchgate:before{content:"\f4f8"}.fa-resolving:before{content:"\f3e7"}.fa-retweet:before,.fa4-retweet:before{content:"\f079"}.fa-rev:before{content:"\f5b2"}.fa-ribbon:before{content:"\f4d6"}.fa-road:before,.fa4-road:before{content:"\f018"}.fa-robot:before{content:"\f544"}.fa-rocket:before,.fa4-rocket:before{content:"\f135"}.fa-rocketchat:before{content:"\f3e8"}.fa-rockrms:before{content:"\f3e9"}.fa-route:before{content:"\f4d7"}.fa-rss:before,.fa4-feed:before,.fa4-rss:before{content:"\f09e"}.fa-rss-square:before,.fa4-rss-square:before{content:"\f143"}.fa-ruble-sign:before,.fa4-rouble:before,.fa4-rub:before,.fa4-ruble:before{content:"\f158"}.fa-ruler:before{content:"\f545"}.fa-ruler-combined:before{content:"\f546"}.fa-ruler-horizontal:before{content:"\f547"}.fa-ruler-vertical:before{content:"\f548"}.fa-rupee-sign:before,.fa4-inr:before,.fa4-rupee:before{content:"\f156"}.fa-sad-cry:before{content:"\f5b3"}.fa-sad-tear:before{content:"\f5b4"}.fa-safari:before,.fa4-safari:before{content:"\f267"}.fa-sass:before{content:"\f41e"}.fa-save:before,.fa4-floppy-o:before,.fa4-save:before{content:"\f0c7"}.fa-schlix:before{content:"\f3ea"}.fa-school:before{content:"\f549"}.fa-screwdriver:before{content:"\f54a"}.fa-scribd:before,.fa4-scribd:before{content:"\f28a"}.fa-search:before,.fa4-search:before{content:"\f002"}.fa-search-dollar:before{content:"\f688"}.fa-search-location:before{content:"\f689"}.fa-search-minus:before,.fa4-search-minus:before{content:"\f010"}.fa-search-plus:before,.fa4-search-plus:before{content:"\f00e"}.fa-searchengin:before{content:"\f3eb"}.fa-seedling:before{content:"\f4d8"}.fa-sellcast:before,.fa4-eercast:before{content:"\f2da"}.fa-sellsy:before,.fa4-sellsy:before{content:"\f213"}.fa-server:before,.fa4-server:before{content:"\f233"}.fa-servicestack:before{content:"\f3ec"}.fa-shapes:before{content:"\f61f"}.fa-share:before,.fa4-mail-forward:before,.fa4-share:before{content:"\f064"}.fa-share-alt:before,.fa4-share-alt:before{content:"\f1e0"}.fa-share-alt-square:before,.fa4-share-alt-square:before{content:"\f1e1"}.fa-share-square:before,.fa4-share-square:before{content:"\f14d"}.fa-shekel-sign:before,.fa4-ils:before,.fa4-shekel:before,.fa4-sheqel:before{content:"\f20b"}.fa-shield-alt:before{content:"\f3ed"}.fa-ship:before,.fa4-ship:before{content:"\f21a"}.fa-shipping-fast:before{content:"\f48b"}.fa-shirtsinbulk:before,.fa4-shirtsinbulk:before{content:"\f214"}.fa-shoe-prints:before{content:"\f54b"}.fa-shopping-bag:before,.fa4-shopping-bag:before{content:"\f290"}.fa-shopping-basket:before,.fa4-shopping-basket:before{content:"\f291"}.fa-shopping-cart:before,.fa4-shopping-cart:before{content:"\f07a"}.fa-shopware:before{content:"\f5b5"}.fa-shower:before,.fa4-shower:before{content:"\f2cc"}.fa-shuttle-van:before{content:"\f5b6"}.fa-sign:before{content:"\f4d9"}.fa-sign-in-alt:before{content:"\f2f6"}.fa-sign-language:before,.fa4-sign-language:before,.fa4-signing:before{content:"\f2a7"}.fa-sign-out-alt:before{content:"\f2f5"}.fa-signal:before,.fa4-signal:before{content:"\f012"}.fa-signature:before{content:"\f5b7"}.fa-simplybuilt:before,.fa4-simplybuilt:before{content:"\f215"}.fa-sistrix:before{content:"\f3ee"}.fa-sitemap:before,.fa4-sitemap:before{content:"\f0e8"}.fa-sith:before{content:"\f512"}.fa-skull:before{content:"\f54c"}.fa-skyatlas:before,.fa4-skyatlas:before{content:"\f216"}.fa-skype:before,.fa4-skype:before{content:"\f17e"}.fa-slack:before,.fa4-slack:before{content:"\f198"}.fa-slack-hash:before{content:"\f3ef"}.fa-sliders-h:before,.fa4-sliders:before{content:"\f1de"}.fa-slideshare:before,.fa4-slideshare:before{content:"\f1e7"}.fa-smile:before,.fa4-smile-o:before{content:"\f118"}.fa-smile-beam:before{content:"\f5b8"}.fa-smile-wink:before{content:"\f4da"}.fa-smoking:before{content:"\f48d"}.fa-smoking-ban:before{content:"\f54d"}.fa-snapchat:before,.fa4-snapchat:before{content:"\f2ab"}.fa-snapchat-ghost:before,.fa4-snapchat-ghost:before{content:"\f2ac"}.fa-snapchat-square:before,.fa4-snapchat-square:before{content:"\f2ad"}.fa-snowflake:before,.fa4-snowflake-o:before{content:"\f2dc"}.fa-socks:before{content:"\f696"}.fa-solar-panel:before{content:"\f5ba"}.fa-sort:before,.fa4-sort:before,.fa4-unsorted:before{content:"\f0dc"}.fa-sort-alpha-down:before,.fa4-sort-alpha-asc:before{content:"\f15d"}.fa-sort-alpha-up:before,.fa4-sort-alpha-desc:before{content:"\f15e"}.fa-sort-amount-down:before,.fa4-sort-amount-asc:before{content:"\f160"}.fa-sort-amount-up:before,.fa4-sort-amount-desc:before{content:"\f161"}.fa-sort-down:before,.fa4-sort-desc:before,.fa4-sort-down:before{content:"\f0dd"}.fa-sort-numeric-down:before,.fa4-sort-numeric-asc:before{content:"\f162"}.fa-sort-numeric-up:before,.fa4-sort-numeric-desc:before{content:"\f163"}.fa-sort-up:before,.fa4-sort-asc:before,.fa4-sort-up:before{content:"\f0de"}.fa-soundcloud:before,.fa4-soundcloud:before{content:"\f1be"}.fa-spa:before{content:"\f5bb"}.fa-space-shuttle:before,.fa4-space-shuttle:before{content:"\f197"}.fa-speakap:before{content:"\f3f3"}.fa-spinner:before,.fa4-spinner:before{content:"\f110"}.fa-splotch:before{content:"\f5bc"}.fa-spotify:before,.fa4-spotify:before{content:"\f1bc"}.fa-spray-can:before{content:"\f5bd"}.fa-square:before,.fa4-square:before{content:"\f0c8"}.fa-square-full:before{content:"\f45c"}.fa-square-root-alt:before{content:"\f698"}.fa-squarespace:before{content:"\f5be"}.fa-stack-exchange:before,.fa4-stack-exchange:before{content:"\f18d"}.fa-stack-overflow:before,.fa4-stack-overflow:before{content:"\f16c"}.fa-stamp:before{content:"\f5bf"}.fa-star:before,.fa4-star:before{content:"\f005"}.fa-star-and-crescent:before{content:"\f699"}.fa-star-half:before,.fa4-star-half:before{content:"\f089"}.fa-star-half-alt:before{content:"\f5c0"}.fa-star-of-david:before{content:"\f69a"}.fa-star-of-life:before{content:"\f621"}.fa-staylinked:before{content:"\f3f5"}.fa-steam:before,.fa4-steam:before{content:"\f1b6"}.fa-steam-square:before,.fa4-steam-square:before{content:"\f1b7"}.fa-steam-symbol:before{content:"\f3f6"}.fa-step-backward:before,.fa4-step-backward:before{content:"\f048"}.fa-step-forward:before,.fa4-step-forward:before{content:"\f051"}.fa-stethoscope:before,.fa4-stethoscope:before{content:"\f0f1"}.fa-sticker-mule:before{content:"\f3f7"}.fa-sticky-note:before,.fa4-sticky-note:before{content:"\f249"}.fa-stop:before,.fa4-stop:before{content:"\f04d"}.fa-stop-circle:before,.fa4-stop-circle:before{content:"\f28d"}.fa-stopwatch:before{content:"\f2f2"}.fa-store:before{content:"\f54e"}.fa-store-alt:before{content:"\f54f"}.fa-strava:before{content:"\f428"}.fa-stream:before{content:"\f550"}.fa-street-view:before,.fa4-street-view:before{content:"\f21d"}.fa-strikethrough:before,.fa4-strikethrough:before{content:"\f0cc"}.fa-stripe:before{content:"\f429"}.fa-stripe-s:before{content:"\f42a"}.fa-stroopwafel:before{content:"\f551"}.fa-studiovinari:before{content:"\f3f8"}.fa-stumbleupon:before,.fa4-stumbleupon:before{content:"\f1a4"}.fa-stumbleupon-circle:before,.fa4-stumbleupon-circle:before{content:"\f1a3"}.fa-subscript:before,.fa4-subscript:before{content:"\f12c"}.fa-subway:before,.fa4-subway:before{content:"\f239"}.fa-suitcase:before,.fa4-suitcase:before{content:"\f0f2"}.fa-suitcase-rolling:before{content:"\f5c1"}.fa-sun:before,.fa4-sun-o:before{content:"\f185"}.fa-superpowers:before,.fa4-superpowers:before{content:"\f2dd"}.fa-superscript:before,.fa4-superscript:before{content:"\f12b"}.fa-supple:before{content:"\f3f9"}.fa-surprise:before{content:"\f5c2"}.fa-swatchbook:before{content:"\f5c3"}.fa-swimmer:before{content:"\f5c4"}.fa-swimming-pool:before{content:"\f5c5"}.fa-synagogue:before{content:"\f69b"}.fa-sync:before,.fa4-refresh:before{content:"\f021"}.fa-sync-alt:before{content:"\f2f1"}.fa-syringe:before{content:"\f48e"}.fa-table:before,.fa4-table:before{content:"\f0ce"}.fa-table-tennis:before{content:"\f45d"}.fa-tablet:before,.fa4-tablet:before{content:"\f10a"}.fa-tablet-alt:before{content:"\f3fa"}.fa-tablets:before{content:"\f490"}.fa-tachometer-alt:before{content:"\f3fd"}.fa-tag:before,.fa4-tag:before{content:"\f02b"}.fa-tags:before,.fa4-tags:before{content:"\f02c"}.fa-tape:before{content:"\f4db"}.fa-tasks:before,.fa4-tasks:before{content:"\f0ae"}.fa-taxi:before,.fa4-cab:before,.fa4-taxi:before{content:"\f1ba"}.fa-teamspeak:before{content:"\f4f9"}.fa-teeth:before{content:"\f62e"}.fa-teeth-open:before{content:"\f62f"}.fa-telegram:before,.fa4-telegram:before{content:"\f2c6"}.fa-telegram-plane:before{content:"\f3fe"}.fa-tencent-weibo:before,.fa4-tencent-weibo:before{content:"\f1d5"}.fa-terminal:before,.fa4-terminal:before{content:"\f120"}.fa-text-height:before,.fa4-text-height:before{content:"\f034"}.fa-text-width:before,.fa4-text-width:before{content:"\f035"}.fa-th:before,.fa4-th:before{content:"\f00a"}.fa-th-large:before,.fa4-th-large:before{content:"\f009"}.fa-th-list:before,.fa4-th-list:before{content:"\f00b"}.fa-the-red-yeti:before{content:"\f69d"}.fa-theater-masks:before{content:"\f630"}.fa-themeco:before{content:"\f5c6"}.fa-themeisle:before,.fa4-themeisle:before{content:"\f2b2"}.fa-thermometer:before{content:"\f491"}.fa-thermometer-empty:before,.fa4-thermometer-0:before,.fa4-thermometer-empty:before{content:"\f2cb"}.fa-thermometer-full:before,.fa4-thermometer-4:before,.fa4-thermometer-full:before,.fa4-thermometer:before{content:"\f2c7"}.fa-thermometer-half:before,.fa4-thermometer-2:before,.fa4-thermometer-half:before{content:"\f2c9"}.fa-thermometer-quarter:before,.fa4-thermometer-1:before,.fa4-thermometer-quarter:before{content:"\f2ca"}.fa-thermometer-three-quarters:before,.fa4-thermometer-3:before,.fa4-thermometer-three-quarters:before{content:"\f2c8"}.fa-thumbs-down:before,.fa4-thumbs-down:before{content:"\f165"}.fa-thumbs-up:before,.fa4-thumbs-up:before{content:"\f164"}.fa-thumbtack:before,.fa4-thumb-tack:before{content:"\f08d"}.fa-ticket-alt:before{content:"\f3ff"}.fa-times:before,.fa4-close:before,.fa4-remove:before,.fa4-times:before{content:"\f00d"}.fa-times-circle:before,.fa4-times-circle:before{content:"\f057"}.fa-tint:before,.fa4-tint:before{content:"\f043"}.fa-tint-slash:before{content:"\f5c7"}.fa-tired:before{content:"\f5c8"}.fa-toggle-off:before,.fa4-toggle-off:before{content:"\f204"}.fa-toggle-on:before,.fa4-toggle-on:before{content:"\f205"}.fa-toolbox:before{content:"\f552"}.fa-tooth:before{content:"\f5c9"}.fa-torah:before{content:"\f6a0"}.fa-torii-gate:before{content:"\f6a1"}.fa-trade-federation:before{content:"\f513"}.fa-trademark:before,.fa4-trademark:before{content:"\f25c"}.fa-traffic-light:before{content:"\f637"}.fa-train:before,.fa4-train:before{content:"\f238"}.fa-transgender:before,.fa4-intersex:before,.fa4-transgender:before{content:"\f224"}.fa-transgender-alt:before,.fa4-transgender-alt:before{content:"\f225"}.fa-trash:before,.fa4-trash:before{content:"\f1f8"}.fa-trash-alt:before{content:"\f2ed"}.fa-tree:before,.fa4-tree:before{content:"\f1bb"}.fa-trello:before,.fa4-trello:before{content:"\f181"}.fa-tripadvisor:before,.fa4-tripadvisor:before{content:"\f262"}.fa-trophy:before,.fa4-trophy:before{content:"\f091"}.fa-truck:before,.fa4-truck:before{content:"\f0d1"}.fa-truck-loading:before{content:"\f4de"}.fa-truck-monster:before{content:"\f63b"}.fa-truck-moving:before{content:"\f4df"}.fa-truck-pickup:before{content:"\f63c"}.fa-tshirt:before{content:"\f553"}.fa-tty:before,.fa4-tty:before{content:"\f1e4"}.fa-tumblr:before,.fa4-tumblr:before{content:"\f173"}.fa-tumblr-square:before,.fa4-tumblr-square:before{content:"\f174"}.fa-tv:before,.fa4-television:before,.fa4-tv:before{content:"\f26c"}.fa-twitch:before,.fa4-twitch:before{content:"\f1e8"}.fa-twitter:before,.fa4-twitter:before{content:"\f099"}.fa-twitter-square:before,.fa4-twitter-square:before{content:"\f081"}.fa-typo3:before{content:"\f42b"}.fa-uber:before{content:"\f402"}.fa-uikit:before{content:"\f403"}.fa-umbrella:before,.fa4-umbrella:before{content:"\f0e9"}.fa-umbrella-beach:before{content:"\f5ca"}.fa-underline:before,.fa4-underline:before{content:"\f0cd"}.fa-undo:before,.fa4-rotate-left:before,.fa4-undo:before{content:"\f0e2"}.fa-undo-alt:before{content:"\f2ea"}.fa-uniregistry:before{content:"\f404"}.fa-universal-access:before,.fa4-universal-access:before{content:"\f29a"}.fa-university:before,.fa4-bank:before,.fa4-institution:before,.fa4-university:before{content:"\f19c"}.fa-unlink:before,.fa4-chain-broken:before,.fa4-unlink:before{content:"\f127"}.fa-unlock:before,.fa4-unlock:before{content:"\f09c"}.fa-unlock-alt:before,.fa4-unlock-alt:before{content:"\f13e"}.fa-untappd:before{content:"\f405"}.fa-upload:before,.fa4-upload:before{content:"\f093"}.fa-usb:before,.fa4-usb:before{content:"\f287"}.fa-user:before,.fa4-user:before{content:"\f007"}.fa-user-alt:before{content:"\f406"}.fa-user-alt-slash:before{content:"\f4fa"}.fa-user-astronaut:before{content:"\f4fb"}.fa-user-check:before{content:"\f4fc"}.fa-user-circle:before,.fa4-user-circle:before{content:"\f2bd"}.fa-user-clock:before{content:"\f4fd"}.fa-user-cog:before{content:"\f4fe"}.fa-user-edit:before{content:"\f4ff"}.fa-user-friends:before{content:"\f500"}.fa-user-graduate:before{content:"\f501"}.fa-user-lock:before{content:"\f502"}.fa-user-md:before,.fa4-user-md:before{content:"\f0f0"}.fa-user-minus:before{content:"\f503"}.fa-user-ninja:before{content:"\f504"}.fa-user-plus:before,.fa4-user-plus:before{content:"\f234"}.fa-user-secret:before,.fa4-user-secret:before{content:"\f21b"}.fa-user-shield:before{content:"\f505"}.fa-user-slash:before{content:"\f506"}.fa-user-tag:before{content:"\f507"}.fa-user-tie:before{content:"\f508"}.fa-user-times:before,.fa4-user-times:before{content:"\f235"}.fa-users:before,.fa4-group:before,.fa4-users:before{content:"\f0c0"}.fa-users-cog:before{content:"\f509"}.fa-ussunnah:before{content:"\f407"}.fa-utensil-spoon:before{content:"\f2e5"}.fa-utensils:before{content:"\f2e7"}.fa-vaadin:before{content:"\f408"}.fa-vector-square:before{content:"\f5cb"}.fa-venus:before,.fa4-venus:before{content:"\f221"}.fa-venus-double:before,.fa4-venus-double:before{content:"\f226"}.fa-venus-mars:before,.fa4-venus-mars:before{content:"\f228"}.fa-viacoin:before,.fa4-viacoin:before{content:"\f237"}.fa-viadeo:before,.fa4-viadeo:before{content:"\f2a9"}.fa-viadeo-square:before,.fa4-viadeo-square:before{content:"\f2aa"}.fa-vial:before{content:"\f492"}.fa-vials:before{content:"\f493"}.fa-viber:before{content:"\f409"}.fa-video:before,.fa4-video-camera:before{content:"\f03d"}.fa-video-slash:before{content:"\f4e2"}.fa-vihara:before{content:"\f6a7"}.fa-vimeo:before{content:"\f40a"}.fa-vimeo-square:before,.fa4-vimeo-square:before{content:"\f194"}.fa-vimeo-v:before,.fa4-vimeo:before{content:"\f27d"}.fa-vine:before,.fa4-vine:before{content:"\f1ca"}.fa-vk:before,.fa4-vk:before{content:"\f189"}.fa-vnv:before{content:"\f40b"}.fa-volleyball-ball:before{content:"\f45f"}.fa-volume-down:before,.fa4-volume-down:before{content:"\f027"}.fa-volume-off:before,.fa4-volume-off:before{content:"\f026"}.fa-volume-up:before,.fa4-volume-up:before{content:"\f028"}.fa-vuejs:before{content:"\f41f"}.fa-walking:before{content:"\f554"}.fa-wallet:before{content:"\f555"}.fa-warehouse:before{content:"\f494"}.fa-weebly:before{content:"\f5cc"}.fa-weibo:before,.fa4-weibo:before{content:"\f18a"}.fa-weight:before{content:"\f496"}.fa-weight-hanging:before{content:"\f5cd"}.fa-weixin:before,.fa4-wechat:before,.fa4-weixin:before{content:"\f1d7"}.fa-whatsapp:before,.fa4-whatsapp:before{content:"\f232"}.fa-whatsapp-square:before{content:"\f40c"}.fa-wheelchair:before,.fa4-wheelchair:before{content:"\f193"}.fa-whmcs:before{content:"\f40d"}.fa-wifi:before,.fa4-wifi:before{content:"\f1eb"}.fa-wikipedia-w:before,.fa4-wikipedia-w:before{content:"\f266"}.fa-window-close:before{content:"\f410"}.fa-window-maximize:before,.fa4-window-maximize:before{content:"\f2d0"}.fa-window-minimize:before,.fa4-window-minimize:before{content:"\f2d1"}.fa-window-restore:before,.fa4-window-restore:before{content:"\f2d2"}.fa-windows:before,.fa4-windows:before{content:"\f17a"}.fa-wine-glass:before{content:"\f4e3"}.fa-wine-glass-alt:before{content:"\f5ce"}.fa-wix:before{content:"\f5cf"}.fa-wolf-pack-battalion:before{content:"\f514"}.fa-won-sign:before,.fa4-krw:before,.fa4-won:before{content:"\f159"}.fa-wordpress:before,.fa4-wordpress:before{content:"\f19a"}.fa-wordpress-simple:before{content:"\f411"}.fa-wpbeginner:before,.fa4-wpbeginner:before{content:"\f297"}.fa-wpexplorer:before,.fa4-wpexplorer:before{content:"\f2de"}.fa-wpforms:before,.fa4-wpforms:before{content:"\f298"}.fa-wrench:before,.fa4-wrench:before{content:"\f0ad"}.fa-x-ray:before{content:"\f497"}.fa-xbox:before{content:"\f412"}.fa-xing:before,.fa4-xing:before{content:"\f168"}.fa-xing-square:before,.fa4-xing-square:before{content:"\f169"}.fa-y-combinator:before,.fa4-y-combinator:before,.fa4-yc:before{content:"\f23b"}.fa-yahoo:before,.fa4-yahoo:before{content:"\f19e"}.fa-yandex:before{content:"\f413"}.fa-yandex-international:before{content:"\f414"}.fa-yelp:before,.fa4-yelp:before{content:"\f1e9"}.fa-yen-sign:before,.fa4-cny:before,.fa4-jpy:before,.fa4-rmb:before,.fa4-yen:before{content:"\f157"}.fa-yin-yang:before{content:"\f6ad"}.fa-yoast:before,.fa4-yoast:before{content:"\f2b1"}.fa-youtube:before,.fa4-youtube:before{content:"\f167"}.fa-youtube-square:before{content:"\f431"}.fa-zhihu:before{content:"\f63f"}

/*!
 *  Font Awesome 4.7.0 by @davegandy - http://fontawesome.io - @fontawesome
 *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)
 */.fa4-envelope-o:before{content:"\f003"}.fa4-star-o:before{content:"\f006"}.fa4-trash-o:before{content:"\f014"}.fa4-file-o:before{content:"\f016"}.fa4-arrow-circle-o-down:before{content:"\f01a"}.fa4-arrow-circle-o-up:before{content:"\f01b"}.fa4-play-circle-o:before{content:"\f01d"}.fa4-pencil:before{content:"\f040"}.fa4-share-square-o:before{content:"\f045"}.fa4-check-square-o:before{content:"\f046"}.fa4-arrows:before{content:"\f047"}.fa4-times-circle-o:before{content:"\f05c"}.fa4-check-circle-o:before{content:"\f05d"}.fa4-arrows-v:before{content:"\f07d"}.fa4-arrows-h:before{content:"\f07e"}.fa4-thumbs-o-up:before{content:"\f087"}.fa4-thumbs-o-down:before{content:"\f088"}.fa4-heart-o:before{content:"\f08a"}.fa4-sign-out:before{content:"\f08b"}.fa4-external-link:before{content:"\f08e"}.fa4-sign-in:before{content:"\f090"}.fa4-square-o:before{content:"\f096"}.fa4-bookmark-o:before{content:"\f097"}.fa4-dashboard:before,.fa4-tachometer:before{content:"\f0e4"}.fa4-comment-o:before{content:"\f0e5"}.fa4-comments-o:before{content:"\f0e6"}.fa4-exchange:before{content:"\f0ec"}.fa4-cloud-download:before{content:"\f0ed"}.fa4-cloud-upload:before{content:"\f0ee"}.fa4-bell-o:before{content:"\f0a2"}.fa4-cutlery:before{content:"\f0f5"}.fa4-file-text-o:before{content:"\f0f6"}.fa4-building-o:before{content:"\f0f7"}.fa4-circle-o:before{content:"\f10c"}.fa4-mail-reply:before,.fa4-reply:before{content:"\f112"}.fa4-folder-o:before{content:"\f114"}.fa4-folder-open-o:before{content:"\f115"}.fa4-flag-o:before{content:"\f11d"}.fa4-star-half-empty:before,.fa4-star-half-full:before,.fa4-star-half-o:before{content:"\f123"}.fa4-shield:before{content:"\f132"}.fa4-ticket:before{content:"\f145"}.fa4-minus-square-o:before{content:"\f147"}.fa4-level-up:before{content:"\f148"}.fa4-level-down:before{content:"\f149"}.fa4-external-link-square:before{content:"\f14c"}.fa4-youtube-square:before{content:"\f166"}.fa4-youtube-play:before{content:"\f16a"}.fa4-bitbucket-square:before{content:"\f172"}.fa4-long-arrow-down:before{content:"\f175"}.fa4-long-arrow-up:before{content:"\f176"}.fa4-long-arrow-left:before{content:"\f177"}.fa4-long-arrow-right:before{content:"\f178"}.fa4-arrow-circle-o-right:before{content:"\f18e"}.fa4-arrow-circle-o-left:before{content:"\f190"}.fa4-plus-square-o:before{content:"\f196"}.fa4-spoon:before{content:"\f1b1"}.fa4-paper-plane-o:before,.fa4-send-o:before{content:"\f1d9"}.fa4-circle-thin:before{content:"\f1db"}.fa4-bell-slash-o:before{content:"\f1f7"}.fa4-meanpath:before{content:"\f20c"}.fa4-diamond:before{content:"\f219"}.fa4-facebook-official:before{content:"\f230"}.fa4-sticky-note-o:before{content:"\f24a"}.fa4-hourglass-o:before{content:"\f250"}.fa4-map-o:before{content:"\f278"}.fa4-commenting-o:before{content:"\f27b"}.fa4-credit-card-alt:before{content:"\f283"}.fa4-pause-circle-o:before{content:"\f28c"}.fa4-stop-circle-o:before{content:"\f28e"}.fa4-wheelchair-alt:before{content:"\f29b"}.fa4-question-circle-o:before{content:"\f29c"}.fa4-envelope-open-o:before{content:"\f2b7"}.fa4-address-book-o:before{content:"\f2ba"}.fa4-address-card-o:before,.fa4-vcard-o:before{content:"\f2bc"}.fa4-user-circle-o:before{content:"\f2be"}.fa4-user-o:before{content:"\f2c0"}.fa4-drivers-license-o:before,.fa4-id-card-o:before{content:"\f2c3"}.fa4-times-rectangle:before,.fa4-window-close:before{content:"\f2d3"}.fa4-times-rectangle-o:before,.fa4-window-close-o:before{content:"\f2d4"}.charts-icon-geoglobe:before{content:"\0041"}.mms-icon-addcenter{color:#13aa52;color:var(--mms-green2)}.mms-icon-configsvr-down,.mms-icon-configsvr-fatal,.mms-icon-configsvr-shunned,.mms-icon-configsvr-unknown,.mms-icon-deadface,.mms-icon-down,.mms-icon-fatal,.mms-icon-shunned,.mms-icon-unknown{color:#ef4c4c;color:var(--mms-alert-red)}.mms-icon-configsvr-recovering,.mms-icon-configsvr-rollback,.mms-icon-configsvr-startup,.mms-icon-configsvr-startup2,.mms-icon-recovering,.mms-icon-rollback,.mms-icon-startup,.mms-icon-startup2,.mms-icon-surprisedface{color:#ffb618;color:var(--mms-warning-text)}.mms-icon-configsvr-arbiter:after,.mms-icon-configsvr-delayed:after,.mms-icon-configsvr-down:after,.mms-icon-configsvr-fatal:after,.mms-icon-configsvr-hidden:after,.mms-icon-configsvr-nostate:after,.mms-icon-configsvr-primary:after,.mms-icon-configsvr-recovering:after,.mms-icon-configsvr-rollback:after,.mms-icon-configsvr-secondary:after,.mms-icon-configsvr-shunned:after,.mms-icon-configsvr-startup2:after,.mms-icon-configsvr-startup:after,.mms-icon-configsvr-unknown:after,.mms-icon-replica-set-configsvr:after{content:"\E084"}.mms-icon-wrench-exclamation{color:#babdbe;color:var(--mms-gray5)}.mms-icon-replica-set-configsvr{content:"\E144"}.mms-org-icon-activity-feed:before{content:"\0049"}.mms-icon-nostate:before{content:"\E000"}.mms-icon-startup2:before,.mms-icon-startup:before{content:"\E001"}.mms-icon-primary:before{content:"\E004"}.mms-icon-secondary:before{content:"\E005"}.mms-icon-arbiter:before{content:"\E007"}.mms-icon-hidden-s:before{content:"\E009"}.mms-icon-delayed:before{content:"\E011"}.mms-icon-recovering:before{content:"\E013"}.mms-icon-down:before{content:"\E015"}.mms-icon-fatal:before{content:"\E017"}.mms-icon-shunned:before{content:"\E019"}.mms-icon-rollback:before{content:"\E021"}.mms-icon-unknown:before{content:"\E023"}.mms-icon-standalone:before{content:"\E030"}.mms-icon-replica-set:before{content:"\E031"}.mms-icon-replica-set-configsvr:before{content:"\E143"}.mms-icon-cluster:before{content:"\E032"}.mms-icon-mongos:before{content:"\E033"}.mms-icon-configsvr:before{content:"\E034"}.mms-icon-configsvr-down:before{content:"\E045"}.mms-icon-configsvr-shunned:before{content:"\E048"}.mms-icon-configsvr-hidden:before{content:"\E051"}.mms-icon-configsvr-recovering:before{content:"\E054"}.mms-icon-configsvr-delayed:before{content:"\E057"}.mms-icon-configsvr-arbiter:before{content:"\E060"}.mms-icon-configsvr-nostate:before{content:"\E038"}.mms-icon-configsvr-primary:before{content:"\E040"}.mms-icon-configsvr-startup2:before,.mms-icon-configsvr-startup:before{content:"\E063"}.mms-icon-configsvr-secondary:before{content:"\E042"}.mms-icon-configsvr-rollback:before{content:"\E066"}.mms-icon-configsvr-fatal:before{content:"\E069"}.mms-icon-configsvr-unknown:before{content:"\E072"}.mms-icon-addcenter:before{content:"\E083"}.mms-icon-dragtopleft:before{content:"\E200"}.mms-icon-bell:before{content:"\E201"}.mms-icon-list:before{content:"\E202"}.mms-icon-topology:before{content:"\E203"}.mms-icon-cloud:before{content:"\E204"}.mms-icon-lock:before{content:"\E205"}.mms-icon-laptop:before{content:"\E206"}.mms-icon-office:before{content:"\E207"}.mms-icon-floppy:before{content:"\E208"}.mms-icon-support1:before{content:"\E209"}.mms-icon-support2:before{content:"\E210"}.mms-icon-add:before{content:"\E211"}.mms-icon-remove:before{content:"\E212"}.mms-icon-check:before{content:"\E213"}.mms-icon-creditcard:before{content:"\E214"}.mms-icon-graph:before{content:"\E215"}.mms-icon-api:before{content:"\E216"}.mms-icon-2fa:before{content:"\E217"}.mms-icon-smartphone:before{content:"\E218"}.mms-icon-continuous:before{content:"\E219"}.mms-icon-pointintime:before{content:"\E220"}.mms-icon-hammer:before{content:"\E221"}.mms-icon-edit:before{content:"\E222"}.mms-icon-umbrella:before{content:"\E223"}.mms-icon-ellipsis:before{content:"\E224"}.mms-icon-dragleft:before{content:"\E225"}.mms-icon-list-skinny:before{content:"\E226"}.mms-icon-modify:before,.mms-icon-wrench:before{content:"\E227"}.mms-icon-grid:before{content:"\E228"}.mms-icon-ssl:before{content:"\E229"}.mms-icon-auth:before{content:"\E230"}.mms-icon-metrics:before{content:"\E232"}.mms-icon-back:before{content:"\E233"}.mms-icon-surprisedface:before{content:"\E234"}.mms-icon-sadface:before{content:"\E235"}.mms-icon-deadface:before{content:"\E236"}.mms-icon-paused:before{content:"\E239"}.mms-icon-automation:before{content:"\E300"}.mms-icon-backup:before{content:"\E301"}.mms-icon-monitoring:before{content:"\E302"}.mms-icon-group:before{content:"\E303"}.mms-icon-user:before{content:"\E304"}.mms-icon-role:before{content:"\E305"}.mms-icon-leaf:before{content:"\E306"}.mms-icon-databases:before{content:"\E307"}.mms-icon-database:before{content:"\E308"}.mms-icon-servers:before{content:"\E309"}.mms-icon-server:before{content:"\E310"}.mms-icon-dashboard:before{content:"\E311"}.mms-icon-setup:before{content:"\E312"}.mms-icon-settings:before{content:"\E313"}.mms-icon-activity:before{content:"\E314"}.mms-icon-ops-manager:before{content:"\E315"}.mms-icon-logo-amazon:before{content:"\E500"}.mms-icon-logo-ubuntu:before{content:"\E501"}.mms-icon-logo-apple:before{content:"\E502"}.mms-icon-logo-linux:before{content:"\E503"}.mms-icon-logo-windows:before{content:"\E504"}.mms-icon-logo-redhat:before{content:"\E505"}.mms-icon-rocketbot:before{content:"\F006"}.mms-icon-snowbot:before{content:"\F007"}.mms-icon-medium-cloud:before{content:"\F010"}.mms-icon-sadface{color:color(var(--alert-red) tint(25%));color:var(--mms-alert-red-dark)}body{--font-color-primary:var(--black);--font-color-light:var(--gray-base);--heading-color-primary:var(--green-dark2);--opposite-color:var(--black);--font-color-active:var(--green-dark2);--link-color-primary:var(--blue-base);--link-font-weight:500;--background-color-primary:var(--white);--background-color-secondary:var(--gray-light3);--sidenav-bg-color:var(--gray-light3);--sidenav-border-bottom-color:var(--gray-light2);--sidenav-toggle-color:var(--green-dark2);--sidenav-toggle-border-color:var(--gray-light2);--sidenav-item-title:var(--gray-dark3);--sidenav-item-color:var(--black);--sidenav-hover-bg-color:var(--gray-light2);--sidenav-active-bg-color:var(--green-light3);--sidenav-active-color:var(--green-dark2);--sidenav-active-before-color:var(--green-dark1);--select-button-bg-color:var(--white);--select-button-color:var(--black);--select-button-carot:var(--gray-dark2);--tab-color-primary:var(--gray-dark1);--tab-color-secondary:var(--green-dark2);--wayfinding-bg-color:var(--gray-light3);--wayfinding-border-color:var(--gray-light2)}.dark-theme body{--font-color-primary:var(--gray-light2);--font-color-light:var(--gray-light2);--heading-color-primary:var(--gray-light2);--opposite-color:var(--white);--font-color-active:var(--green-light1);--link-color-primary:var(--blue-light1);--link-font-weight:700;--background-color-primary:var(--black);--background-color-secondary:transparent;--sidenav-bg-color:var(--gray-dark4);--sidenav-border-bottom-color:var(--gray-dark2);--sidenav-toggle-color:var(--gray-light1);--sidenav-toggle-border-color:var(--gray-dark2);--sidenav-item-title:var(--gray-light2);--sidenav-item-color:var(--gray-light2);--sidenav-hover-bg-color:var(--gray-dark3);--sidenav-active-bg-color:var(--green-dark3);--sidenav-active-color:var(--white);--sidenav-active-before-color:var(--green-base);--select-button-bg-color:var(--gray-dark4);--select-button-color:var(--gray-light3);--select-button-carot:var(--gray-light1);--tab-color-primary:var(--gray-light1);--tab-color-secondary:var(--gray-light2);--wayfinding-bg-color:var(--gray-dark3);--wayfinding-border-color:var(--gray-dark2);::-webkit-scrollbar{background:var(--gray-dark3)}::-webkit-scrollbar-thumb{background:var(--gray-dark2);background-clip:content-box;border:3px solid transparent;border-radius:9px}}body{background-color:var(--background-color-primary);color:var(--font-color-primary)}.nav-dark{display:none}.dark-theme .nav-dark,.nav-light{display:initial}.dark-theme .nav-light{display:none}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="sitemap" type="application/xml" href="../../sitemap-index.xml"/><script type="text/javascript">!function(e,n){var t=document.createElement("script"),o=null,x="pathway";t.async=!0,t.src='https://'+x+'.mongodb.com/'+(e?x+'-debug.js':''),document.head.append(t),t.addEventListener("load",function(){o=window.pathway.default,(n&&o.configure(n)),o.createProfile("mongodbcom").load(),window.segment=o})}();</script><link rel="preload" href="../../../manual/static/EuclidCircularA-Semibold-WebXL-fa7f7a6de763f3fc0ef6d7bce19a5b97.woff" as="font" type="font/woff" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@100..900&amp;display=swap" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&amp;display=swap" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&amp;display=swap" rel="stylesheet"/><script>
            !function () {
              try {
                var d = document.documentElement.classList;
                var e = JSON.parse(sessionStorage.getItem("mongodb-docs"))?.["dismissible-skills-card-shown"];
                if (e) {
                  Object.keys(e).forEach((s) => d.add(s));
                }
              } catch (e) {
                console.error(e);
              }
            }();
          </script><script>
            !function () {
              try {
                var d = document.documentElement.classList;
                d.remove("light-theme", "dark-theme");
                var h = window.location.href;
                if (h.includes('/openapi/preview')) return;
                var e = JSON.parse(localStorage.getItem("mongodb-docs"))?.["theme"];
                if ("system" === e || (!e)) {
                  var t = "(prefers-color-scheme: dark)",
                    m = window.matchMedia(t);
                  m.media !== t || m.matches ? d.add("dark-theme", "system") : d.add("light-theme", "system");
                } else if (e) {
                  var x = { "light-theme": "light-theme", "dark-theme": "dark-theme" };
                  x[e] && d.add(x[e]);
                }
              } catch (e) {
                console.error(e);
              }
            }();
          </script><a class="dashingAutolink" name="autolink-319"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Drivers%20API%20-%20MongoDB%20Manual%20v5.0%20-%20MongoDB%20Docs"></a><title data-gatsby-head="true">Drivers API - MongoDB Manual v5.0 - MongoDB Docs</title><link class="sl_opaque" rel="alternate" hreflang="en-us" href="index.html" data-gatsby-head="true"/><link class="sl_opaque" rel="alternate" hreflang="zh-cn" href="https://www.mongodb.com/zh-cn/docs/v5.0/core/transactions-in-applications/" data-gatsby-head="true"/><link class="sl_opaque" rel="alternate" hreflang="ko-kr" href="https://www.mongodb.com/ko-kr/docs/v5.0/core/transactions-in-applications/" data-gatsby-head="true"/><link class="sl_opaque" rel="alternate" hreflang="pt-br" href="https://www.mongodb.com/pt-br/docs/v5.0/core/transactions-in-applications/" data-gatsby-head="true"/><link class="sl_opaque" rel="alternate" hreflang="ja-jp" href="https://www.mongodb.com/ja-jp/docs/v5.0/core/transactions-in-applications/" data-gatsby-head="true"/><link class="sl_opaque" rel="alternate" hreflang="x-default" href="index.html" data-gatsby-head="true"/><link data-testid="canonical" id="canonical" rel="canonical" href="index.html" data-gatsby-head="true"/><script class="structured_data" type="application/ld+json" data-gatsby-head="true">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Docs Home","item":"https://www.mongodb.com/docs/"},{"@type":"ListItem","position":2,"name":"MongoDB Manual","item":"https://www.mongodb.com/docs/v5.0/"},{"@type":"ListItem","position":3,"name":"Transactions","item":"https://www.mongodb.com/docs/v5.0/core/transactions/"}]}</script><script class="structured_data" id="tech-article-sd" type="application/ld+json" data-gatsby-head="true">{"@context":"https://schema.org","@type":"TechArticle","author":{"@type":"Organization","name":"MongoDB Documentation Team"},"headline":"Drivers API","mainEntity":[]}</script></head><body><div id="___gatsby"><style data-emotion="leafygreen-ui 1naewga d2btug 1relhzy 1ias88k zwxrdj" nonce="4.1.1">@-webkit-keyframes animation-1naewga{0%{-webkit-background-position:-400px;background-position:-400px;}100%{-webkit-background-position:800px;background-position:800px;}}@keyframes animation-1naewga{0%{-webkit-background-position:-400px;background-position:-400px;}100%{-webkit-background-position:800px;background-position:800px;}}@-webkit-keyframes animation-d2btug{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}@keyframes animation-d2btug{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}@-webkit-keyframes animation-1relhzy{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}@keyframes animation-1relhzy{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}.lg-highlight-hljs-light .lg-highlight-keyword,.lg-highlight-hljs-light .lg-highlight-keyword.lg-highlight-function,.lg-highlight-hljs-light .lg-highlight-keyword.lg-highlight-class,.lg-highlight-hljs-light .lg-highlight-selector-tag,.lg-highlight-hljs-light .lg-highlight-selector-attr,.lg-highlight-hljs-light .lg-highlight-selector-pseudo,.lg-highlight-hljs-light .lg-highlight-selector-id,.lg-highlight-hljs-light .lg-highlight-selector-class{color:#CC3887;}.lg-highlight-hljs-light .lg-highlight-regexp,.lg-highlight-hljs-light .lg-highlight-number,.lg-highlight-hljs-light .lg-highlight-literal,.lg-highlight-hljs-light .lg-highlight-function.lg-highlight-title{color:#016ee9;}.lg-highlight-hljs-light .lg-highlight-quote,.lg-highlight-hljs-light .lg-highlight-section,.lg-highlight-hljs-light .lg-highlight-name{color:#007ab8;}.lg-highlight-hljs-light .lg-highlight-string,.lg-highlight-hljs-light .lg-highlight-addition{color:#12824D;}.lg-highlight-hljs-light .lg-highlight-meta,.lg-highlight-hljs-light .lg-highlight-meta-string{color:#956d00;}.lg-highlight-hljs-light .lg-highlight-variable,.lg-highlight-hljs-light .lg-highlight-deletion,.lg-highlight-hljs-light .lg-highlight-symbol,.lg-highlight-hljs-light .lg-highlight-bullet,.lg-highlight-hljs-light .lg-highlight-meta,.lg-highlight-hljs-light .lg-highlight-link,.lg-highlight-hljs-light .lg-highlight-attr,.lg-highlight-hljs-light .lg-highlight-attribute,.lg-highlight-hljs-light .lg-highlight-language,.lg-highlight-hljs-light .lg-highlight-template-variable,.lg-highlight-hljs-light .lg-highlight-built_in,.lg-highlight-hljs-light .lg-highlight-type,.lg-highlight-hljs-light .lg-highlight-params{color:#D83713;}.lg-highlight-hljs-light .lg-highlight-title,.lg-highlight-hljs-light .lg-highlight-class.lg-highlight-title{color:#001E2B;}.lg-highlight-hljs-light .lg-highlight-doctag,.lg-highlight-hljs-light .lg-highlight-formula{color:#001E2B;}.lg-highlight-hljs-light .lg-highlight-comment{color:#3D4F58;font-style:italic;}.lg-highlight-hljs-light .lg-highlight-string{font-weight:600;}.lg-highlight-hljs-light .lg-highlight-emphasis{font-style:italic;}.lg-highlight-hljs-light .lg-highlight-strong{font-weight:700;}.lg-highlight-hljs-dark .lg-highlight-keyword,.lg-highlight-hljs-dark .lg-highlight-keyword.lg-highlight-function,.lg-highlight-hljs-dark .lg-highlight-keyword.lg-highlight-class,.lg-highlight-hljs-dark .lg-highlight-selector-tag,.lg-highlight-hljs-dark .lg-highlight-selector-attr,.lg-highlight-hljs-dark .lg-highlight-selector-pseudo,.lg-highlight-hljs-dark .lg-highlight-selector-id,.lg-highlight-hljs-dark .lg-highlight-selector-class{color:#FF7DC3;}.lg-highlight-hljs-dark .lg-highlight-regexp,.lg-highlight-hljs-dark .lg-highlight-number,.lg-highlight-hljs-dark .lg-highlight-literal,.lg-highlight-hljs-dark .lg-highlight-function.lg-highlight-title{color:#2dc4ff;}.lg-highlight-hljs-dark .lg-highlight-quote,.lg-highlight-hljs-dark .lg-highlight-section,.lg-highlight-hljs-dark .lg-highlight-name{color:#a5e3ff;}.lg-highlight-hljs-dark .lg-highlight-string,.lg-highlight-hljs-dark .lg-highlight-addition{color:#35DE7B;}.lg-highlight-hljs-dark .lg-highlight-meta,.lg-highlight-hljs-dark .lg-highlight-meta-string{color:#EDB210;}.lg-highlight-hljs-dark .lg-highlight-variable,.lg-highlight-hljs-dark .lg-highlight-deletion,.lg-highlight-hljs-dark .lg-highlight-symbol,.lg-highlight-hljs-dark .lg-highlight-bullet,.lg-highlight-hljs-dark .lg-highlight-meta,.lg-highlight-hljs-dark .lg-highlight-link,.lg-highlight-hljs-dark .lg-highlight-attr,.lg-highlight-hljs-dark .lg-highlight-attribute,.lg-highlight-hljs-dark .lg-highlight-language,.lg-highlight-hljs-dark .lg-highlight-template-variable,.lg-highlight-hljs-dark .lg-highlight-built_in,.lg-highlight-hljs-dark .lg-highlight-type,.lg-highlight-hljs-dark .lg-highlight-params{color:#FF6F44;}.lg-highlight-hljs-dark .lg-highlight-title,.lg-highlight-hljs-dark .lg-highlight-class.lg-highlight-title{color:#F9FBFA;}.lg-highlight-hljs-dark .lg-highlight-doctag,.lg-highlight-hljs-dark .lg-highlight-formula{color:#F9FBFA;}.lg-highlight-hljs-dark .lg-highlight-comment{color:#C1C7C6;font-style:italic;}.lg-highlight-hljs-dark .lg-highlight-string{font-weight:600;}.lg-highlight-hljs-dark .lg-highlight-emphasis{font-style:italic;}.lg-highlight-hljs-dark .lg-highlight-strong{font-weight:700;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css-global nysrcr">html[lang^=zh] #template-container *:not(:is(code, code *)),html[lang^=zh] #docs-side-nav-container *{font-family:Noto Sans SC;}html[lang^=zh] em,html[lang^=zh] h1 .guilabel,html[lang^=zh] h2 .guilabel,html[lang^=zh] h3 .guilabel,html[lang^=zh] h4 .guilabel,html[lang^=zh] h5 .guilabel,html[lang^=zh] h6 .guilabel{font-style:normal;font-weight:bold;}html[lang^=ko] #template-container *:not(:is(code, code *)),html[lang^=ko] #docs-side-nav-container *{font-family:Noto Sans KR;}html[lang^=ko] em,html[lang^=ko] h1 .guilabel,html[lang^=ko] h2 .guilabel,html[lang^=ko] h3 .guilabel,html[lang^=ko] h4 .guilabel,html[lang^=ko] h5 .guilabel,html[lang^=ko] h6 .guilabel{font-style:normal;font-weight:bold;}html[lang^=ja] #template-container *:not(:is(code, code *)),html[lang^=ja] #docs-side-nav-container *{font-family:Noto Sans JP;}html[lang^=ja] em,html[lang^=ja] h1 .guilabel,html[lang^=ja] h2 .guilabel,html[lang^=ja] h3 .guilabel,html[lang^=ja] h4 .guilabel,html[lang^=ja] h5 .guilabel,html[lang^=ja] h6 .guilabel{font-style:normal;font-weight:bold;}body{font-size:16px;line-height:24px;}.hidden{display:inherit!important;height:0;margin:0;padding:0;visibility:hidden!important;width:0;}.header-buffer{scroll-margin-top:85px;}img.hide-medium-and-up,img.show-medium-and-up{max-width:100%;}.hide-medium-and-up{display:none!important;}.show-medium-and-up{display:block!important;}@media (max-width: 767px){.hide-medium-and-up{display:block!important;}.show-medium-and-up{display:none!important;}}footer a:hover{color:currentColor;}div[id^=modal-]{z-index:2000!important;}</style><style data-emotion="css 1mimta0">.css-1mimta0{display:grid;grid-template-areas:'header header' 'sidenav contents';grid-template-columns:auto 1fr;grid-template-rows:auto 1fr;overflow:clip;}</style><div class="css-1mimta0 edbeiqm1"><style data-emotion="css kjsomo">.css-kjsomo{grid-area:header;top:0;margin-top:0px;z-index:1000;}.css-kjsomo li>div{max-width:unset;top:unset;}</style><header class="css-kjsomo eie5rvh0"></header><style data-emotion="css-global ref7eh"></style><style data-emotion="css 13rzzmn">.css-13rzzmn{grid-area:sidenav;position:-webkit-sticky;position:sticky;z-index:900;top:0px;height:calc(
      100vh + 60px - 155px +
        min(calc(155px - 60px), 0px)
    );}@media only screen and (max-width: 1024px){.css-13rzzmn{top:max(min(calc(116px - 0px)), 60px);height:calc(100vh - max(min(calc(116px - 0px)), 60px));z-index:799;}}@media only screen and (max-width: 480px){.css-13rzzmn{top:max(min(calc(116px - 0px)), 60px);height:calc(100vh - max(min(calc(116px - 0px)), 60px));}}.css-13rzzmn nav{background-color:var(--sidenav-bg-color);}.css-13rzzmn a[class*='lg-ui-side-nav-item']{color:var(--sidenav-item-color);}.css-13rzzmn a[class*='lg-ui-side-nav-item']:not([aria-current='page']):hover{background-color:var(--sidenav-hover-bg-color);}.css-13rzzmn [data-testid='side-nav-collapse-toggle']{background-color:var(--select-button-bg-color);color:var(--sidenav-toggle-color);border-color:var(--sidenav-toggle-border-color);}.css-13rzzmn a[aria-current='page']{background-color:var(--sidenav-active-bg-color);color:var(--sidenav-active-color);}.css-13rzzmn a[aria-current='page']:before{background-color:var(--sidenav-active-before-color);}</style><div id="docs-side-nav-container" class="css-13rzzmn e11qlsie5"><style data-emotion="leafygreen-ui 9h1ag5" nonce="4.1.1">.leafygreen-ui-9h1ag5{position:relative;-webkit-transition:width 200ms ease-in-out;transition:width 200ms ease-in-out;width:268px;height:100%;}@media (prefers-reduced-motion: reduce){.leafygreen-ui-9h1ag5{-webkit-transition:none;transition:none;}}@media only screen and (max-width: 1024px){.leafygreen-ui-9h1ag5{display:none;}.leafygreen-ui-9h1ag5 button[data-testid="side-nav-collapse-toggle"]{display:none;}}@media only screen and (max-width: 1024px){.leafygreen-ui-9h1ag5{position:absolute;}}.leafygreen-ui-9h1ag5>div>nav>div>ul{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-top:0px;}.leafygreen-ui-9h1ag5 p{letter-spacing:unset;color:#001E2B;}</style><div data-testid="side-nav-container" class="lg-ui-side-nav-0000 leafygreen-ui-9h1ag5"><style data-emotion="leafygreen-ui 1morqrl" nonce="4.1.1">.leafygreen-ui-1morqrl{position:absolute;top:0;bottom:0;left:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="leafygreen-ui-1morqrl"><style data-emotion="leafygreen-ui 846fxk" nonce="4.1.1">.leafygreen-ui-846fxk{position:relative;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;z-index:0;-webkit-transition:200ms ease-in-out;transition:200ms ease-in-out;transition-property:box-shadow,border-color,width;background-color:#F9FBFA;width:268px;}@media (prefers-reduced-motion: reduce){.leafygreen-ui-846fxk{transition-property:box-shadow,border-color;}}</style><nav id="side-nav-undefined" class="leafygreen-ui-846fxk" aria-label="Side navigation"><style data-emotion="leafygreen-ui 1nmawjt" nonce="4.1.1">.leafygreen-ui-1nmawjt{position:absolute;left:0;right:0;top:0;bottom:0;overflow:hidden;-webkit-transition:200ms ease-in-out;transition:200ms ease-in-out;transition-property:opacity,transform;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);opacity:1;}@media (prefers-reduced-motion: reduce){.leafygreen-ui-1nmawjt{-webkit-transition:opacity 200ms ease-in-out;transition:opacity 200ms ease-in-out;}}</style><div class="leafygreen-ui-1nmawjt"><style data-emotion="leafygreen-ui muxex8" nonce="4.1.1">.leafygreen-ui-muxex8{margin-block-start:0px;margin-block-end:0px;-webkit-padding-start:0px;padding-inline-start:0px;padding:0;list-style-type:none;position:absolute;left:0;right:0;top:0;bottom:0;padding-top:16px;padding-bottom:16px;overflow-x:hidden;overflow-y:auto;width:268px;}</style><ul class="leafygreen-ui-muxex8"><style data-emotion="css 1w3m5bf">.css-1w3m5bf{background-color:var(--sidenav-bg-color);position:relative;z-index:1;}</style><div class="css-1w3m5bf e11qlsie1"><style data-emotion="css ytokg">.css-ytokg{height:15px;}</style><div class="css-ytokg e11qlsie2"></div><style data-emotion="leafygreen-ui 1orxpag" nonce="4.1.1">.leafygreen-ui-1orxpag{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="leafygreen-ui-1orxpag"><style data-emotion="leafygreen-ui tw3z02" nonce="4.1.1">.leafygreen-ui-tw3z02{width:100%;list-style:none;}</style><li class="leafygreen-ui-tw3z02"><style data-emotion="leafygreen-ui fr1ogz" nonce="4.1.1">.leafygreen-ui-fr1ogz{font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;text-decoration-color:transparent;cursor:pointer;font-size:inherit;line-height:inherit;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:none;border:none;padding:0;font-size:16px;line-height:28px;color:#016BF8;font-weight:400;display:inline;color:var(--link-color-primary);font-weight:var(--link-font-weight);margin:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:none;border:none;cursor:pointer;position:relative;width:100%;min-height:32px;padding:6px 16px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:400;text-align:left;-webkit-text-decoration:none;text-decoration:none;text-transform:capitalize;-webkit-transition:background-color 100ms ease-in-out;transition:background-color 100ms ease-in-out;color:#001E2B;background-color:rgba(249,251,250,0);font-size:16px;line-height:28px;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;color:var(--sidenav-item-title);font-size:13px;font-weight:bold;line-height:20px;text-transform:none;padding-left:24px;padding-right:24px;padding-top:8px;padding-bottom:8px;}.leafygreen-ui-fr1ogz:hover,.leafygreen-ui-fr1ogz:focus{-webkit-text-decoration:underline;text-decoration:underline;-webkit-transition:text-decoration 150ms ease-in-out;transition:text-decoration 150ms ease-in-out;text-underline-offset:4px;text-decoration-thickness:2px;}.leafygreen-ui-fr1ogz:focus{outline:none;}.leafygreen-ui-fr1ogz:hover{text-decoration-color:#E8EDEB;}.leafygreen-ui-fr1ogz:focus{text-decoration-color:#016BF8;}.leafygreen-ui-fr1ogz >span>code,.leafygreen-ui-fr1ogz >code{color:var(--link-color-primary);font-weight:var(--link-font-weight);}.leafygreen-ui-fr1ogz:hover{background-color:#E8EDEB;-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-fr1ogz:focus{-webkit-text-decoration:none;text-decoration:none;outline:none;}.leafygreen-ui-fr1ogz::-moz-focus-inner{border:0;}.leafygreen-ui-fr1ogz:before{content:'';position:absolute;background-color:transparent;left:0;top:6px;bottom:6px;width:4px;border-radius:0 6px 6px 0;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;-webkit-transform:scaleY(0.3);-moz-transform:scaleY(0.3);-ms-transform:scaleY(0.3);transform:scaleY(0.3);}.leafygreen-ui-fr1ogz:hover{background-color:#E8EDEB;}.leafygreen-ui-fr1ogz:focus{-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-fr1ogz:focus:before{-webkit-transform:scaleY(1);-moz-transform:scaleY(1);-ms-transform:scaleY(1);transform:scaleY(1);}.leafygreen-ui-fr1ogz:focus{color:#083C90;background-color:#E1F7FF;}.leafygreen-ui-fr1ogz:focus:before{background-color:#016BF8;}.leafygreen-ui-fr1ogz:hover{background-color:var(--sidenav-hover-bg-color);}.leafygreen-ui-fr1ogz:hover:after,.leafygreen-ui-fr1ogz:hover span:after{display:none;}.leafygreen-ui-fr1ogz span{color:#3D4F58;font-weight:600;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:6px;}.leafygreen-ui-fr1ogz span svg{height:17px;}.dark-theme .leafygreen-ui-fr1ogz span{color:#E8EDEB;}</style><a class="lg-ui-0001 lg-ui-side-nav-item-0000 leafygreen-ui-fr1ogz" target="_self" href="https://www.mongodb.com/docs/" aria-current="false" aria-disabled="false"><span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="" role="img" aria-label="Home Icon"><path fill="currentColor" fill-rule="evenodd" d="M7.687 1.751a.5.5 0 0 1 .626 0l6.433 5.164a.5.5 0 0 1 .069.713l-.644.761a.5.5 0 0 1-.697.065L8.316 4.257a.5.5 0 0 0-.632 0L2.526 8.454a.5.5 0 0 1-.697-.065l-.644-.76a.5.5 0 0 1 .07-.714l6.432-5.164Z" clip-rule="evenodd"></path><path fill="currentColor" d="M7.688 5.25a.5.5 0 0 1 .624 0l4.5 3.6a.5.5 0 0 1 .188.39v4.26a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V9.24a.5.5 0 0 1 .188-.39l4.5-3.6Z"></path></svg>Docs Home</span></a></li></div><style data-emotion="css 1tvv67d">.css-1tvv67d{border:unset;border-bottom:1px solid var(--sidenav-border-bottom-color);margin:8px 0;width:100%;}</style><hr class="css-1tvv67d e11qlsie3"/></div><li class="leafygreen-ui-tw3z02"><style data-emotion="leafygreen-ui 18nkpal" nonce="4.1.1">.leafygreen-ui-18nkpal{margin:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:none;border:none;cursor:pointer;position:relative;width:100%;min-height:32px;padding:6px 16px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:400;text-align:left;-webkit-text-decoration:none;text-decoration:none;text-transform:capitalize;-webkit-transition:background-color 100ms ease-in-out;transition:background-color 100ms ease-in-out;color:#001E2B;background-color:rgba(249,251,250,0);font-size:16px;line-height:28px;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;color:var(--sidenav-item-title);font-size:13px;font-weight:bold;line-height:20px;text-transform:none;padding-left:24px;padding-right:24px;padding-top:8px;padding-bottom:8px;}.leafygreen-ui-18nkpal:hover{background-color:#E8EDEB;-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-18nkpal:focus{-webkit-text-decoration:none;text-decoration:none;outline:none;}.leafygreen-ui-18nkpal::-moz-focus-inner{border:0;}.leafygreen-ui-18nkpal:before{content:'';position:absolute;background-color:transparent;left:0;top:6px;bottom:6px;width:4px;border-radius:0 6px 6px 0;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;-webkit-transform:scaleY(0.3);-moz-transform:scaleY(0.3);-ms-transform:scaleY(0.3);transform:scaleY(0.3);}.leafygreen-ui-18nkpal:hover{background-color:#E8EDEB;}.leafygreen-ui-18nkpal:focus{-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-18nkpal:focus:before{-webkit-transform:scaleY(1);-moz-transform:scaleY(1);-ms-transform:scaleY(1);transform:scaleY(1);}.leafygreen-ui-18nkpal:focus{color:#083C90;background-color:#E1F7FF;}.leafygreen-ui-18nkpal:focus:before{background-color:#016BF8;}.leafygreen-ui-18nkpal:hover{background-color:var(--sidenav-hover-bg-color);}.leafygreen-ui-18nkpal:hover:after,.leafygreen-ui-18nkpal:hover span:after{display:none;}</style><div class="lg-ui-side-nav-item-0000 leafygreen-ui-18nkpal" aria-current="false" aria-disabled="false"><span>MongoDB Manual</span><style data-emotion="leafygreen-ui 1l25m85" nonce="4.1.1">.leafygreen-ui-1l25m85{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;padding:0;margin:0;background-color:transparent;border:1px solid transparent;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-transition:all 150ms ease-in-out;transition:all 150ms ease-in-out;position:relative;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;z-index:0;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;border-radius:6px;background-color:#F9FBFA;border-color:#889397;color:#001E2B;font-size:13px;line-height:20px;font-weight:500;height:28px;width:32px;height:22px;}.leafygreen-ui-1l25m85:focus-visible,.leafygreen-ui-1l25m85[data-focus="true"]{outline:none;}.leafygreen-ui-1l25m85:active,.leafygreen-ui-1l25m85[data-active="true"],.leafygreen-ui-1l25m85:focus,.leafygreen-ui-1l25m85:hover{-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-1l25m85:focus-visible,.leafygreen-ui-1l25m85[data-focus="true"]{color:#001E2B;}.leafygreen-ui-1l25m85:hover,.leafygreen-ui-1l25m85[data-hover="true"],.leafygreen-ui-1l25m85:active,.leafygreen-ui-1l25m85[data-active="true"]{color:#001E2B;background-color:#FFFFFF;box-shadow:0 0 0 3px #E8EDEB;}.leafygreen-ui-1l25m85:focus-visible,.leafygreen-ui-1l25m85[data-focus="true"]{background-color:#FFFFFF;box-shadow:0 0 0 2px #FFFFFF,0 0 0 4px #0498EC;}.dark-theme .leafygreen-ui-1l25m85{color:var(--white);background-color:var(--gray-dark2);}@media only screen and (max-width: 1024px){.leafygreen-ui-1l25m85{display:none;}}</style><button data-lgid="lg-button" type="button" class="lg-ui-button-0000 leafygreen-ui-1l25m85" aria-disabled="false" aria-label="Download Offline Docs"><style data-emotion="leafygreen-ui v038xi" nonce="4.1.1">.leafygreen-ui-v038xi{overflow:hidden;position:absolute;top:0;left:0;right:0;bottom:0;border-radius:5px;}</style><div class="leafygreen-ui-v038xi"></div><style data-emotion="leafygreen-ui 16tr4y" nonce="4.1.1">.leafygreen-ui-16tr4y{display:grid;grid-auto-flow:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;width:100%;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-transition:all 150 ease-in-out;transition:all 150 ease-in-out;padding:0 11px;gap:6px;}</style><div class="leafygreen-ui-16tr4y"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 16 16" class="" role="img" aria-label="Download Icon"><path fill="currentColor" fill-rule="evenodd" d="M9.524 2.575v5.557h1.712c.706 0 1.033.783.5 1.196l-3.237 2.506a.832.832 0 0 1-.998 0L4.265 9.328c-.534-.413-.207-1.196.499-1.196h1.611V2.575a1.575 1.575 0 0 1 3.15 0ZM2.5 11h1.8l2.405 1.862a2.132 2.132 0 0 0 2.59 0L11.7 11h1.8a1.5 1.5 0 0 1 0 3h-11a1.5 1.5 0 0 1 0-3Z" clip-rule="evenodd"></path></svg></div></button></div></li><style data-emotion="leafygreen-ui 1cq17os" nonce="4.1.1">.leafygreen-ui-1cq17os{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:8px 24px 8px 24px;}.leafygreen-ui-1cq17os >label+button,.leafygreen-ui-1cq17os >p+button{margin-top:3px;}.leafygreen-ui-1cq17os button{z-index:2;background-color:var(--select-button-bg-color);color:var(--select-button-color);}.leafygreen-ui-1cq17os button div:last-child svg{color:var(--select-button-carot);}.dark-theme .leafygreen-ui-1cq17os button:hover{background-color:var(--gray-dark4);color:var(--gray-light3);border-color:var(--gray-base);box-shadow:var(--gray-dark2) 0px 0px 0px 3px;}@media only screen and (max-width: 1024px){.leafygreen-ui-1cq17os div,.leafygreen-ui-1cq17os span{font-size:13px;}}.leafygreen-ui-1cq17os>button{background-color:#E8EDEB!important;color:#889397!important;}</style><div class="leafygreen-ui-1cq17os"><style data-emotion="leafygreen-ui 8dojfw" nonce="4.1.1">.leafygreen-ui-8dojfw{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;padding:0;margin:0;background-color:transparent;border:1px solid transparent;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-transition:all 150ms ease-in-out;transition:all 150ms ease-in-out;position:relative;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;z-index:0;font-family:'Euclid Circular A',Akzidenz,'Helvetica Neue',Helvetica,Arial,sans-serif;border-radius:6px;background-color:#F9FBFA;border-color:#889397;color:#001E2B;font-size:13px;line-height:20px;font-weight:500;height:36px;font-weight:400;background-color:#FFFFFF;color:#5C6C75;width:100%;font-size:13px;}.leafygreen-ui-8dojfw:focus{outline:none;}.leafygreen-ui-8dojfw[disabled],.leafygreen-ui-8dojfw:disabled{pointer-events:none;}.leafygreen-ui-8dojfw:active,.leafygreen-ui-8dojfw:focus,.leafygreen-ui-8dojfw:hover{-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-8dojfw:hover,.leafygreen-ui-8dojfw:active{color:#001E2B;background-color:#FFFFFF;box-shadow:0 0 0 3px #E8EDEB;}.leafygreen-ui-8dojfw,.leafygreen-ui-8dojfw:hover{background-color:#E8EDEB;border-color:#C1C7C6;color:#889397;cursor:not-allowed;}.leafygreen-ui-8dojfw:focus{box-shadow:0 0 0 2px #FFFFFF,0 0 0 4px #0498EC;}.leafygreen-ui-8dojfw >*:last-child{grid-template-columns:1fr 16px;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;}.leafygreen-ui-8dojfw >*:last-child >svg{justify-self:right;width:16px;height:16px;}.leafygreen-ui-8dojfw >*:last-child >svg{color:#3D4F58;}.leafygreen-ui-8dojfw >*:last-child{padding:0 4px 0 12px;}.leafygreen-ui-8dojfw:focus{box-shadow:0 0 0 3px #0498EC;border-color:rgba(255, 255, 255, 0);}.leafygreen-ui-8dojfw:disabled{cursor:not-allowed;pointer-events:unset;box-shadow:unset;}.leafygreen-ui-8dojfw:disabled:active{pointer-events:none;}.leafygreen-ui-8dojfw:disabled{background-color:#E8EDEB;color:#889397;}.leafygreen-ui-8dojfw:disabled >*:last-child >svg{color:#889397;}@media only screen and (max-width: 1024px){.leafygreen-ui-8dojfw{height:36px;font-size:16px;}}</style><button type="button" class="leafygreen-ui-8dojfw" disabled="" aria-disabled="true" data-leafygreen-ui="button" role="button" id="select-null" aria-labelledby="View a different version of documentation." aria-controls="select-null-menu" aria-expanded="false" aria-describedby="select-null-description" aria-invalid="false" value="" data-testid="leafygreen-ui-select-menubutton"><div class="leafygreen-ui-v038xi"></div><style data-emotion="leafygreen-ui 1qmzz4y" nonce="4.1.1">.leafygreen-ui-1qmzz4y{display:grid;grid-auto-flow:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;width:100%;pointer-events:none;position:relative;z-index:0;padding:0 11px;gap:6px;}</style><div class="leafygreen-ui-1qmzz4y"><style data-emotion="leafygreen-ui obh8q1" nonce="4.1.1">.leafygreen-ui-obh8q1{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;gap:4px;overflow:hidden;}</style><div class="leafygreen-ui-obh8q1"><style data-emotion="leafygreen-ui 17aj16e" nonce="4.1.1">.leafygreen-ui-17aj16e{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:100%;}</style><div class="leafygreen-ui-17aj16e">Select a version</div></div><style data-emotion="leafygreen-ui 4dp7tf" nonce="4.1.1">.leafygreen-ui-4dp7tf{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:#889397;height:16px;width:16px;justify-self:left;}</style><svg class="leafygreen-ui-4dp7tf" height="16" width="16" role="presentation" aria-hidden="true" alt="" viewBox="0 0 16 16"><path d="M8.67903 10.7962C8.45271 11.0679 8.04729 11.0679 7.82097 10.7962L4.63962 6.97649C4.3213 6.59428 4.5824 6 5.06866 6L11.4313 6C11.9176 6 12.1787 6.59428 11.8604 6.97649L8.67903 10.7962Z" fill="currentColor"></path></svg></div></button></div><li class="leafygreen-ui-tw3z02"><style data-emotion="leafygreen-ui x6j7x4" nonce="4.1.1">.leafygreen-ui-x6j7x4{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;position:relative;-webkit-text-decoration:none;text-decoration:none;text-decoration-color:transparent;line-height:13px;color:var(--link-color-primary);font-weight:var(--link-font-weight);margin:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:none;border:none;cursor:pointer;position:relative;width:100%;min-height:32px;padding:6px 16px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:400;text-align:left;-webkit-text-decoration:none;text-decoration:none;text-transform:capitalize;-webkit-transition:background-color 100ms ease-in-out;transition:background-color 100ms ease-in-out;color:#001E2B;background-color:rgba(249,251,250,0);font-size:16px;line-height:28px;position:relative;padding-bottom:8px;padding-left:calc(4px + (1 * 16px));padding-right:24px;padding-top:8px;-webkit-align-items:flex-start!important;-webkit-box-align:flex-start!important;-ms-flex-align:flex-start!important;align-items:flex-start!important;font-size:13px;text-transform:none;line-height:20px!important;}.leafygreen-ui-x6j7x4 >span>code,.leafygreen-ui-x6j7x4 >code{color:var(--link-color-primary);font-weight:var(--link-font-weight);}.leafygreen-ui-x6j7x4:focus,.leafygreen-ui-x6j7x4:hover{text-decoration-line:underline;-webkit-transition:text-decoration 150ms ease-in-out;transition:text-decoration 150ms ease-in-out;text-underline-offset:4px;text-decoration-thickness:2px;}.leafygreen-ui-x6j7x4:focus{text-decoration-color:#016BF8;outline:none;}.leafygreen-ui-x6j7x4:hover{text-decoration-color:#E8EDEB;}.leafygreen-ui-x6j7x4:hover{background-color:#E8EDEB;-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-x6j7x4:focus{-webkit-text-decoration:none;text-decoration:none;outline:none;}.leafygreen-ui-x6j7x4::-moz-focus-inner{border:0;}.leafygreen-ui-x6j7x4:before{content:'';position:absolute;background-color:transparent;left:0;top:6px;bottom:6px;width:4px;border-radius:0 6px 6px 0;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;-webkit-transform:scaleY(0.3);-moz-transform:scaleY(0.3);-ms-transform:scaleY(0.3);transform:scaleY(0.3);}.leafygreen-ui-x6j7x4:hover{background-color:#E8EDEB;}.leafygreen-ui-x6j7x4:focus{-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-x6j7x4:focus:before{-webkit-transform:scaleY(1);-moz-transform:scaleY(1);-ms-transform:scaleY(1);transform:scaleY(1);}.leafygreen-ui-x6j7x4:focus{color:#083C90;background-color:#E1F7FF;}.leafygreen-ui-x6j7x4:focus:before{background-color:#016BF8;}.leafygreen-ui-x6j7x4:hover:after,.leafygreen-ui-x6j7x4:hover span:after{display:none;}.leafygreen-ui-x6j7x4 span{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-x6j7x4" data-position="tocnode" aria-disabled="false" href="../../introduction/index.html"><style data-emotion="leafygreen-ui jtiid2" nonce="4.1.1">.leafygreen-ui-jtiid2{color:#889397;margin-top:3px;margin-right:5px;min-width:16px;}</style><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-jtiid2" role="img" aria-label="Caret Right Icon"><path fill="currentColor" d="M10.796 7.321a.554.554 0 0 1 0 .858l-3.82 3.181c-.382.319-.976.058-.976-.429V4.57c0-.487.594-.748.976-.43l3.82 3.182Z"></path></svg><style data-emotion="css 19zduqt">.css-19zduqt{margin-left:0px;scroll-margin-bottom:128px;overflow:hidden;text-overflow:ellipsis;}</style><div class="css-19zduqt eujnmhf0">Introduction</div></a></li><li class="leafygreen-ui-tw3z02"><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-x6j7x4" data-position="tocnode" aria-disabled="false" href="../../crud/index.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-jtiid2" role="img" aria-label="Caret Right Icon"><path fill="currentColor" d="M10.796 7.321a.554.554 0 0 1 0 .858l-3.82 3.181c-.382.319-.976.058-.976-.429V4.57c0-.487.594-.748.976-.43l3.82 3.182Z"></path></svg><div class="css-19zduqt eujnmhf0">CRUD Operations</div></a></li><li class="leafygreen-ui-tw3z02"><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-x6j7x4" data-position="tocnode" aria-disabled="false" href="../../aggregation/index.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-jtiid2" role="img" aria-label="Caret Right Icon"><path fill="currentColor" d="M10.796 7.321a.554.554 0 0 1 0 .858l-3.82 3.181c-.382.319-.976.058-.976-.429V4.57c0-.487.594-.748.976-.43l3.82 3.182Z"></path></svg><div class="css-19zduqt eujnmhf0">Aggregation Operations</div></a></li><li class="leafygreen-ui-tw3z02"><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-x6j7x4" data-position="tocnode" aria-disabled="false" href="../../indexes/index.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-jtiid2" role="img" aria-label="Caret Right Icon"><path fill="currentColor" d="M10.796 7.321a.554.554 0 0 1 0 .858l-3.82 3.181c-.382.319-.976.058-.976-.429V4.57c0-.487.594-.748.976-.43l3.82 3.182Z"></path></svg><div class="css-19zduqt eujnmhf0">Indexes</div></a></li><li class="leafygreen-ui-tw3z02"><style data-emotion="leafygreen-ui 1ym0z5d" nonce="4.1.1">.leafygreen-ui-1ym0z5d{font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;text-decoration-color:transparent;cursor:pointer;font-size:inherit;line-height:inherit;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:none;border:none;padding:0;font-size:16px;line-height:28px;color:#016BF8;font-weight:400;display:inline;color:var(--link-color-primary);font-weight:var(--link-font-weight);margin:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:none;border:none;cursor:pointer;position:relative;width:100%;min-height:32px;padding:6px 16px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:400;text-align:left;-webkit-text-decoration:none;text-decoration:none;text-transform:capitalize;-webkit-transition:background-color 100ms ease-in-out;transition:background-color 100ms ease-in-out;color:#001E2B;background-color:rgba(249,251,250,0);font-size:16px;line-height:28px;position:relative;padding-bottom:8px;padding-left:calc(4px + (1 * 16px));padding-right:24px;padding-top:8px;-webkit-align-items:flex-start!important;-webkit-box-align:flex-start!important;-ms-flex-align:flex-start!important;align-items:flex-start!important;font-size:13px;text-transform:none;line-height:20px!important;}.leafygreen-ui-1ym0z5d:hover,.leafygreen-ui-1ym0z5d:focus{-webkit-text-decoration:underline;text-decoration:underline;-webkit-transition:text-decoration 150ms ease-in-out;transition:text-decoration 150ms ease-in-out;text-underline-offset:4px;text-decoration-thickness:2px;}.leafygreen-ui-1ym0z5d:focus{outline:none;}.leafygreen-ui-1ym0z5d:hover{text-decoration-color:#E8EDEB;}.leafygreen-ui-1ym0z5d:focus{text-decoration-color:#016BF8;}.leafygreen-ui-1ym0z5d >span>code,.leafygreen-ui-1ym0z5d >code{color:var(--link-color-primary);font-weight:var(--link-font-weight);}.leafygreen-ui-1ym0z5d:hover{background-color:#E8EDEB;-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-1ym0z5d:focus{-webkit-text-decoration:none;text-decoration:none;outline:none;}.leafygreen-ui-1ym0z5d::-moz-focus-inner{border:0;}.leafygreen-ui-1ym0z5d:before{content:'';position:absolute;background-color:transparent;left:0;top:6px;bottom:6px;width:4px;border-radius:0 6px 6px 0;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;-webkit-transform:scaleY(0.3);-moz-transform:scaleY(0.3);-ms-transform:scaleY(0.3);transform:scaleY(0.3);}.leafygreen-ui-1ym0z5d:hover{background-color:#E8EDEB;}.leafygreen-ui-1ym0z5d:focus{-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-1ym0z5d:focus:before{-webkit-transform:scaleY(1);-moz-transform:scaleY(1);-ms-transform:scaleY(1);transform:scaleY(1);}.leafygreen-ui-1ym0z5d:focus{color:#083C90;background-color:#E1F7FF;}.leafygreen-ui-1ym0z5d:focus:before{background-color:#016BF8;}.leafygreen-ui-1ym0z5d:hover:after,.leafygreen-ui-1ym0z5d:hover span:after{display:none;}.leafygreen-ui-1ym0z5d span{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><a class="lg-ui-0001 lg-ui-side-nav-item-0000 leafygreen-ui-1ym0z5d" target="_self" href="https://www.mongodb.com/docs/atlas/atlas-search/?tck=docs_server_toc" data-position="tocnode" aria-current="false" aria-disabled="false"><span><style data-emotion="css vmdo30">.css-vmdo30{margin-left:21px;scroll-margin-bottom:128px;overflow:hidden;text-overflow:ellipsis;}</style><div class="css-vmdo30 eujnmhf0">Atlas Search</div></span></a></li><li class="leafygreen-ui-tw3z02"><a class="lg-ui-0001 lg-ui-side-nav-item-0000 leafygreen-ui-1ym0z5d" target="_self" href="https://www.mongodb.com/docs/atlas/atlas-vector-search/vector-search-overview/?tck=docs_server_toc" data-position="tocnode" aria-current="false" aria-disabled="false"><span><div class="css-vmdo30 eujnmhf0">Atlas Vector Search</div></span></a></li><li class="leafygreen-ui-tw3z02"><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-x6j7x4" data-position="tocnode" aria-disabled="false" href="../timeseries-collections/index.html"><div class="css-vmdo30 eujnmhf0">Time Series</div></a></li><li class="leafygreen-ui-tw3z02"><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-x6j7x4" data-position="tocnode" aria-disabled="false" href="../../changestreams/index.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-jtiid2" role="img" aria-label="Caret Right Icon"><path fill="currentColor" d="M10.796 7.321a.554.554 0 0 1 0 .858l-3.82 3.181c-.382.319-.976.058-.976-.429V4.57c0-.487.594-.748.976-.43l3.82 3.182Z"></path></svg><div class="css-19zduqt eujnmhf0">Change Streams</div></a></li><li class="leafygreen-ui-tw3z02"><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-x6j7x4" data-position="tocnode" aria-disabled="false" href="../transactions/index.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-jtiid2" role="img" aria-label="Caret Down Icon"><path fill="currentColor" d="M8.679 10.796a.554.554 0 0 1-.858 0L4.64 6.976C4.32 6.594 4.582 6 5.069 6h6.362c.487 0 .748.594.43.976l-3.182 3.82Z"></path></svg><div class="css-19zduqt eujnmhf0">Transactions</div></a></li><li class="leafygreen-ui-tw3z02"><style data-emotion="leafygreen-ui q8j8vc" nonce="4.1.1">.leafygreen-ui-q8j8vc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;position:relative;-webkit-text-decoration:none;text-decoration:none;text-decoration-color:transparent;line-height:13px;color:var(--link-color-primary);font-weight:var(--link-font-weight);margin:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:none;border:none;cursor:pointer;position:relative;width:100%;min-height:32px;padding:6px 16px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:400;text-align:left;-webkit-text-decoration:none;text-decoration:none;text-transform:capitalize;-webkit-transition:background-color 100ms ease-in-out;transition:background-color 100ms ease-in-out;color:#001E2B;background-color:rgba(249,251,250,0);font-size:16px;line-height:28px;cursor:default;font-weight:700;-webkit-text-decoration:none;text-decoration:none;color:#00684A;position:relative;padding-bottom:8px;padding-left:calc(4px + (2 * 16px));padding-right:24px;padding-top:8px;-webkit-align-items:flex-start!important;-webkit-box-align:flex-start!important;-ms-flex-align:flex-start!important;align-items:flex-start!important;font-size:13px;text-transform:none;line-height:20px!important;}.leafygreen-ui-q8j8vc >span>code,.leafygreen-ui-q8j8vc >code{color:var(--link-color-primary);font-weight:var(--link-font-weight);}.leafygreen-ui-q8j8vc:focus,.leafygreen-ui-q8j8vc:hover{text-decoration-line:underline;-webkit-transition:text-decoration 150ms ease-in-out;transition:text-decoration 150ms ease-in-out;text-underline-offset:4px;text-decoration-thickness:2px;}.leafygreen-ui-q8j8vc:focus{text-decoration-color:#016BF8;outline:none;}.leafygreen-ui-q8j8vc:hover{text-decoration-color:#E8EDEB;}.leafygreen-ui-q8j8vc:hover{background-color:#E8EDEB;-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-q8j8vc:focus{-webkit-text-decoration:none;text-decoration:none;outline:none;}.leafygreen-ui-q8j8vc::-moz-focus-inner{border:0;}.leafygreen-ui-q8j8vc:before{content:'';position:absolute;background-color:transparent;left:0;top:6px;bottom:6px;width:4px;border-radius:0 6px 6px 0;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;-webkit-transform:scaleY(0.3);-moz-transform:scaleY(0.3);-ms-transform:scaleY(0.3);transform:scaleY(0.3);}.leafygreen-ui-q8j8vc:hover{background-color:#E8EDEB;}.leafygreen-ui-q8j8vc:before{-webkit-transform:scaleY(1);-moz-transform:scaleY(1);-ms-transform:scaleY(1);transform:scaleY(1);}.leafygreen-ui-q8j8vc,.leafygreen-ui-q8j8vc:hover{background-color:#E3FCF7;}.leafygreen-ui-q8j8vc:before{background-color:#00A35C;}.leafygreen-ui-q8j8vc:focus{-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-q8j8vc:focus:before{-webkit-transform:scaleY(1);-moz-transform:scaleY(1);-ms-transform:scaleY(1);transform:scaleY(1);}.leafygreen-ui-q8j8vc:focus{color:#083C90;background-color:#E1F7FF;}.leafygreen-ui-q8j8vc:focus:before{background-color:#016BF8;}.leafygreen-ui-q8j8vc:hover:after,.leafygreen-ui-q8j8vc:hover span:after{display:none;}.leafygreen-ui-q8j8vc span{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><a aria-current="page" class="lg-ui-side-nav-item-0000 leafygreen-ui-q8j8vc" data-position="tocnode" aria-disabled="false" href="index.html"><div class="css-vmdo30 eujnmhf0">Drivers API</div></a></li><li class="leafygreen-ui-tw3z02"><style data-emotion="leafygreen-ui 16w6s3f" nonce="4.1.1">.leafygreen-ui-16w6s3f{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;position:relative;-webkit-text-decoration:none;text-decoration:none;text-decoration-color:transparent;line-height:13px;color:var(--link-color-primary);font-weight:var(--link-font-weight);margin:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:none;border:none;cursor:pointer;position:relative;width:100%;min-height:32px;padding:6px 16px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:400;text-align:left;-webkit-text-decoration:none;text-decoration:none;text-transform:capitalize;-webkit-transition:background-color 100ms ease-in-out;transition:background-color 100ms ease-in-out;color:#001E2B;background-color:rgba(249,251,250,0);font-size:16px;line-height:28px;position:relative;padding-bottom:8px;padding-left:calc(4px + (2 * 16px));padding-right:24px;padding-top:8px;-webkit-align-items:flex-start!important;-webkit-box-align:flex-start!important;-ms-flex-align:flex-start!important;align-items:flex-start!important;font-size:13px;text-transform:none;line-height:20px!important;}.leafygreen-ui-16w6s3f >span>code,.leafygreen-ui-16w6s3f >code{color:var(--link-color-primary);font-weight:var(--link-font-weight);}.leafygreen-ui-16w6s3f:focus,.leafygreen-ui-16w6s3f:hover{text-decoration-line:underline;-webkit-transition:text-decoration 150ms ease-in-out;transition:text-decoration 150ms ease-in-out;text-underline-offset:4px;text-decoration-thickness:2px;}.leafygreen-ui-16w6s3f:focus{text-decoration-color:#016BF8;outline:none;}.leafygreen-ui-16w6s3f:hover{text-decoration-color:#E8EDEB;}.leafygreen-ui-16w6s3f:hover{background-color:#E8EDEB;-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-16w6s3f:focus{-webkit-text-decoration:none;text-decoration:none;outline:none;}.leafygreen-ui-16w6s3f::-moz-focus-inner{border:0;}.leafygreen-ui-16w6s3f:before{content:'';position:absolute;background-color:transparent;left:0;top:6px;bottom:6px;width:4px;border-radius:0 6px 6px 0;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;-webkit-transform:scaleY(0.3);-moz-transform:scaleY(0.3);-ms-transform:scaleY(0.3);transform:scaleY(0.3);}.leafygreen-ui-16w6s3f:hover{background-color:#E8EDEB;}.leafygreen-ui-16w6s3f:focus{-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-16w6s3f:focus:before{-webkit-transform:scaleY(1);-moz-transform:scaleY(1);-ms-transform:scaleY(1);transform:scaleY(1);}.leafygreen-ui-16w6s3f:focus{color:#083C90;background-color:#E1F7FF;}.leafygreen-ui-16w6s3f:focus:before{background-color:#016BF8;}.leafygreen-ui-16w6s3f:hover:after,.leafygreen-ui-16w6s3f:hover span:after{display:none;}.leafygreen-ui-16w6s3f span{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-16w6s3f" data-position="tocnode" aria-disabled="false" href="../transactions-operations/index.html"><div class="css-vmdo30 eujnmhf0">Operations</div></a></li><li class="leafygreen-ui-tw3z02"><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-16w6s3f" data-position="tocnode" aria-disabled="false" href="../transactions-production-consideration/index.html"><div class="css-vmdo30 eujnmhf0">Production Considerations</div></a></li><li class="leafygreen-ui-tw3z02"><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-16w6s3f" data-position="tocnode" aria-disabled="false" href="../transactions-sharded-clusters/index.html"><div class="css-vmdo30 eujnmhf0">Sharded Clusters</div></a></li><li class="leafygreen-ui-tw3z02"><style data-emotion="leafygreen-ui ydlyr3" nonce="4.1.1">.leafygreen-ui-ydlyr3{margin:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:none;border:none;cursor:pointer;position:relative;width:100%;min-height:32px;padding:6px 16px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:400;text-align:left;-webkit-text-decoration:none;text-decoration:none;text-transform:capitalize;-webkit-transition:background-color 100ms ease-in-out;transition:background-color 100ms ease-in-out;color:#001E2B;background-color:rgba(249,251,250,0);font-size:16px;line-height:28px;position:relative;padding-bottom:8px;padding-left:calc(4px + (1 * 16px));padding-right:24px;padding-top:8px;-webkit-align-items:flex-start!important;-webkit-box-align:flex-start!important;-ms-flex-align:flex-start!important;align-items:flex-start!important;font-size:13px;text-transform:none;line-height:20px!important;}.leafygreen-ui-ydlyr3:hover{background-color:#E8EDEB;-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-ydlyr3:focus{-webkit-text-decoration:none;text-decoration:none;outline:none;}.leafygreen-ui-ydlyr3::-moz-focus-inner{border:0;}.leafygreen-ui-ydlyr3:before{content:'';position:absolute;background-color:transparent;left:0;top:6px;bottom:6px;width:4px;border-radius:0 6px 6px 0;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;-webkit-transform:scaleY(0.3);-moz-transform:scaleY(0.3);-ms-transform:scaleY(0.3);transform:scaleY(0.3);}.leafygreen-ui-ydlyr3:hover{background-color:#E8EDEB;}.leafygreen-ui-ydlyr3:focus{-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-ydlyr3:focus:before{-webkit-transform:scaleY(1);-moz-transform:scaleY(1);-ms-transform:scaleY(1);transform:scaleY(1);}.leafygreen-ui-ydlyr3:focus{color:#083C90;background-color:#E1F7FF;}.leafygreen-ui-ydlyr3:focus:before{background-color:#016BF8;}.leafygreen-ui-ydlyr3:hover:after,.leafygreen-ui-ydlyr3:hover span:after{display:none;}</style><a data-position="tocnode" class="lg-ui-side-nav-item-0000 leafygreen-ui-ydlyr3" aria-current="false" aria-disabled="false"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-jtiid2" role="img" aria-label="Caret Right Icon"><path fill="currentColor" d="M10.796 7.321a.554.554 0 0 1 0 .858l-3.82 3.181c-.382.319-.976.058-.976-.429V4.57c0-.487.594-.748.976-.43l3.82 3.182Z"></path></svg><div class="css-19zduqt eujnmhf0">Data Modeling</div></a></li><li class="leafygreen-ui-tw3z02"><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-x6j7x4" data-position="tocnode" aria-disabled="false" href="../../replication/index.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-jtiid2" role="img" aria-label="Caret Right Icon"><path fill="currentColor" d="M10.796 7.321a.554.554 0 0 1 0 .858l-3.82 3.181c-.382.319-.976.058-.976-.429V4.57c0-.487.594-.748.976-.43l3.82 3.182Z"></path></svg><div class="css-19zduqt eujnmhf0">Replication</div></a></li><li class="leafygreen-ui-tw3z02"><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-x6j7x4" data-position="tocnode" aria-disabled="false" href="../../sharding/index.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-jtiid2" role="img" aria-label="Caret Right Icon"><path fill="currentColor" d="M10.796 7.321a.554.554 0 0 1 0 .858l-3.82 3.181c-.382.319-.976.058-.976-.429V4.57c0-.487.594-.748.976-.43l3.82 3.182Z"></path></svg><div class="css-19zduqt eujnmhf0">Sharding</div></a></li><li class="leafygreen-ui-tw3z02"><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-x6j7x4" data-position="tocnode" aria-disabled="false" href="../../storage/index.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-jtiid2" role="img" aria-label="Caret Right Icon"><path fill="currentColor" d="M10.796 7.321a.554.554 0 0 1 0 .858l-3.82 3.181c-.382.319-.976.058-.976-.429V4.57c0-.487.594-.748.976-.43l3.82 3.182Z"></path></svg><div class="css-19zduqt eujnmhf0">Storage</div></a></li><li class="leafygreen-ui-tw3z02"><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-x6j7x4" data-position="tocnode" aria-disabled="false" href="../../administration/index.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-jtiid2" role="img" aria-label="Caret Right Icon"><path fill="currentColor" d="M10.796 7.321a.554.554 0 0 1 0 .858l-3.82 3.181c-.382.319-.976.058-.976-.429V4.57c0-.487.594-.748.976-.43l3.82 3.182Z"></path></svg><div class="css-19zduqt eujnmhf0">Administration</div></a></li><li class="leafygreen-ui-tw3z02"><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-x6j7x4" data-position="tocnode" aria-disabled="false" href="../../security/index.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-jtiid2" role="img" aria-label="Caret Right Icon"><path fill="currentColor" d="M10.796 7.321a.554.554 0 0 1 0 .858l-3.82 3.181c-.382.319-.976.058-.976-.429V4.57c0-.487.594-.748.976-.43l3.82 3.182Z"></path></svg><div class="css-19zduqt eujnmhf0">Security</div></a></li><li class="leafygreen-ui-tw3z02"><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-x6j7x4" data-position="tocnode" aria-disabled="false" href="../../self-managed-deployments/index.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-jtiid2" role="img" aria-label="Caret Right Icon"><path fill="currentColor" d="M10.796 7.321a.554.554 0 0 1 0 .858l-3.82 3.181c-.382.319-.976.058-.976-.429V4.57c0-.487.594-.748.976-.43l3.82 3.182Z"></path></svg><div class="css-19zduqt eujnmhf0">Self-Managed Deployments</div></a></li><li class="leafygreen-ui-tw3z02"><a data-position="tocnode" class="lg-ui-side-nav-item-0000 leafygreen-ui-ydlyr3" aria-current="false" aria-disabled="false"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-jtiid2" role="img" aria-label="Caret Right Icon"><path fill="currentColor" d="M10.796 7.321a.554.554 0 0 1 0 .858l-3.82 3.181c-.382.319-.976.058-.976-.429V4.57c0-.487.594-.748.976-.43l3.82 3.182Z"></path></svg><div class="css-19zduqt eujnmhf0">FAQ</div></a></li><li class="leafygreen-ui-tw3z02"><a data-position="tocnode" class="lg-ui-side-nav-item-0000 leafygreen-ui-ydlyr3" aria-current="false" aria-disabled="false"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-jtiid2" role="img" aria-label="Caret Right Icon"><path fill="currentColor" d="M10.796 7.321a.554.554 0 0 1 0 .858l-3.82 3.181c-.382.319-.976.058-.976-.429V4.57c0-.487.594-.748.976-.43l3.82 3.182Z"></path></svg><div class="css-19zduqt eujnmhf0">Reference</div></a></li><li class="leafygreen-ui-tw3z02"><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-x6j7x4" data-position="tocnode" aria-disabled="false" href="../../release-notes/index.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-jtiid2" role="img" aria-label="Caret Right Icon"><path fill="currentColor" d="M10.796 7.321a.554.554 0 0 1 0 .858l-3.82 3.181c-.382.319-.976.058-.976-.429V4.57c0-.487.594-.748.976-.43l3.82 3.182Z"></path></svg><div class="css-19zduqt eujnmhf0">Release Notes</div></a></li><li class="leafygreen-ui-tw3z02"><a aria-current="false" class="lg-ui-side-nav-item-0000 leafygreen-ui-x6j7x4" data-position="tocnode" aria-disabled="false" href="../../support/index.html"><div class="css-vmdo30 eujnmhf0">Technical Support</div></a></li></ul></div><style data-emotion="leafygreen-ui 1jpr46n" nonce="4.1.1">.leafygreen-ui-1jpr46n{position:absolute;left:0;right:0;top:0;bottom:0;overflow:hidden;-webkit-transition:200ms ease-in-out;transition:200ms ease-in-out;transition-property:opacity,transform;-webkit-transform:translate3d(0, -8px, 0);-moz-transform:translate3d(0, -8px, 0);-ms-transform:translate3d(0, -8px, 0);transform:translate3d(0, -8px, 0);opacity:0;pointer-events:none;}@media (prefers-reduced-motion: reduce){.leafygreen-ui-1jpr46n{-webkit-transition:opacity 200ms ease-in-out;transition:opacity 200ms ease-in-out;}}</style><div class="leafygreen-ui-1jpr46n"><style data-emotion="leafygreen-ui 1b7jm2c" nonce="4.1.1">.leafygreen-ui-1b7jm2c{margin-block-start:0px;margin-block-end:0px;-webkit-padding-start:0px;padding-inline-start:0px;padding:0;list-style-type:none;position:absolute;left:0;right:0;top:0;bottom:0;padding-top:16px;padding-bottom:16px;overflow-x:hidden;overflow-y:auto;}</style><ul aria-hidden="true" class="leafygreen-ui-1b7jm2c"></ul></div></nav><style data-emotion="leafygreen-ui v87gj9" nonce="4.1.1">.leafygreen-ui-v87gj9{position:relative;position:absolute;bottom:16px;right:-16px;width:32px;height:32px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;border-radius:100%;cursor:pointer;-webkit-transition:150ms ease-in-out;transition:150ms ease-in-out;transition-property:color,border-color,box-shadow;color:#00684A;box-shadow:0 3px 4px rgba(0,30,43,0.1);background-color:#FFFFFF;border:1px solid #E8EDEB;}.leafygreen-ui-v87gj9:hover .lg-ui-collapse-menu-0000{-webkit-transform:translate3d(-2px, 0, 0);-moz-transform:translate3d(-2px, 0, 0);-ms-transform:translate3d(-2px, 0, 0);transform:translate3d(-2px, 0, 0);}.leafygreen-ui-v87gj9:focus{outline:none;}.leafygreen-ui-v87gj9:focus-visible{border-color:transparent;}.leafygreen-ui-v87gj9::-moz-focus-inner{border:0;}.leafygreen-ui-v87gj9:hover{background-color:#F9FBFA;box-shadow:0 2px 2px rgba(0,30,43,0.2);}.leafygreen-ui-v87gj9:focus-visible{color:#016BF8;box-shadow:0 0 0 2px #FFFFFF,0 0 0 4px #0498EC;background-color:#F9FBFA;}</style><button data-testid="side-nav-collapse-toggle" aria-label="Collapse navigation" aria-controls="side-nav-undefined" aria-expanded="true" class="leafygreen-ui-v87gj9"><style data-emotion="leafygreen-ui 16i6mio" nonce="4.1.1">.leafygreen-ui-16i6mio{-webkit-transition:-webkit-transform 80ms ease-in-out;transition:transform 80ms ease-in-out;display:inline-block;height:16px;}@media (prefers-reduced-motion: reduce){.leafygreen-ui-16i6mio{transition-property:unset;}}</style><div class="lg-ui-collapse-menu-0000 leafygreen-ui-16i6mio"><style data-emotion="leafygreen-ui 1st74h4" nonce="4.1.1">.leafygreen-ui-1st74h4{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><svg class="leafygreen-ui-1st74h4" height="16" width="16" role="presentation" aria-hidden="true" alt="" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.7782 1.63604C10.3877 1.24551 9.75449 1.24551 9.36396 1.63604L4.41421 6.58579L3.70711 7.29289C3.31658 7.68342 3.31658 8.31658 3.70711 8.70711L4.41421 9.41421L9.36396 14.364C9.75448 14.7545 10.3876 14.7545 10.7782 14.364L11.4853 13.6569C11.8758 13.2663 11.8758 12.6332 11.4853 12.2426L7.24264 8L11.4853 3.75736C11.8758 3.36684 11.8758 2.73367 11.4853 2.34315L10.7782 1.63604Z" fill="currentColor"></path></svg></div></button></div></div></div><style data-emotion="css 1vfgatw">.css-1vfgatw{grid-area:contents;margin:0px;}</style><div class="css-1vfgatw edbeiqm0"><style data-emotion="leafygreen-ui 1dleeso" nonce="4.1.1">.leafygreen-ui-1dleeso{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:60px;padding-top:8px;padding-bottom:8px;position:-webkit-sticky;position:sticky;top:0;z-index:800;background-color:var(--background-color-primary);border-bottom:1px solid var(--border-color);-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;--border-color:#E8EDEB;padding-left:max(
    calc(((100% - ((775px + 64px * 2) + (200px + 5px + 24px))) / 2) + 64px),
    64px
  );}.dark-theme .leafygreen-ui-1dleeso{--border-color:#3D4F58;}@media not all and (max-width: 767px){.leafygreen-ui-1dleeso>div{-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;}}@media only screen and (max-width: 767px){.leafygreen-ui-1dleeso{-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding-right:0;}}@media not all and (max-width: 1920px){.leafygreen-ui-1dleeso{padding-left:max(
      calc(((100% - ((884px + 64px * 2) + (200px + 5px + 24px))) / 2) + 64px),
      64px
    );}}@media only screen and (max-width: 1024px){.leafygreen-ui-1dleeso{padding-left:24px;}}</style><div class="leafygreen-ui-1dleeso"><style data-emotion="css 1pep1p">.css-1pep1p{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;background:inherit;}@media not all and (max-width: 767px){.css-1pep1p{padding-right:16px;}}@media only screen and (max-width: 1024px){.css-1pep1p{max-width:unset;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;width:100%;}}</style><div class=" css-1pep1p ertiyc83"><style data-emotion="leafygreen-ui f66rmd" nonce="4.1.1">.leafygreen-ui-f66rmd{margin:unset;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;color:#001E2B;font-size:12px;font-weight:700;text-transform:uppercase;line-height:20px;letter-spacing:0.4px;color:#001E2B;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#5C6C75;text-transform:uppercase;text-wrap:nowrap;font-weight:600;cursor:pointer;font-size:12px;padding-right:32px;}@media not all and (max-width: 1024px){.leafygreen-ui-f66rmd{display:none;}}.dark-theme .leafygreen-ui-f66rmd{color:#E8EDEB;}.leafygreen-ui-f66rmd >svg{margin-right:8px;}</style><div class="leafygreen-ui-f66rmd"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="" role="img" aria-label="Chevron Down Icon"><path fill="currentColor" fill-rule="evenodd" d="M1.636 5.364a1 1 0 0 0 0 1.414l4.95 4.95.707.707a1 1 0 0 0 1.414 0l.707-.707 4.95-4.95a1 1 0 0 0 0-1.414l-.707-.707a1 1 0 0 0-1.414 0L8 8.899 3.757 4.657a1 1 0 0 0-1.414 0l-.707.707Z" clip-rule="evenodd"></path></svg>Docs Menu</div><style data-emotion="css vied7t">.css-vied7t{width:100%;max-width:610px;background:inherit;--search-input-background-color:#FFFFFF;}.css-vied7t div[role='searchbox']{background-color:var(--search-input-background-color);width:100%;}.dark-theme .css-vied7t{--search-input-background-color:#112733;}@media not all and (max-width: 767px){.css-vied7t{width:100%;}}</style><div class=" css-vied7t ertiyc82"><style data-emotion="css 1d3w5wq">.css-1d3w5wq{width:100%;}</style><div class="css-1d3w5wq ertiyc81"><style data-emotion="leafygreen-ui 1s4ipu5" nonce="4.1.1">.leafygreen-ui-1s4ipu5{outline:none;}@media only screen and (max-width: 767px){.leafygreen-ui-1s4ipu5{display:none;}}@media only screen and (max-width: 767px){.leafygreen-ui-1s4ipu5 input[type='search']{font-size:16px;}}</style><form role="search" class="sl-search-input leafygreen-ui-1s4ipu5"><style data-emotion="leafygreen-ui 1hgk2rl" nonce="4.1.1">.leafygreen-ui-1hgk2rl{position:relative;display:grid;grid-auto-flow:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;justify-items:center;border:1px solid;border-radius:6px;z-index:0;-webkit-transition:150ms ease-in-out;transition:150ms ease-in-out;transition-property:border-color,box-shadow;font-size:13px;line-height:20px;height:36px;grid-template-columns:36px 1fr;grid-auto-columns:36px;color:#001E2B;background:#FFFFFF;border-color:#889397;}.leafygreen-ui-1hgk2rl:hover:not(:disabled):not(:focus-within),.leafygreen-ui-1hgk2rl:active:not(:disabled):not(:focus-within){box-shadow:0 0 0 3px #E8EDEB;}</style><div role="searchbox" tabindex="-1" class="leafygreen-ui-1hgk2rl" aria-label="Search MongoDB Docs"><style data-emotion="leafygreen-ui rk0nez" nonce="4.1.1">.leafygreen-ui-rk0nez{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:#5C6C75;left:12px;}</style><svg class="leafygreen-ui-rk0nez" height="16" width="16" role="presentation" aria-hidden="true" alt="" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3234 9.81874C4.07618 11.5715 6.75062 11.8398 8.78588 10.6244L12.93 14.7685C13.4377 15.2762 14.2608 15.2762 14.7685 14.7685C15.2762 14.2608 15.2762 13.4377 14.7685 12.93L10.6244 8.78588C11.8398 6.75062 11.5715 4.07619 9.81873 2.32341C7.74896 0.253628 4.39318 0.253628 2.3234 2.32341C0.253624 4.39319 0.253624 7.74896 2.3234 9.81874ZM7.98026 4.16188C9.03467 5.2163 9.03467 6.92585 7.98026 7.98026C6.92584 9.03468 5.2163 9.03468 4.16188 7.98026C3.10746 6.92585 3.10746 5.2163 4.16188 4.16188C5.2163 3.10747 6.92584 3.10747 7.98026 4.16188Z" fill="currentColor"></path></svg><style data-emotion="leafygreen-ui qk8l6f" nonce="4.1.1">.leafygreen-ui-qk8l6f{font-size:inherit;line-height:inherit;color:inherit;background-color:inherit;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;width:100%;height:1.5em;font-weight:400;z-index:1;outline:none;border:none;padding:0;}.leafygreen-ui-qk8l6f[aria-disabled='true']{cursor:not-allowed;}.leafygreen-ui-qk8l6f[aria-disabled='true']:hover,.leafygreen-ui-qk8l6f[aria-disabled='true']:active{box-shadow:none;}.leafygreen-ui-qk8l6f::-webkit-input-placeholder{font-size:inherit;line-height:inherit;}.leafygreen-ui-qk8l6f::-moz-placeholder{font-size:inherit;line-height:inherit;}.leafygreen-ui-qk8l6f:-ms-input-placeholder{font-size:inherit;line-height:inherit;}.leafygreen-ui-qk8l6f::placeholder{font-size:inherit;line-height:inherit;}.leafygreen-ui-qk8l6f::-ms-clear,.leafygreen-ui-qk8l6f::-ms-reveal{display:none;width:0;height:0;}.leafygreen-ui-qk8l6f::-webkit-search-decoration,.leafygreen-ui-qk8l6f::-webkit-search-cancel-button,.leafygreen-ui-qk8l6f::-webkit-search-results-button,.leafygreen-ui-qk8l6f::-webkit-search-results-decoration{display:none;}.leafygreen-ui-qk8l6f:-webkit-autofill{color:inherit;background:transparent;border:none;-webkit-text-fill-color:inherit;}.leafygreen-ui-qk8l6f:-webkit-autofill[aria-disabled='false']{box-shadow:0 0 0 100px #FFFFFF inset;}.leafygreen-ui-qk8l6f:-webkit-autofill[aria-disabled='false']:focus{box-shadow:0 0 0 100px #FFFFFF inset,0 0 0 3px #0498EC;}.leafygreen-ui-qk8l6f:-webkit-autofill[aria-disabled='false']:hover:not(:focus){box-shadow:0 0 0 100px #FFFFFF inset,0 0 0 3px #E8EDEB;}.leafygreen-ui-qk8l6f::-webkit-input-placeholder{color:#889397;font-weight:400;}.leafygreen-ui-qk8l6f::-moz-placeholder{color:#889397;font-weight:400;}.leafygreen-ui-qk8l6f:-ms-input-placeholder{color:#889397;font-weight:400;}.leafygreen-ui-qk8l6f::placeholder{color:#889397;font-weight:400;}.leafygreen-ui-qk8l6f[aria-disabled='true']::-webkit-input-placeholder{color:#889397;}.leafygreen-ui-qk8l6f[aria-disabled='true']::-moz-placeholder{color:#889397;}.leafygreen-ui-qk8l6f[aria-disabled='true']:-ms-input-placeholder{color:#889397;}.leafygreen-ui-qk8l6f[aria-disabled='true']::placeholder{color:#889397;}.leafygreen-ui-qk8l6f[aria-disabled='true']:-webkit-autofill,.leafygreen-ui-qk8l6f[aria-disabled='true']:-webkit-autofill:hover,.leafygreen-ui-qk8l6f[aria-disabled='true']:-webkit-autofill:focus{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;border:1px solid #889397;-webkit-text-fill-color:#889397;box-shadow:0 0 0 100px #E8EDEB inset;}</style><input type="search" class="leafygreen-ui-qk8l6f" placeholder="Search MongoDB Docs" value=""/></div></form></div><style data-emotion="leafygreen-ui 1c6hf09" nonce="4.1.1">.leafygreen-ui-1c6hf09{border:none;-webkit-appearance:unset;padding:unset;display:inline-block;border-radius:100px;position:relative;cursor:pointer;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:150ms ease-in-out;transition:150ms ease-in-out;transition-property:color,box-shadow;background-color:rgba(255, 255, 255, 0);height:28px;width:28px;color:#5C6C75;float:right;-webkit-box-pack:right;-ms-flex-pack:right;-webkit-justify-content:right;justify-content:right;}.leafygreen-ui-1c6hf09:before{content:'';-webkit-transition:150ms all ease-in-out;transition:150ms all ease-in-out;position:absolute;top:0;bottom:0;left:0;right:0;border-radius:100%;-webkit-transform:scale(0.8);-moz-transform:scale(0.8);-ms-transform:scale(0.8);transform:scale(0.8);}.leafygreen-ui-1c6hf09:active:before,.leafygreen-ui-1c6hf09:hover:before,.leafygreen-ui-1c6hf09:focus:before{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}.leafygreen-ui-1c6hf09:focus{outline:none;}.leafygreen-ui-1c6hf09:active,.leafygreen-ui-1c6hf09:hover{color:#001E2B;}.leafygreen-ui-1c6hf09:active:before,.leafygreen-ui-1c6hf09:hover:before{background-color:rgba(61,79,88,0.1);}.leafygreen-ui-1c6hf09:focus-visible{color:#001E2B;box-shadow:0 0 0 2px #FFFFFF,0 0 0 4px #0498EC;}.leafygreen-ui-1c6hf09:focus-visible:before{background-color:rgba(61,79,88,0.1);}@media not all and (max-width: 767px){.leafygreen-ui-1c6hf09{display:none;}}</style><button aria-label="Search MongoDB Docs" tabindex="0" aria-disabled="false" class="leafygreen-ui-1c6hf09"><style data-emotion="leafygreen-ui xhlipt" nonce="4.1.1">.leafygreen-ui-xhlipt{position:absolute;top:0;bottom:0;left:0;right:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><div class="leafygreen-ui-xhlipt"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="" role="img" aria-label="Magnifying Glass Icon"><path fill="currentColor" fill-rule="evenodd" d="M2.323 9.819a5.302 5.302 0 0 0 6.463.805l4.144 4.144a1.3 1.3 0 1 0 1.838-1.838l-4.144-4.144a5.302 5.302 0 0 0-8.3-6.463 5.3 5.3 0 0 0 0 7.496ZM7.98 4.162A2.7 2.7 0 1 1 4.162 7.98 2.7 2.7 0 0 1 7.98 4.162Z" clip-rule="evenodd"></path></svg></div></button></div></div><style data-emotion="css 13adhjd">.css-13adhjd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-column-gap:16px;column-gap:16px;position:relative;top:0;margin:0 32px 0 24px;justify-self:flex-end;grid-column:-2/-1;}@media only screen and (max-width: 1024px){.css-13adhjd{-webkit-column-gap:6px;column-gap:6px;margin-right:24px;margin-left:8px;}}@media only screen and (max-width: 767px){.css-13adhjd{margin-left:1px;}}</style><div class="css-13adhjd ertiyc80"><style data-emotion="leafygreen-ui u10pj2" nonce="4.1.1">.leafygreen-ui-u10pj2{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;padding:0;margin:0;background-color:transparent;border:1px solid transparent;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-transition:all 150ms ease-in-out;transition:all 150ms ease-in-out;position:relative;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;z-index:0;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;border-radius:6px;background-color:transparent;border-color:#00684A;color:#00684A;font-size:13px;line-height:20px;font-weight:500;height:36px;text-wrap-mode:nowrap;}.leafygreen-ui-u10pj2:focus-visible,.leafygreen-ui-u10pj2[data-focus="true"]{outline:none;}.leafygreen-ui-u10pj2:active,.leafygreen-ui-u10pj2[data-active="true"],.leafygreen-ui-u10pj2:focus,.leafygreen-ui-u10pj2:hover{-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-u10pj2:focus-visible,.leafygreen-ui-u10pj2[data-focus="true"]{color:#00684A;}.leafygreen-ui-u10pj2:hover,.leafygreen-ui-u10pj2[data-hover="true"],.leafygreen-ui-u10pj2:active,.leafygreen-ui-u10pj2[data-active="true"]{color:#00684A;background-color:rgba(0,237,100,0.04);box-shadow:0px 0px 0px 3px #C0FAE6;}.leafygreen-ui-u10pj2:focus-visible,.leafygreen-ui-u10pj2[data-focus="true"]{background-color:rgba(0,237,100,0.04);box-shadow:0 0 0 2px #FFFFFF,0 0 0 4px #0498EC;}@media only screen and (max-width: 1024px){.leafygreen-ui-u10pj2{display:none;}}.leafygreen-ui-u10pj2:not(:lang(EN)){display:none;}</style><button data-lgid="lg-button" type="button" class="lg-ui-button-0000 leafygreen-ui-u10pj2" aria-disabled="false" aria-label="Ask MongoDB AI"><div class="leafygreen-ui-v038xi"></div><div class="leafygreen-ui-16tr4y"><style data-emotion="leafygreen-ui hk8wfb" nonce="4.1.1">.leafygreen-ui-hk8wfb{color:#00684A;height:16px;width:16px;justify-self:right;}</style><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-hk8wfb" role="presentation" aria-hidden="true" alt=""><path fill="currentColor" d="m6.273 2.893-.998 2.995c-.1.3-.336.536-.636.637l-2.995.998a.503.503 0 0 0 0 .954l2.995.998c.3.1.536.336.636.637l.998 2.995a.503.503 0 0 0 .955 0l.998-2.995c.1-.3.336-.536.636-.637l2.995-.998a.503.503 0 0 0 0-.954l-2.995-.998c-.3-.1-.536-.336-.636-.637l-.998-2.995a.503.503 0 0 0-.955 0ZM12.547 1.172l-.231.693c-.1.3-.336.536-.636.636l-.694.231c-.229.077-.229.401 0 .477l.694.231c.3.1.536.336.636.637l.23.693c.077.229.402.229.478 0l.231-.693c.1-.3.336-.536.636-.637l.693-.23c.23-.077.23-.401 0-.478l-.693-.23c-.3-.1-.536-.337-.636-.637l-.231-.693a.251.251 0 0 0-.477 0ZM12.547 11.23l-.231.693c-.1.3-.336.536-.636.636l-.694.232c-.229.076-.229.4 0 .477l.694.23c.3.1.536.337.636.637l.23.693c.077.23.402.23.478 0l.231-.693c.1-.3.336-.536.636-.636l.693-.231c.23-.077.23-.401 0-.477l-.693-.232c-.3-.1-.536-.335-.636-.636l-.231-.693a.251.251 0 0 0-.477 0Z"></path></svg>Ask MongoDB AI</div></button><style data-emotion="leafygreen-ui c629wf" nonce="4.1.1">.leafygreen-ui-c629wf{border:none;-webkit-appearance:unset;padding:unset;display:inline-block;border-radius:100px;position:relative;cursor:pointer;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:150ms ease-in-out;transition:150ms ease-in-out;transition-property:color,box-shadow;background-color:rgba(255, 255, 255, 0);height:28px;width:28px;color:#5C6C75;color:#00684A;}.leafygreen-ui-c629wf:before{content:'';-webkit-transition:150ms all ease-in-out;transition:150ms all ease-in-out;position:absolute;top:0;bottom:0;left:0;right:0;border-radius:100%;-webkit-transform:scale(0.8);-moz-transform:scale(0.8);-ms-transform:scale(0.8);transform:scale(0.8);}.leafygreen-ui-c629wf:active:before,.leafygreen-ui-c629wf:hover:before,.leafygreen-ui-c629wf:focus:before{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}.leafygreen-ui-c629wf:focus{outline:none;}.leafygreen-ui-c629wf:active,.leafygreen-ui-c629wf:hover{color:#001E2B;}.leafygreen-ui-c629wf:active:before,.leafygreen-ui-c629wf:hover:before{background-color:rgba(61,79,88,0.1);}.leafygreen-ui-c629wf:focus-visible{color:#001E2B;box-shadow:0 0 0 2px #FFFFFF,0 0 0 4px #0498EC;}.leafygreen-ui-c629wf:focus-visible:before{background-color:rgba(61,79,88,0.1);}@media not all and (max-width: 1024px){.leafygreen-ui-c629wf{display:none;}}.leafygreen-ui-c629wf:not(:lang(EN)){display:none;}.dark-theme .leafygreen-ui-c629wf{color:#00A35C;}</style><button aria-label="Ask MongoDB AI" tabindex="0" aria-disabled="false" class="leafygreen-ui-c629wf"><div class="leafygreen-ui-xhlipt"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="" role="img" aria-label="Sparkle Icon"><path fill="currentColor" d="m6.273 2.893-.998 2.995c-.1.3-.336.536-.636.637l-2.995.998a.503.503 0 0 0 0 .954l2.995.998c.3.1.536.336.636.637l.998 2.995a.503.503 0 0 0 .955 0l.998-2.995c.1-.3.336-.536.636-.637l2.995-.998a.503.503 0 0 0 0-.954l-2.995-.998c-.3-.1-.536-.336-.636-.637l-.998-2.995a.503.503 0 0 0-.955 0ZM12.547 1.172l-.231.693c-.1.3-.336.536-.636.636l-.694.231c-.229.077-.229.401 0 .477l.694.231c.3.1.536.336.636.637l.23.693c.077.229.402.229.478 0l.231-.693c.1-.3.336-.536.636-.637l.693-.23c.23-.077.23-.401 0-.478l-.693-.23c-.3-.1-.536-.337-.636-.637l-.231-.693a.251.251 0 0 0-.477 0ZM12.547 11.23l-.231.693c-.1.3-.336.536-.636.636l-.694.232c-.229.076-.229.4 0 .477l.694.23c.3.1.536.337.636.637l.23.693c.077.23.402.23.478 0l.231-.693c.1-.3.336-.536.636-.636l.693-.231c.23-.077.23-.401 0-.477l-.693-.232c-.3-.1-.536-.335-.636-.636l-.231-.693a.251.251 0 0 0-.477 0Z"></path></svg></div></button><!--$--><!--/$--><style data-emotion="leafygreen-ui hc6lm9" nonce="4.1.1">.leafygreen-ui-hc6lm9{position:relative;}</style><div class="leafygreen-ui-hc6lm9"><style data-emotion="leafygreen-ui 1qlrfdk" nonce="4.1.1">.leafygreen-ui-1qlrfdk{border:none;-webkit-appearance:unset;padding:unset;display:inline-block;border-radius:100px;position:relative;cursor:pointer;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:150ms ease-in-out;transition:150ms ease-in-out;transition-property:color,box-shadow;background-color:rgba(255, 255, 255, 0);height:28px;width:28px;color:#5C6C75;display:block;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;cursor:pointer;}.leafygreen-ui-1qlrfdk:before{content:'';-webkit-transition:150ms all ease-in-out;transition:150ms all ease-in-out;position:absolute;top:0;bottom:0;left:0;right:0;border-radius:100%;-webkit-transform:scale(0.8);-moz-transform:scale(0.8);-ms-transform:scale(0.8);transform:scale(0.8);}.leafygreen-ui-1qlrfdk:active:before,.leafygreen-ui-1qlrfdk:hover:before,.leafygreen-ui-1qlrfdk:focus:before{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}.leafygreen-ui-1qlrfdk:focus{outline:none;}.leafygreen-ui-1qlrfdk:active,.leafygreen-ui-1qlrfdk:hover{color:#001E2B;}.leafygreen-ui-1qlrfdk:active:before,.leafygreen-ui-1qlrfdk:hover:before{background-color:rgba(61,79,88,0.1);}.leafygreen-ui-1qlrfdk:focus-visible{color:#001E2B;box-shadow:0 0 0 2px #FFFFFF,0 0 0 4px #0498EC;}.leafygreen-ui-1qlrfdk:focus-visible:before{background-color:rgba(61,79,88,0.1);}.leafygreen-ui-1qlrfdk >div{position:relative;}</style><button aria-label="Dark Mode Menu" aria-labelledby="Dark Mode Menu" aria-expanded="false" aria-haspopup="true" tabindex="0" aria-disabled="false" class="leafygreen-ui-1qlrfdk"><div class="leafygreen-ui-xhlipt"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 16 16" class="" role="img" aria-label="Sun Icon"><path fill="currentColor" d="M12.24 10.83a.996.996 0 1 0-1.41 1.41l.71.71a.996.996 0 1 0 1.41-1.41l-.71-.71ZM8 12c-.55 0-1 .45-1 1v1c0 .55.45 1 1 1s1-.45 1-1v-1c0-.55-.45-1-1-1ZM8 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM14 7h-1c-.55 0-1 .45-1 1s.45 1 1 1h1c.55 0 1-.45 1-1s-.45-1-1-1ZM3.76 10.83l-.71.71a.996.996 0 1 0 1.41 1.41l.71-.71a.996.996 0 1 0-1.41-1.41ZM8 4c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1v1c0 .55.45 1 1 1ZM3.76 5.17a.996.996 0 1 0 1.41-1.41l-.71-.71a.996.996 0 1 0-1.41 1.41l.71.71ZM4 8c0-.55-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1h1c.55 0 1-.45 1-1ZM12.24 5.17l.71-.71a.996.996 0 1 0-1.41-1.41l-.71.71a.996.996 0 1 0 1.41 1.41Z"></path></svg></div></button></div></div></div><style data-emotion="css-global amslvv">.fade-exit{opacity:1;}.fade-exit-active{opacity:0;-webkit-transition:opacity 300ms;transition:opacity 300ms;}.fade-enter{opacity:0;}.fade-enter-active{opacity:1;-webkit-transition:opacity 300ms ease-in-out;transition:opacity 300ms ease-in-out;}</style><div><style data-emotion="leafygreen-ui qls9ga" nonce="4.1.1">.leafygreen-ui-qls9ga{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}</style><div class="leafygreen-ui-qls9ga content-transition-div"><div id="template-container"><style data-emotion="css h65vo9">.css-h65vo9{display:grid;grid-template-areas:'main right';grid-template-columns:minmax(0, calc(775px + 64px * 2)) 1fr;margin:0 auto;width:100%;max-width:calc((775px + 64px * 2) + (200px + 5px + 24px));}@media not all and (max-width: 1920px){.css-h65vo9{grid-template-columns:minmax(0, calc(884px + 64px * 2)) 1fr;max-width:calc((884px + 64px * 2) + (200px + 5px + 24px));}}</style><div class="css-h65vo9 e10pwpuy2"><style data-emotion="css ht45r4">.css-ht45r4{grid-area:main;max-width:775px;}@media not all and (max-width: 1920px){.css-ht45r4{max-width:884px;}}</style><style data-emotion="leafygreen-ui 1ugj6ju" nonce="4.1.1">.leafygreen-ui-1ugj6ju{margin:16px 64px 64px;max-width:800px;min-height:600px;}@media only screen and (max-width: 1024px){.leafygreen-ui-1ugj6ju{margin:16px 48px 64px;}}@media only screen and (max-width: 480px){.leafygreen-ui-1ugj6ju{margin:16px 24px 64px;}}</style><main class="leafygreen-ui-1ugj6ju css-ht45r4 e10pwpuy1"><div class="body"><style data-emotion="leafygreen-ui 15yuscm" nonce="4.1.1">.leafygreen-ui-15yuscm{font-size:13px;--breadcrumb-color:#5C6C75;}.dark-theme .leafygreen-ui-15yuscm{--breadcrumb-color:#C1C7C6;}.leafygreen-ui-15yuscm a,.leafygreen-ui-15yuscm span{color:var(--breadcrumb-color);}</style><div class="leafygreen-ui-15yuscm"><style data-emotion="css s5xdrg">.css-s5xdrg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-s5xdrg et95k8q0"><style data-emotion="leafygreen-ui 1krmy4z" nonce="4.1.1">.leafygreen-ui-1krmy4z{overflow:hidden;white-space:nowrap;}.leafygreen-ui-1krmy4z:first-child{min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;}@media not all and (max-width: 480px){.leafygreen-ui-1krmy4z:last-child{min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;}}</style><div class="leafygreen-ui-1krmy4z"><style data-emotion="leafygreen-ui ed5wx6" nonce="4.1.1">.leafygreen-ui-ed5wx6{font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;text-decoration-color:transparent;cursor:pointer;font-size:inherit;line-height:inherit;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:none;border:none;padding:0;font-size:16px;line-height:28px;color:#016BF8;font-weight:400;display:inline;color:var(--link-color-primary);font-weight:var(--link-font-weight);font-size:13px;vertical-align:middle;line-height:unset;font-weight:400;}.leafygreen-ui-ed5wx6:hover,.leafygreen-ui-ed5wx6:focus{-webkit-text-decoration:underline;text-decoration:underline;-webkit-transition:text-decoration 150ms ease-in-out;transition:text-decoration 150ms ease-in-out;text-underline-offset:4px;text-decoration-thickness:2px;}.leafygreen-ui-ed5wx6:focus{outline:none;}.leafygreen-ui-ed5wx6:hover{text-decoration-color:#E8EDEB;}.leafygreen-ui-ed5wx6:focus{text-decoration-color:#016BF8;}.leafygreen-ui-ed5wx6 >span>code,.leafygreen-ui-ed5wx6 >code{color:var(--link-color-primary);font-weight:var(--link-font-weight);}.leafygreen-ui-ed5wx6:hover,.leafygreen-ui-ed5wx6:focus{-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="lg-ui-0001 leafygreen-ui-ed5wx6" target="_self" href="https://www.mongodb.com/docs/"><span>Docs Home</span></a></div><style data-emotion="css yg5ozy">.css-yg5ozy{cursor:default;padding-left:8px;padding-right:8px;}</style><span class="css-yg5ozy et95k8q1"> / </span><div class="leafygreen-ui-1krmy4z"><style data-emotion="leafygreen-ui 1y8ztuv" nonce="4.1.1">.leafygreen-ui-1y8ztuv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;position:relative;-webkit-text-decoration:none;text-decoration:none;text-decoration-color:transparent;line-height:13px;color:var(--link-color-primary);font-weight:var(--link-font-weight);font-size:13px;vertical-align:middle;line-height:unset;font-weight:400;}.leafygreen-ui-1y8ztuv >span>code,.leafygreen-ui-1y8ztuv >code{color:var(--link-color-primary);font-weight:var(--link-font-weight);}.leafygreen-ui-1y8ztuv:focus,.leafygreen-ui-1y8ztuv:hover{text-decoration-line:underline;-webkit-transition:text-decoration 150ms ease-in-out;transition:text-decoration 150ms ease-in-out;text-underline-offset:4px;text-decoration-thickness:2px;}.leafygreen-ui-1y8ztuv:focus{text-decoration-color:#016BF8;outline:none;}.leafygreen-ui-1y8ztuv:hover{text-decoration-color:#E8EDEB;}.leafygreen-ui-1y8ztuv:hover,.leafygreen-ui-1y8ztuv:focus{-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="leafygreen-ui-1y8ztuv" href="../../index.html">MongoDB Manual</a></div><span class="css-yg5ozy et95k8q1"> / </span><div class="leafygreen-ui-1krmy4z"><a class="leafygreen-ui-1y8ztuv" href="../transactions/index.html">Transactions</a></div></div></div><style data-emotion="leafygreen-ui 1qnjd6d" nonce="4.1.1">.leafygreen-ui-1qnjd6d{scroll-margin-top:85px;position:absolute;}</style><span class="leafygreen-ui-1qnjd6d" id="std-label-transactions-drivers"></span><section><style data-emotion="leafygreen-ui 1pba0bk" nonce="4.1.1">.leafygreen-ui-1pba0bk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-column-gap:5px;column-gap:5px;}</style><div class="leafygreen-ui-1pba0bk"><style data-emotion="leafygreen-ui 1nkfqbv" nonce="4.1.1">.leafygreen-ui-1nkfqbv{margin:unset;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;color:#001E2B;font-size:32px;line-height:40px;font-weight:400;font-family:'MongoDB Value Serif','Times New Roman',serif;color:#00684A;margin-top:24px;margin-bottom:8px;color:var(--heading-color-primary);margin-top:16px;margin-bottom:24px;}</style><h1 class="contains-headerlink leafygreen-ui-1nkfqbv" weight="medium">Drivers API<style data-emotion="leafygreen-ui 11mfcte" nonce="4.1.1">.leafygreen-ui-11mfcte{position:absolute;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;padding:0 10px;visibility:hidden;}</style><a class="headerlink leafygreen-ui-11mfcte" href="index.html#drivers-api" title="Permalink to this heading"><style data-emotion="leafygreen-ui a30zj9" nonce="4.1.1">.leafygreen-ui-a30zj9{color:#889397;vertical-align:middle;margin-top:-2px;}</style><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-a30zj9" role="img" aria-label="Link Icon"><path fill="currentColor" d="M6.039 9.953a3.596 3.596 0 0 1-.327-.38l1.45-1.445a1.553 1.553 0 0 0 2.496.423l2.885-2.87a1.57 1.57 0 0 0 .01-2.213 1.553 1.553 0 0 0-2.203-.01l-.379.377A.995.995 0 0 1 8.56 3.83a1.005 1.005 0 0 1 .006-1.418l.38-.377a3.542 3.542 0 0 1 5.024.023 3.58 3.58 0 0 1-.022 5.047l-2.884 2.871a3.542 3.542 0 0 1-5.025-.022Z"></path><path fill="currentColor" d="M9.961 6.047c.12.12.228.248.327.38l-1.45 1.445a1.553 1.553 0 0 0-2.496-.423l-2.885 2.87a1.57 1.57 0 0 0-.01 2.213 1.553 1.553 0 0 0 2.203.01l.379-.377a.995.995 0 0 1 1.411.006 1.005 1.005 0 0 1-.006 1.418l-.38.377a3.542 3.542 0 0 1-5.024-.023 3.58 3.58 0 0 1 .022-5.047l2.884-2.871a3.542 3.542 0 0 1 5.025.022Z"></path></svg><style data-emotion="css zena35">.css-zena35{display:inline;left:0;top:0;margin-top:-85px;position:absolute;padding-bottom:2px;}@media only screen and (max-width: 767px){.css-zena35{margin-top:-85px;}}</style><div id="drivers-api" class="css-zena35 e1kswsxc0"></div></a></h1><style data-emotion="leafygreen-ui 1ohmzjd" nonce="4.1.1">.leafygreen-ui-1ohmzjd{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-width:175px;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:end;justify-content:end;}.leafygreen-ui-1ohmzjd [data-theme]{width:310px;background-color:#001E2B;}@media only screen and (max-width: 1024px){.leafygreen-ui-1ohmzjd{display:none;}}</style><div class="leafygreen-ui-1ohmzjd" data-testid="lg-split_button" data-lgid="lg-split_button"><style data-emotion="leafygreen-ui t3q1z6" nonce="4.1.1">.leafygreen-ui-t3q1z6{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;padding:0;margin:0;background-color:transparent;border:1px solid transparent;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-transition:all 150ms ease-in-out;transition:all 150ms ease-in-out;position:relative;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;z-index:0;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;border-radius:6px;background-color:#F9FBFA;border-color:#889397;color:#001E2B;font-size:13px;line-height:20px;font-weight:500;height:28px;border-top-right-radius:0px;border-bottom-right-radius:0px;z-index:1;}.leafygreen-ui-t3q1z6:focus-visible,.leafygreen-ui-t3q1z6[data-focus="true"]{outline:none;}.leafygreen-ui-t3q1z6:active,.leafygreen-ui-t3q1z6[data-active="true"],.leafygreen-ui-t3q1z6:focus,.leafygreen-ui-t3q1z6:hover{-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-t3q1z6:focus-visible,.leafygreen-ui-t3q1z6[data-focus="true"]{color:#001E2B;}.leafygreen-ui-t3q1z6:hover,.leafygreen-ui-t3q1z6[data-hover="true"],.leafygreen-ui-t3q1z6:active,.leafygreen-ui-t3q1z6[data-active="true"]{color:#001E2B;background-color:#FFFFFF;box-shadow:0 0 0 3px #E8EDEB;}.leafygreen-ui-t3q1z6:focus-visible,.leafygreen-ui-t3q1z6[data-focus="true"]{background-color:#FFFFFF;box-shadow:0 0 0 2px #FFFFFF,0 0 0 4px #0498EC;}.leafygreen-ui-t3q1z6,.leafygreen-ui-t3q1z6:hover,.leafygreen-ui-t3q1z6:focus,.leafygreen-ui-t3q1z6:focus-visible,.leafygreen-ui-t3q1z6:active{border-right-color:#889397;}</style><button data-lgid="lg-split_button-button" type="button" class="lg-ui-button-0000 leafygreen-ui-t3q1z6" aria-disabled="false" data-testid="lg-split_button-button"><div class="leafygreen-ui-v038xi"></div><div class="leafygreen-ui-16tr4y"><style data-emotion="leafygreen-ui 18si895" nonce="4.1.1">.leafygreen-ui-18si895{color:#889397;height:16px;width:16px;justify-self:right;}</style><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-18si895" role="presentation" aria-hidden="true" alt=""><path fill="currentColor" fill-rule="evenodd" d="M1 5.714v4.572C1 11.233 1.768 12 2.714 12H5.75V7.11c0-.566.227-1.108.63-1.504l2.294-2.252c.1-.099.21-.186.326-.262v-.378C9 1.768 8.232 1 7.286 1H5.8v3.429c0 .71-.576 1.285-1.286 1.285H1Zm8-.928L7.257 6.498A.857.857 0 0 0 7 7.11v.688h3.01a.857.857 0 0 0 .857-.858V4h-.717a.857.857 0 0 0-.6.246l-.55.54ZM4.867 1H4.15a.857.857 0 0 0-.601.246L1.257 3.498A.857.857 0 0 0 1 4.11v.688h3.01a.857.857 0 0 0 .857-.858V1ZM7 12V8.714H10.514c.71 0 1.286-.575 1.286-1.285V4h1.486C14.233 4 15 4.768 15 5.714v7.572c0 .947-.768 1.714-1.714 1.714H8.714A1.714 1.714 0 0 1 7 13.286V12Z" clip-rule="evenodd"></path></svg>Copy page</div></button><style data-emotion="leafygreen-ui 5cbf4u" nonce="4.1.1">.leafygreen-ui-5cbf4u{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;padding:0;margin:0;background-color:transparent;border:1px solid transparent;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-transition:all 150ms ease-in-out;transition:all 150ms ease-in-out;position:relative;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;z-index:0;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;border-radius:6px;background-color:#F9FBFA;border-color:#889397;color:#001E2B;font-size:13px;line-height:20px;font-weight:500;height:28px;border-top-left-radius:0px;border-bottom-left-radius:0px;margin-left:-1px;width:32px;}.leafygreen-ui-5cbf4u:focus-visible,.leafygreen-ui-5cbf4u[data-focus="true"]{outline:none;}.leafygreen-ui-5cbf4u:active,.leafygreen-ui-5cbf4u[data-active="true"],.leafygreen-ui-5cbf4u:focus,.leafygreen-ui-5cbf4u:hover{-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-5cbf4u:focus-visible,.leafygreen-ui-5cbf4u[data-focus="true"]{color:#001E2B;}.leafygreen-ui-5cbf4u:hover,.leafygreen-ui-5cbf4u[data-hover="true"],.leafygreen-ui-5cbf4u:active,.leafygreen-ui-5cbf4u[data-active="true"]{color:#001E2B;background-color:#FFFFFF;box-shadow:0 0 0 3px #E8EDEB;}.leafygreen-ui-5cbf4u:focus-visible,.leafygreen-ui-5cbf4u[data-focus="true"]{background-color:#FFFFFF;box-shadow:0 0 0 2px #FFFFFF,0 0 0 4px #0498EC;}.leafygreen-ui-5cbf4u:focus,.leafygreen-ui-5cbf4u:focus-visible,.leafygreen-ui-5cbf4u:hover{z-index:1;}.leafygreen-ui-5cbf4u,.leafygreen-ui-5cbf4u:hover,.leafygreen-ui-5cbf4u:focus,.leafygreen-ui-5cbf4u:focus-visible,.leafygreen-ui-5cbf4u:active{border-left-color:#889397;}.leafygreen-ui-5cbf4u svg{color:#3D4F58;}</style><button data-lgid="lg-split_button-trigger" type="button" class="lg-ui-button-0000 leafygreen-ui-5cbf4u" aria-disabled="false" aria-label="More options" aria-controls="" aria-expanded="false" aria-haspopup="true" data-testid="lg-split_button-trigger"><div class="leafygreen-ui-v038xi"></div><div class="leafygreen-ui-16tr4y"><style data-emotion="leafygreen-ui yk23yl" nonce="4.1.1">.leafygreen-ui-yk23yl{color:#001E2B;height:16px;width:16px;justify-self:right;}.leafygreen-ui-yk23yl .lg-ui-button-0000:hover,.leafygreen-ui-yk23yl .lg-ui-button-0000:active{color:currentColor;}</style><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-yk23yl" role="img" aria-label="Caret Down Icon"><path fill="currentColor" d="M8.679 10.796a.554.554 0 0 1-.858 0L4.64 6.976C4.32 6.594 4.582 6 5.069 6h6.362c.487 0 .748.594.43.976l-3.182 3.82Z"></path></svg></div></button><style data-emotion="leafygreen-ui 38lglc" nonce="4.1.1">.leafygreen-ui-38lglc{display:none;}</style><span class="leafygreen-ui-38lglc"></span></div></div><style data-emotion="leafygreen-ui 9xwe5u" nonce="4.1.1">.leafygreen-ui-9xwe5u{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:10px 12px 10px 20px;border-width:1px 1px 1px 0px;border-style:solid;border-radius:12px;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;font-size:16px;line-height:28px;color:#083C90;border-color:#C3E7FE;background-color:#E1F7FF;margin:16px 0;font-size:13px;background-color:#E1F7FF;color:#083C90;border-color:#C3E7FE;}.leafygreen-ui-9xwe5u:before{content:'';position:absolute;width:13px;top:-1px;bottom:-1px;left:0px;border-radius:12px 0px 0px 12px;}.leafygreen-ui-9xwe5u .lg-ui-0001,.leafygreen-ui-9xwe5u a{color:#0C2657;}.leafygreen-ui-9xwe5u .lg-ui-0001:hover,.leafygreen-ui-9xwe5u a:hover{color:#083C90;}.leafygreen-ui-9xwe5u .lg-ui-0001:focus-visible,.leafygreen-ui-9xwe5u a:focus-visible{box-shadow:0 0 0 3px #E1F7FF,0 0 0 5px #FFFFFF,0 0 0 7px #0498EC;}.leafygreen-ui-9xwe5u:before{background:linear-gradient(
      to left,
      transparent 6px,
      #016BF8 6px
    );}.leafygreen-ui-9xwe5u>div>div>*{margin:0 0 12px;}.leafygreen-ui-9xwe5u>div>div>*:last-child{margin:0;}.leafygreen-ui-9xwe5u p{margin:0;}.leafygreen-ui-9xwe5u p,.leafygreen-ui-9xwe5u a{font-size:13px;}.leafygreen-ui-9xwe5u a:hover{text-underline-offset:3px;}.leafygreen-ui-9xwe5u::before{background:linear-gradient(to left, transparent 6px, #016BF8 6px);}.leafygreen-ui-9xwe5u a{color:#0C2657;}.leafygreen-ui-9xwe5u a:hover{color:#083C90;text-decoration-color:#083C90;}.leafygreen-ui-9xwe5u >svg{color:#016BF8;}.dark-theme .leafygreen-ui-9xwe5u{background-color:#0C2657;color:#C3E7FE;border-color:#083C90;}.dark-theme .leafygreen-ui-9xwe5u::before{background:linear-gradient(to left, transparent 6px, #0498EC 6px);}.dark-theme .leafygreen-ui-9xwe5u a{color:#E1F7FF;}.dark-theme .leafygreen-ui-9xwe5u a:hover{color:#C3E7FE;text-decoration-color:#C3E7FE;}.dark-theme .leafygreen-ui-9xwe5u >svg{color:#0498EC;}</style><div role="alert" class="leafygreen-ui-9xwe5u"><style data-emotion="leafygreen-ui 5417yr" nonce="4.1.1">.leafygreen-ui-5417yr{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:#016BF8;top:5.5px;}</style><svg class="leafygreen-ui-5417yr" height="16" width="16" role="img" aria-label="Info With Circle Icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15ZM9 4C9 4.55228 8.55228 5 8 5C7.44772 5 7 4.55228 7 4C7 3.44772 7.44772 3 8 3C8.55228 3 9 3.44772 9 4ZM8 6C8.55228 6 9 6.44772 9 7V11H9.5C9.77614 11 10 11.2239 10 11.5C10 11.7761 9.77614 12 9.5 12H6.5C6.22386 12 6 11.7761 6 11.5C6 11.2239 6.22386 11 6.5 11H7V7H6.5C6.22386 7 6 6.77614 6 6.5C6 6.22386 6.22386 6 6.5 6H8Z" fill="currentColor"></path></svg><style data-emotion="leafygreen-ui hvzjye" nonce="4.1.1">.leafygreen-ui-hvzjye{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;margin-left:13px;margin-right:10px;}.leafygreen-ui-hvzjye .lg-ui-0001,.leafygreen-ui-hvzjye a{font-size:inherit;line-height:inherit;font-weight:700;-webkit-text-decoration:underline;text-decoration:underline;text-underline-offset:3px;text-decoration-thickness:2px;border-radius:4px;display:inline;}.leafygreen-ui-hvzjye .lg-ui-0001:hover,.leafygreen-ui-hvzjye a:hover,.leafygreen-ui-hvzjye .lg-ui-0001:focus,.leafygreen-ui-hvzjye a:focus,.leafygreen-ui-hvzjye .lg-ui-0001:focus-visible,.leafygreen-ui-hvzjye a:focus-visible{outline:none;}.leafygreen-ui-hvzjye .lg-ui-0001:hover span::after,.leafygreen-ui-hvzjye a:hover span::after,.leafygreen-ui-hvzjye .lg-ui-0001:focus span::after,.leafygreen-ui-hvzjye a:focus span::after,.leafygreen-ui-hvzjye .lg-ui-0001:focus-visible span::after,.leafygreen-ui-hvzjye a:focus-visible span::after{display:none;}.leafygreen-ui-hvzjye .lg-ui-0001:focus-visible,.leafygreen-ui-hvzjye a:focus-visible{position:relative;}</style><div class="leafygreen-ui-hvzjye">This version of the documentation is archived and no longer supported. To
upgrade your 5.0 deployment, see the <style data-emotion="leafygreen-ui 54xlkh" nonce="4.1.1">.leafygreen-ui-54xlkh{font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;text-decoration-color:transparent;cursor:pointer;font-size:inherit;line-height:inherit;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:none;border:none;padding:0;font-size:16px;line-height:28px;color:#016BF8;font-weight:400;display:inline;color:var(--link-color-primary);font-weight:var(--link-font-weight);}.leafygreen-ui-54xlkh:hover,.leafygreen-ui-54xlkh:focus{-webkit-text-decoration:underline;text-decoration:underline;-webkit-transition:text-decoration 150ms ease-in-out;transition:text-decoration 150ms ease-in-out;text-underline-offset:4px;text-decoration-thickness:2px;}.leafygreen-ui-54xlkh:focus{outline:none;}.leafygreen-ui-54xlkh:hover{text-decoration-color:#E8EDEB;}.leafygreen-ui-54xlkh:focus{text-decoration-color:#016BF8;}.leafygreen-ui-54xlkh >span>code,.leafygreen-ui-54xlkh >code{color:var(--link-color-primary);font-weight:var(--link-font-weight);}</style><a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="https://www.mongodb.com/docs/manual/release-notes/6.0/#upgrade-procedures"><span>MongoDB 6.0 upgrade procedures</span></a>.</div></div><section><style data-emotion="leafygreen-ui e8trgl" nonce="4.1.1">.leafygreen-ui-e8trgl{margin:unset;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;color:#001E2B;font-size:24px;line-height:32px;font-weight:500;color:#001E2B;margin-top:24px;margin-bottom:8px;color:var(--font-color-primary);}</style><h2 class="contains-headerlink leafygreen-ui-e8trgl" weight="medium">Callback API vs Core API<a class="headerlink leafygreen-ui-11mfcte" href="index.html#callback-api-vs-core-api" title="Permalink to this heading"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-a30zj9" role="img" aria-label="Link Icon"><path fill="currentColor" d="M6.039 9.953a3.596 3.596 0 0 1-.327-.38l1.45-1.445a1.553 1.553 0 0 0 2.496.423l2.885-2.87a1.57 1.57 0 0 0 .01-2.213 1.553 1.553 0 0 0-2.203-.01l-.379.377A.995.995 0 0 1 8.56 3.83a1.005 1.005 0 0 1 .006-1.418l.38-.377a3.542 3.542 0 0 1 5.024.023 3.58 3.58 0 0 1-.022 5.047l-2.884 2.871a3.542 3.542 0 0 1-5.025-.022Z"></path><path fill="currentColor" d="M9.961 6.047c.12.12.228.248.327.38l-1.45 1.445a1.553 1.553 0 0 0-2.496-.423l-2.885 2.87a1.57 1.57 0 0 0-.01 2.213 1.553 1.553 0 0 0 2.203.01l.379-.377a.995.995 0 0 1 1.411.006 1.005 1.005 0 0 1-.006 1.418l-.38.377a3.542 3.542 0 0 1-5.024-.023 3.58 3.58 0 0 1 .022-5.047l2.884-2.871a3.542 3.542 0 0 1 5.025.022Z"></path></svg><div id="callback-api-vs-core-api" class="css-zena35 e1kswsxc0"></div></a></h2><style data-emotion="leafygreen-ui 1kp3ins" nonce="4.1.1">.leafygreen-ui-1kp3ins{margin:unset;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;color:#001E2B;font-size:16px;line-height:28px;color:#001E2B;font-weight:400;margin-bottom:16px;color:var(--font-color-primary);}.leafygreen-ui-1kp3ins strong,.leafygreen-ui-1kp3ins b{font-weight:700;}</style><p class="leafygreen-ui-1kp3ins">The <a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-txn-callback-api"><span>Callback API<!-- -->:</span></a></p><style data-emotion="leafygreen-ui rioki0" nonce="4.1.1">.leafygreen-ui-rioki0{margin-top:0px;}</style><ul class="leafygreen-ui-rioki0"><style data-emotion="leafygreen-ui d7p7b6" nonce="4.1.1">.leafygreen-ui-d7p7b6::marker{color:var(--font-color-primary);}.leafygreen-ui-d7p7b6>p{margin-bottom:8px;}</style><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Starts a transaction, executes the specified operations, and commits
(or aborts on error).</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Automatically incorporates error handling logic for
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transient-transaction-error"><span><style data-emotion="leafygreen-ui 19v7id5" nonce="4.1.1">.leafygreen-ui-19v7id5{font-size:15px;line-height:24px;display:inline;-webkit-transition:all 0.15s ease-in-out;transition:all 0.15s ease-in-out;border-radius:3px;font-family:'Source Code Pro',Menlo,monospace;line-height:20px;background-color:#F9FBFA;border:1px solid #E8EDEB;color:#1C2D38;white-space:nowrap;font-size:unset;display:inline;color:var(--font-color-primary);background:var(--background-color-secondary);word-wrap:break-word;white-space:unset;}.lg-ui-0000:hover>.leafygreen-ui-19v7id5{-webkit-text-decoration:none;text-decoration:none;}.lg-ui-0000:hover>.leafygreen-ui-19v7id5{box-shadow:0 0 0 3px #E8EDEB;border:1px solid #C1C7C6;}.lg-ui-0000:focus-visible>.leafygreen-ui-19v7id5{box-shadow:0 0 0 2px #FFFFFF,0 0 0 4px #0498EC;border:1px solid #016BF8;}a .leafygreen-ui-19v7id5{color:inherit;}</style><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code></span></a> and
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-unknown-transaction-commit-result"><span><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code>.</span></a></p></li></ul><p class="leafygreen-ui-1kp3ins">The <a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-txn-core-api"><span>Core API<!-- -->:</span></a></p><ul class="leafygreen-ui-rioki0"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Requires explicit call to start the transaction and commit the
transaction.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Does not incorporate error handling logic for
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transient-transaction-error"><span><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code></span></a> and
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-unknown-transaction-commit-result"><span><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code></span></a>, and instead provides the
flexibility to incorporate custom error handling for these errors.</p></li></ul><span class="leafygreen-ui-1qnjd6d" id="std-label-txn-callback-api"></span></section><section><h2 class="contains-headerlink leafygreen-ui-e8trgl" weight="medium">Callback API<a class="headerlink leafygreen-ui-11mfcte" href="index.html#callback-api" title="Permalink to this heading"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-a30zj9" role="img" aria-label="Link Icon"><path fill="currentColor" d="M6.039 9.953a3.596 3.596 0 0 1-.327-.38l1.45-1.445a1.553 1.553 0 0 0 2.496.423l2.885-2.87a1.57 1.57 0 0 0 .01-2.213 1.553 1.553 0 0 0-2.203-.01l-.379.377A.995.995 0 0 1 8.56 3.83a1.005 1.005 0 0 1 .006-1.418l.38-.377a3.542 3.542 0 0 1 5.024.023 3.58 3.58 0 0 1-.022 5.047l-2.884 2.871a3.542 3.542 0 0 1-5.025-.022Z"></path><path fill="currentColor" d="M9.961 6.047c.12.12.228.248.327.38l-1.45 1.445a1.553 1.553 0 0 0-2.496-.423l-2.885 2.87a1.57 1.57 0 0 0-.01 2.213 1.553 1.553 0 0 0 2.203.01l.379-.377a.995.995 0 0 1 1.411.006 1.005 1.005 0 0 1-.006 1.418l-.38.377a3.542 3.542 0 0 1-5.024-.023 3.58 3.58 0 0 1 .022-5.047l2.884-2.871a3.542 3.542 0 0 1 5.025.022Z"></path></svg><div id="callback-api" class="css-zena35 e1kswsxc0"></div></a></h2><p class="leafygreen-ui-1kp3ins">The callback API incorporates logic:</p><ul class="leafygreen-ui-rioki0"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">To retry the transaction as a whole if the transaction encounters a
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transient-transaction-error"><span><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code>.</span></a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">To retry the commit operation if the commit encounters an
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-unknown-transaction-commit-result"><span><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code></span></a> error.</p></li></ul><p class="leafygreen-ui-1kp3ins">Starting in MongoDB 5.0.16, the server does not retry the transaction if
it receives a <a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transactionTooLargeForCache-error"><span><code class="leafygreen-ui-19v7id5">TransactionTooLargeForCache</code></span></a> error.</p><section><style data-emotion="leafygreen-ui 3itm7" nonce="4.1.1">.leafygreen-ui-3itm7{margin:unset;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;color:#001E2B;font-size:18px;line-height:24px;font-weight:700;color:#001E2B;margin-top:24px;margin-bottom:8px;color:var(--font-color-primary);}</style><h3 class="contains-headerlink leafygreen-ui-3itm7" weight="medium">Example<a class="headerlink leafygreen-ui-11mfcte" href="index.html#example" title="Permalink to this heading"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-a30zj9" role="img" aria-label="Link Icon"><path fill="currentColor" d="M6.039 9.953a3.596 3.596 0 0 1-.327-.38l1.45-1.445a1.553 1.553 0 0 0 2.496.423l2.885-2.87a1.57 1.57 0 0 0 .01-2.213 1.553 1.553 0 0 0-2.203-.01l-.379.377A.995.995 0 0 1 8.56 3.83a1.005 1.005 0 0 1 .006-1.418l.38-.377a3.542 3.542 0 0 1 5.024.023 3.58 3.58 0 0 1-.022 5.047l-2.884 2.871a3.542 3.542 0 0 1-5.025-.022Z"></path><path fill="currentColor" d="M9.961 6.047c.12.12.228.248.327.38l-1.45 1.445a1.553 1.553 0 0 0-2.496-.423l-2.885 2.87a1.57 1.57 0 0 0-.01 2.213 1.553 1.553 0 0 0 2.203.01l.379-.377a.995.995 0 0 1 1.411.006 1.005 1.005 0 0 1-.006 1.418l-.38.377a3.542 3.542 0 0 1-5.024-.023 3.58 3.58 0 0 1 .022-5.047l2.884-2.871a3.542 3.542 0 0 1 5.025.022Z"></path></svg><div id="example" class="css-zena35 e1kswsxc0"></div></a></h3><style data-emotion="css 1unva0n">.css-1unva0n{border:0.5px solid #E8EDEB;}</style><hr class="css-1unva0n e1tg1ocj0"/><p class="leafygreen-ui-1kp3ins">➤<!-- --> Use the <strong>Select your language</strong> drop-down menu in the
upper-right to set the language of the examples on this page.</p><hr class="css-1unva0n e1tg1ocj0"/><div aria-hidden="true"></div><style data-emotion="leafygreen-ui f2qztv" nonce="4.1.1">.leafygreen-ui-f2qztv{margin-bottom:24px;}.leafygreen-ui-f2qztv button[role="tab"]{color:var(--tab-color-primary);font-size:16px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.leafygreen-ui-f2qztv button[role="tab"][aria-selected='true']{color:var(--tab-color-secondary);}@media only screen and (max-width: 1440px){.leafygreen-ui-f2qztv button[role="tab"]{overflow:initial;max-width:initial;text-overflow:initial;}}.leafygreen-ui-f2qztv>div:first-of-type{display:none;}.leafygreen-ui-f2qztv [aria-label*='Tabs to describe usage of']{background:linear-gradient(0deg, #E8EDEB 1px, rgb(255 255 255 / 0%) 1px);}.dark-theme .leafygreen-ui-f2qztv [aria-label*='Tabs to describe usage of']{background:linear-gradient(0deg, #3D4F58 1px, rgb(255 255 255 / 0%) 1px);}</style><div class="leafygreen-ui-f2qztv drivers" data-lgid="lg-tabs"><style data-emotion="leafygreen-ui jp7pox" nonce="4.1.1">.leafygreen-ui-jp7pox{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}</style><div class="leafygreen-ui-jp7pox" id="tabs-undefined"><style data-emotion="leafygreen-ui m8p1vb" nonce="4.1.1">.leafygreen-ui-m8p1vb{list-style:none;padding:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;overflow-x:auto;background:linear-gradient(
    0deg,
    #E8EDEB 1px,
    rgb(255 255 255 / 0%) 1px
  );-ms-overflow-style:none;scrollbar-width:none;}.leafygreen-ui-m8p1vb::-webkit-scrollbar{display:none;}</style><div class="leafygreen-ui-m8p1vb lg-ui-tab-list-0000" data-lgid="lg-tabs-tab_list" role="tablist" aria-orientation="horizontal" aria-label="Tabs to describe usage of drivers"><style data-emotion="leafygreen-ui 1ogxb8f" nonce="4.1.1">.leafygreen-ui-1ogxb8f{font-size:16px;line-height:28px;height:52px;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:500;position:relative;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;max-width:300px;padding:12px 16px;background-color:transparent;border:0px;margin:0;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:150ms color ease-in-out;transition:150ms color ease-in-out;color:#5C6C75;}.leafygreen-ui-1ogxb8f:focus:not(:disabled){outline:none;font-weight:700;}.leafygreen-ui-1ogxb8f:before{content:attr(data-text);height:0;font-weight:700;visibility:hidden;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;}.leafygreen-ui-1ogxb8f:after{content:'';position:absolute;left:0;right:0;bottom:0;height:4px;border-radius:4px 4px 0 0;-webkit-transition:all 150ms ease-in-out;transition:all 150ms ease-in-out;background-color:transparent;-webkit-transform:scaleX(0.8);-moz-transform:scaleX(0.8);-ms-transform:scaleX(0.8);transform:scaleX(0.8);}.leafygreen-ui-1ogxb8f:hover:after{-webkit-transform:scaleX(0.95);-moz-transform:scaleX(0.95);-ms-transform:scaleX(0.95);transform:scaleX(0.95);}.leafygreen-ui-1ogxb8f:active:after:after{-webkit-transform:scaleX(1);-moz-transform:scaleX(1);-ms-transform:scaleX(1);transform:scaleX(1);}.leafygreen-ui-1ogxb8f:hover{cursor:pointer;color:#1C2D38;}.leafygreen-ui-1ogxb8f:hover:after{background-color:#E8EDEB;}.leafygreen-ui-1ogxb8f:focus-visible{color:#016BF8;}.leafygreen-ui-1ogxb8f:focus-visible:after{background-color:#0498EC;}</style><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_61nmh2bs7" name="" role="tab" tabindex="-1" data-tabid="c"><style data-emotion="leafygreen-ui 1nxuzmg" nonce="4.1.1">.leafygreen-ui-1nxuzmg{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.leafygreen-ui-1nxuzmg >svg{vertical-align:text-bottom;margin-right:4px;}</style><div class="leafygreen-ui-1nxuzmg">C</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_8k1rc9huw" name="" role="tab" tabindex="-1" data-tabid="cpp"><div class="leafygreen-ui-1nxuzmg">C++11</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_yrw8libe0" name="" role="tab" tabindex="-1" data-tabid="csharp"><div class="leafygreen-ui-1nxuzmg">C#</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_ocohjr00v" name="" role="tab" tabindex="-1" data-tabid="go"><div class="leafygreen-ui-1nxuzmg">Go</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_gvc5ljekc" name="" role="tab" tabindex="-1" data-tabid="java-sync"><div class="leafygreen-ui-1nxuzmg">Java (Sync)</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_6o64nlom8" name="" role="tab" tabindex="-1" data-tabid="motor"><div class="leafygreen-ui-1nxuzmg">Motor</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_ag0onhfb7" name="" role="tab" tabindex="-1" data-tabid="nodejs"><div class="leafygreen-ui-1nxuzmg">Node.js</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_6k8tl2dpg" name="" role="tab" tabindex="-1" data-tabid="perl"><div class="leafygreen-ui-1nxuzmg">Perl</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_arilh4av2" name="" role="tab" tabindex="-1" data-tabid="php"><div class="leafygreen-ui-1nxuzmg">PHP</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_ribwiqy7c" name="" role="tab" tabindex="-1" data-tabid="python"><div class="leafygreen-ui-1nxuzmg">Python</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_zhmqu9nkp" name="" role="tab" tabindex="-1" data-tabid="ruby"><div class="leafygreen-ui-1nxuzmg">Ruby</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_o44ioh6ji" name="" role="tab" tabindex="-1" data-tabid="scala"><div class="leafygreen-ui-1nxuzmg">Scala</div></button></div><style data-emotion="leafygreen-ui ov1ktg" nonce="4.1.1">.leafygreen-ui-ov1ktg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="leafygreen-ui-ov1ktg"><style data-emotion="leafygreen-ui 1sg2lsz" nonce="4.1.1">.leafygreen-ui-1sg2lsz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="leafygreen-ui-1sg2lsz"></div></div></div><div class="lg-ui-tab-panels-0000" data-lgid="lg-tabs-tab_panels"><div><div class="leafygreen-ui-38lglc" id="_kqoh72vku" role="tabpanel"><style data-emotion="leafygreen-ui 1kdmo88" nonce="4.1.1">.leafygreen-ui-1kdmo88{margin-top:24px;}</style><div class="leafygreen-ui-1kdmo88"><style data-emotion="leafygreen-ui 85da11" nonce="4.1.1">.leafygreen-ui-85da11{font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;color:#001E2B;-webkit-padding-start:12px;padding-inline-start:12px;position:relative;margin-top:24px;margin-bottom:24px;}.leafygreen-ui-85da11:after{content:'';position:absolute;width:3px;top:0px;bottom:0px;left:0;border-radius:2px;background-color:#FFC010;}.leafygreen-ui-85da11 p,.leafygreen-ui-85da11 li::marker{color:var(--font-color-primary);}.leafygreen-ui-85da11 p>a[class^='leafy']{color:var(--link-color-primary);font-weight:var(--link-font-weight);}.leafygreen-ui-85da11 >li:last-of-type,.leafygreen-ui-85da11 >ul:last-of-type,.leafygreen-ui-85da11 >ol:last-of-type,.leafygreen-ui-85da11 >li:last-of-type>p,.leafygreen-ui-85da11 >p:last-of-type{margin-bottom:0px;}.leafygreen-ui-85da11 h2{color:#944F01;}.leafygreen-ui-85da11:after{background-color:#FFC010;}.dark-theme .leafygreen-ui-85da11 h2{color:#FFEC9E;}</style><div role="note" class="leafygreen-ui-85da11"><style data-emotion="leafygreen-ui 1ac4g5h" nonce="4.1.1">.leafygreen-ui-1ac4g5h{margin:unset;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;color:#001E2B;font-size:12px;font-weight:700;text-transform:uppercase;line-height:20px;letter-spacing:0.4px;color:#001E2B;width:100%;margin-block-end:4px;color:#944F01;}</style><h2 class="leafygreen-ui-1ac4g5h">Important</h2><style data-emotion="leafygreen-ui 9mycqc" nonce="4.1.1">.leafygreen-ui-9mycqc{margin:unset;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;color:#001E2B;font-size:16px;line-height:28px;color:#001E2B;font-weight:400;}.leafygreen-ui-9mycqc strong,.leafygreen-ui-9mycqc b{font-weight:700;}.leafygreen-ui-9mycqc a:not(.lg-ui-0001){font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;display:inline;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;text-decoration-color:transparent;cursor:pointer;font-size:inherit;line-height:inherit;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:none;border:none;padding:0;color:#016BF8;font-weight:400;}.leafygreen-ui-9mycqc a:not(.lg-ui-0001):hover,.leafygreen-ui-9mycqc a:not(.lg-ui-0001)[data-hover='true'],.leafygreen-ui-9mycqc a:not(.lg-ui-0001):focus-visible,.leafygreen-ui-9mycqc a:not(.lg-ui-0001)[data-focus='true']{-webkit-text-decoration:underline;text-decoration:underline;-webkit-transition:text-decoration 150ms ease-in-out;transition:text-decoration 150ms ease-in-out;text-underline-offset:4px;text-decoration-thickness:2px;}.leafygreen-ui-9mycqc a:not(.lg-ui-0001):focus{outline:none;}.leafygreen-ui-9mycqc a:not(.lg-ui-0001):hover,.leafygreen-ui-9mycqc a:not(.lg-ui-0001)[data-hover='true']{text-decoration-color:#E8EDEB;}.leafygreen-ui-9mycqc a:not(.lg-ui-0001):focus-visible,.leafygreen-ui-9mycqc a:not(.lg-ui-0001)[data-focus='true']{text-decoration-color:#016BF8;}</style><div class="leafygreen-ui-9mycqc"><ul class="leafygreen-ui-rioki0"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Use the MongoDB driver for your MongoDB version.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">When using drivers, each operation in the transaction must pass
the session to each operation.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Operations in a transaction use <style data-emotion="leafygreen-ui 11szg22" nonce="4.1.1">.leafygreen-ui-11szg22{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;position:relative;-webkit-text-decoration:none;text-decoration:none;text-decoration-color:transparent;line-height:13px;color:var(--link-color-primary);font-weight:var(--link-font-weight);}.leafygreen-ui-11szg22 >span>code,.leafygreen-ui-11szg22 >code{color:var(--link-color-primary);font-weight:var(--link-font-weight);}.leafygreen-ui-11szg22:focus,.leafygreen-ui-11szg22:hover{text-decoration-line:underline;-webkit-transition:text-decoration 150ms ease-in-out;transition:text-decoration 150ms ease-in-out;text-underline-offset:4px;text-decoration-thickness:2px;}.leafygreen-ui-11szg22:focus{text-decoration-color:#016BF8;outline:none;}.leafygreen-ui-11szg22:hover{text-decoration-color:#E8EDEB;}</style><a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-concern">transaction-level read
concern</a>, <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-write-concern">transaction-level
write concern</a>, and
<a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-preference">transaction-level read preference<!-- -->.</a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">You can create collections in transactions implicitly or
explicitly. See <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-create-collections-indexes">Create Collections and Indexes in a Transaction<!-- -->.</a></p></li></ul></div></div><p class="leafygreen-ui-1kp3ins">The example uses the new callback API for working with
transactions, which starts a transaction, executes the
specified operations, and commits (or aborts on error). The
new callback API incorporates retry logic for
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transient-transaction-error"><span><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code></span></a> or
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-unknown-transaction-commit-result"><span><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code></span></a> commit errors.</p><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"static bool\nwith_transaction_example(bson_error_t *error)\n{\n   mongoc_client_t *client = NULL;\n   mongoc_write_concern_t *wc = NULL;\n   mongoc_collection_t *coll = NULL;\n   bool success = false;\n   bool ret = false;\n   bson_t *doc = NULL;\n   bson_t *insert_opts = NULL;\n   mongoc_client_session_t *session = NULL;\n   mongoc_transaction_opt_t *txn_opts = NULL;\n\n   /* For a replica set, include the replica set name and a seedlist of the\n    * members in the URI string; e.g.\n    * uri_repl = \"mongodb://mongodb0.example.com:27017,mongodb1.example.com:\" \\\n    *    \"27017/?replicaSet=myRepl\";\n    * client = mongoc_client_new (uri_repl);\n    * For a sharded cluster, connect to the mongos instances; e.g.\n    * uri_sharded =\n    * \"mongodb://mongos0.example.com:27017,mongos1.example.com:27017/\";\n    * client = mongoc_client_new (uri_sharded);\n    */\n\n   client = get_client();\n\n   /* Prereq: Create collections. Note Atlas connection strings include a majority write\n    * concern by default.\n    */\n   wc = mongoc_write_concern_new();\n   mongoc_write_concern_set_wmajority(wc, 1000);\n   insert_opts = bson_new();\n   mongoc_write_concern_append(wc, insert_opts);\n   coll = mongoc_client_get_collection(client, \"mydb1\", \"foo\");\n   doc = BCON_NEW(\"abc\", BCON_INT32(0));\n   ret = mongoc_collection_insert_one(coll, doc, insert_opts, NULL /* reply */, error);\n   if (!ret) {\n      goto fail;\n   }\n   bson_destroy(doc);\n   mongoc_collection_destroy(coll);\n   coll = mongoc_client_get_collection(client, \"mydb2\", \"bar\");\n   doc = BCON_NEW(\"xyz\", BCON_INT32(0));\n   ret = mongoc_collection_insert_one(coll, doc, insert_opts, NULL /* reply */, error);\n   if (!ret) {\n      goto fail;\n   }\n\n   /* Step 1: Start a client session. */\n   session = mongoc_client_start_session(client, NULL /* opts */, error);\n   if (!session) {\n      goto fail;\n   }\n\n   /* Step 2: Optional. Define options to use for the transaction. */\n   txn_opts = mongoc_transaction_opts_new();\n   mongoc_transaction_opts_set_write_concern(txn_opts, wc);\n\n   /* Step 3: Use mongoc_client_session_with_transaction to start a transaction,\n    * execute the callback, and commit (or abort on error). */\n   ret = mongoc_client_session_with_transaction(session, callback, txn_opts, NULL /* ctx */, NULL /* reply */, error);\n   if (!ret) {\n      goto fail;\n   }\n\n   success = true;\nfail:\n   bson_destroy(doc);\n   mongoc_collection_destroy(coll);\n   bson_destroy(insert_opts);\n   mongoc_write_concern_destroy(wc);\n   mongoc_transaction_opts_destroy(txn_opts);\n   mongoc_client_session_destroy(session);\n   mongoc_client_destroy(client);\n   return success;\n}\n\n/* Define the callback that specifies the sequence of operations to perform\n * inside the transactions. */\nstatic bool\ncallback(mongoc_client_session_t *session, void *ctx, bson_t **reply, bson_error_t *error)\n{\n   mongoc_client_t *client = NULL;\n   mongoc_collection_t *coll = NULL;\n   bson_t *doc = NULL;\n   bool success = false;\n   bool ret = false;\n\n   BSON_UNUSED(ctx);\n\n   client = mongoc_client_session_get_client(session);\n   coll = mongoc_client_get_collection(client, \"mydb1\", \"foo\");\n   doc = BCON_NEW(\"abc\", BCON_INT32(1));\n   ret = mongoc_collection_insert_one(coll, doc, NULL /* opts */, *reply, error);\n   if (!ret) {\n      goto fail;\n   }\n   bson_destroy(doc);\n   mongoc_collection_destroy(coll);\n   coll = mongoc_client_get_collection(client, \"mydb2\", \"bar\");\n   doc = BCON_NEW(\"xyz\", BCON_INT32(999));\n   ret = mongoc_collection_insert_one(coll, doc, NULL /* opts */, *reply, error);\n   if (!ret) {\n      goto fail;\n   }\n\n   success = true;\nfail:\n   mongoc_collection_destroy(coll);\n   bson_destroy(doc);\n   return success;\n}","programmingLanguage":"C"}</script><style data-emotion="leafygreen-ui 9duavq q0s36i" nonce="4.1.1">.leafygreen-ui-9duavq{display:table;margin:24px 0;min-width:150px;table-layout:fixed;width:100%;}.leafygreen-ui-9duavq button>div>div{font-size:13px;}.leafygreen-ui-9duavq pre{background-color:#F9FBFA;color:#001E2B;}.dark-theme .leafygreen-ui-9duavq pre{background-color:#001E2B;color:#F9FBFA;}.leafygreen-ui-9duavq [data-testid='leafygreen-code-panel']{background-color:#FFFFFF;border-color:#E8EDEB;}.dark-theme .leafygreen-ui-9duavq [data-testid='leafygreen-code-panel']{background-color:#3D4F58;border-color:#3D4F58;}.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-keyword,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-keyword.lg-highlight-function,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-keyword.lg-highlight-class,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-selector-tag,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-selector-attr,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-selector-pseudo,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-selector-id,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-selector-class{color:#CC3887;}.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-keyword,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-keyword.lg-highlight-function,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-keyword.lg-highlight-class,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-selector-tag,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-selector-attr,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-selector-pseudo,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-selector-id,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-selector-class{color:#FF7DC3;}.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-regexp,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-number,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-literal,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-function.lg-highlight-title{color:#016ee9;}.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-regexp,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-number,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-literal,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-function.lg-highlight-title{color:#2dc4ff;}.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-quote,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-section,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-name{color:#007ab8;}.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-quote,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-section,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-name{color:#a5e3ff;}.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-string,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-addition{color:#12824D;}.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-string,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-addition{color:#35DE7B;}.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-meta,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-meta-string{color:#956d00;}.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-meta,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-meta-string{color:#EDB210;}.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-variable,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-deletion,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-symbol,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-bullet,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-meta,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-link,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-attr,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-attribute,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-language,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-template-variable,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-built_in,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-type,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-params{color:#D83713;}.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-variable,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-deletion,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-symbol,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-bullet,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-meta,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-link,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-attr,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-attribute,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-language,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-template-variable,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-built_in,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-type,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-params{color:#FF6F44;}.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-title,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-class.lg-highlight-title{color:#001E2B;}.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-title,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-class.lg-highlight-title{color:#F9FBFA;}.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-doctag,.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-formula{color:#001E2B;}.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-doctag,.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-formula{color:#F9FBFA;}.leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-comment{color:#3D4F58;}.dark-theme .leafygreen-ui-9duavq [class*='lg-highlight-hljs-'] .lg-highlight-comment{color:#C1C7C6;}.leafygreen-ui-q0s36i >div>div{display:grid;grid-template-columns:code panel;}.leafygreen-ui-q0s36i >div{border-top-left-radius:12px;border-top-right-radius:12px;border-color:#E8EDEB;}.dark-theme .leafygreen-ui-q0s36i >div{border-color:#3D4F58;}</style><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><style data-emotion="leafygreen-ui 196mwvg" nonce="4.1.1">.leafygreen-ui-196mwvg{border:1px solid #E8EDEB;border-radius:12px;overflow:hidden;}</style><div class="leafygreen-ui-196mwvg"><style data-emotion="leafygreen-ui yzcs8i" nonce="4.1.1">.leafygreen-ui-yzcs8i{position:relative;display:grid;grid-template-areas:'code panel';grid-template-columns:auto 38px;border-radius:inherit;z-index:0;}.leafygreen-ui-yzcs8i:before,.leafygreen-ui-yzcs8i:after{content:'';display:block;position:absolute;z-index:1;top:0;height:100%;width:40px;border-radius:40%;box-shadow:unset;-webkit-transition:box-shadow 100ms ease-in-out;transition:box-shadow 100ms ease-in-out;}.leafygreen-ui-yzcs8i:before{grid-column:1;left:-40px;}.leafygreen-ui-yzcs8i:after{grid-column:2;}</style><div class="leafygreen-ui-yzcs8i"><style data-emotion="leafygreen-ui 11itue3" nonce="4.1.1">.leafygreen-ui-11itue3{grid-area:code;overflow-x:auto;border-radius:inherit;border-top-right-radius:0;border-bottom-right-radius:0;border:0;padding-top:8px;padding-bottom:8px;margin:0;position:relative;-webkit-transition:box-shadow 100ms ease-in-out;transition:box-shadow 100ms ease-in-out;white-space:pre;background-color:#F9FBFA;color:#001E2B;}@media only screen and (max-device-width: 812px) and (-webkit-min-device-pixel-ratio: 2){.leafygreen-ui-11itue3{white-space:pre-wrap;}}@media only screen and (min-device-width: 813px) and (-webkit-min-device-pixel-ratio: 2){.leafygreen-ui-11itue3{white-space:pre;}}.leafygreen-ui-11itue3:focus-visible{outline:none;box-shadow:0 0 0 2px #0498EC inset;}</style><pre class="leafygreen-ui-11itue3" tabindex="-1"><style data-emotion="leafygreen-ui 9ybzas" nonce="4.1.1">.leafygreen-ui-9ybzas{color:inherit;font-family:'Source Code Pro',Menlo,monospace;font-size:15px;line-height:24px;}</style><code class="lg-highlight-hljs-light c leafygreen-ui-9ybzas"><style data-emotion="leafygreen-ui 1tr4g10" nonce="4.1.1">.leafygreen-ui-1tr4g10{border-spacing:0;}</style><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><style data-emotion="leafygreen-ui 7razhx" nonce="4.1.1">.leafygreen-ui-7razhx{border-spacing:0;vertical-align:top;padding:0 16px;}</style><td class="leafygreen-ui-7razhx"><span class="lg-highlight-type">static</span> <span class="lg-highlight-type">bool</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-title lg-highlight-function">with_transaction_example</span><span class="lg-highlight-params">(</span><span class="lg-highlight-type lg-highlight-params">bson_error_t</span><span class="lg-highlight-params"> *error)</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">mongoc_client_t</span> *client <!-- -->= <span class="lg-highlight-literal">NULL</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">mongoc_write_concern_t</span> *wc <!-- -->= <span class="lg-highlight-literal">NULL</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">mongoc_collection_t</span> *coll <!-- -->= <span class="lg-highlight-literal">NULL</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bool</span> success <!-- -->= <span class="lg-highlight-literal">false</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bool</span> ret <!-- -->= <span class="lg-highlight-literal">false</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bson_t</span> *doc <!-- -->= <span class="lg-highlight-literal">NULL</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bson_t</span> *insert_opts <!-- -->= <span class="lg-highlight-literal">NULL</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">mongoc_client_session_t</span> *session <!-- -->= <span class="lg-highlight-literal">NULL</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">mongoc_transaction_opt_t</span> *txn_opts <!-- -->= <span class="lg-highlight-literal">NULL</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><style data-emotion="leafygreen-ui ihxujy" nonce="4.1.1">.leafygreen-ui-ihxujy{display:inline-block;}</style><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-comment">/*</span><span class="lg-highlight-comment"> For a replica </span><span class="lg-highlight-comment">set,</span><span class="lg-highlight-comment"> include the replica </span><span class="lg-highlight-comment">set</span><span class="lg-highlight-comment"> name and a </span><span class="lg-highlight-comment">seedlist of the</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">    *</span><span class="lg-highlight-comment"> members in the </span><span class="lg-highlight-comment">URI string; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">    * uri_repl = &#34;mongodb://mongodb0.example.com:27017,mongodb1.example.com:&#34; \</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">    *    &#34;27017/?replicaSet=myRepl&#34;;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">    * client = mongoc_client_new (uri_repl);</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">    *</span><span class="lg-highlight-comment"> For a sharded </span><span class="lg-highlight-comment">cluster,</span><span class="lg-highlight-comment"> connect to the </span><span class="lg-highlight-comment">mongos instances; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">    * uri_sharded =</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">    * &#34;mongodb://mongos0.example.com:27017,mongos1.example.com:27017/&#34;;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">    * client = mongoc_client_new (uri_sharded);</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">    */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   client <!-- -->= get_client<!-- -->()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-comment">/*</span><span class="lg-highlight-comment"> Prereq: Create collections. </span><span class="lg-highlight-comment">Note</span><span class="lg-highlight-comment"> Atlas connection strings </span><span class="lg-highlight-comment">include a majority write</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">    * concern by default.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">    */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   wc <!-- -->= mongoc_write_concern_new<!-- -->()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_write_concern_set_wmajority<!-- -->(wc, <span class="lg-highlight-number">1000</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   insert_opts <!-- -->= bson_new<!-- -->()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_write_concern_append<!-- -->(wc, insert_opts)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   coll <!-- -->= mongoc_client_get_collection<!-- -->(client, <span class="lg-highlight-string">&#34;mydb1&#34;</span>, <span class="lg-highlight-string">&#34;foo&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   doc <!-- -->= BCON_NEW<!-- -->(<span class="lg-highlight-string">&#34;abc&#34;</span>, BCON_INT32<!-- -->(<span class="lg-highlight-number">0</span>)<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   ret <!-- -->= mongoc_collection_insert_one<!-- -->(coll, doc, insert_opts, <span class="lg-highlight-literal">NULL</span> <span class="lg-highlight-comment">/* reply */</span>, error)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">if</span> <!-- -->(!ret)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">goto</span> fail;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   bson_destroy<!-- -->(doc)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_collection_destroy<!-- -->(coll)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   coll <!-- -->= mongoc_client_get_collection<!-- -->(client, <span class="lg-highlight-string">&#34;mydb2&#34;</span>, <span class="lg-highlight-string">&#34;bar&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   doc <!-- -->= BCON_NEW<!-- -->(<span class="lg-highlight-string">&#34;xyz&#34;</span>, BCON_INT32<!-- -->(<span class="lg-highlight-number">0</span>)<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   ret <!-- -->= mongoc_collection_insert_one<!-- -->(coll, doc, insert_opts, <span class="lg-highlight-literal">NULL</span> <span class="lg-highlight-comment">/* reply */</span>, error)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">if</span> <!-- -->(!ret)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">goto</span> fail;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-comment">/* Step 1:</span><span class="lg-highlight-comment"> Start a client </span><span class="lg-highlight-comment">session. */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   session <!-- -->= mongoc_client_start_session<!-- -->(client, <span class="lg-highlight-literal">NULL</span> <span class="lg-highlight-comment">/* opts */</span>, error)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">if</span> <!-- -->(!session)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">goto</span> fail;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-comment">/* Step 2:</span><span class="lg-highlight-comment"> Optional. Define options </span><span class="lg-highlight-comment">to</span><span class="lg-highlight-comment"> use for the </span><span class="lg-highlight-comment">transaction. */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   txn_opts <!-- -->= mongoc_transaction_opts_new<!-- -->()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_transaction_opts_set_write_concern<!-- -->(txn_opts, wc)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-comment">/* Step 3: Use mongoc_client_session_with_transaction</span><span class="lg-highlight-comment"> to start a </span><span class="lg-highlight-comment">transaction,</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">    * execute the callback, and commit (or abort on error). */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   ret <!-- -->= mongoc_client_session_with_transaction<!-- -->(session, callback, txn_opts, <span class="lg-highlight-literal">NULL</span> <span class="lg-highlight-comment">/* ctx */</span>, <span class="lg-highlight-literal">NULL</span> <span class="lg-highlight-comment">/* reply */</span>, error)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">if</span> <!-- -->(!ret)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">goto</span> fail;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   success <!-- -->= <span class="lg-highlight-literal">true</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">fail:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   bson_destroy<!-- -->(doc)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_collection_destroy<!-- -->(coll)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   bson_destroy<!-- -->(insert_opts)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_write_concern_destroy<!-- -->(wc)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_transaction_opts_destroy<!-- -->(txn_opts)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_client_session_destroy<!-- -->(session)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_client_destroy<!-- -->(client)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">return</span> success;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">/*</span><span class="lg-highlight-comment"> Define the callback </span><span class="lg-highlight-comment">that</span><span class="lg-highlight-comment"> specifies the sequence </span><span class="lg-highlight-comment">of operations to perform</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> *</span><span class="lg-highlight-comment"> inside the transactions. </span><span class="lg-highlight-comment">*/</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-type">static</span> <span class="lg-highlight-type">bool</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-title lg-highlight-function">callback</span><span class="lg-highlight-params">(</span><span class="lg-highlight-type lg-highlight-params">mongoc_client_session_t</span><span class="lg-highlight-params"> *session, </span><span class="lg-highlight-type lg-highlight-params">void</span><span class="lg-highlight-params"> *ctx, </span><span class="lg-highlight-type lg-highlight-params">bson_t</span><span class="lg-highlight-params"> **reply, </span><span class="lg-highlight-type lg-highlight-params">bson_error_t</span><span class="lg-highlight-params"> *error)</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">mongoc_client_t</span> *client <!-- -->= <span class="lg-highlight-literal">NULL</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">mongoc_collection_t</span> *coll <!-- -->= <span class="lg-highlight-literal">NULL</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bson_t</span> *doc <!-- -->= <span class="lg-highlight-literal">NULL</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bool</span> success <!-- -->= <span class="lg-highlight-literal">false</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bool</span> ret <!-- -->= <span class="lg-highlight-literal">false</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   BSON_UNUSED<!-- -->(ctx)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   client <!-- -->= mongoc_client_session_get_client<!-- -->(session)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   coll <!-- -->= mongoc_client_get_collection<!-- -->(client, <span class="lg-highlight-string">&#34;mydb1&#34;</span>, <span class="lg-highlight-string">&#34;foo&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   doc <!-- -->= BCON_NEW<!-- -->(<span class="lg-highlight-string">&#34;abc&#34;</span>, BCON_INT32<!-- -->(<span class="lg-highlight-number">1</span>)<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   ret <!-- -->= mongoc_collection_insert_one<!-- -->(coll, doc, <span class="lg-highlight-literal">NULL</span> <span class="lg-highlight-comment">/* opts */</span>, *reply, error)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">if</span> <!-- -->(!ret)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">goto</span> fail;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   bson_destroy<!-- -->(doc)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_collection_destroy<!-- -->(coll)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   coll <!-- -->= mongoc_client_get_collection<!-- -->(client, <span class="lg-highlight-string">&#34;mydb2&#34;</span>, <span class="lg-highlight-string">&#34;bar&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   doc <!-- -->= BCON_NEW<!-- -->(<span class="lg-highlight-string">&#34;xyz&#34;</span>, BCON_INT32<!-- -->(<span class="lg-highlight-number">999</span>)<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   ret <!-- -->= mongoc_collection_insert_one<!-- -->(coll, doc, <span class="lg-highlight-literal">NULL</span> <span class="lg-highlight-comment">/* opts */</span>, *reply, error)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">if</span> <!-- -->(!ret)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">goto</span> fail;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   success <!-- -->= <span class="lg-highlight-literal">true</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">fail:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_collection_destroy<!-- -->(coll)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   bson_destroy<!-- -->(doc)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">return</span> success;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr></tbody></table></code></pre><style data-emotion="leafygreen-ui 1bqcprk" nonce="4.1.1">.leafygreen-ui-1bqcprk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;gap:4px;background-color:#FFFFFF;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:6px;border-left:solid 1px;border-color:#E8EDEB;z-index:2;grid-area:panel;}.leafygreen-ui-1bqcprk svg{width:16px;height:16px;}</style><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_9gg3c57cw" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-85da11"><h2 class="leafygreen-ui-1ac4g5h">Important</h2><div class="leafygreen-ui-9mycqc"><ul class="leafygreen-ui-rioki0"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Use the MongoDB driver for your MongoDB version.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">When using drivers, each operation in the transaction must pass
the session to each operation.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Operations in a transaction use <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-concern">transaction-level read
concern</a>, <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-write-concern">transaction-level
write concern</a>, and
<a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-preference">transaction-level read preference<!-- -->.</a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">You can create collections in transactions implicitly or
explicitly. See <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-create-collections-indexes">Create Collections and Indexes in a Transaction<!-- -->.</a></p></li></ul></div></div><p class="leafygreen-ui-1kp3ins">The example uses the new callback API for working with
transactions, which starts a transaction, executes the
specified operations, and commits (or aborts on error). The
new callback API incorporates retry logic for
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transient-transaction-error"><span><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code></span></a> or
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-unknown-transaction-commit-result"><span><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code></span></a> commit errors.</p><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"\n// The mongocxx::instance constructor and destructor initialize and shut down the driver,\n// respectively. Therefore, a mongocxx::instance must be created before using the driver and\n// must remain alive for as long as the driver is in use.\nmongocxx::instance inst{};\n\n// For a replica set, include the replica set name and a seedlist of the members in the URI\n// string; e.g.\n// uriString =\n// 'mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/?replicaSet=myRepl'\n// For a sharded cluster, connect to the mongos instances; e.g.\n// uriString = 'mongodb://mongos0.example.com:27017,mongos1.example.com:27017/'\nmongocxx::client client{mongocxx::uri{}};\n\n// Prepare to set majority write explicitly. Note: on Atlas deployments this won't always be\n// needed. The suggested Atlas connection string includes majority write concern by default.\nwrite_concern wc_majority{};\nwc_majority.acknowledge_level(write_concern::level::k_majority);\n\n// Prereq: Create collections.\n\nauto foo = client[\"mydb1\"][\"foo\"];\nauto bar = client[\"mydb2\"][\"bar\"];\n\ntry {\n    options::insert opts;\n    opts.write_concern(wc_majority);\n\n    foo.insert_one(make_document(kvp(\"abc\", 0)), opts);\n    bar.insert_one(make_document(kvp(\"xyz\", 0)), opts);\n} catch (mongocxx::exception const&amp; e) {\n    std::cout &lt;&lt; \"An exception occurred while inserting: \" &lt;&lt; e.what() &lt;&lt; std::endl;\n    return EXIT_FAILURE;\n}\n\n// Step 1: Define the callback that specifies the sequence of operations to perform inside the\n// transactions.\nclient_session::with_transaction_cb callback = [&amp;](client_session* session) {\n    // Important::  You must pass the session to the operations.\n    foo.insert_one(*session, make_document(kvp(\"abc\", 1)));\n    bar.insert_one(*session, make_document(kvp(\"xyz\", 999)));\n};\n\n// Step 2: Start a client session\nauto session = client.start_session();\n\n// Step 3: Use with_transaction to start a transaction, execute the callback,\n// and commit (or abort on error).\ntry {\n    options::transaction opts;\n    opts.write_concern(wc_majority);\n\n    session.with_transaction(callback, opts);\n} catch (mongocxx::exception const&amp; e) {\n    std::cout &lt;&lt; \"An exception occurred: \" &lt;&lt; e.what() &lt;&lt; std::endl;\n    return EXIT_FAILURE;\n}\n\nreturn EXIT_SUCCESS;\n","programmingLanguage":"C++"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light cpp leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// The mongocxx::instance</span><span class="lg-highlight-comment"> constructor and destructor </span><span class="lg-highlight-comment">initialize</span><span class="lg-highlight-comment"> and shut down </span><span class="lg-highlight-comment">the driver,</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// respectively. Therefore, a mongocxx::instance must be</span><span class="lg-highlight-comment"> created before using </span><span class="lg-highlight-comment">the driver and</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> must remain alive </span><span class="lg-highlight-comment">for as long as</span><span class="lg-highlight-comment"> the driver is </span><span class="lg-highlight-comment">in use.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">mongocxx::<!-- -->instance inst{};</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> For a replica </span><span class="lg-highlight-comment">set,</span><span class="lg-highlight-comment"> include the replica </span><span class="lg-highlight-comment">set</span><span class="lg-highlight-comment"> name and a </span><span class="lg-highlight-comment">seedlist of</span><span class="lg-highlight-comment"> the members in </span><span class="lg-highlight-comment">the URI</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// string; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// uriString =</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// &#39;mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/?replicaSet=myRepl&#39;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> For a sharded </span><span class="lg-highlight-comment">cluster,</span><span class="lg-highlight-comment"> connect to the </span><span class="lg-highlight-comment">mongos instances; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// uriString = &#39;mongodb://mongos0.example.com:27017,mongos1.example.com:27017/&#39;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">mongocxx::<!-- -->client client{<!-- -->mongocxx::<!-- -->uri{}};</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> Prepare to set </span><span class="lg-highlight-comment">majority</span><span class="lg-highlight-comment"> write explicitly. Note: </span><span class="lg-highlight-comment">on</span><span class="lg-highlight-comment"> Atlas deployments this </span><span class="lg-highlight-comment">won&#39;t always be</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> needed. The suggested </span><span class="lg-highlight-comment">Atlas</span><span class="lg-highlight-comment"> connection string includes </span><span class="lg-highlight-comment">majority write concern by default.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">write_concern wc_majority{};</td></tr><tr class=""><td class="leafygreen-ui-7razhx">wc_majority.<span class="lg-highlight-built_in">acknowledge_level</span>(write_concern::level::k_majority)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// Prereq: Create collections.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">auto</span> foo <!-- -->= client[<span class="lg-highlight-string">&#34;mydb1&#34;</span>][<span class="lg-highlight-string">&#34;foo&#34;</span>];</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">auto</span> bar <!-- -->= client[<span class="lg-highlight-string">&#34;mydb2&#34;</span>][<span class="lg-highlight-string">&#34;bar&#34;</span>];</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">try</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->options::<!-- -->insert opts;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    opts.<span class="lg-highlight-built_in">write_concern</span>(wc_majority)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    foo.<span class="lg-highlight-built_in">insert_one</span>(<span class="lg-highlight-built_in">make_document</span>(<span class="lg-highlight-built_in">kvp</span>(<span class="lg-highlight-string">&#34;abc&#34;</span>, <span class="lg-highlight-number">0</span>)<!-- -->)<!-- -->, opts)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    bar.<span class="lg-highlight-built_in">insert_one</span>(<span class="lg-highlight-built_in">make_document</span>(<span class="lg-highlight-built_in">kvp</span>(<span class="lg-highlight-string">&#34;xyz&#34;</span>, <span class="lg-highlight-number">0</span>)<!-- -->)<!-- -->, opts)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">} <span class="lg-highlight-built_in">catch</span> <!-- -->(mongocxx::exception <span class="lg-highlight-type">const</span>&amp; e)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->std::<!-- -->cout &lt;&lt; <span class="lg-highlight-string">&#34;An exception occurred while inserting: &#34;</span> &lt;&lt; e.<span class="lg-highlight-built_in">what</span>()<!-- --> &lt;&lt; <!-- -->std::<!-- -->endl;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">return</span> EXIT_FAILURE;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// Step 1:</span><span class="lg-highlight-comment"> Define the callback </span><span class="lg-highlight-comment">that</span><span class="lg-highlight-comment"> specifies the sequence </span><span class="lg-highlight-comment">of</span><span class="lg-highlight-comment"> operations to perform </span><span class="lg-highlight-comment">inside the</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// transactions.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">client_session::<!-- -->with_transaction_cb callback <!-- -->= [&amp;]<!-- -->(client_session* session)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-comment">// Important::</span><span class="lg-highlight-comment">  You must pass </span><span class="lg-highlight-comment">the</span><span class="lg-highlight-comment"> session to the </span><span class="lg-highlight-comment">operations.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    foo.<span class="lg-highlight-built_in">insert_one</span>(*session, <span class="lg-highlight-built_in">make_document</span>(<span class="lg-highlight-built_in">kvp</span>(<span class="lg-highlight-string">&#34;abc&#34;</span>, <span class="lg-highlight-number">1</span>)<!-- -->)<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    bar.<span class="lg-highlight-built_in">insert_one</span>(*session, <span class="lg-highlight-built_in">make_document</span>(<span class="lg-highlight-built_in">kvp</span>(<span class="lg-highlight-string">&#34;xyz&#34;</span>, <span class="lg-highlight-number">999</span>)<!-- -->)<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">};</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// Step 2:</span><span class="lg-highlight-comment"> Start a client </span><span class="lg-highlight-comment">session</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">auto</span> session <!-- -->= client.<span class="lg-highlight-built_in">start_session</span>()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// Step 3: Use with_transaction</span><span class="lg-highlight-comment"> to start a </span><span class="lg-highlight-comment">transaction, execute the callback,</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// and commit (or abort on error).</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">try</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->options::<!-- -->transaction opts;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    opts.<span class="lg-highlight-built_in">write_concern</span>(wc_majority)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    session.<span class="lg-highlight-built_in">with_transaction</span>(callback, opts)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">} <span class="lg-highlight-built_in">catch</span> <!-- -->(mongocxx::exception <span class="lg-highlight-type">const</span>&amp; e)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->std::<!-- -->cout &lt;&lt; <span class="lg-highlight-string">&#34;An exception occurred: &#34;</span> &lt;&lt; e.<span class="lg-highlight-built_in">what</span>()<!-- --> &lt;&lt; <!-- -->std::<!-- -->endl;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">return</span> EXIT_FAILURE;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">return</span> EXIT_SUCCESS;</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_e0eifveih" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-85da11"><h2 class="leafygreen-ui-1ac4g5h">Important</h2><div class="leafygreen-ui-9mycqc"><ul class="leafygreen-ui-rioki0"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Use the MongoDB driver for your MongoDB version.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">When using drivers, each operation in the transaction must pass
the session to each operation.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Operations in a transaction use <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-concern">transaction-level read
concern</a>, <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-write-concern">transaction-level
write concern</a>, and
<a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-preference">transaction-level read preference<!-- -->.</a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">You can create collections in transactions implicitly or
explicitly. See <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-create-collections-indexes">Create Collections and Indexes in a Transaction<!-- -->.</a></p></li></ul></div></div><p class="leafygreen-ui-1kp3ins">The example uses the new callback API for working with
transactions, which starts a transaction, executes the
specified operations, and commits (or aborts on error). The
new callback API incorporates retry logic for
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transient-transaction-error"><span><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code></span></a> or
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-unknown-transaction-commit-result"><span><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code></span></a> commit errors.</p><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"// For a replica set, include the replica set name and a seedlist of the members in the URI string; e.g.\n// string uri = \"mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/?replicaSet=myRepl\";\n// For a sharded cluster, connect to the mongos instances; e.g.\n// string uri = \"mongodb://mongos0.example.com:27017,mongos1.example.com:27017/\";\nvar client = new MongoClient(connectionString);\n\n// Prereq: Create collections.\nvar database1 = client.GetDatabase(\"mydb1\");\nvar collection1 = database1.GetCollection&lt;bsondocument&gt;(\"foo\").WithWriteConcern(WriteConcern.WMajority);\ncollection1.InsertOne(new BsonDocument(\"abc\", 0));\n\nvar database2 = client.GetDatabase(\"mydb2\");\nvar collection2 = database2.GetCollection&lt;bsondocument&gt;(\"bar\").WithWriteConcern(WriteConcern.WMajority);\ncollection2.InsertOne(new BsonDocument(\"xyz\", 0));\n\n// Step 1: Start a client session.\nusing (var session = client.StartSession())\n{\n    // Step 2: Optional. Define options to use for the transaction.\n    var transactionOptions = new TransactionOptions(\n        writeConcern: WriteConcern.WMajority);\n\n    // Step 3: Define the sequence of operations to perform inside the transactions\n    var cancellationToken = CancellationToken.None; // normally a real token would be used\n    result = session.WithTransaction(\n        (s, ct) =&gt;\n        {\n            try\n            {\n                collection1.InsertOne(s, new BsonDocument(\"abc\", 1), cancellationToken: ct);\n                collection2.InsertOne(s, new BsonDocument(\"xyz\", 999), cancellationToken: ct);\n            }\n            catch (MongoWriteException)\n            {\n                // Do something in response to the exception\n                throw; // NOTE: You must rethrow the exception otherwise an infinite loop can occur.\n            }\n            return \"Inserted into collections in different databases\";\n        },\n        transactionOptions,\n        cancellationToken);\n}","programmingLanguage":"C#"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light csharp leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> For a replica </span><span class="lg-highlight-comment">set,</span><span class="lg-highlight-comment"> include the replica </span><span class="lg-highlight-comment">set</span><span class="lg-highlight-comment"> name and a </span><span class="lg-highlight-comment">seedlist of</span><span class="lg-highlight-comment"> the members in </span><span class="lg-highlight-comment">the URI string; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// string uri = &#34;mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/?replicaSet=myRepl&#34;;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> For a sharded </span><span class="lg-highlight-comment">cluster,</span><span class="lg-highlight-comment"> connect to the </span><span class="lg-highlight-comment">mongos instances; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// string uri = &#34;mongodb://mongos0.example.com:27017,mongos1.example.com:27017/&#34;;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">var</span> client = <span class="lg-highlight-keyword">new</span> MongoClient(connectionString);</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// Prereq: Create collections.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">var</span> database1 = client.GetDatabase(<span class="lg-highlight-string">&#34;mydb1&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">var</span> collection1 = database1.GetCollection&lt;BsonDocument&gt;(<span class="lg-highlight-string">&#34;foo&#34;</span>).WithWriteConcern(WriteConcern.WMajority);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">collection1.InsertOne(<span class="lg-highlight-keyword">new</span> BsonDocument(<span class="lg-highlight-string">&#34;abc&#34;</span>, <span class="lg-highlight-number">0</span>));</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">var</span> database2 = client.GetDatabase(<span class="lg-highlight-string">&#34;mydb2&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">var</span> collection2 = database2.GetCollection&lt;BsonDocument&gt;(<span class="lg-highlight-string">&#34;bar&#34;</span>).WithWriteConcern(WriteConcern.WMajority);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">collection2.InsertOne(<span class="lg-highlight-keyword">new</span> BsonDocument(<span class="lg-highlight-string">&#34;xyz&#34;</span>, <span class="lg-highlight-number">0</span>));</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// Step 1:</span><span class="lg-highlight-comment"> Start a client </span><span class="lg-highlight-comment">session.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">using</span> (<span class="lg-highlight-keyword">var</span> session = client.StartSession())</td></tr><tr class=""><td class="leafygreen-ui-7razhx">{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-comment">// Step 2:</span><span class="lg-highlight-comment"> Optional. Define options </span><span class="lg-highlight-comment">to</span><span class="lg-highlight-comment"> use for the </span><span class="lg-highlight-comment">transaction.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">var</span> transactionOptions = <span class="lg-highlight-keyword">new</span> TransactionOptions(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        writeConcern: WriteConcern.WMajority);</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-comment">// Step 3:</span><span class="lg-highlight-comment"> Define the sequence </span><span class="lg-highlight-comment">of</span><span class="lg-highlight-comment"> operations to perform </span><span class="lg-highlight-comment">inside the transactions</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">var</span> cancellationToken = CancellationToken.None; <span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> normally a real </span><span class="lg-highlight-comment">token would be used</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    result = session.WithTransaction(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        (s, ct) =&gt;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">try</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                collection1.InsertOne(s, <span class="lg-highlight-keyword">new</span> BsonDocument(<span class="lg-highlight-string">&#34;abc&#34;</span>, <span class="lg-highlight-number">1</span>), cancellationToken: ct);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                collection2.InsertOne(s, <span class="lg-highlight-keyword">new</span> BsonDocument(<span class="lg-highlight-string">&#34;xyz&#34;</span>, <span class="lg-highlight-number">999</span>), cancellationToken: ct);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">catch</span> (MongoWriteException)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-comment">// Do</span><span class="lg-highlight-comment"> something in response </span><span class="lg-highlight-comment">to the exception</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">throw</span>; <span class="lg-highlight-comment">// </span><span class="lg-highlight-doctag lg-highlight-comment">NOTE:</span><span class="lg-highlight-comment"> You must rethrow </span><span class="lg-highlight-comment">the exception otherwise an</span><span class="lg-highlight-comment"> infinite loop can </span><span class="lg-highlight-comment">occur.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">return</span> <span class="lg-highlight-string">&#34;Inserted into collections in different databases&#34;</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        },</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        transactionOptions,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        cancellationToken);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_mqkyugki5" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><p class="leafygreen-ui-1kp3ins">The example uses the new callback API for working with
transactions, which starts a transaction, executes the
specified operations, and commits (or aborts on error). The
new callback API incorporates retry logic for
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transient-transaction-error"><span><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code></span></a> or
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-unknown-transaction-commit-result"><span><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code></span></a> commit errors.</p><div role="note" class="leafygreen-ui-85da11"><h2 class="leafygreen-ui-1ac4g5h">Important</h2><div class="leafygreen-ui-9mycqc"><ul class="leafygreen-ui-rioki0"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Use the MongoDB driver for your MongoDB version.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">When using drivers, each operation in the transaction must pass
the session to each operation.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Operations in a transaction use <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-concern">transaction-level read
concern</a>, <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-write-concern">transaction-level
write concern</a>, and
<a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-preference">transaction-level read preference<!-- -->.</a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">You can create collections in transactions implicitly or
explicitly. See <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-create-collections-indexes">Create Collections and Indexes in a Transaction<!-- -->.</a></p></li></ul></div></div><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"\n// WithTransactionExample is an example of using the Session.WithTransaction function.\nfunc WithTransactionExample(ctx context.Context) error {\n\t// For a replica set, include the replica set name and a seedlist of the members in the URI string; e.g.\n\t// uri := \"mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/?replicaSet=myRepl\"\n\t// For a sharded cluster, connect to the mongos instances; e.g.\n\t// uri := \"mongodb://mongos0.example.com:27017,mongos1.example.com:27017/\"\n\turi := mtest.ClusterURI()\n\n\tclientOpts := options.Client().ApplyURI(uri)\n\tclient, err := mongo.Connect(clientOpts)\n\tif err != nil {\n\t\treturn err\n\t}\n\tdefer func() { _ = client.Disconnect(ctx) }()\n\n\t// Prereq: Create collections.\n\twcMajority := writeconcern.Majority()\n\twcMajorityCollectionOpts := options.Collection().SetWriteConcern(wcMajority)\n\tfooColl := client.Database(\"mydb1\").Collection(\"foo\", wcMajorityCollectionOpts)\n\tbarColl := client.Database(\"mydb1\").Collection(\"bar\", wcMajorityCollectionOpts)\n\n\t// Step 1: Define the callback that specifies the sequence of operations to perform inside the transaction.\n\tcallback := func(sesctx context.Context) (any, error) {\n\t\t// Important: You must pass sesctx as the Context parameter to the operations for them to be executed in the\n\t\t// transaction.\n\t\tif _, err := fooColl.InsertOne(sesctx, bson.D{{\"abc\", 1}}); err != nil {\n\t\t\treturn nil, err\n\t\t}\n\t\tif _, err := barColl.InsertOne(sesctx, bson.D{{\"xyz\", 999}}); err != nil {\n\t\t\treturn nil, err\n\t\t}\n\n\t\treturn nil, nil\n\t}\n\n\t// Step 2: Start a session and run the callback using WithTransaction.\n\tsession, err := client.StartSession()\n\tif err != nil {\n\t\treturn err\n\t}\n\tdefer session.EndSession(ctx)\n\n\tresult, err := session.WithTransaction(ctx, callback)\n\tif err != nil {\n\t\treturn err\n\t}\n\tlog.Printf(\"result: %v\\n\", result)\n\treturn nil\n}\n","programmingLanguage":"Golang"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light go leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// WithTransactionExample is an example of using the Session.WithTransaction function.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword lg-highlight-function">func</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">WithTransactionExample</span><span class="lg-highlight-params lg-highlight-function">(ctx context.Context)</span> <span class="lg-highlight-type">error</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	<span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> For a replica </span><span class="lg-highlight-comment">set,</span><span class="lg-highlight-comment"> include the replica </span><span class="lg-highlight-comment">set</span><span class="lg-highlight-comment"> name and a </span><span class="lg-highlight-comment">seedlist of</span><span class="lg-highlight-comment"> the members in </span><span class="lg-highlight-comment">the URI string; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	<span class="lg-highlight-comment">// uri := &#34;mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/?replicaSet=myRepl&#34;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	<span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> For a sharded </span><span class="lg-highlight-comment">cluster,</span><span class="lg-highlight-comment"> connect to the </span><span class="lg-highlight-comment">mongos instances; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	<span class="lg-highlight-comment">// uri := &#34;mongodb://mongos0.example.com:27017,mongos1.example.com:27017/&#34;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	uri <!-- -->:=<!-- --> mtest.ClusterURI()</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	clientOpts <!-- -->:=<!-- --> options.Client().ApplyURI(uri)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	client, err <!-- -->:=<!-- --> mongo.Connect(clientOpts)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	<span class="lg-highlight-keyword">if</span> err != <span class="lg-highlight-literal">nil</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		<span class="lg-highlight-keyword">return</span> err</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	<span class="lg-highlight-keyword">defer</span> <span class="lg-highlight-keyword lg-highlight-function">func</span><span class="lg-highlight-params lg-highlight-function">()</span> { _ = client.Disconnect(ctx) }()</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	<span class="lg-highlight-comment">// Prereq: Create collections.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	wcMajority <!-- -->:=<!-- --> writeconcern.Majority()</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	wcMajorityCollectionOpts <!-- -->:=<!-- --> options.Collection().SetWriteConcern(wcMajority)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	fooColl <!-- -->:=<!-- --> client.Database(<span class="lg-highlight-string">&#34;mydb1&#34;</span>).Collection(<span class="lg-highlight-string">&#34;foo&#34;</span>, wcMajorityCollectionOpts)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	barColl <!-- -->:=<!-- --> client.Database(<span class="lg-highlight-string">&#34;mydb1&#34;</span>).Collection(<span class="lg-highlight-string">&#34;bar&#34;</span>, wcMajorityCollectionOpts)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	<span class="lg-highlight-comment">// Step 1:</span><span class="lg-highlight-comment"> Define the callback </span><span class="lg-highlight-comment">that</span><span class="lg-highlight-comment"> specifies the sequence </span><span class="lg-highlight-comment">of</span><span class="lg-highlight-comment"> operations to perform </span><span class="lg-highlight-comment">inside the transaction.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	callback <!-- -->:=<!-- --> <span class="lg-highlight-keyword lg-highlight-function">func</span><span class="lg-highlight-params lg-highlight-function">(sesctx context.Context)</span> (any, <span class="lg-highlight-type">error</span>) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		<span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> Important: You must </span><span class="lg-highlight-comment">pass sesctx as</span><span class="lg-highlight-comment"> the Context parameter </span><span class="lg-highlight-comment">to</span><span class="lg-highlight-comment"> the operations for </span><span class="lg-highlight-comment">them to be executed in the</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">		<span class="lg-highlight-comment">// transaction.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">		<span class="lg-highlight-keyword">if</span> _, err <!-- -->:=<!-- --> fooColl.InsertOne(sesctx, bson.D{{<span class="lg-highlight-string">&#34;abc&#34;</span>, <span class="lg-highlight-number">1</span>}}); err != <span class="lg-highlight-literal">nil</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			<span class="lg-highlight-keyword">return</span> <span class="lg-highlight-literal">nil</span>, err</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		<span class="lg-highlight-keyword">if</span> _, err <!-- -->:=<!-- --> barColl.InsertOne(sesctx, bson.D{{<span class="lg-highlight-string">&#34;xyz&#34;</span>, <span class="lg-highlight-number">999</span>}}); err != <span class="lg-highlight-literal">nil</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			<span class="lg-highlight-keyword">return</span> <span class="lg-highlight-literal">nil</span>, err</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">		<span class="lg-highlight-keyword">return</span> <span class="lg-highlight-literal">nil</span>, <span class="lg-highlight-literal">nil</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	<span class="lg-highlight-comment">// Step 2:</span><span class="lg-highlight-comment"> Start a session </span><span class="lg-highlight-comment">and</span><span class="lg-highlight-comment"> run the callback </span><span class="lg-highlight-comment">using WithTransaction.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	session, err <!-- -->:=<!-- --> client.StartSession()</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	<span class="lg-highlight-keyword">if</span> err != <span class="lg-highlight-literal">nil</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		<span class="lg-highlight-keyword">return</span> err</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	<span class="lg-highlight-keyword">defer</span> session.EndSession(ctx)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	result, err <!-- -->:=<!-- --> session.WithTransaction(ctx, callback)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	<span class="lg-highlight-keyword">if</span> err != <span class="lg-highlight-literal">nil</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		<span class="lg-highlight-keyword">return</span> err</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	log.Printf(<span class="lg-highlight-string">&#34;result: %v</span><span class="lg-highlight-string">\n</span><span class="lg-highlight-string">&#34;</span>, result)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	<span class="lg-highlight-keyword">return</span> <span class="lg-highlight-literal">nil</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_eoldzsj7b" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-85da11"><h2 class="leafygreen-ui-1ac4g5h">Important</h2><div class="leafygreen-ui-9mycqc"><ul class="leafygreen-ui-rioki0"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Use the MongoDB driver for your MongoDB version.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">When using drivers, each operation in the transaction must pass
the session to each operation.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Operations in a transaction use <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-concern">transaction-level read
concern</a>, <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-write-concern">transaction-level
write concern</a>, and
<a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-preference">transaction-level read preference<!-- -->.</a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">You can create collections in transactions implicitly or
explicitly. See <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-create-collections-indexes">Create Collections and Indexes in a Transaction<!-- -->.</a></p></li></ul></div></div><p class="leafygreen-ui-1kp3ins">The example uses the new callback API for working with
transactions, which starts a transaction, executes the
specified operations, and commits (or aborts on error). The
new callback API incorporates retry logic for
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transient-transaction-error"><span><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code></span></a> or
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-unknown-transaction-commit-result"><span><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code></span></a> commit errors.</p><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"/*\nFor a replica set, include the replica set name and a seedlist of the members in the URI string; e.g.\nString uri = \"mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/admin?replicaSet=myRepl\";\nFor a sharded cluster, connect to the mongos instances; e.g.\nString uri = \"mongodb://mongos0.example.com:27017,mongos1.example.com:27017:27017/admin\";\n*/\n\nfinal MongoClient client = MongoClients.create(uri);\n\n/*\n   Create collections.\n*/\n\nclient.getDatabase(\"mydb1\").getCollection(\"foo\")\n      .withWriteConcern(WriteConcern.MAJORITY).insertOne( new Document(\"abc\", 0));\nclient.getDatabase(\"mydb2\").getCollection(\"bar\")\n      .withWriteConcern(WriteConcern.MAJORITY).insertOne( new Document(\"xyz\", 0));\n\n/* Step 1: Start a client session. */\n\nfinal ClientSession clientSession = client.startSession();\n\n/* Step 2: Optional. Define options to use for the transaction. */\n\nTransactionOptions txnOptions = TransactionOptions.builder()\n      .readPreference(ReadPreference.primary())\n      .readConcern(ReadConcern.LOCAL)\n      .writeConcern(WriteConcern.MAJORITY)\n      .build();\n\n/* Step 3: Define the sequence of operations to perform inside the transactions. */\n\nTransactionBody txnBody = new TransactionBody&lt;string&gt;() {\n   public String execute() {\n      MongoCollection&lt;document&gt; coll1 = client.getDatabase(\"mydb1\").getCollection(\"foo\");\n      MongoCollection&lt;document&gt; coll2 = client.getDatabase(\"mydb2\").getCollection(\"bar\");\n\n      /*\n         Important:: You must pass the session to the operations..\n         */\n\n      coll1.insertOne(clientSession, new Document(\"abc\", 1));\n      coll2.insertOne(clientSession, new Document(\"xyz\", 999));\n\n      return \"Inserted into collections in different databases\";\n   }\n};\ntry {\n   /*\n      Step 4: Use .withTransaction() to start a transaction,\n      execute the callback, and commit (or abort on error).\n   */\n\n   clientSession.withTransaction(txnBody, txnOptions);\n} catch (RuntimeException e) {\n   // some error handling\n} finally {\n   clientSession.close();\n}","programmingLanguage":"Java"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light java leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">/*</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">For a replica set,</span><span class="lg-highlight-comment"> include the replica </span><span class="lg-highlight-comment">set</span><span class="lg-highlight-comment"> name and a </span><span class="lg-highlight-comment">seedlist of</span><span class="lg-highlight-comment"> the members in </span><span class="lg-highlight-comment">the URI string; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">String uri = &#34;mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/admin?replicaSet=myRepl&#34;;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">For a sharded cluster,</span><span class="lg-highlight-comment"> connect to the </span><span class="lg-highlight-comment">mongos instances; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">String uri = &#34;mongodb://mongos0.example.com:27017,mongos1.example.com:27017:27017/admin&#34;;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">*/</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">final</span> <span class="lg-highlight-type">MongoClient</span> <span class="lg-highlight-variable">client</span> <span class="lg-highlight-operator">=</span> MongoClients.create(uri);</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">/*</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">   Create collections.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">*/</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">client.getDatabase(<span class="lg-highlight-string">&#34;mydb1&#34;</span>).getCollection(<span class="lg-highlight-string">&#34;foo&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      .withWriteConcern(WriteConcern.MAJORITY).insertOne( <span class="lg-highlight-keyword">new</span> <span class="lg-highlight-title lg-highlight-class">Document</span>(<span class="lg-highlight-string">&#34;abc&#34;</span>, <span class="lg-highlight-number">0</span>));</td></tr><tr class=""><td class="leafygreen-ui-7razhx">client.getDatabase(<span class="lg-highlight-string">&#34;mydb2&#34;</span>).getCollection(<span class="lg-highlight-string">&#34;bar&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      .withWriteConcern(WriteConcern.MAJORITY).insertOne( <span class="lg-highlight-keyword">new</span> <span class="lg-highlight-title lg-highlight-class">Document</span>(<span class="lg-highlight-string">&#34;xyz&#34;</span>, <span class="lg-highlight-number">0</span>));</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">/* Step 1:</span><span class="lg-highlight-comment"> Start a client </span><span class="lg-highlight-comment">session. */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">final</span> <span class="lg-highlight-type">ClientSession</span> <span class="lg-highlight-variable">clientSession</span> <span class="lg-highlight-operator">=</span> client.startSession();</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">/* Step 2:</span><span class="lg-highlight-comment"> Optional. Define options </span><span class="lg-highlight-comment">to</span><span class="lg-highlight-comment"> use for the </span><span class="lg-highlight-comment">transaction. */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-type">TransactionOptions</span> <span class="lg-highlight-variable">txnOptions</span> <span class="lg-highlight-operator">=</span> TransactionOptions.builder()</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      .readPreference(ReadPreference.primary())</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      .readConcern(ReadConcern.LOCAL)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      .writeConcern(WriteConcern.MAJORITY)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      .build();</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">/* Step 3:</span><span class="lg-highlight-comment"> Define the sequence </span><span class="lg-highlight-comment">of</span><span class="lg-highlight-comment"> operations to perform </span><span class="lg-highlight-comment">inside the transactions. */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-type">TransactionBody</span> <span class="lg-highlight-variable">txnBody</span> <span class="lg-highlight-operator">=</span> <span class="lg-highlight-keyword">new</span> <span class="lg-highlight-title lg-highlight-class">TransactionBody</span>&lt;String&gt;() {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">public</span> <!-- -->String <span class="lg-highlight-title lg-highlight-function">execute</span><span class="lg-highlight-params">()</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      MongoCollection&lt;Document&gt; coll1 = client.getDatabase(<span class="lg-highlight-string">&#34;mydb1&#34;</span>).getCollection(<span class="lg-highlight-string">&#34;foo&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      MongoCollection&lt;Document&gt; coll2 = client.getDatabase(<span class="lg-highlight-string">&#34;mydb2&#34;</span>).getCollection(<span class="lg-highlight-string">&#34;bar&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-comment">/*</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">         Important::</span><span class="lg-highlight-comment"> You must pass </span><span class="lg-highlight-comment">the</span><span class="lg-highlight-comment"> session to the </span><span class="lg-highlight-comment">operations..</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">         */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">      coll1.insertOne(clientSession, <span class="lg-highlight-keyword">new</span> <span class="lg-highlight-title lg-highlight-class">Document</span>(<span class="lg-highlight-string">&#34;abc&#34;</span>, <span class="lg-highlight-number">1</span>));</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      coll2.insertOne(clientSession, <span class="lg-highlight-keyword">new</span> <span class="lg-highlight-title lg-highlight-class">Document</span>(<span class="lg-highlight-string">&#34;xyz&#34;</span>, <span class="lg-highlight-number">999</span>));</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">return</span> <span class="lg-highlight-string">&#34;Inserted into collections in different databases&#34;</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">};</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">try</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-comment">/*</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">      Step 4: Use .withTransaction()</span><span class="lg-highlight-comment"> to start a </span><span class="lg-highlight-comment">transaction,</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">      execute the callback, and commit (or abort on error).</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">   */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   clientSession.withTransaction(txnBody, txnOptions);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">} <span class="lg-highlight-keyword">catch</span> (RuntimeException e) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-comment">// some error handling</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">} <span class="lg-highlight-keyword">finally</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   clientSession.close();</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_psp4lpqd1" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-85da11"><h2 class="leafygreen-ui-1ac4g5h">Important</h2><div class="leafygreen-ui-9mycqc"><ul class="leafygreen-ui-rioki0"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Use the MongoDB driver for your MongoDB version.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">When using drivers, each operation in the transaction must pass
the session to each operation.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Operations in a transaction use <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-concern">transaction-level read
concern</a>, <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-write-concern">transaction-level
write concern</a>, and
<a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-preference">transaction-level read preference<!-- -->.</a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">You can create collections in transactions implicitly or
explicitly. See <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-create-collections-indexes">Create Collections and Indexes in a Transaction<!-- -->.</a></p></li></ul></div></div><p class="leafygreen-ui-1kp3ins">The example uses the new callback API for working with
transactions, which starts a transaction, executes the
specified operations, and commits (or aborts on error). The
new callback API incorporates retry logic for
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transient-transaction-error"><span><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code></span></a> or
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-unknown-transaction-commit-result"><span><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code></span></a> commit errors.</p><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"\n# For a replica set, include the replica set name and a seedlist of the members in the URI string; e.g.\n# uriString = 'mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/?replicaSet=myRepl'\n# For a sharded cluster, connect to the mongos instances; e.g.\n# uriString = 'mongodb://mongos0.example.com:27017,mongos1.example.com:27017/'\n\nclient = AsyncIOMotorClient(uriString)\nwc_majority = WriteConcern(\"majority\", wtimeout=1000)\n\n# Prereq: Create collections.\nawait client.get_database(\"mydb1\", write_concern=wc_majority).foo.insert_one({\"abc\": 0})\nawait client.get_database(\"mydb2\", write_concern=wc_majority).bar.insert_one({\"xyz\": 0})\n\n# Step 1: Define the callback that specifies the sequence of operations to perform inside the transactions.\nasync def callback(my_session):\n    collection_one = my_session.client.mydb1.foo\n    collection_two = my_session.client.mydb2.bar\n\n    # Important:: You must pass the session to the operations.\n    await collection_one.insert_one({\"abc\": 1}, session=my_session)\n    await collection_two.insert_one({\"xyz\": 999}, session=my_session)\n\n# Step 2: Start a client session.\nasync with await client.start_session() as session:\n    # Step 3: Use with_transaction to start a transaction, execute the callback, and commit (or abort on error).\n    await session.with_transaction(\n        callback,\n        read_concern=ReadConcern(\"local\"),\n        write_concern=wc_majority,\n        read_preference=ReadPreference.PRIMARY,\n    )\n","programmingLanguage":"Python"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light python leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">#</span><span class="lg-highlight-comment"> For a replica </span><span class="lg-highlight-comment">set,</span><span class="lg-highlight-comment"> include the replica </span><span class="lg-highlight-comment">set</span><span class="lg-highlight-comment"> name and a </span><span class="lg-highlight-comment">seedlist of</span><span class="lg-highlight-comment"> the members in </span><span class="lg-highlight-comment">the URI string; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># uriString = &#39;mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/?replicaSet=myRepl&#39;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">#</span><span class="lg-highlight-comment"> For a sharded </span><span class="lg-highlight-comment">cluster,</span><span class="lg-highlight-comment"> connect to the </span><span class="lg-highlight-comment">mongos instances; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># uriString = &#39;mongodb://mongos0.example.com:27017,mongos1.example.com:27017/&#39;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">client = AsyncIOMotorClient(uriString)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">wc_majority = WriteConcern(<span class="lg-highlight-string">&#34;majority&#34;</span>, wtimeout=<span class="lg-highlight-number">1000</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># Prereq: Create collections.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">await</span> client.get_database(<span class="lg-highlight-string">&#34;mydb1&#34;</span>, write_concern=wc_majority).foo.insert_one({<span class="lg-highlight-string">&#34;abc&#34;</span>: <span class="lg-highlight-number">0</span>})</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">await</span> client.get_database(<span class="lg-highlight-string">&#34;mydb2&#34;</span>, write_concern=wc_majority).bar.insert_one({<span class="lg-highlight-string">&#34;xyz&#34;</span>: <span class="lg-highlight-number">0</span>})</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># Step 1:</span><span class="lg-highlight-comment"> Define the callback </span><span class="lg-highlight-comment">that</span><span class="lg-highlight-comment"> specifies the sequence </span><span class="lg-highlight-comment">of</span><span class="lg-highlight-comment"> operations to perform </span><span class="lg-highlight-comment">inside the transactions.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">async</span> <span class="lg-highlight-keyword">def</span> <span class="lg-highlight-title lg-highlight-function">callback</span>(<span class="lg-highlight-params">my_session</span>)<!-- -->:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    collection_one = my_session.client.mydb1.foo</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    collection_two = my_session.client.mydb2.bar</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-comment"># Important::</span><span class="lg-highlight-comment"> You must pass </span><span class="lg-highlight-comment">the</span><span class="lg-highlight-comment"> session to the </span><span class="lg-highlight-comment">operations.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">await</span> collection_one.insert_one({<span class="lg-highlight-string">&#34;abc&#34;</span>: <span class="lg-highlight-number">1</span>}, session=my_session)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">await</span> collection_two.insert_one({<span class="lg-highlight-string">&#34;xyz&#34;</span>: <span class="lg-highlight-number">999</span>}, session=my_session)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># Step 2:</span><span class="lg-highlight-comment"> Start a client </span><span class="lg-highlight-comment">session.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">async</span> <span class="lg-highlight-keyword">with</span> <span class="lg-highlight-keyword">await</span> client.start_session() <span class="lg-highlight-keyword">as</span> session:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-comment"># Step 3: Use with_transaction</span><span class="lg-highlight-comment"> to start a </span><span class="lg-highlight-comment">transaction, execute the callback, and commit (or abort on error).</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">await</span> session.with_transaction(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        callback,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        read_concern=ReadConcern(<span class="lg-highlight-string">&#34;local&#34;</span>),</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        write_concern=wc_majority,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        read_preference=ReadPreference.PRIMARY,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    )</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_4ojwrzmln" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-85da11"><h2 class="leafygreen-ui-1ac4g5h">Important</h2><div class="leafygreen-ui-9mycqc"><ul class="leafygreen-ui-rioki0"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Use the MongoDB driver for your MongoDB version.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">When using drivers, each operation in the transaction must pass
the session to each operation.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Operations in a transaction use <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-concern">transaction-level read
concern</a>, <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-write-concern">transaction-level
write concern</a>, and
<a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-preference">transaction-level read preference<!-- -->.</a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">You can create collections in transactions implicitly or
explicitly. See <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-create-collections-indexes">Create Collections and Indexes in a Transaction<!-- -->.</a></p></li></ul></div></div><p class="leafygreen-ui-1kp3ins">The example uses the new callback API for working with
transactions, which starts a transaction, executes the
specified operations, and commits (or aborts on error). The
new callback API incorporates retry logic for
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transient-transaction-error"><span><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code></span></a> or
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-unknown-transaction-commit-result"><span><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code></span></a> commit errors.</p><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"\n  // For a replica set, include the replica set name and a seedlist of the members in the URI string; e.g.\n  // const uri = 'mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/?replicaSet=myRepl'\n  // For a sharded cluster, connect to the mongos instances; e.g.\n  // const uri = 'mongodb://mongos0.example.com:27017,mongos1.example.com:27017/'\n\n  const client = new MongoClient(uri);\n  await client.connect();\n\n  // Prereq: Create collections.\n\n  await client\n    .db('mydb1')\n    .collection('foo')\n    .insertOne({ abc: 0 }, { writeConcern: { w: 'majority' } });\n\n  await client\n    .db('mydb2')\n    .collection('bar')\n    .insertOne({ xyz: 0 }, { writeConcern: { w: 'majority' } });\n\n  // Step 1: Start a Client Session\n  const session = client.startSession();\n\n  // Step 2: Optional. Define options to use for the transaction\n  const transactionOptions = {\n    readPreference: 'primary',\n    readConcern: { level: 'local' },\n    writeConcern: { w: 'majority' }\n  };\n\n  // Step 3: Use withTransaction to start a transaction, execute the callback, and commit (or abort on error)\n  // Note: The callback for withTransaction MUST be async and/or return a Promise.\n  try {\n    await session.withTransaction(async () =&gt; {\n      const coll1 = client.db('mydb1').collection('foo');\n      const coll2 = client.db('mydb2').collection('bar');\n\n      // Important:: You must pass the session to the operations\n\n      await coll1.insertOne({ abc: 1 }, { session });\n      await coll2.insertOne({ xyz: 999 }, { session });\n    }, transactionOptions);\n  } finally {\n    await session.endSession();\n    await client.close();\n  }","programmingLanguage":"JavaScript"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light javascript leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> For a replica </span><span class="lg-highlight-comment">set,</span><span class="lg-highlight-comment"> include the replica </span><span class="lg-highlight-comment">set</span><span class="lg-highlight-comment"> name and a </span><span class="lg-highlight-comment">seedlist of</span><span class="lg-highlight-comment"> the members in </span><span class="lg-highlight-comment">the URI string; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-comment">// const uri = &#39;mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/?replicaSet=myRepl&#39;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> For a sharded </span><span class="lg-highlight-comment">cluster,</span><span class="lg-highlight-comment"> connect to the </span><span class="lg-highlight-comment">mongos instances; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-comment">// const uri = &#39;mongodb://mongos0.example.com:27017,mongos1.example.com:27017/&#39;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">const</span> client <!-- -->= <span class="lg-highlight-keyword">new</span> <span class="lg-highlight-title lg-highlight-class">MongoClient</span>(<!-- -->uri)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">await</span> client.<span class="lg-highlight-title lg-highlight-function">connect</span>(<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-comment">// Prereq: Create collections.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">await</span> client</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    .<span class="lg-highlight-title lg-highlight-function">db</span>(<span class="lg-highlight-string">&#39;mydb1&#39;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    .<span class="lg-highlight-title lg-highlight-function">collection</span>(<span class="lg-highlight-string">&#39;foo&#39;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    .<span class="lg-highlight-title lg-highlight-function">insertOne</span>(<!-- -->{ <span class="lg-highlight-attr">abc</span>: <span class="lg-highlight-number">0</span> }<!-- -->, <!-- -->{ <span class="lg-highlight-attr">writeConcern</span>: <!-- -->{ <span class="lg-highlight-attr">w</span>: <span class="lg-highlight-string">&#39;majority&#39;</span> } })<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">await</span> client</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    .<span class="lg-highlight-title lg-highlight-function">db</span>(<span class="lg-highlight-string">&#39;mydb2&#39;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    .<span class="lg-highlight-title lg-highlight-function">collection</span>(<span class="lg-highlight-string">&#39;bar&#39;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    .<span class="lg-highlight-title lg-highlight-function">insertOne</span>(<!-- -->{ <span class="lg-highlight-attr">xyz</span>: <span class="lg-highlight-number">0</span> }<!-- -->, <!-- -->{ <span class="lg-highlight-attr">writeConcern</span>: <!-- -->{ <span class="lg-highlight-attr">w</span>: <span class="lg-highlight-string">&#39;majority&#39;</span> } })<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-comment">// Step 1:</span><span class="lg-highlight-comment"> Start a Client </span><span class="lg-highlight-comment">Session</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">const</span> session <!-- -->= <!-- -->client.<span class="lg-highlight-title lg-highlight-function">startSession</span>(<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-comment">// Step 2:</span><span class="lg-highlight-comment"> Optional. Define options </span><span class="lg-highlight-comment">to</span><span class="lg-highlight-comment"> use for the </span><span class="lg-highlight-comment">transaction</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">const</span> transactionOptions <!-- -->= <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-attr">readPreference</span>: <span class="lg-highlight-string">&#39;primary&#39;</span>,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-attr">readConcern</span>: <!-- -->{ <span class="lg-highlight-attr">level</span>: <span class="lg-highlight-string">&#39;local&#39;</span> }<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-attr">writeConcern</span>: <!-- -->{ <span class="lg-highlight-attr">w</span>: <span class="lg-highlight-string">&#39;majority&#39;</span> }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  }<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-comment">// Step 3: Use withTransaction</span><span class="lg-highlight-comment"> to start a </span><span class="lg-highlight-comment">transaction, execute the callback, and commit (or abort on error)</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> Note: The callback </span><span class="lg-highlight-comment">for withTransaction MUST be async and/or return a Promise.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">try</span> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">await</span> session.<span class="lg-highlight-title lg-highlight-function">withTransaction</span>(<span class="lg-highlight-keyword">async</span> <!-- -->(<!-- -->) <!-- -->=<!-- -->&gt; <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">const</span> coll1 <!-- -->= <!-- -->client.<span class="lg-highlight-title lg-highlight-function">db</span>(<span class="lg-highlight-string">&#39;mydb1&#39;</span>).<span class="lg-highlight-title lg-highlight-function">collection</span>(<span class="lg-highlight-string">&#39;foo&#39;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">const</span> coll2 <!-- -->= <!-- -->client.<span class="lg-highlight-title lg-highlight-function">db</span>(<span class="lg-highlight-string">&#39;mydb2&#39;</span>).<span class="lg-highlight-title lg-highlight-function">collection</span>(<span class="lg-highlight-string">&#39;bar&#39;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-comment">// Important::</span><span class="lg-highlight-comment"> You must pass </span><span class="lg-highlight-comment">the</span><span class="lg-highlight-comment"> session to the </span><span class="lg-highlight-comment">operations</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">await</span> coll1.<span class="lg-highlight-title lg-highlight-function">insertOne</span>(<!-- -->{ <span class="lg-highlight-attr">abc</span>: <span class="lg-highlight-number">1</span> }<!-- -->, <!-- -->{ <!-- -->session })<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">await</span> coll2.<span class="lg-highlight-title lg-highlight-function">insertOne</span>(<!-- -->{ <span class="lg-highlight-attr">xyz</span>: <span class="lg-highlight-number">999</span> }<!-- -->, <!-- -->{ <!-- -->session })<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->}<!-- -->, <!-- -->transactionOptions)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <!-- -->} <span class="lg-highlight-keyword">finally</span> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">await</span> session.<span class="lg-highlight-title lg-highlight-function">endSession</span>(<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">await</span> client.<span class="lg-highlight-title lg-highlight-function">close</span>(<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <!-- -->}</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_353cet8zw" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><style data-emotion="leafygreen-ui 15mdk4" nonce="4.1.1">.leafygreen-ui-15mdk4{font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;color:#001E2B;-webkit-padding-start:12px;padding-inline-start:12px;position:relative;margin-top:24px;margin-bottom:24px;}.leafygreen-ui-15mdk4:after{content:'';position:absolute;width:3px;top:0px;bottom:0px;left:0;border-radius:2px;background-color:#016BF8;}.leafygreen-ui-15mdk4 p,.leafygreen-ui-15mdk4 li::marker{color:var(--font-color-primary);}.leafygreen-ui-15mdk4 p>a[class^='leafy']{color:var(--link-color-primary);font-weight:var(--link-font-weight);}.leafygreen-ui-15mdk4 >li:last-of-type,.leafygreen-ui-15mdk4 >ul:last-of-type,.leafygreen-ui-15mdk4 >ol:last-of-type,.leafygreen-ui-15mdk4 >li:last-of-type>p,.leafygreen-ui-15mdk4 >p:last-of-type{margin-bottom:0px;}.leafygreen-ui-15mdk4 h2{color:#1254B7;}.leafygreen-ui-15mdk4:after{background-color:#016BF8;}.dark-theme .leafygreen-ui-15mdk4 h2{color:#C3E7FE;}</style><div role="note" class="leafygreen-ui-15mdk4"><style data-emotion="leafygreen-ui 6n7b7d" nonce="4.1.1">.leafygreen-ui-6n7b7d{margin:unset;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;color:#001E2B;font-size:12px;font-weight:700;text-transform:uppercase;line-height:20px;letter-spacing:0.4px;color:#001E2B;width:100%;margin-block-end:4px;color:#1254B7;}</style><h2 class="leafygreen-ui-6n7b7d">Note</h2><div class="leafygreen-ui-9mycqc"><p class="leafygreen-ui-1kp3ins">For the Perl driver, see the <a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-txn-core-api"><span>Core API</span></a> usage example instead.</p></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_wngjdk8tf" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-85da11"><h2 class="leafygreen-ui-1ac4g5h">Important</h2><div class="leafygreen-ui-9mycqc"><ul class="leafygreen-ui-rioki0"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Use the MongoDB driver for your MongoDB version.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">When using drivers, each operation in the transaction must pass
the session to each operation.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Operations in a transaction use <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-concern">transaction-level read
concern</a>, <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-write-concern">transaction-level
write concern</a>, and
<a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-preference">transaction-level read preference<!-- -->.</a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">You can create collections in transactions implicitly or
explicitly. See <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-create-collections-indexes">Create Collections and Indexes in a Transaction<!-- -->.</a></p></li></ul></div></div><p class="leafygreen-ui-1kp3ins">The example uses the new callback API for working with
transactions, which starts a transaction, executes the
specified operations, and commits (or aborts on error). The
new callback API incorporates retry logic for
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transient-transaction-error"><span><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code></span></a> or
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-unknown-transaction-commit-result"><span><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code></span></a> commit errors.</p><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"/*\n * For a replica set, include the replica set name and a seedlist of the members in the URI string; e.g.\n * uriString = 'mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/?replicaSet=myRepl'\n * For a sharded cluster, connect to the mongos instances; e.g.\n * uriString = 'mongodb://mongos0.example.com:27017,mongos1.example.com:27017/'\n */\n\n$client = new \\MongoDB\\Client($uriString);\n\n// Prerequisite: Create collections.\n$client-&gt;selectCollection(\n    'mydb1',\n    'foo',\n    [\n        'writeConcern' =&gt; new \\MongoDB\\Driver\\WriteConcern(\\MongoDB\\Driver\\WriteConcern::MAJORITY, 1000),\n    ],\n)-&gt;insertOne(['abc' =&gt; 0]);\n\n$client-&gt;selectCollection(\n    'mydb2',\n    'bar',\n    [\n        'writeConcern' =&gt; new \\MongoDB\\Driver\\WriteConcern(\\MongoDB\\Driver\\WriteConcern::MAJORITY, 1000),\n    ],\n)-&gt;insertOne(['xyz' =&gt; 0]);\n\n// Step 1: Define the callback that specifies the sequence of operations to perform inside the transactions.\n\n$callback = function (\\MongoDB\\Driver\\Session $session) use ($client): void {\n    $client\n        -&gt;selectCollection('mydb1', 'foo')\n        -&gt;insertOne(['abc' =&gt; 1], ['session' =&gt; $session]);\n\n    $client\n        -&gt;selectCollection('mydb2', 'bar')\n        -&gt;insertOne(['xyz' =&gt; 999], ['session' =&gt; $session]);\n};\n\n// Step 2: Start a client session.\n\n$session = $client-&gt;startSession();\n\n// Step 3: Use with_transaction to start a transaction, execute the callback, and commit (or abort on error).\n\n\\MongoDB\\with_transaction($session, $callback);\n","programmingLanguage":"PHP"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light php leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">/*</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> *</span><span class="lg-highlight-comment"> For a replica </span><span class="lg-highlight-comment">set,</span><span class="lg-highlight-comment"> include the replica </span><span class="lg-highlight-comment">set</span><span class="lg-highlight-comment"> name and a </span><span class="lg-highlight-comment">seedlist of</span><span class="lg-highlight-comment"> the members in </span><span class="lg-highlight-comment">the URI string; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> * uriString = &#39;mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/?replicaSet=myRepl&#39;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> *</span><span class="lg-highlight-comment"> For a sharded </span><span class="lg-highlight-comment">cluster,</span><span class="lg-highlight-comment"> connect to the </span><span class="lg-highlight-comment">mongos instances; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> * uriString = &#39;mongodb://mongos0.example.com:27017,mongos1.example.com:27017/&#39;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-variable">$client</span> = <span class="lg-highlight-keyword">new</span> \MongoDB\<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">Client</span>(<span class="lg-highlight-variable">$uriString</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// Prerequisite: Create collections.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-variable">$client</span>-&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">selectCollection</span>(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-string">&#39;mydb1&#39;</span>,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-string">&#39;foo&#39;</span>,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    [</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-string">&#39;writeConcern&#39;</span> =&gt; <span class="lg-highlight-keyword">new</span> \MongoDB\Driver\<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">WriteConcern</span>(\MongoDB<span class="lg-highlight-title lg-highlight-class">\Driver\WriteConcern</span>::<span class="lg-highlight-variable lg-highlight-constant">MAJORITY</span>, <span class="lg-highlight-number">1000</span>)<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    ],</td></tr><tr class=""><td class="leafygreen-ui-7razhx">)<!-- -->-&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">insertOne</span>([<span class="lg-highlight-string">&#39;abc&#39;</span> =&gt; <span class="lg-highlight-number">0</span>])<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-variable">$client</span>-&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">selectCollection</span>(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-string">&#39;mydb2&#39;</span>,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-string">&#39;bar&#39;</span>,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    [</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-string">&#39;writeConcern&#39;</span> =&gt; <span class="lg-highlight-keyword">new</span> \MongoDB\Driver\<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">WriteConcern</span>(\MongoDB<span class="lg-highlight-title lg-highlight-class">\Driver\WriteConcern</span>::<span class="lg-highlight-variable lg-highlight-constant">MAJORITY</span>, <span class="lg-highlight-number">1000</span>)<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    ],</td></tr><tr class=""><td class="leafygreen-ui-7razhx">)<!-- -->-&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">insertOne</span>([<span class="lg-highlight-string">&#39;xyz&#39;</span> =&gt; <span class="lg-highlight-number">0</span>])<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// Step 1:</span><span class="lg-highlight-comment"> Define the callback </span><span class="lg-highlight-comment">that</span><span class="lg-highlight-comment"> specifies the sequence </span><span class="lg-highlight-comment">of</span><span class="lg-highlight-comment"> operations to perform </span><span class="lg-highlight-comment">inside the transactions.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-variable">$callback</span> = <span class="lg-highlight-keyword lg-highlight-function lg-highlight-function">function</span><span class="lg-highlight-function"> (</span><span class="lg-highlight-params lg-highlight-function">\MongoDB\Driver\Session </span><span class="lg-highlight-variable lg-highlight-params lg-highlight-function">$session</span><span class="lg-highlight-function">) </span><span class="lg-highlight-keyword lg-highlight-function">use</span><span class="lg-highlight-function"> (</span><span class="lg-highlight-variable lg-highlight-params lg-highlight-function">$client</span><span class="lg-highlight-function">): </span><span class="lg-highlight-title lg-highlight-function">void</span><span class="lg-highlight-function"> </span>{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-variable">$client</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        -&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">selectCollection</span>(<span class="lg-highlight-string">&#39;mydb1&#39;</span>, <span class="lg-highlight-string">&#39;foo&#39;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        -&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">insertOne</span>([<span class="lg-highlight-string">&#39;abc&#39;</span> =&gt; <span class="lg-highlight-number">1</span>], [<span class="lg-highlight-string">&#39;session&#39;</span> =&gt; <span class="lg-highlight-variable">$session</span>])<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-variable">$client</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        -&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">selectCollection</span>(<span class="lg-highlight-string">&#39;mydb2&#39;</span>, <span class="lg-highlight-string">&#39;bar&#39;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        -&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">insertOne</span>([<span class="lg-highlight-string">&#39;xyz&#39;</span> =&gt; <span class="lg-highlight-number">999</span>], [<span class="lg-highlight-string">&#39;session&#39;</span> =&gt; <span class="lg-highlight-variable">$session</span>])<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">};</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// Step 2:</span><span class="lg-highlight-comment"> Start a client </span><span class="lg-highlight-comment">session.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-variable">$session</span> = <span class="lg-highlight-variable">$client</span>-&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">startSession</span>()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// Step 3: Use with_transaction</span><span class="lg-highlight-comment"> to start a </span><span class="lg-highlight-comment">transaction, execute the callback, and commit (or abort on error).</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">\MongoDB\<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">with_transaction</span>(<span class="lg-highlight-variable">$session</span>, <span class="lg-highlight-variable">$callback</span>)<!-- -->;</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_0f8wa9j5w" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-85da11"><h2 class="leafygreen-ui-1ac4g5h">Important</h2><div class="leafygreen-ui-9mycqc"><ul class="leafygreen-ui-rioki0"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Use the MongoDB driver for your MongoDB version.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">When using drivers, each operation in the transaction must pass
the session to each operation.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Operations in a transaction use <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-concern">transaction-level read
concern</a>, <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-write-concern">transaction-level
write concern</a>, and
<a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-preference">transaction-level read preference<!-- -->.</a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">You can create collections in transactions implicitly or
explicitly. See <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-create-collections-indexes">Create Collections and Indexes in a Transaction<!-- -->.</a></p></li></ul></div></div><p class="leafygreen-ui-1kp3ins">The example uses the new callback API for working with
transactions, which starts a transaction, executes the
specified operations, and commits (or aborts on error). The
new callback API incorporates retry logic for
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transient-transaction-error"><span><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code></span></a> or
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-unknown-transaction-commit-result"><span><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code></span></a> commit errors.</p><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"\n# For a replica set, include the replica set name and a seedlist of the members in the URI string; e.g.\n# uriString = 'mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/?replicaSet=myRepl'\n# For a sharded cluster, connect to the mongos instances; e.g.\n# uriString = 'mongodb://mongos0.example.com:27017,mongos1.example.com:27017/'\n\nclient = MongoClient(uriString)\nwc_majority = WriteConcern(\"majority\", wtimeout=1000)\n\n# Prereq: Create collections.\nclient.get_database(\"mydb1\", write_concern=wc_majority).foo.insert_one({\"abc\": 0})\nclient.get_database(\"mydb2\", write_concern=wc_majority).bar.insert_one({\"xyz\": 0})\n\n# Step 1: Define the callback that specifies the sequence of operations to perform inside the transactions.\ndef callback(session):\n    collection_one = session.client.mydb1.foo\n    collection_two = session.client.mydb2.bar\n\n    # Important:: You must pass the session to the operations.\n    collection_one.insert_one({\"abc\": 1}, session=session)\n    collection_two.insert_one({\"xyz\": 999}, session=session)\n\n# Step 2: Start a client session.\nwith client.start_session() as session:\n    # Step 3: Use with_transaction to start a transaction, execute the callback, and commit (or abort on error).\n    session.with_transaction(callback)\n","programmingLanguage":"Python"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light python leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">#</span><span class="lg-highlight-comment"> For a replica </span><span class="lg-highlight-comment">set,</span><span class="lg-highlight-comment"> include the replica </span><span class="lg-highlight-comment">set</span><span class="lg-highlight-comment"> name and a </span><span class="lg-highlight-comment">seedlist of</span><span class="lg-highlight-comment"> the members in </span><span class="lg-highlight-comment">the URI string; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># uriString = &#39;mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/?replicaSet=myRepl&#39;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">#</span><span class="lg-highlight-comment"> For a sharded </span><span class="lg-highlight-comment">cluster,</span><span class="lg-highlight-comment"> connect to the </span><span class="lg-highlight-comment">mongos instances; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># uriString = &#39;mongodb://mongos0.example.com:27017,mongos1.example.com:27017/&#39;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">client = MongoClient(uriString)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">wc_majority = WriteConcern(<span class="lg-highlight-string">&#34;majority&#34;</span>, wtimeout=<span class="lg-highlight-number">1000</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># Prereq: Create collections.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">client.get_database(<span class="lg-highlight-string">&#34;mydb1&#34;</span>, write_concern=wc_majority).foo.insert_one({<span class="lg-highlight-string">&#34;abc&#34;</span>: <span class="lg-highlight-number">0</span>})</td></tr><tr class=""><td class="leafygreen-ui-7razhx">client.get_database(<span class="lg-highlight-string">&#34;mydb2&#34;</span>, write_concern=wc_majority).bar.insert_one({<span class="lg-highlight-string">&#34;xyz&#34;</span>: <span class="lg-highlight-number">0</span>})</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># Step 1:</span><span class="lg-highlight-comment"> Define the callback </span><span class="lg-highlight-comment">that</span><span class="lg-highlight-comment"> specifies the sequence </span><span class="lg-highlight-comment">of</span><span class="lg-highlight-comment"> operations to perform </span><span class="lg-highlight-comment">inside the transactions.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">def</span> <span class="lg-highlight-title lg-highlight-function">callback</span>(<span class="lg-highlight-params">session</span>)<!-- -->:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    collection_one = session.client.mydb1.foo</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    collection_two = session.client.mydb2.bar</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-comment"># Important::</span><span class="lg-highlight-comment"> You must pass </span><span class="lg-highlight-comment">the</span><span class="lg-highlight-comment"> session to the </span><span class="lg-highlight-comment">operations.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    collection_one.insert_one({<span class="lg-highlight-string">&#34;abc&#34;</span>: <span class="lg-highlight-number">1</span>}, session=session)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    collection_two.insert_one({<span class="lg-highlight-string">&#34;xyz&#34;</span>: <span class="lg-highlight-number">999</span>}, session=session)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># Step 2:</span><span class="lg-highlight-comment"> Start a client </span><span class="lg-highlight-comment">session.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">with</span> client.start_session() <span class="lg-highlight-keyword">as</span> session:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-comment"># Step 3: Use with_transaction</span><span class="lg-highlight-comment"> to start a </span><span class="lg-highlight-comment">transaction, execute the callback, and commit (or abort on error).</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    session.with_transaction(callback)</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_su9iouqq2" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-85da11"><h2 class="leafygreen-ui-1ac4g5h">Important</h2><div class="leafygreen-ui-9mycqc"><ul class="leafygreen-ui-rioki0"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Use the MongoDB driver for your MongoDB version.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">When using drivers, each operation in the transaction must pass
the session to each operation.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">Operations in a transaction use <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-concern">transaction-level read
concern</a>, <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-write-concern">transaction-level
write concern</a>, and
<a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-read-preference">transaction-level read preference<!-- -->.</a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">You can create collections in transactions implicitly or
explicitly. See <a class="leafygreen-ui-11szg22" href="../transactions/index.html#std-label-transactions-create-collections-indexes">Create Collections and Indexes in a Transaction<!-- -->.</a></p></li></ul></div></div><p class="leafygreen-ui-1kp3ins">The example uses the new callback API for working with
transactions, which starts a transaction, executes the
specified operations, and commits (or aborts on error). The
new callback API incorporates retry logic for
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transient-transaction-error"><span><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code></span></a> or
<a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-unknown-transaction-commit-result"><span><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code></span></a> commit errors.</p><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"\n# For a replica set, include the replica set name and a seedlist of the members in the URI string; e.g.\n# uriString = 'mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/?replicaSet=myRepl'\n# For a sharded cluster, connect to the mongos instances; e.g.\n# uri_string = 'mongodb://mongos0.example.com:27017,mongos1.example.com:27017/'\n\nclient = Mongo::Client.new(uri_string, write_concern: {w: :majority, wtimeout: 1000})\n\n# Prereq: Create collections.\n\nclient.use('mydb1')['foo'].insert_one(abc: 0)\nclient.use('mydb2')['bar'].insert_one(xyz: 0)\n\n# Step 1: Define the callback that specifies the sequence of operations to perform inside the transactions.\n\ncallback = Proc.new do |my_session|\n  collection_one = client.use('mydb1')['foo']\n  collection_two = client.use('mydb2')['bar']\n\n  # Important: You must pass the session to the operations.\n\n  collection_one.insert_one({'abc': 1}, session: my_session)\n  collection_two.insert_one({'xyz': 999}, session: my_session)\nend\n\n#. Step 2: Start a client session.\n\nsession = client.start_session\n\n# Step 3: Use with_transaction to start a transaction, execute the callback, and commit (or abort on error).\n\nsession.with_transaction(\n  read_concern: {level: :local},\n  write_concern: {w: :majority, wtimeout: 1000},\n  read: {mode: :primary},\n  &amp;callback)\n","programmingLanguage":"Ruby"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light ruby leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">#</span><span class="lg-highlight-comment"> For a replica </span><span class="lg-highlight-comment">set,</span><span class="lg-highlight-comment"> include the replica </span><span class="lg-highlight-comment">set</span><span class="lg-highlight-comment"> name and a </span><span class="lg-highlight-comment">seedlist of</span><span class="lg-highlight-comment"> the members in </span><span class="lg-highlight-comment">the URI string; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># uriString = &#39;mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017/?replicaSet=myRepl&#39;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">#</span><span class="lg-highlight-comment"> For a sharded </span><span class="lg-highlight-comment">cluster,</span><span class="lg-highlight-comment"> connect to the </span><span class="lg-highlight-comment">mongos instances; e.g.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># uri_string = &#39;mongodb://mongos0.example.com:27017,mongos1.example.com:27017/&#39;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">client <!-- -->= <span class="lg-highlight-title lg-highlight-class">Mongo::Client</span>.new(<!-- -->uri_string<!-- -->, <span class="lg-highlight-symbol">write_concern:</span> <!-- -->{<span class="lg-highlight-symbol">w:</span> <span class="lg-highlight-symbol">:</span><span class="lg-highlight-symbol">majority</span>, <span class="lg-highlight-symbol">wtimeout:</span> <span class="lg-highlight-number">1000</span>})</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># Prereq: Create collections.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">client.use<!-- -->(<span class="lg-highlight-string">&#39;mydb1&#39;</span>)<!-- -->[<span class="lg-highlight-string">&#39;foo&#39;</span>].insert_one<!-- -->(<span class="lg-highlight-symbol">abc:</span> <span class="lg-highlight-number">0</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">client.use<!-- -->(<span class="lg-highlight-string">&#39;mydb2&#39;</span>)<!-- -->[<span class="lg-highlight-string">&#39;bar&#39;</span>].insert_one<!-- -->(<span class="lg-highlight-symbol">xyz:</span> <span class="lg-highlight-number">0</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># Step 1:</span><span class="lg-highlight-comment"> Define the callback </span><span class="lg-highlight-comment">that</span><span class="lg-highlight-comment"> specifies the sequence </span><span class="lg-highlight-comment">of</span><span class="lg-highlight-comment"> operations to perform </span><span class="lg-highlight-comment">inside the transactions.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">callback <!-- -->= <span class="lg-highlight-title lg-highlight-class">Proc</span>.new <span class="lg-highlight-keyword">do</span> |<span class="lg-highlight-params">my_session</span>|</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  collection_one <!-- -->= <!-- -->client.use<!-- -->(<span class="lg-highlight-string">&#39;mydb1&#39;</span>)<!-- -->[<span class="lg-highlight-string">&#39;foo&#39;</span>]</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  collection_two <!-- -->= <!-- -->client.use<!-- -->(<span class="lg-highlight-string">&#39;mydb2&#39;</span>)<!-- -->[<span class="lg-highlight-string">&#39;bar&#39;</span>]</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-comment">#</span><span class="lg-highlight-comment"> Important: You must </span><span class="lg-highlight-comment">pass</span><span class="lg-highlight-comment"> the session to </span><span class="lg-highlight-comment">the operations.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  collection_one.insert_one<!-- -->(<!-- -->{<span class="lg-highlight-string">&#39;abc&#39;</span>: <span class="lg-highlight-number">1</span>}<!-- -->, <span class="lg-highlight-symbol">session:</span> my_session)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  collection_two.insert_one<!-- -->(<!-- -->{<span class="lg-highlight-string">&#39;xyz&#39;</span>: <span class="lg-highlight-number">999</span>}<!-- -->, <span class="lg-highlight-symbol">session:</span> my_session)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">end</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">#. Step 2:</span><span class="lg-highlight-comment"> Start a client </span><span class="lg-highlight-comment">session.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">session <!-- -->= <!-- -->client.start_session</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># Step 3: Use with_transaction</span><span class="lg-highlight-comment"> to start a </span><span class="lg-highlight-comment">transaction, execute the callback, and commit (or abort on error).</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">session.with_transaction<!-- -->(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-symbol">read_concern:</span> <!-- -->{<span class="lg-highlight-symbol">level:</span> <span class="lg-highlight-symbol">:</span><span class="lg-highlight-symbol">local</span>}<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-symbol">write_concern:</span> <!-- -->{<span class="lg-highlight-symbol">w:</span> <span class="lg-highlight-symbol">:</span><span class="lg-highlight-symbol">majority</span>, <span class="lg-highlight-symbol">wtimeout:</span> <span class="lg-highlight-number">1000</span>}<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-symbol">read:</span> <!-- -->{<span class="lg-highlight-symbol">mode:</span> <span class="lg-highlight-symbol">:</span><span class="lg-highlight-symbol">primary</span>}<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <!-- -->&amp;<!-- -->callback)</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_4jr7jwbkj" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-15mdk4"><h2 class="leafygreen-ui-6n7b7d">Note</h2><div class="leafygreen-ui-9mycqc"><p class="leafygreen-ui-1kp3ins">For the Scala driver, see the <a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-txn-core-api"><span>Core API</span></a> usage example instead.</p></div></div></div></div></div></div></div><span class="leafygreen-ui-1qnjd6d" id="std-label-txn-core-api"></span></section></section><section><h2 class="contains-headerlink leafygreen-ui-e8trgl" weight="medium">Core API<a class="headerlink leafygreen-ui-11mfcte" href="index.html#core-api" title="Permalink to this heading"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-a30zj9" role="img" aria-label="Link Icon"><path fill="currentColor" d="M6.039 9.953a3.596 3.596 0 0 1-.327-.38l1.45-1.445a1.553 1.553 0 0 0 2.496.423l2.885-2.87a1.57 1.57 0 0 0 .01-2.213 1.553 1.553 0 0 0-2.203-.01l-.379.377A.995.995 0 0 1 8.56 3.83a1.005 1.005 0 0 1 .006-1.418l.38-.377a3.542 3.542 0 0 1 5.024.023 3.58 3.58 0 0 1-.022 5.047l-2.884 2.871a3.542 3.542 0 0 1-5.025-.022Z"></path><path fill="currentColor" d="M9.961 6.047c.12.12.228.248.327.38l-1.45 1.445a1.553 1.553 0 0 0-2.496-.423l-2.885 2.87a1.57 1.57 0 0 0-.01 2.213 1.553 1.553 0 0 0 2.203.01l.379-.377a.995.995 0 0 1 1.411.006 1.005 1.005 0 0 1-.006 1.418l-.38.377a3.542 3.542 0 0 1-5.024-.023 3.58 3.58 0 0 1 .022-5.047l2.884-2.871a3.542 3.542 0 0 1 5.025.022Z"></path></svg><div id="core-api" class="css-zena35 e1kswsxc0"></div></a></h2><p class="leafygreen-ui-1kp3ins">The core transaction API does not incorporate retry logic for errors
labeled:</p><ul class="leafygreen-ui-rioki0"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins"><a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transient-transaction-error"><span><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code></span></a>. If an operation in a transaction
returns an error labeled <a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transient-transaction-error"><span><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code></span></a>, the
transaction as a whole can be retried.</p><p class="leafygreen-ui-1kp3ins">To handle <a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transient-transaction-error"><span><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code></span></a>, applications should
explicitly incorporate retry logic for the error.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins"><a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-unknown-transaction-commit-result"><span><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code></span></a>. If the commit returns an
error labeled <a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-unknown-transaction-commit-result"><span><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code></span></a>, the commit
can be retried.</p><p class="leafygreen-ui-1kp3ins">To handle <a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-unknown-transaction-commit-result"><span><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code></span></a>,
applications should explicitly incorporate retry logic for the error.</p></li></ul><span class="leafygreen-ui-1qnjd6d" id="std-label-txn-core-api-retry"></span><section><h3 class="contains-headerlink leafygreen-ui-3itm7" weight="medium">Example<a class="headerlink leafygreen-ui-11mfcte" href="index.html#example-1" title="Permalink to this heading"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-a30zj9" role="img" aria-label="Link Icon"><path fill="currentColor" d="M6.039 9.953a3.596 3.596 0 0 1-.327-.38l1.45-1.445a1.553 1.553 0 0 0 2.496.423l2.885-2.87a1.57 1.57 0 0 0 .01-2.213 1.553 1.553 0 0 0-2.203-.01l-.379.377A.995.995 0 0 1 8.56 3.83a1.005 1.005 0 0 1 .006-1.418l.38-.377a3.542 3.542 0 0 1 5.024.023 3.58 3.58 0 0 1-.022 5.047l-2.884 2.871a3.542 3.542 0 0 1-5.025-.022Z"></path><path fill="currentColor" d="M9.961 6.047c.12.12.228.248.327.38l-1.45 1.445a1.553 1.553 0 0 0-2.496-.423l-2.885 2.87a1.57 1.57 0 0 0-.01 2.213 1.553 1.553 0 0 0 2.203.01l.379-.377a.995.995 0 0 1 1.411.006 1.005 1.005 0 0 1-.006 1.418l-.38.377a3.542 3.542 0 0 1-5.024-.023 3.58 3.58 0 0 1 .022-5.047l2.884-2.871a3.542 3.542 0 0 1 5.025.022Z"></path></svg><div id="example-1" class="css-zena35 e1kswsxc0"></div></a></h3><hr class="css-1unva0n e1tg1ocj0"/><p class="leafygreen-ui-1kp3ins">➤<!-- --> Use the <strong>Select your language</strong> drop-down menu in the
upper-right to set the language of the examples on this page.</p><hr class="css-1unva0n e1tg1ocj0"/><p class="leafygreen-ui-1kp3ins">The following example incorporates logic to retry the transaction for
transient errors and retry the commit for unknown commit error:</p><div aria-hidden="true"></div><div class="leafygreen-ui-f2qztv drivers" data-lgid="lg-tabs"><div class="leafygreen-ui-jp7pox" id="tabs-undefined"><div class="leafygreen-ui-m8p1vb lg-ui-tab-list-0000" data-lgid="lg-tabs-tab_list" role="tablist" aria-orientation="horizontal" aria-label="Tabs to describe usage of drivers"><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_fv2yafmw2" name="" role="tab" tabindex="-1" data-tabid="c"><div class="leafygreen-ui-1nxuzmg">C</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_1vyjm0z2u" name="" role="tab" tabindex="-1" data-tabid="cpp"><div class="leafygreen-ui-1nxuzmg">C++11</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_mnknbi0r8" name="" role="tab" tabindex="-1" data-tabid="csharp"><div class="leafygreen-ui-1nxuzmg">C#</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_5d699xdx2" name="" role="tab" tabindex="-1" data-tabid="go"><div class="leafygreen-ui-1nxuzmg">Go</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_nnz9ssz6s" name="" role="tab" tabindex="-1" data-tabid="java-sync"><div class="leafygreen-ui-1nxuzmg">Java (Sync)</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_gfu3we0nx" name="" role="tab" tabindex="-1" data-tabid="motor"><div class="leafygreen-ui-1nxuzmg">Motor</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_zmjnyl925" name="" role="tab" tabindex="-1" data-tabid="nodejs"><div class="leafygreen-ui-1nxuzmg">Node.js</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_tsybu51gg" name="" role="tab" tabindex="-1" data-tabid="perl"><div class="leafygreen-ui-1nxuzmg">Perl</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_yc9o25a7t" name="" role="tab" tabindex="-1" data-tabid="php"><div class="leafygreen-ui-1nxuzmg">PHP</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_26uvwex1c" name="" role="tab" tabindex="-1" data-tabid="python"><div class="leafygreen-ui-1nxuzmg">Python</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_lkr7vt5zn" name="" role="tab" tabindex="-1" data-tabid="ruby"><div class="leafygreen-ui-1nxuzmg">Ruby</div></button><button aria-selected="false" class="leafygreen-ui-1ogxb8f" data-text="" id="_8vc9x7ltz" name="" role="tab" tabindex="-1" data-tabid="scala"><div class="leafygreen-ui-1nxuzmg">Scala</div></button></div><div class="leafygreen-ui-ov1ktg"><div class="leafygreen-ui-1sg2lsz"></div></div></div><div class="lg-ui-tab-panels-0000" data-lgid="lg-tabs-tab_panels"><div><div class="leafygreen-ui-38lglc" id="_629cch7pj" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"/* takes a session, an out-param for server reply, and out-param for error. */\ntypedef bool (*txn_func_t)(mongoc_client_session_t *, bson_t *, bson_error_t *);\n\n\n/* runs transactions with retry logic */\nbool\nrun_transaction_with_retry(txn_func_t txn_func, mongoc_client_session_t *cs, bson_error_t *error)\n{\n   bson_t reply;\n   bool r;\n\n   while (true) {\n      /* perform transaction */\n      r = txn_func(cs, &amp;reply, error);\n      if (r) {\n         /* success */\n         bson_destroy(&amp;reply);\n         return true;\n      }\n\n      MONGOC_WARNING(\"Transaction aborted: %s\", error-&gt;message);\n      if (mongoc_error_has_label(&amp;reply, \"TransientTransactionError\")) {\n         /* on transient error, retry the whole transaction */\n         MONGOC_WARNING(\"TransientTransactionError, retrying transaction...\");\n         bson_destroy(&amp;reply);\n      } else {\n         /* non-transient error */\n         break;\n      }\n   }\n\n   bson_destroy(&amp;reply);\n   return false;\n}\n\n\n/* commit transactions with retry logic */\nbool\ncommit_with_retry(mongoc_client_session_t *cs, bson_error_t *error)\n{\n   bson_t reply;\n   bool r;\n\n   while (true) {\n      /* commit uses write concern set at transaction start, see\n       * mongoc_transaction_opts_set_write_concern */\n      r = mongoc_client_session_commit_transaction(cs, &amp;reply, error);\n      if (r) {\n         MONGOC_DEBUG(\"Transaction committed\");\n         break;\n      }\n\n      if (mongoc_error_has_label(&amp;reply, \"UnknownTransactionCommitResult\")) {\n         MONGOC_WARNING(\"UnknownTransactionCommitResult, retrying commit ...\");\n         bson_destroy(&amp;reply);\n      } else {\n         /* commit failed, cannot retry */\n         break;\n      }\n   }\n\n   bson_destroy(&amp;reply);\n\n   return r;\n}\n\n\n/* updates two collections in a transaction and calls commit_with_retry */\nbool\nupdate_employee_info(mongoc_client_session_t *cs, bson_t *reply, bson_error_t *error)\n{\n   mongoc_client_t *client;\n   mongoc_collection_t *employees;\n   mongoc_collection_t *events;\n   mongoc_read_concern_t *rc;\n   mongoc_write_concern_t *wc;\n   mongoc_transaction_opt_t *txn_opts;\n   bson_t opts = BSON_INITIALIZER;\n   bson_t *filter = NULL;\n   bson_t *update = NULL;\n   bson_t *event = NULL;\n   bool r;\n\n   bson_init(reply);\n\n   client = mongoc_client_session_get_client(cs);\n   employees = mongoc_client_get_collection(client, \"hr\", \"employees\");\n   events = mongoc_client_get_collection(client, \"reporting\", \"events\");\n\n   rc = mongoc_read_concern_new();\n   mongoc_read_concern_set_level(rc, MONGOC_READ_CONCERN_LEVEL_SNAPSHOT);\n   wc = mongoc_write_concern_new();\n   mongoc_write_concern_set_w(\n      wc, MONGOC_WRITE_CONCERN_W_MAJORITY); /* Atlas connection strings include majority by default*/\n   txn_opts = mongoc_transaction_opts_new();\n   mongoc_transaction_opts_set_read_concern(txn_opts, rc);\n   mongoc_transaction_opts_set_write_concern(txn_opts, wc);\n\n   r = mongoc_client_session_start_transaction(cs, txn_opts, error);\n   if (!r) {\n      goto done;\n   }\n\n   r = mongoc_client_session_append(cs, &amp;opts, error);\n   if (!r) {\n      goto done;\n   }\n\n   filter = BCON_NEW(\"employee\", BCON_INT32(3));\n   update = BCON_NEW(\"$set\", \"{\", \"status\", \"Inactive\", \"}\");\n   /* mongoc_collection_update_one will reinitialize reply */\n   bson_destroy(reply);\n   r = mongoc_collection_update_one(employees, filter, update, &amp;opts, reply, error);\n\n   if (!r) {\n      goto abort;\n   }\n\n   event = BCON_NEW(\"employee\", BCON_INT32(3));\n   BCON_APPEND(event, \"status\", \"{\", \"new\", \"Inactive\", \"old\", \"Active\", \"}\");\n\n   bson_destroy(reply);\n   r = mongoc_collection_insert_one(events, event, &amp;opts, reply, error);\n   if (!r) {\n      goto abort;\n   }\n\n   r = commit_with_retry(cs, error);\n\nabort:\n   if (!r) {\n      MONGOC_ERROR(\"Aborting due to error in transaction: %s\", error-&gt;message);\n      mongoc_client_session_abort_transaction(cs, NULL);\n   }\n\ndone:\n   mongoc_collection_destroy(employees);\n   mongoc_collection_destroy(events);\n   mongoc_read_concern_destroy(rc);\n   mongoc_write_concern_destroy(wc);\n   mongoc_transaction_opts_destroy(txn_opts);\n   bson_destroy(&amp;opts);\n   bson_destroy(filter);\n   bson_destroy(update);\n   bson_destroy(event);\n\n   return r;\n}\n\n\nvoid\nexample_func(mongoc_client_t *client)\n{\n   mongoc_client_session_t *cs;\n   bson_error_t error;\n   bool r;\n\n   ASSERT(client);\n\n   cs = mongoc_client_start_session(client, NULL, &amp;error);\n   if (!cs) {\n      MONGOC_ERROR(\"Could not start session: %s\", error.message);\n      return;\n   }\n\n   r = run_transaction_with_retry(update_employee_info, cs, &amp;error);\n   if (!r) {\n      MONGOC_ERROR(\"Could not update employee, permanent error: %s\", error.message);\n   }\n\n   mongoc_client_session_destroy(cs);\n}","programmingLanguage":"C"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light c leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">/* takes a session, an</span><span class="lg-highlight-comment"> out-param for server </span><span class="lg-highlight-comment">reply,</span><span class="lg-highlight-comment"> and out-param for </span><span class="lg-highlight-comment">error. */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">typedef</span> <span class="lg-highlight-title lg-highlight-function">bool</span> <span class="lg-highlight-params">(*</span><span class="lg-highlight-type lg-highlight-params">txn_func_t</span><span class="lg-highlight-params">)</span><span class="lg-highlight-params">(</span><span class="lg-highlight-type lg-highlight-params">mongoc_client_session_t</span><span class="lg-highlight-params"> *, </span><span class="lg-highlight-type lg-highlight-params">bson_t</span><span class="lg-highlight-params"> *, </span><span class="lg-highlight-type lg-highlight-params">bson_error_t</span><span class="lg-highlight-params"> *)</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">/*</span><span class="lg-highlight-comment"> runs transactions with </span><span class="lg-highlight-comment">retry logic */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-type">bool</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-title lg-highlight-function">run_transaction_with_retry</span><span class="lg-highlight-params">(</span><span class="lg-highlight-type lg-highlight-params">txn_func_t</span><span class="lg-highlight-params"> txn_func, </span><span class="lg-highlight-type lg-highlight-params">mongoc_client_session_t</span><span class="lg-highlight-params"> *cs, </span><span class="lg-highlight-type lg-highlight-params">bson_error_t</span><span class="lg-highlight-params"> *error)</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bson_t</span> reply;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bool</span> r;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">while</span> <!-- -->(<span class="lg-highlight-literal">true</span>)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-comment">/* perform transaction */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">      r <!-- -->= txn_func<!-- -->(cs, &amp;reply, error)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">if</span> <!-- -->(r)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">         <span class="lg-highlight-comment">/* success */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">         bson_destroy<!-- -->(&amp;reply)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">         <span class="lg-highlight-keyword">return</span> <span class="lg-highlight-literal">true</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">      MONGOC_WARNING<!-- -->(<span class="lg-highlight-string">&#34;Transaction aborted: %s&#34;</span>, error-&gt;message)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">if</span> <!-- -->(mongoc_error_has_label<!-- -->(&amp;reply, <span class="lg-highlight-string">&#34;TransientTransactionError&#34;</span>)<!-- -->)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">         <span class="lg-highlight-comment">/* on transient error,</span><span class="lg-highlight-comment"> retry the whole </span><span class="lg-highlight-comment">transaction */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">         MONGOC_WARNING<!-- -->(<span class="lg-highlight-string">&#34;TransientTransactionError, retrying transaction...&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">         bson_destroy<!-- -->(&amp;reply)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      } <span class="lg-highlight-keyword">else</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">         <span class="lg-highlight-comment">/* non-transient error */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">         <span class="lg-highlight-keyword">break</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   bson_destroy<!-- -->(&amp;reply)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">return</span> <span class="lg-highlight-literal">false</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">/*</span><span class="lg-highlight-comment"> commit transactions with </span><span class="lg-highlight-comment">retry logic */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-type">bool</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-title lg-highlight-function">commit_with_retry</span><span class="lg-highlight-params">(</span><span class="lg-highlight-type lg-highlight-params">mongoc_client_session_t</span><span class="lg-highlight-params"> *cs, </span><span class="lg-highlight-type lg-highlight-params">bson_error_t</span><span class="lg-highlight-params"> *error)</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bson_t</span> reply;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bool</span> r;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">while</span> <!-- -->(<span class="lg-highlight-literal">true</span>)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-comment">/*</span><span class="lg-highlight-comment"> commit uses write </span><span class="lg-highlight-comment">concern</span><span class="lg-highlight-comment"> set at transaction </span><span class="lg-highlight-comment">start, see</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">       * mongoc_transaction_opts_set_write_concern */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">      r <!-- -->= mongoc_client_session_commit_transaction<!-- -->(cs, &amp;reply, error)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">if</span> <!-- -->(r)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">         MONGOC_DEBUG<!-- -->(<span class="lg-highlight-string">&#34;Transaction committed&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">         <span class="lg-highlight-keyword">break</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">if</span> <!-- -->(mongoc_error_has_label<!-- -->(&amp;reply, <span class="lg-highlight-string">&#34;UnknownTransactionCommitResult&#34;</span>)<!-- -->)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">         MONGOC_WARNING<!-- -->(<span class="lg-highlight-string">&#34;UnknownTransactionCommitResult, retrying commit ...&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">         bson_destroy<!-- -->(&amp;reply)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      } <span class="lg-highlight-keyword">else</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">         <span class="lg-highlight-comment">/* commit failed, cannot retry */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">         <span class="lg-highlight-keyword">break</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   bson_destroy<!-- -->(&amp;reply)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">return</span> r;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">/*</span><span class="lg-highlight-comment"> updates two collections </span><span class="lg-highlight-comment">in</span><span class="lg-highlight-comment"> a transaction and </span><span class="lg-highlight-comment">calls commit_with_retry */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-type">bool</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-title lg-highlight-function">update_employee_info</span><span class="lg-highlight-params">(</span><span class="lg-highlight-type lg-highlight-params">mongoc_client_session_t</span><span class="lg-highlight-params"> *cs, </span><span class="lg-highlight-type lg-highlight-params">bson_t</span><span class="lg-highlight-params"> *reply, </span><span class="lg-highlight-type lg-highlight-params">bson_error_t</span><span class="lg-highlight-params"> *error)</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">mongoc_client_t</span> *client;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">mongoc_collection_t</span> *employees;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">mongoc_collection_t</span> *events;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">mongoc_read_concern_t</span> *rc;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">mongoc_write_concern_t</span> *wc;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">mongoc_transaction_opt_t</span> *txn_opts;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bson_t</span> opts <!-- -->= BSON_INITIALIZER;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bson_t</span> *filter <!-- -->= <span class="lg-highlight-literal">NULL</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bson_t</span> *update <!-- -->= <span class="lg-highlight-literal">NULL</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bson_t</span> *event <!-- -->= <span class="lg-highlight-literal">NULL</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bool</span> r;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   bson_init<!-- -->(reply)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   client <!-- -->= mongoc_client_session_get_client<!-- -->(cs)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   employees <!-- -->= mongoc_client_get_collection<!-- -->(client, <span class="lg-highlight-string">&#34;hr&#34;</span>, <span class="lg-highlight-string">&#34;employees&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   events <!-- -->= mongoc_client_get_collection<!-- -->(client, <span class="lg-highlight-string">&#34;reporting&#34;</span>, <span class="lg-highlight-string">&#34;events&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   rc <!-- -->= mongoc_read_concern_new<!-- -->()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_read_concern_set_level<!-- -->(rc, MONGOC_READ_CONCERN_LEVEL_SNAPSHOT)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   wc <!-- -->= mongoc_write_concern_new<!-- -->()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_write_concern_set_w<!-- -->(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      wc, MONGOC_WRITE_CONCERN_W_MAJORITY)<!-- -->; <span class="lg-highlight-comment">/*</span><span class="lg-highlight-comment"> Atlas connection strings </span><span class="lg-highlight-comment">include majority by default*/</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   txn_opts <!-- -->= mongoc_transaction_opts_new<!-- -->()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_transaction_opts_set_read_concern<!-- -->(txn_opts, rc)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_transaction_opts_set_write_concern<!-- -->(txn_opts, wc)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   r <!-- -->= mongoc_client_session_start_transaction<!-- -->(cs, txn_opts, error)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">if</span> <!-- -->(!r)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">goto</span> done;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   r <!-- -->= mongoc_client_session_append<!-- -->(cs, &amp;opts, error)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">if</span> <!-- -->(!r)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">goto</span> done;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   filter <!-- -->= BCON_NEW<!-- -->(<span class="lg-highlight-string">&#34;employee&#34;</span>, BCON_INT32<!-- -->(<span class="lg-highlight-number">3</span>)<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   update <!-- -->= BCON_NEW<!-- -->(<span class="lg-highlight-string">&#34;$set&#34;</span>, <span class="lg-highlight-string">&#34;{&#34;</span>, <span class="lg-highlight-string">&#34;status&#34;</span>, <span class="lg-highlight-string">&#34;Inactive&#34;</span>, <span class="lg-highlight-string">&#34;}&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-comment">/* mongoc_collection_update_one</span><span class="lg-highlight-comment"> will reinitialize reply </span><span class="lg-highlight-comment">*/</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   bson_destroy<!-- -->(reply)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   r <!-- -->= mongoc_collection_update_one<!-- -->(employees, filter, update, &amp;opts, reply, error)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">if</span> <!-- -->(!r)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">goto</span> <span class="lg-highlight-built_in">abort</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   event <!-- -->= BCON_NEW<!-- -->(<span class="lg-highlight-string">&#34;employee&#34;</span>, BCON_INT32<!-- -->(<span class="lg-highlight-number">3</span>)<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   BCON_APPEND<!-- -->(event, <span class="lg-highlight-string">&#34;status&#34;</span>, <span class="lg-highlight-string">&#34;{&#34;</span>, <span class="lg-highlight-string">&#34;new&#34;</span>, <span class="lg-highlight-string">&#34;Inactive&#34;</span>, <span class="lg-highlight-string">&#34;old&#34;</span>, <span class="lg-highlight-string">&#34;Active&#34;</span>, <span class="lg-highlight-string">&#34;}&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   bson_destroy<!-- -->(reply)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   r <!-- -->= mongoc_collection_insert_one<!-- -->(events, event, &amp;opts, reply, error)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">if</span> <!-- -->(!r)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">goto</span> <span class="lg-highlight-built_in">abort</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   r <!-- -->= commit_with_retry<!-- -->(cs, error)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-built_in">abort</span>:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">if</span> <!-- -->(!r)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      MONGOC_ERROR<!-- -->(<span class="lg-highlight-string">&#34;Aborting due to error in transaction: %s&#34;</span>, error-&gt;message)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      mongoc_client_session_abort_transaction<!-- -->(cs, <span class="lg-highlight-literal">NULL</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">done:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_collection_destroy<!-- -->(employees)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_collection_destroy<!-- -->(events)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_read_concern_destroy<!-- -->(rc)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_write_concern_destroy<!-- -->(wc)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_transaction_opts_destroy<!-- -->(txn_opts)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   bson_destroy<!-- -->(&amp;opts)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   bson_destroy<!-- -->(filter)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   bson_destroy<!-- -->(update)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   bson_destroy<!-- -->(event)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">return</span> r;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-type">void</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-title lg-highlight-function">example_func</span><span class="lg-highlight-params">(</span><span class="lg-highlight-type lg-highlight-params">mongoc_client_t</span><span class="lg-highlight-params"> *client)</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">mongoc_client_session_t</span> *cs;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bson_error_t</span> error;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-type">bool</span> r;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   ASSERT<!-- -->(client)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   cs <!-- -->= mongoc_client_start_session<!-- -->(client, <span class="lg-highlight-literal">NULL</span>, &amp;error)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">if</span> <!-- -->(!cs)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      MONGOC_ERROR<!-- -->(<span class="lg-highlight-string">&#34;Could not start session: %s&#34;</span>, error.message)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">return</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   r <!-- -->= run_transaction_with_retry<!-- -->(update_employee_info, cs, &amp;error)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">if</span> <!-- -->(!r)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      MONGOC_ERROR<!-- -->(<span class="lg-highlight-string">&#34;Could not update employee, permanent error: %s&#34;</span>, error.message)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   mongoc_client_session_destroy<!-- -->(cs)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_iqx5nxkxp" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"g transaction_func = std::function&lt;void(client_session&gt;;\n run_transaction_with_retry = [](transaction_func txn_func, client_session&amp; session) {\nwhile (true) {\n    try {\n        txn_func(session); // performs transaction.\n        break;\n    } catch (operation_exception const&amp; oe) {\n        std::cout &lt;&lt; \"Transaction aborted. Caught exception during transaction.\" &lt;&lt; std::endl;\n        // If transient error, retry the whole transaction.\n        if (oe.has_error_label(\"TransientTransactionError\")) {\n            std::cout &lt;&lt; \"TransientTransactionError, retrying transaction ...\" &lt;&lt; std::endl;\n            continue;\n        } else {\n            throw oe;\n        }\n    }\n}\n\n\n commit_with_retry = [](client_session&amp; session) {\nwhile (true) {\n    try {\n        session.commit_transaction(); // Uses write concern set at transaction start.\n        std::cout &lt;&lt; \"Transaction committed.\" &lt;&lt; std::endl;\n        break;\n    } catch (operation_exception const&amp; oe) {\n        // Can retry commit\n        if (oe.has_error_label(\"UnknownTransactionCommitResult\")) {\n            std::cout &lt;&lt; \"UnknownTransactionCommitResult, retrying commit operation ...\" &lt;&lt; std::endl;\n            continue;\n        } else {\n            std::cout &lt;&lt; \"Error during commit ...\" &lt;&lt; std::endl;\n            throw oe;\n        }\n    }\n}\n\n\npdates two collections in a transaction\n update_employee_info = [&amp;](client_session&amp; session) {\nauto&amp; client = session.client();\nauto employees = client[\"hr\"][\"employees\"];\nauto events = client[\"reporting\"][\"events\"];\n\noptions::transaction txn_opts;\nread_concern rc;\nrc.acknowledge_level(read_concern::level::k_snapshot);\ntxn_opts.read_concern(rc);\nwrite_concern wc;\nwc.acknowledge_level(write_concern::level::k_majority);\ntxn_opts.write_concern(wc);\n\nsession.start_transaction(txn_opts);\n\ntry {\n    employees.update_one(\n        make_document(kvp(\"employee\", 3)),\n        make_document(kvp(\"$set\", make_document(kvp(\"status\", \"Inactive\")))));\n    events.insert_one(make_document(\n        kvp(\"employee\", 3), kvp(\"status\", make_document(kvp(\"new\", \"Inactive\"), kvp(\"old\", \"Active\")))));\n} catch (operation_exception const&amp; oe) {\n    std::cout &lt;&lt; \"Caught exception during transaction, aborting.\" &lt;&lt; std::endl;\n    session.abort_transaction();\n    throw oe;\n}\n\ncommit_with_retry(session);\n\n\n session = client.start_session();\n{\nrun_transaction_with_retry(update_employee_info, session);\ntch (operation_exception const&amp; oe) {\n// Do something with error.\nthrow oe;\n","programmingLanguage":"C++"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light cpp leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx">g transaction_func <!-- -->= std::function&lt;<span class="lg-highlight-built_in">void</span>(client_session &amp; session)<!-- -->&gt;;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"> run_transaction_with_retry <!-- -->= []<!-- -->(transaction_func txn_func, client_session&amp; session)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">while</span> <!-- -->(<span class="lg-highlight-literal">true</span>)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">try</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-built_in">txn_func</span>(session)<!-- -->;<!-- --> <span class="lg-highlight-comment">// performs transaction.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">break</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    } <span class="lg-highlight-built_in">catch</span> <!-- -->(operation_exception <span class="lg-highlight-type">const</span>&amp; oe)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <!-- -->std::<!-- -->cout &lt;&lt; <span class="lg-highlight-string">&#34;Transaction aborted. Caught exception during transaction.&#34;</span> &lt;&lt; <!-- -->std::<!-- -->endl;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-comment">// If transient error,</span><span class="lg-highlight-comment"> retry the whole </span><span class="lg-highlight-comment">transaction.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">if</span> <!-- -->(oe.<span class="lg-highlight-built_in">has_error_label</span>(<span class="lg-highlight-string">&#34;TransientTransactionError&#34;</span>)<!-- -->)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <!-- -->std::<!-- -->cout &lt;&lt; <span class="lg-highlight-string">&#34;TransientTransactionError, retrying transaction ...&#34;</span> &lt;&lt; <!-- -->std::<!-- -->endl;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">continue</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        } <span class="lg-highlight-keyword">else</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">throw</span> oe;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"> commit_with_retry <!-- -->= []<!-- -->(client_session&amp; session)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">while</span> <!-- -->(<span class="lg-highlight-literal">true</span>)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">try</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        session.<span class="lg-highlight-built_in">commit_transaction</span>()<!-- -->;<!-- --> <span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> Uses write concern </span><span class="lg-highlight-comment">set at transaction start.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <!-- -->std::<!-- -->cout &lt;&lt; <span class="lg-highlight-string">&#34;Transaction committed.&#34;</span> &lt;&lt; <!-- -->std::<!-- -->endl;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">break</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    } <span class="lg-highlight-built_in">catch</span> <!-- -->(operation_exception <span class="lg-highlight-type">const</span>&amp; oe)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-comment">// Can retry commit</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">if</span> <!-- -->(oe.<span class="lg-highlight-built_in">has_error_label</span>(<span class="lg-highlight-string">&#34;UnknownTransactionCommitResult&#34;</span>)<!-- -->)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <!-- -->std::<!-- -->cout &lt;&lt; <span class="lg-highlight-string">&#34;UnknownTransactionCommitResult, retrying commit operation ...&#34;</span> &lt;&lt; <!-- -->std::<!-- -->endl;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">continue</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        } <span class="lg-highlight-keyword">else</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            std::cout &lt;&lt; <span class="lg-highlight-string">&#34;Error during commit ...&#34;</span> &lt;&lt; std::endl;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">throw</span> oe;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">pdates two collections in a transaction</td></tr><tr class=""><td class="leafygreen-ui-7razhx"> update_employee_info <!-- -->= [&amp;]<!-- -->(client_session&amp; session)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">auto</span>&amp; client = session.<span class="lg-highlight-built_in">client</span>()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">auto</span> employees <!-- -->= client[<span class="lg-highlight-string">&#34;hr&#34;</span>][<span class="lg-highlight-string">&#34;employees&#34;</span>];</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">auto</span> events <!-- -->= client[<span class="lg-highlight-string">&#34;reporting&#34;</span>][<span class="lg-highlight-string">&#34;events&#34;</span>];</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">options::<!-- -->transaction txn_opts;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">read_concern rc;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">rc.<span class="lg-highlight-built_in">acknowledge_level</span>(read_concern::level::k_snapshot)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">txn_opts.<span class="lg-highlight-built_in">read_concern</span>(rc)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">write_concern wc;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">wc.<span class="lg-highlight-built_in">acknowledge_level</span>(write_concern::level::k_majority)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">txn_opts.<span class="lg-highlight-built_in">write_concern</span>(wc)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">session.<span class="lg-highlight-built_in">start_transaction</span>(txn_opts)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">try</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    employees.<span class="lg-highlight-built_in">update_one</span>(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-built_in">make_document</span>(<span class="lg-highlight-built_in">kvp</span>(<span class="lg-highlight-string">&#34;employee&#34;</span>, <span class="lg-highlight-number">3</span>)<!-- -->)<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-built_in">make_document</span>(<span class="lg-highlight-built_in">kvp</span>(<span class="lg-highlight-string">&#34;$set&#34;</span>, <span class="lg-highlight-built_in">make_document</span>(<span class="lg-highlight-built_in">kvp</span>(<span class="lg-highlight-string">&#34;status&#34;</span>, <span class="lg-highlight-string">&#34;Inactive&#34;</span>)<!-- -->)<!-- -->)<!-- -->)<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    events.<span class="lg-highlight-built_in">insert_one</span>(<span class="lg-highlight-built_in">make_document</span>(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-built_in">kvp</span>(<span class="lg-highlight-string">&#34;employee&#34;</span>, <span class="lg-highlight-number">3</span>)<!-- -->, <span class="lg-highlight-built_in">kvp</span>(<span class="lg-highlight-string">&#34;status&#34;</span>, <span class="lg-highlight-built_in">make_document</span>(<span class="lg-highlight-built_in">kvp</span>(<span class="lg-highlight-string">&#34;new&#34;</span>, <span class="lg-highlight-string">&#34;Inactive&#34;</span>)<!-- -->, <span class="lg-highlight-built_in">kvp</span>(<span class="lg-highlight-string">&#34;old&#34;</span>, <span class="lg-highlight-string">&#34;Active&#34;</span>)<!-- -->)<!-- -->)<!-- -->)<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">} <span class="lg-highlight-built_in">catch</span> <!-- -->(operation_exception <span class="lg-highlight-type">const</span>&amp; oe)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->std::<!-- -->cout &lt;&lt; <span class="lg-highlight-string">&#34;Caught exception during transaction, aborting.&#34;</span> &lt;&lt; <!-- -->std::<!-- -->endl;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    session.<span class="lg-highlight-built_in">abort_transaction</span>()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">throw</span> oe;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-built_in">commit_with_retry</span>(session)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"> session <!-- -->= client.<span class="lg-highlight-built_in">start_session</span>()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">{</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-built_in">run_transaction_with_retry</span>(update_employee_info, session)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-built_in">tch</span> <!-- -->(operation_exception <span class="lg-highlight-type">const</span>&amp; oe)<!-- --> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// Do something with error.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">throw</span> oe;</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_u1o7t3sbe" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"public void RunTransactionWithRetry(Action&lt;imongoclient,&gt; txnFunc, IMongoClient client, IClientSessionHandle session)\n{\n    while (true)\n    {\n        try\n        {\n            txnFunc(client, session); // performs transaction\n            break;\n        }\n        catch (MongoException exception)\n        {\n            // if transient error, retry the whole transaction\n            if (exception.HasErrorLabel(\"TransientTransactionError\"))\n            {\n                Console.WriteLine(\"TransientTransactionError, retrying transaction.\");\n                continue;\n            }\n            else\n            {\n                throw;\n            }\n        }\n    }\n}\n\npublic void CommitWithRetry(IClientSessionHandle session)\n{\n    while (true)\n    {\n        try\n        {\n            session.CommitTransaction();\n            Console.WriteLine(\"Transaction committed.\");\n            break;\n        }\n        catch (MongoException exception)\n        {\n            // can retry commit\n            if (exception.HasErrorLabel(\"UnknownTransactionCommitResult\"))\n            {\n                Console.WriteLine(\"UnknownTransactionCommitResult, retrying commit operation\");\n                continue;\n            }\n            else\n            {\n                Console.WriteLine($\"Error during commit: {exception.Message}.\");\n                throw;\n            }\n        }\n    }\n}\n\n// updates two collections in a transaction\npublic void UpdateEmployeeInfo(IMongoClient client, IClientSessionHandle session)\n{\n    var employeesCollection = client.GetDatabase(\"hr\").GetCollection&lt;bsondocument&gt;(\"employees\");\n    var eventsCollection = client.GetDatabase(\"reporting\").GetCollection&lt;bsondocument&gt;(\"events\");\n\n    session.StartTransaction(new TransactionOptions(\n        readConcern: ReadConcern.Snapshot,\n        writeConcern: WriteConcern.WMajority));\n\n    try\n    {\n        employeesCollection.UpdateOne(\n            session,\n            Builders&lt;bsondocument&gt;.Filter.Eq(\"employee\", 3),\n            Builders&lt;bsondocument&gt;.Update.Set(\"status\", \"Inactive\"));\n        eventsCollection.InsertOne(\n            session,\n            new BsonDocument\n            {\n                { \"employee\", 3 },\n                { \"status\", new BsonDocument { { \"new\", \"Inactive\" }, { \"old\", \"Active\" } } }\n            });\n    }\n    catch (Exception exception)\n    {\n        Console.WriteLine($\"Caught exception during transaction, aborting: {exception.Message}.\");\n        session.AbortTransaction();\n        throw;\n    }\n\n    CommitWithRetry(session);\n}\n\npublic void UpdateEmployeeInfoWithTransactionRetry(IMongoClient client)\n{\n    // start a session\n    using (var session = client.StartSession())\n    {\n        try\n        {\n            RunTransactionWithRetry(UpdateEmployeeInfo, client, session);\n        }\n        catch (Exception exception)\n        {\n            // do something with error\n            Console.WriteLine($\"Non transient exception caught during transaction: ${exception.Message}.\");\n        }\n    }\n}","programmingLanguage":"C#"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light csharp leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword lg-highlight-function">public</span><span class="lg-highlight-function"> </span><span class="lg-highlight-keyword lg-highlight-function">void</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">RunTransactionWithRetry</span><span class="lg-highlight-function">(</span><span class="lg-highlight-params lg-highlight-function">Action&lt;IMongoClient, IClientSessionHandle&gt; txnFunc, IMongoClient client, IClientSessionHandle session</span><span class="lg-highlight-function">)</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">while</span> (<span class="lg-highlight-literal">true</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">try</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            txnFunc(client, session); <span class="lg-highlight-comment">// performs transaction</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">break</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">catch</span> (MongoException exception)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-comment">// if transient error,</span><span class="lg-highlight-comment"> retry the whole </span><span class="lg-highlight-comment">transaction</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">if</span> (exception.HasErrorLabel(<span class="lg-highlight-string">&#34;TransientTransactionError&#34;</span>))</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                Console.WriteLine(<span class="lg-highlight-string">&#34;TransientTransactionError, retrying transaction.&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">continue</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">else</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">throw</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword lg-highlight-function">public</span><span class="lg-highlight-function"> </span><span class="lg-highlight-keyword lg-highlight-function">void</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">CommitWithRetry</span><span class="lg-highlight-function">(</span><span class="lg-highlight-params lg-highlight-function">IClientSessionHandle session</span><span class="lg-highlight-function">)</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">while</span> (<span class="lg-highlight-literal">true</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">try</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            session.CommitTransaction();</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            Console.WriteLine(<span class="lg-highlight-string">&#34;Transaction committed.&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">break</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">catch</span> (MongoException exception)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-comment">// can retry commit</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">if</span> (exception.HasErrorLabel(<span class="lg-highlight-string">&#34;UnknownTransactionCommitResult&#34;</span>))</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                Console.WriteLine(<span class="lg-highlight-string">&#34;UnknownTransactionCommitResult, retrying commit operation&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">continue</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">else</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                Console.WriteLine(<span class="lg-highlight-string">$&#34;Error during commit: </span><span class="lg-highlight-subst lg-highlight-string">{exception.Message}</span><span class="lg-highlight-string">.&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">throw</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> updates two collections </span><span class="lg-highlight-comment">in a transaction</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword lg-highlight-function">public</span><span class="lg-highlight-function"> </span><span class="lg-highlight-keyword lg-highlight-function">void</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">UpdateEmployeeInfo</span><span class="lg-highlight-function">(</span><span class="lg-highlight-params lg-highlight-function">IMongoClient client, IClientSessionHandle session</span><span class="lg-highlight-function">)</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">var</span> employeesCollection = client.GetDatabase(<span class="lg-highlight-string">&#34;hr&#34;</span>).GetCollection&lt;BsonDocument&gt;(<span class="lg-highlight-string">&#34;employees&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">var</span> eventsCollection = client.GetDatabase(<span class="lg-highlight-string">&#34;reporting&#34;</span>).GetCollection&lt;BsonDocument&gt;(<span class="lg-highlight-string">&#34;events&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    session.StartTransaction(<span class="lg-highlight-keyword">new</span> TransactionOptions(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        readConcern: ReadConcern.Snapshot,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        writeConcern: WriteConcern.WMajority));</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">try</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        employeesCollection.UpdateOne(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            session,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            Builders&lt;BsonDocument&gt;.Filter.Eq(<span class="lg-highlight-string">&#34;employee&#34;</span>, <span class="lg-highlight-number">3</span>),</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            Builders&lt;BsonDocument&gt;.Update.Set(<span class="lg-highlight-string">&#34;status&#34;</span>, <span class="lg-highlight-string">&#34;Inactive&#34;</span>));</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        eventsCollection.InsertOne(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            session,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">new</span> BsonDocument</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                { <span class="lg-highlight-string">&#34;employee&#34;</span>, <span class="lg-highlight-number">3</span> },</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                { <span class="lg-highlight-string">&#34;status&#34;</span>, <span class="lg-highlight-keyword">new</span> BsonDocument { { <span class="lg-highlight-string">&#34;new&#34;</span>, <span class="lg-highlight-string">&#34;Inactive&#34;</span> }, { <span class="lg-highlight-string">&#34;old&#34;</span>, <span class="lg-highlight-string">&#34;Active&#34;</span> } } }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            });</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">catch</span> (Exception exception)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        Console.WriteLine(<span class="lg-highlight-string">$&#34;Caught exception during transaction, aborting: </span><span class="lg-highlight-subst lg-highlight-string">{exception.Message}</span><span class="lg-highlight-string">.&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        session.AbortTransaction();</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">throw</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    CommitWithRetry(session);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword lg-highlight-function">public</span><span class="lg-highlight-function"> </span><span class="lg-highlight-keyword lg-highlight-function">void</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">UpdateEmployeeInfoWithTransactionRetry</span><span class="lg-highlight-function">(</span><span class="lg-highlight-params lg-highlight-function">IMongoClient client</span><span class="lg-highlight-function">)</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-comment">// start a session</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">using</span> (<span class="lg-highlight-keyword">var</span> session = client.StartSession())</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">try</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            RunTransactionWithRetry(UpdateEmployeeInfo, client, session);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">catch</span> (Exception exception)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-comment">// do something with error</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            Console.WriteLine(<span class="lg-highlight-string">$&#34;Non transient exception caught during transaction: $</span><span class="lg-highlight-subst lg-highlight-string">{exception.Message}</span><span class="lg-highlight-string">.&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_x8f8skf14" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"\n\trunTransactionWithRetry := func(ctx context.Context, txnFn func(context.Context) error) error {\n\t\tfor {\n\t\t\terr := txnFn(ctx) // Performs transaction.\n\t\t\tif err == nil {\n\t\t\t\treturn nil\n\t\t\t}\n\n\t\t\tlog.Println(\"Transaction aborted. Caught exception during transaction.\")\n\n\t\t\t// If transient error, retry the whole transaction\n\t\t\tif cmdErr, ok := err.(mongo.CommandError); ok &amp;&amp; cmdErr.HasErrorLabel(\"TransientTransactionError\") {\n\t\t\t\tlog.Println(\"TransientTransactionError, retrying transaction...\")\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\treturn err\n\t\t}\n\t}\n\n\tcommitWithRetry := func(ctx context.Context) error {\n\t\tsess := mongo.SessionFromContext(ctx)\n\n\t\tfor {\n\t\t\terr := sess.CommitTransaction(ctx)\n\t\t\tswitch e := err.(type) {\n\t\t\tcase nil:\n\t\t\t\tlog.Println(\"Transaction committed.\")\n\t\t\t\treturn nil\n\t\t\tcase mongo.CommandError:\n\t\t\t\t// Can retry commit\n\t\t\t\tif e.HasErrorLabel(\"UnknownTransactionCommitResult\") {\n\t\t\t\t\tlog.Println(\"UnknownTransactionCommitResult, retrying commit operation...\")\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tlog.Println(\"Error during commit...\")\n\t\t\t\treturn e\n\t\t\tdefault:\n\t\t\t\tlog.Println(\"Error during commit...\")\n\t\t\t\treturn e\n\t\t\t}\n\t\t}\n\t}\n\n\t// Updates two collections in a transaction.\n\tupdateEmployeeInfo := func(ctx context.Context) error {\n\t\temployees := client.Database(\"hr\").Collection(\"employees\")\n\t\tevents := client.Database(\"reporting\").Collection(\"events\")\n\n\t\tsess := mongo.SessionFromContext(ctx)\n\n\t\terr := sess.StartTransaction(options.Transaction().\n\t\t\tSetReadConcern(readconcern.Snapshot()).\n\t\t\tSetWriteConcern(writeconcern.Majority()),\n\t\t)\n\t\tif err != nil {\n\t\t\treturn err\n\t\t}\n\n\t\t_, err = employees.UpdateOne(ctx, bson.D{{\"employee\", 3}}, bson.D{{\"$set\", bson.D{{\"status\", \"Inactive\"}}}})\n\t\tif err != nil {\n\t\t\tsess.AbortTransaction(ctx)\n\t\t\tlog.Println(\"caught exception during transaction, aborting.\")\n\t\t\treturn err\n\t\t}\n\t\t_, err = events.InsertOne(ctx, bson.D{{\"employee\", 3}, {\"status\", bson.D{{\"new\", \"Inactive\"}, {\"old\", \"Active\"}}}})\n\t\tif err != nil {\n\t\t\tsess.AbortTransaction(ctx)\n\t\t\tlog.Println(\"caught exception during transaction, aborting.\")\n\t\t\treturn err\n\t\t}\n\n\t\treturn commitWithRetry(ctx)\n\t}\n\n\ttxnOpts := options.Transaction().SetReadPreference(readpref.Primary())\n\n\treturn client.UseSessionWithOptions(\n\t\tctx, options.Session().SetDefaultTransactionOptions(txnOpts),\n\t\tfunc(ctx context.Context) error {\n\t\t\treturn runTransactionWithRetry(ctx, updateEmployeeInfo)\n\t\t},\n\t)\n}\n","programmingLanguage":"Golang"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light go leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx">	runTransactionWithRetry <!-- -->:=<!-- --> <span class="lg-highlight-keyword lg-highlight-function">func</span><span class="lg-highlight-params lg-highlight-function">(ctx context.Context, txnFn </span><span class="lg-highlight-keyword lg-highlight-params lg-highlight-function">func</span><span class="lg-highlight-params lg-highlight-function">(context.Context)</span> <span class="lg-highlight-type">error</span>) <span class="lg-highlight-type">error</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		<span class="lg-highlight-keyword">for</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			err <!-- -->:=<!-- --> txnFn(ctx) <span class="lg-highlight-comment">// Performs transaction.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">			<span class="lg-highlight-keyword">if</span> err == <span class="lg-highlight-literal">nil</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">				<span class="lg-highlight-keyword">return</span> <span class="lg-highlight-literal">nil</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">			}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">			log.Println(<span class="lg-highlight-string">&#34;Transaction aborted. Caught exception during transaction.&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">			<span class="lg-highlight-comment">// If transient error,</span><span class="lg-highlight-comment"> retry the whole </span><span class="lg-highlight-comment">transaction</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">			<span class="lg-highlight-keyword">if</span> cmdErr, ok <!-- -->:=<!-- --> err.(mongo.CommandError); ok &amp;&amp; cmdErr.HasErrorLabel(<span class="lg-highlight-string">&#34;TransientTransactionError&#34;</span>) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">				log.Println(<span class="lg-highlight-string">&#34;TransientTransactionError, retrying transaction...&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">				<span class="lg-highlight-keyword">continue</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">			}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			<span class="lg-highlight-keyword">return</span> err</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	commitWithRetry <!-- -->:=<!-- --> <span class="lg-highlight-keyword lg-highlight-function">func</span><span class="lg-highlight-params lg-highlight-function">(ctx context.Context)</span> <span class="lg-highlight-type">error</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		sess <!-- -->:=<!-- --> mongo.SessionFromContext(ctx)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">		<span class="lg-highlight-keyword">for</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			err <!-- -->:=<!-- --> sess.CommitTransaction(ctx)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			<span class="lg-highlight-keyword">switch</span> e <!-- -->:=<!-- --> err.(<span class="lg-highlight-keyword">type</span>) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			<span class="lg-highlight-keyword">case</span> <span class="lg-highlight-literal">nil</span>:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">				log.Println(<span class="lg-highlight-string">&#34;Transaction committed.&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">				<span class="lg-highlight-keyword">return</span> <span class="lg-highlight-literal">nil</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">			<span class="lg-highlight-keyword">case</span> mongo.CommandError:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">				<span class="lg-highlight-comment">// Can retry commit</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">				<span class="lg-highlight-keyword">if</span> e.HasErrorLabel(<span class="lg-highlight-string">&#34;UnknownTransactionCommitResult&#34;</span>) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">					log.Println(<span class="lg-highlight-string">&#34;UnknownTransactionCommitResult, retrying commit operation...&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">					<span class="lg-highlight-keyword">continue</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">				}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">				log.Println(<span class="lg-highlight-string">&#34;Error during commit...&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">				<span class="lg-highlight-keyword">return</span> e</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			<span class="lg-highlight-keyword">default</span>:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">				log.Println(<span class="lg-highlight-string">&#34;Error during commit...&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">				<span class="lg-highlight-keyword">return</span> e</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	<span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> Updates two collections </span><span class="lg-highlight-comment">in a transaction.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	updateEmployeeInfo <!-- -->:=<!-- --> <span class="lg-highlight-keyword lg-highlight-function">func</span><span class="lg-highlight-params lg-highlight-function">(ctx context.Context)</span> <span class="lg-highlight-type">error</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		employees <!-- -->:=<!-- --> client.Database(<span class="lg-highlight-string">&#34;hr&#34;</span>).Collection(<span class="lg-highlight-string">&#34;employees&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		events <!-- -->:=<!-- --> client.Database(<span class="lg-highlight-string">&#34;reporting&#34;</span>).Collection(<span class="lg-highlight-string">&#34;events&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">		sess <!-- -->:=<!-- --> mongo.SessionFromContext(ctx)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">		err <!-- -->:=<!-- --> sess.StartTransaction(options.Transaction().</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			SetReadConcern(readconcern.Snapshot()).</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			SetWriteConcern(writeconcern.Majority()),</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		<span class="lg-highlight-keyword">if</span> err != <span class="lg-highlight-literal">nil</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			<span class="lg-highlight-keyword">return</span> err</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">		_, err = employees.UpdateOne(ctx, bson.D{{<span class="lg-highlight-string">&#34;employee&#34;</span>, <span class="lg-highlight-number">3</span>}}, bson.D{{<span class="lg-highlight-string">&#34;$set&#34;</span>, bson.D{{<span class="lg-highlight-string">&#34;status&#34;</span>, <span class="lg-highlight-string">&#34;Inactive&#34;</span>}}}})</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		<span class="lg-highlight-keyword">if</span> err != <span class="lg-highlight-literal">nil</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			sess.AbortTransaction(ctx)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			log.Println(<span class="lg-highlight-string">&#34;caught exception during transaction, aborting.&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			<span class="lg-highlight-keyword">return</span> err</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		_, err = events.InsertOne(ctx, bson.D{{<span class="lg-highlight-string">&#34;employee&#34;</span>, <span class="lg-highlight-number">3</span>}, {<span class="lg-highlight-string">&#34;status&#34;</span>, bson.D{{<span class="lg-highlight-string">&#34;new&#34;</span>, <span class="lg-highlight-string">&#34;Inactive&#34;</span>}, {<span class="lg-highlight-string">&#34;old&#34;</span>, <span class="lg-highlight-string">&#34;Active&#34;</span>}}}})</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		<span class="lg-highlight-keyword">if</span> err != <span class="lg-highlight-literal">nil</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			sess.AbortTransaction(ctx)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			log.Println(<span class="lg-highlight-string">&#34;caught exception during transaction, aborting.&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			<span class="lg-highlight-keyword">return</span> err</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">		<span class="lg-highlight-keyword">return</span> commitWithRetry(ctx)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	txnOpts <!-- -->:=<!-- --> options.Transaction().SetReadPreference(readpref.Primary())</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">	<span class="lg-highlight-keyword">return</span> client.UseSessionWithOptions(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		ctx, options.Session().SetDefaultTransactionOptions(txnOpts),</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		<span class="lg-highlight-keyword lg-highlight-function">func</span><span class="lg-highlight-params lg-highlight-function">(ctx context.Context)</span> <span class="lg-highlight-type">error</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">			<span class="lg-highlight-keyword">return</span> runTransactionWithRetry(ctx, updateEmployeeInfo)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">		},</td></tr><tr class=""><td class="leafygreen-ui-7razhx">	)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_lu440ganw" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-85da11"><h2 class="leafygreen-ui-1ac4g5h">Important</h2><div class="leafygreen-ui-9mycqc"><p class="leafygreen-ui-1kp3ins">To associate read and write operations with a transaction, you <strong>must</strong>
pass the session to each operation in the transaction.</p></div></div><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"void runTransactionWithRetry(Runnable transactional) {\n    while (true) {\n        try {\n            transactional.run();\n            break;\n        } catch (MongoException e) {\n            System.out.println(\"Transaction aborted. Caught exception during transaction.\");\n\n            if (e.hasErrorLabel(MongoException.TRANSIENT_TRANSACTION_ERROR_LABEL)) {\n                System.out.println(\"TransientTransactionError, aborting transaction and retrying ...\");\n                continue;\n            } else {\n                throw e;\n            }\n        }\n    }\n}\n\nvoid commitWithRetry(ClientSession clientSession) {\n    while (true) {\n        try {\n            clientSession.commitTransaction();\n            System.out.println(\"Transaction committed\");\n            break;\n        } catch (MongoException e) {\n            // can retry commit\n            if (e.hasErrorLabel(MongoException.UNKNOWN_TRANSACTION_COMMIT_RESULT_LABEL)) {\n                System.out.println(\"UnknownTransactionCommitResult, retrying commit operation ...\");\n                continue;\n            } else {\n                System.out.println(\"Exception during commit ...\");\n                throw e;\n            }\n        }\n    }\n}\n\nvoid updateEmployeeInfo() {\n\n    MongoCollection&lt;document&gt; employeesCollection = client.getDatabase(\"hr\").getCollection(\"employees\");\n    MongoCollection&lt;document&gt; eventsCollection = client.getDatabase(\"reporting\").getCollection(\"events\");\n\n    TransactionOptions txnOptions = TransactionOptions.builder()\n            .readPreference(ReadPreference.primary())\n            .readConcern(ReadConcern.MAJORITY)\n            .writeConcern(WriteConcern.MAJORITY)\n            .build();\n\n    try (ClientSession clientSession = client.startSession()) {\n        clientSession.startTransaction(txnOptions);\n\n        employeesCollection.updateOne(clientSession,\n                Filters.eq(\"employee\", 3),\n                Updates.set(\"status\", \"Inactive\"));\n        eventsCollection.insertOne(clientSession,\n                new Document(\"employee\", 3).append(\"status\", new Document(\"new\", \"Inactive\").append(\"old\", \"Active\")));\n\n        commitWithRetry(clientSession);\n    }\n}\n\n\nvoid updateEmployeeInfoWithRetry() {\n    runTransactionWithRetry(this::updateEmployeeInfo);\n}","programmingLanguage":"Java"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light java leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">void</span> <span class="lg-highlight-title lg-highlight-function">runTransactionWithRetry</span><span class="lg-highlight-params">(Runnable transactional)</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">while</span> (<span class="lg-highlight-literal">true</span>) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">try</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            transactional.run();</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">break</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        } <span class="lg-highlight-keyword">catch</span> (MongoException e) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            System.out.println(<span class="lg-highlight-string">&#34;Transaction aborted. Caught exception during transaction.&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">if</span> (e.hasErrorLabel(MongoException.TRANSIENT_TRANSACTION_ERROR_LABEL)) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                System.out.println(<span class="lg-highlight-string">&#34;TransientTransactionError, aborting transaction and retrying ...&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">continue</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            } <span class="lg-highlight-keyword">else</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">throw</span> e;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">void</span> <span class="lg-highlight-title lg-highlight-function">commitWithRetry</span><span class="lg-highlight-params">(ClientSession clientSession)</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">while</span> (<span class="lg-highlight-literal">true</span>) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">try</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            clientSession.commitTransaction();</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            System.out.println(<span class="lg-highlight-string">&#34;Transaction committed&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">break</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        } <span class="lg-highlight-keyword">catch</span> (MongoException e) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-comment">// can retry commit</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">if</span> (e.hasErrorLabel(MongoException.UNKNOWN_TRANSACTION_COMMIT_RESULT_LABEL)) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                System.out.println(<span class="lg-highlight-string">&#34;UnknownTransactionCommitResult, retrying commit operation ...&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">continue</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            } <span class="lg-highlight-keyword">else</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                System.out.println(<span class="lg-highlight-string">&#34;Exception during commit ...&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">throw</span> e;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">void</span> <span class="lg-highlight-title lg-highlight-function">updateEmployeeInfo</span><span class="lg-highlight-params">()</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    MongoCollection&lt;Document&gt; employeesCollection = client.getDatabase(<span class="lg-highlight-string">&#34;hr&#34;</span>).getCollection(<span class="lg-highlight-string">&#34;employees&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    MongoCollection&lt;Document&gt; eventsCollection = client.getDatabase(<span class="lg-highlight-string">&#34;reporting&#34;</span>).getCollection(<span class="lg-highlight-string">&#34;events&#34;</span>);</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-type">TransactionOptions</span> <span class="lg-highlight-variable">txnOptions</span> <span class="lg-highlight-operator">=</span> TransactionOptions.builder()</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            .readPreference(ReadPreference.primary())</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            .readConcern(ReadConcern.MAJORITY)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            .writeConcern(WriteConcern.MAJORITY)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            .build();</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">try</span> (<span class="lg-highlight-type">ClientSession</span> <span class="lg-highlight-variable">clientSession</span> <span class="lg-highlight-operator">=</span> client.startSession()) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        clientSession.startTransaction(txnOptions);</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        employeesCollection.updateOne(clientSession,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                Filters.eq(<span class="lg-highlight-string">&#34;employee&#34;</span>, <span class="lg-highlight-number">3</span>),</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                Updates.set(<span class="lg-highlight-string">&#34;status&#34;</span>, <span class="lg-highlight-string">&#34;Inactive&#34;</span>));</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        eventsCollection.insertOne(clientSession,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">new</span> <span class="lg-highlight-title lg-highlight-class">Document</span>(<span class="lg-highlight-string">&#34;employee&#34;</span>, <span class="lg-highlight-number">3</span>).append(<span class="lg-highlight-string">&#34;status&#34;</span>, <span class="lg-highlight-keyword">new</span> <span class="lg-highlight-title lg-highlight-class">Document</span>(<span class="lg-highlight-string">&#34;new&#34;</span>, <span class="lg-highlight-string">&#34;Inactive&#34;</span>).append(<span class="lg-highlight-string">&#34;old&#34;</span>, <span class="lg-highlight-string">&#34;Active&#34;</span>)));</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        commitWithRetry(clientSession);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">void</span> <span class="lg-highlight-title lg-highlight-function">updateEmployeeInfoWithRetry</span><span class="lg-highlight-params">()</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    runTransactionWithRetry(<span class="lg-highlight-built_in">this</span>::updateEmployeeInfo);</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_18am8vz3h" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-15mdk4"><h2 class="leafygreen-ui-6n7b7d">Note</h2><div class="leafygreen-ui-9mycqc"><p class="leafygreen-ui-1kp3ins">For Motor, see the <a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-txn-callback-api"><span>Callback API</span></a> instead.</p></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_3d6afebjt" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-85da11"><h2 class="leafygreen-ui-1ac4g5h">Important</h2><div class="leafygreen-ui-9mycqc"><p class="leafygreen-ui-1kp3ins">To associate read and write operations with a transaction, you <strong>must</strong>
pass the session to each operation in the transaction.</p></div></div><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"async function commitWithRetry(session) {\n  try {\n    await session.commitTransaction();\n    console.log('Transaction committed.');\n  } catch (error) {\n    if (error.hasErrorLabel('UnknownTransactionCommitResult')) {\n      console.log('UnknownTransactionCommitResult, retrying commit operation ...');\n      await commitWithRetry(session);\n    } else {\n      console.log('Error during commit ...');\n      throw error;\n    }\n  }\n}\n\nasync function runTransactionWithRetry(txnFunc, client, session) {\n  try {\n    await txnFunc(client, session);\n  } catch (error) {\n    console.log('Transaction aborted. Caught exception during transaction.');\n\n    // If transient error, retry the whole transaction\n    if (error.hasErrorLabel('TransientTransactionError')) {\n      console.log('TransientTransactionError, retrying transaction ...');\n      await runTransactionWithRetry(txnFunc, client, session);\n    } else {\n      throw error;\n    }\n  }\n}\n\nasync function updateEmployeeInfo(client, session) {\n  session.startTransaction({\n    readConcern: { level: 'snapshot' },\n    writeConcern: { w: 'majority' },\n    readPreference: 'primary'\n  });\n\n  const employeesCollection = client.db('hr').collection('employees');\n  const eventsCollection = client.db('reporting').collection('events');\n\n  await employeesCollection.updateOne(\n    { employee: 3 },\n    { $set: { status: 'Inactive' } },\n    { session }\n  );\n  await eventsCollection.insertOne(\n    {\n      employee: 3,\n      status: { new: 'Inactive', old: 'Active' }\n    },\n    { session }\n  );\n\n  try {\n    await commitWithRetry(session);\n  } catch (error) {\n    await session.abortTransaction();\n    throw error;\n  }\n}\n\nreturn client.withSession(session =&gt;\n  runTransactionWithRetry(updateEmployeeInfo, client, session)\n);","programmingLanguage":"JavaScript"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light javascript leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">async</span> <span class="lg-highlight-keyword lg-highlight-function">function</span> <span class="lg-highlight-title lg-highlight-function">commitWithRetry</span>(<span class="lg-highlight-params">session</span>)<!-- --> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">try</span> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">await</span> session.<span class="lg-highlight-title lg-highlight-function">commitTransaction</span>(<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-variable lg-highlight-language">console</span>.<span class="lg-highlight-title lg-highlight-function">log</span>(<span class="lg-highlight-string">&#39;Transaction committed.&#39;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <!-- -->} <span class="lg-highlight-keyword">catch</span> <!-- -->(<!-- -->error) <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">if</span> <!-- -->(<!-- -->error.<span class="lg-highlight-title lg-highlight-function">hasErrorLabel</span>(<span class="lg-highlight-string">&#39;UnknownTransactionCommitResult&#39;</span>)) <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-variable lg-highlight-language">console</span>.<span class="lg-highlight-title lg-highlight-function">log</span>(<span class="lg-highlight-string">&#39;UnknownTransactionCommitResult, retrying commit operation ...&#39;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">await</span> <span class="lg-highlight-title lg-highlight-function">commitWithRetry</span>(<!-- -->session)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->} <span class="lg-highlight-keyword">else</span> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-variable lg-highlight-language">console</span>.<span class="lg-highlight-title lg-highlight-function">log</span>(<span class="lg-highlight-string">&#39;Error during commit ...&#39;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">throw</span> <!-- -->error<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">async</span> <span class="lg-highlight-keyword lg-highlight-function">function</span> <span class="lg-highlight-title lg-highlight-function">runTransactionWithRetry</span>(<span class="lg-highlight-params">txnFunc, client, session</span>)<!-- --> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">try</span> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">await</span> <span class="lg-highlight-title lg-highlight-function">txnFunc</span>(<!-- -->client<!-- -->, <!-- -->session)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <!-- -->} <span class="lg-highlight-keyword">catch</span> <!-- -->(<!-- -->error) <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-variable lg-highlight-language">console</span>.<span class="lg-highlight-title lg-highlight-function">log</span>(<span class="lg-highlight-string">&#39;Transaction aborted. Caught exception during transaction.&#39;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-comment">// If transient error,</span><span class="lg-highlight-comment"> retry the whole </span><span class="lg-highlight-comment">transaction</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">if</span> <!-- -->(<!-- -->error.<span class="lg-highlight-title lg-highlight-function">hasErrorLabel</span>(<span class="lg-highlight-string">&#39;TransientTransactionError&#39;</span>)) <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-variable lg-highlight-language">console</span>.<span class="lg-highlight-title lg-highlight-function">log</span>(<span class="lg-highlight-string">&#39;TransientTransactionError, retrying transaction ...&#39;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">await</span> <span class="lg-highlight-title lg-highlight-function">runTransactionWithRetry</span>(<!-- -->txnFunc<!-- -->, <!-- -->client<!-- -->, <!-- -->session)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->} <span class="lg-highlight-keyword">else</span> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">throw</span> <!-- -->error<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">async</span> <span class="lg-highlight-keyword lg-highlight-function">function</span> <span class="lg-highlight-title lg-highlight-function">updateEmployeeInfo</span>(<span class="lg-highlight-params">client, session</span>)<!-- --> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <!-- -->session.<span class="lg-highlight-title lg-highlight-function">startTransaction</span>(<!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-attr">readConcern</span>: <!-- -->{ <span class="lg-highlight-attr">level</span>: <span class="lg-highlight-string">&#39;snapshot&#39;</span> }<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-attr">writeConcern</span>: <!-- -->{ <span class="lg-highlight-attr">w</span>: <span class="lg-highlight-string">&#39;majority&#39;</span> }<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-attr">readPreference</span>: <span class="lg-highlight-string">&#39;primary&#39;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  })<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">const</span> employeesCollection <!-- -->= <!-- -->client.<span class="lg-highlight-title lg-highlight-function">db</span>(<span class="lg-highlight-string">&#39;hr&#39;</span>).<span class="lg-highlight-title lg-highlight-function">collection</span>(<span class="lg-highlight-string">&#39;employees&#39;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">const</span> eventsCollection <!-- -->= <!-- -->client.<span class="lg-highlight-title lg-highlight-function">db</span>(<span class="lg-highlight-string">&#39;reporting&#39;</span>).<span class="lg-highlight-title lg-highlight-function">collection</span>(<span class="lg-highlight-string">&#39;events&#39;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">await</span> employeesCollection.<span class="lg-highlight-title lg-highlight-function">updateOne</span>(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->{ <span class="lg-highlight-attr">employee</span>: <span class="lg-highlight-number">3</span> }<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->{ <span class="lg-highlight-attr">$set</span>: <!-- -->{ <span class="lg-highlight-attr">status</span>: <span class="lg-highlight-string">&#39;Inactive&#39;</span> } }<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->{ <!-- -->session }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  )<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">await</span> eventsCollection.<span class="lg-highlight-title lg-highlight-function">insertOne</span>(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-attr">employee</span>: <span class="lg-highlight-number">3</span>,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-attr">status</span>: <!-- -->{ <span class="lg-highlight-attr">new</span>: <span class="lg-highlight-string">&#39;Inactive&#39;</span>, <span class="lg-highlight-attr">old</span>: <span class="lg-highlight-string">&#39;Active&#39;</span> }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->{ <!-- -->session }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  )<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">try</span> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">await</span> <span class="lg-highlight-title lg-highlight-function">commitWithRetry</span>(<!-- -->session)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <!-- -->} <span class="lg-highlight-keyword">catch</span> <!-- -->(<!-- -->error) <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">await</span> session.<span class="lg-highlight-title lg-highlight-function">abortTransaction</span>(<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">throw</span> <!-- -->error<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <!-- -->}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">return</span> <!-- -->client.<span class="lg-highlight-title lg-highlight-function">withSession</span>(<span class="lg-highlight-params lg-highlight-function">session</span><span class="lg-highlight-function"> =&gt;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-title lg-highlight-function">runTransactionWithRetry</span>(<!-- -->updateEmployeeInfo<!-- -->, <!-- -->client<!-- -->, <!-- -->session)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">)<!-- -->;</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_n9b92hfpt" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-85da11"><h2 class="leafygreen-ui-1ac4g5h">Important</h2><div class="leafygreen-ui-9mycqc"><p class="leafygreen-ui-1kp3ins">To associate read and write operations with a transaction, you <strong>must</strong>
pass the session to each operation in the transaction.</p></div></div><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"sub runTransactionWithRetry {\n    my ( $txnFunc, $session ) = @_;\n\n    LOOP: {\n        eval {\n            $txnFunc-&gt;($session); # performs transaction\n        };\n        if ( my $error = $@ ) {\n            print(\"Transaction aborted-&gt; Caught exception during transaction.\\n\");\n            # If transient error, retry the whole transaction\n            if ( $error-&gt;has_error_label(\"TransientTransactionError\") ) {\n                print(\"TransientTransactionError, retrying transaction -&gt;..\\n\");\n                redo LOOP;\n            }\n            else {\n                die $error;\n            }\n        }\n    }\n\n    return;\n}\n\nsub commitWithRetry {\n    my ($session) = @_;\n\n    LOOP: {\n        eval {\n            $session-&gt;commit_transaction(); # Uses write concern set at transaction start.\n            print(\"Transaction committed-&gt;\\n\");\n        };\n        if ( my $error = $@ ) {\n            # Can retry commit\n            if ( $error-&gt;has_error_label(\"UnknownTransactionCommitResult\") ) {\n                print(\"UnknownTransactionCommitResult, retrying commit operation -&gt;..\\n\");\n                redo LOOP;\n            }\n            else {\n                print(\"Error during commit -&gt;..\\n\");\n                die $error;\n            }\n        }\n    }\n\n    return;\n}\n\n# Updates two collections in a transactions\n\nsub updateEmployeeInfo {\n    my ($session) = @_;\n    my $employeesCollection = $session-&gt;client-&gt;ns(\"hr.employees\");\n    my $eventsCollection    = $session-&gt;client-&gt;ns(\"reporting.events\");\n\n    $session-&gt;start_transaction(\n        {\n            readConcern  =&gt; { level =&gt; \"snapshot\" },\n            writeConcern =&gt; { w     =&gt; \"majority\" },\n            readPreference =&gt; 'primary',\n        }\n    );\n\n    eval {\n        $employeesCollection-&gt;update_one(\n            { employee =&gt; 3 }, { '$set' =&gt; { status =&gt; \"Inactive\" } },\n            { session =&gt; $session},\n        );\n        $eventsCollection-&gt;insert_one(\n            { employee =&gt; 3, status =&gt; { new =&gt; \"Inactive\", old =&gt; \"Active\" } },\n            { session =&gt; $session},\n        );\n    };\n    if ( my $error = $@ ) {\n        print(\"Caught exception during transaction, aborting-&gt;\\n\");\n        $session-&gt;abort_transaction();\n        die $error;\n    }\n\n    commitWithRetry($session);\n}\n\n# Start a session\nmy $session = $client-&gt;start_session();\n\neval {\n    runTransactionWithRetry(\\&amp;updateEmployeeInfo, $session);\n};\nif ( my $error = $@ ) {\n    # Do something with error\n}\n\n$session-&gt;end_session();\n","programmingLanguage":"Perl"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light perl leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword lg-highlight-function">sub</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">runTransactionWithRetry</span><span class="lg-highlight-function"> </span>{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">my</span> <!-- -->( <!-- -->$txnFunc<!-- -->, <!-- -->$session<!-- --> ) <!-- -->= <!-- -->@_<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->LOOP<!-- -->: <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">eval</span> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <!-- -->$txnFunc<!-- -->-<!-- -->&gt;<!-- -->(<!-- -->$session<!-- -->)<!-- -->; <span class="lg-highlight-comment"># performs transaction</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        }<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">if</span> <!-- -->( <span class="lg-highlight-keyword">my</span> <!-- -->$error<!-- --> <!-- -->= <!-- -->$@<!-- --> ) <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">print</span>(<span class="lg-highlight-string">&#34;Transaction aborted-&gt; Caught exception during transaction.</span><span class="lg-highlight-string">\n</span><span class="lg-highlight-string">&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-comment"># If transient error,</span><span class="lg-highlight-comment"> retry the whole </span><span class="lg-highlight-comment">transaction</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">if</span> <!-- -->( <!-- -->$error<!-- -->-<!-- -->&gt;<!-- -->has_error_label<!-- -->(<span class="lg-highlight-string">&#34;TransientTransactionError&#34;</span>) ) <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">print</span>(<span class="lg-highlight-string">&#34;TransientTransactionError, retrying transaction -&gt;..</span><span class="lg-highlight-string">\n</span><span class="lg-highlight-string">&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">redo</span> LOOP<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <!-- -->}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">else</span> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">die</span> <!-- -->$error<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <!-- -->}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">return</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword lg-highlight-function">sub</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">commitWithRetry</span><span class="lg-highlight-function"> </span>{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">my</span> <!-- -->(<!-- -->$session<!-- -->) <!-- -->= <!-- -->@_<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->LOOP<!-- -->: <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">eval</span> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <!-- -->$session<!-- -->-<!-- -->&gt;<!-- -->commit_transaction<!-- -->(<!-- -->)<!-- -->; <span class="lg-highlight-comment">#</span><span class="lg-highlight-comment"> Uses write concern </span><span class="lg-highlight-comment">set at transaction start.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">print</span>(<span class="lg-highlight-string">&#34;Transaction committed-&gt;</span><span class="lg-highlight-string">\n</span><span class="lg-highlight-string">&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <!-- -->}<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">if</span> <!-- -->( <span class="lg-highlight-keyword">my</span> <!-- -->$error<!-- --> <!-- -->= <!-- -->$@<!-- --> ) <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-comment"># Can retry commit</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">if</span> <!-- -->( <!-- -->$error<!-- -->-<!-- -->&gt;<!-- -->has_error_label<!-- -->(<span class="lg-highlight-string">&#34;UnknownTransactionCommitResult&#34;</span>) ) <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">print</span>(<span class="lg-highlight-string">&#34;UnknownTransactionCommitResult, retrying commit operation -&gt;..</span><span class="lg-highlight-string">\n</span><span class="lg-highlight-string">&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">redo</span> LOOP<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <!-- -->}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">else</span> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">print</span>(<span class="lg-highlight-string">&#34;Error during commit -&gt;..</span><span class="lg-highlight-string">\n</span><span class="lg-highlight-string">&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">die</span> <!-- -->$error<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <!-- -->}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">return</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">#</span><span class="lg-highlight-comment"> Updates two collections </span><span class="lg-highlight-comment">in a transactions</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword lg-highlight-function">sub</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">updateEmployeeInfo</span><span class="lg-highlight-function"> </span>{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">my</span> <!-- -->(<!-- -->$session<!-- -->) <!-- -->= <!-- -->@_<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">my</span> <!-- -->$employeesCollection<!-- --> <!-- -->= <!-- -->$session<!-- -->-<!-- -->&gt;<!-- -->client<!-- -->-<!-- -->&gt;<!-- -->ns<!-- -->(<span class="lg-highlight-string">&#34;hr.employees&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">my</span> <!-- -->$eventsCollection<!-- -->    <!-- -->= <!-- -->$session<!-- -->-<!-- -->&gt;<!-- -->client<!-- -->-<!-- -->&gt;<!-- -->ns<!-- -->(<span class="lg-highlight-string">&#34;reporting.events&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->$session<!-- -->-<!-- -->&gt;<!-- -->start_transaction<!-- -->(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-string">readConcern  =&gt;</span> <!-- -->{ <span class="lg-highlight-string">level =&gt;</span> <span class="lg-highlight-string">&#34;snapshot&#34;</span> }<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-string">writeConcern =&gt;</span> <!-- -->{ <span class="lg-highlight-string">w     =&gt;</span> <span class="lg-highlight-string">&#34;majority&#34;</span> }<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-string">readPreference =&gt;</span> <span class="lg-highlight-string">&#39;primary&#39;</span>,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <!-- -->}</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    )<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">eval</span> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <!-- -->$employeesCollection<!-- -->-<!-- -->&gt;<!-- -->update_one<!-- -->(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <!-- -->{ <span class="lg-highlight-string">employee =&gt;</span> <span class="lg-highlight-number">3</span> }<!-- -->, <!-- -->{ <span class="lg-highlight-string">&#39;$set&#39;</span> <!-- -->=<!-- -->&gt; <!-- -->{ <span class="lg-highlight-string">status =&gt;</span> <span class="lg-highlight-string">&#34;Inactive&#34;</span> } }<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <!-- -->{ <span class="lg-highlight-string">session =&gt;</span> <!-- -->$session<!-- -->}<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <!-- -->$eventsCollection<!-- -->-<!-- -->&gt;<!-- -->insert_one<!-- -->(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <!-- -->{ <span class="lg-highlight-string">employee =&gt;</span> <span class="lg-highlight-number">3</span>, <span class="lg-highlight-string">status =&gt;</span> <!-- -->{ <span class="lg-highlight-string">new =&gt;</span> <span class="lg-highlight-string">&#34;Inactive&#34;</span>, <span class="lg-highlight-string">old =&gt;</span> <span class="lg-highlight-string">&#34;Active&#34;</span> } }<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <!-- -->{ <span class="lg-highlight-string">session =&gt;</span> <!-- -->$session<!-- -->}<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->}<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">if</span> <!-- -->( <span class="lg-highlight-keyword">my</span> <!-- -->$error<!-- --> <!-- -->= <!-- -->$@<!-- --> ) <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">print</span>(<span class="lg-highlight-string">&#34;Caught exception during transaction, aborting-&gt;</span><span class="lg-highlight-string">\n</span><span class="lg-highlight-string">&#34;</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <!-- -->$session<!-- -->-<!-- -->&gt;<!-- -->abort_transaction<!-- -->(<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">die</span> <!-- -->$error<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    commitWithRetry<!-- -->(<!-- -->$session<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># Start a session</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">my</span> <!-- -->$session<!-- --> <!-- -->= <!-- -->$client<!-- -->-<!-- -->&gt;<!-- -->start_session<!-- -->(<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">eval</span> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->runTransactionWithRetry<!-- -->(<!-- -->\<!-- -->&amp;<!-- -->updateEmployeeInfo<!-- -->, <!-- -->$session<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">if</span> <!-- -->( <span class="lg-highlight-keyword">my</span> <!-- -->$error<!-- --> <!-- -->= <!-- -->$@<!-- --> ) <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-comment"># Do something with error</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">$session<!-- -->-<!-- -->&gt;<!-- -->end_session<!-- -->(<!-- -->)<!-- -->;</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_6t3ck7y9g" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-85da11"><h2 class="leafygreen-ui-1ac4g5h">Important</h2><div class="leafygreen-ui-9mycqc"><p class="leafygreen-ui-1kp3ins">To associate read and write operations with a transaction, you <strong>must</strong>
pass the session to each operation in the transaction.</p></div></div><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"private function runTransactionWithRetry3(callable $txnFunc, \\MongoDB\\Client $client, \\MongoDB\\Driver\\Session $session): void\n{\n    while (true) {\n        try {\n            $txnFunc($client, $session);  // performs transaction\n            break;\n        } catch (\\MongoDB\\Driver\\Exception\\CommandException $error) {\n            $resultDoc = $error-&gt;getResultDocument();\n\n            // If transient error, retry the whole transaction\n            if (isset($resultDoc-&gt;errorLabels) &amp;&amp; in_array('TransientTransactionError', $resultDoc-&gt;errorLabels)) {\n                continue;\n            } else {\n                throw $error;\n            }\n        } catch (\\MongoDB\\Driver\\Exception\\Exception $error) {\n            throw $error;\n        }\n    }\n}\n\nprivate function commitWithRetry3(\\MongoDB\\Driver\\Session $session): void\n{\n    while (true) {\n        try {\n            $session-&gt;commitTransaction();\n            echo \"Transaction committed.\\n\";\n            break;\n        } catch (\\MongoDB\\Driver\\Exception\\CommandException $error) {\n            $resultDoc = $error-&gt;getResultDocument();\n\n            if (isset($resultDoc-&gt;errorLabels) &amp;&amp; in_array('UnknownTransactionCommitResult', $resultDoc-&gt;errorLabels)) {\n                echo \"UnknownTransactionCommitResult, retrying commit operation ...\\n\";\n                continue;\n            } else {\n                echo \"Error during commit ...\\n\";\n\n                throw $error;\n            }\n        } catch (\\MongoDB\\Driver\\Exception\\Exception $error) {\n            echo \"Error during commit ...\\n\";\n\n            throw $error;\n        }\n    }\n}\n\nprivate function updateEmployeeInfo3(\\MongoDB\\Client $client, \\MongoDB\\Driver\\Session $session): void\n{\n    $session-&gt;startTransaction([\n        'readConcern' =&gt; new \\MongoDB\\Driver\\ReadConcern('snapshot'),\n        'readPrefernece' =&gt; new \\MongoDB\\Driver\\ReadPreference(\\MongoDB\\Driver\\ReadPreference::PRIMARY),\n        'writeConcern' =&gt; new \\MongoDB\\Driver\\WriteConcern(\\MongoDB\\Driver\\WriteConcern::MAJORITY),\n    ]);\n\n    try {\n        $client-&gt;hr-&gt;employees-&gt;updateOne(\n            ['employee' =&gt; 3],\n            ['$set' =&gt; ['status' =&gt; 'Inactive']],\n            ['session' =&gt; $session],\n        );\n        $client-&gt;reporting-&gt;events-&gt;insertOne(\n            ['employee' =&gt; 3, 'status' =&gt; ['new' =&gt; 'Inactive', 'old' =&gt; 'Active']],\n            ['session' =&gt; $session],\n        );\n    } catch (\\MongoDB\\Driver\\Exception\\Exception $error) {\n        echo \"Caught exception during transaction, aborting.\\n\";\n        $session-&gt;abortTransaction();\n\n        throw $error;\n    }\n\n    $this-&gt;commitWithRetry3($session);\n}\n\nprivate function doUpdateEmployeeInfo(\\MongoDB\\Client $client): void\n{\n    // Start a session.\n    $session = $client-&gt;startSession();\n\n    try {\n        $this-&gt;runTransactionWithRetry3([$this, 'updateEmployeeInfo3'], $client, $session);\n    } catch (\\MongoDB\\Driver\\Exception\\Exception) {\n        // Do something with error\n    }\n}","programmingLanguage":"PHP"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light php leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">private</span> <span class="lg-highlight-keyword lg-highlight-function lg-highlight-function">function</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">runTransactionWithRetry3</span><span class="lg-highlight-function">(</span><span class="lg-highlight-keyword lg-highlight-params lg-highlight-function">callable</span><span class="lg-highlight-params lg-highlight-function"> </span><span class="lg-highlight-variable lg-highlight-params lg-highlight-function">$txnFunc</span><span class="lg-highlight-params lg-highlight-function">, \MongoDB\Client </span><span class="lg-highlight-variable lg-highlight-params lg-highlight-function">$client</span><span class="lg-highlight-params lg-highlight-function">, \MongoDB\Driver\Session </span><span class="lg-highlight-variable lg-highlight-params lg-highlight-function">$session</span><span class="lg-highlight-function">): </span><span class="lg-highlight-title lg-highlight-function">void</span><span class="lg-highlight-function"></span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-function"></span>{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">while</span> (<span class="lg-highlight-literal">true</span>) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">try</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-variable">$txnFunc</span>(<span class="lg-highlight-variable">$client</span>, <span class="lg-highlight-variable">$session</span>);  <span class="lg-highlight-comment">// performs transaction</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">break</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        } <span class="lg-highlight-keyword">catch</span> (\MongoDB\Driver\<span class="lg-highlight-built_in">Exception</span>\CommandException <span class="lg-highlight-variable">$error</span>) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-variable">$resultDoc</span> = <span class="lg-highlight-variable">$error</span>-&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">getResultDocument</span>()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-comment">// If transient error,</span><span class="lg-highlight-comment"> retry the whole </span><span class="lg-highlight-comment">transaction</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">if</span> (<span class="lg-highlight-keyword">isset</span>(<span class="lg-highlight-variable">$resultDoc</span>-&gt;errorLabels) &amp;&amp; <span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">in_array</span>(<span class="lg-highlight-string">&#39;TransientTransactionError&#39;</span>, <span class="lg-highlight-variable">$resultDoc</span>-&gt;errorLabels)<!-- -->) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">continue</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            } <span class="lg-highlight-keyword">else</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">throw</span> <span class="lg-highlight-variable">$error</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        } <span class="lg-highlight-keyword">catch</span> (\MongoDB\Driver\<span class="lg-highlight-built_in">Exception</span>\<span class="lg-highlight-built_in">Exception</span> <span class="lg-highlight-variable">$error</span>) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">throw</span> <span class="lg-highlight-variable">$error</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">private</span> <span class="lg-highlight-keyword lg-highlight-function lg-highlight-function">function</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">commitWithRetry3</span><span class="lg-highlight-function">(</span><span class="lg-highlight-params lg-highlight-function">\MongoDB\Driver\Session </span><span class="lg-highlight-variable lg-highlight-params lg-highlight-function">$session</span><span class="lg-highlight-function">): </span><span class="lg-highlight-title lg-highlight-function">void</span><span class="lg-highlight-function"></span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-function"></span>{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">while</span> (<span class="lg-highlight-literal">true</span>) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">try</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-variable">$session</span>-&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">commitTransaction</span>()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">echo</span> <span class="lg-highlight-string">&#34;Transaction committed.</span><span class="lg-highlight-string">\n</span><span class="lg-highlight-string">&#34;</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">break</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        } <span class="lg-highlight-keyword">catch</span> (\MongoDB\Driver\<span class="lg-highlight-built_in">Exception</span>\CommandException <span class="lg-highlight-variable">$error</span>) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-variable">$resultDoc</span> = <span class="lg-highlight-variable">$error</span>-&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">getResultDocument</span>()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">if</span> (<span class="lg-highlight-keyword">isset</span>(<span class="lg-highlight-variable">$resultDoc</span>-&gt;errorLabels) &amp;&amp; <span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">in_array</span>(<span class="lg-highlight-string">&#39;UnknownTransactionCommitResult&#39;</span>, <span class="lg-highlight-variable">$resultDoc</span>-&gt;errorLabels)<!-- -->) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">echo</span> <span class="lg-highlight-string">&#34;UnknownTransactionCommitResult, retrying commit operation ...</span><span class="lg-highlight-string">\n</span><span class="lg-highlight-string">&#34;</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">continue</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            } <span class="lg-highlight-keyword">else</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">echo</span> <span class="lg-highlight-string">&#34;Error during commit ...</span><span class="lg-highlight-string">\n</span><span class="lg-highlight-string">&#34;</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">throw</span> <span class="lg-highlight-variable">$error</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        } <span class="lg-highlight-keyword">catch</span> (\MongoDB\Driver\<span class="lg-highlight-built_in">Exception</span>\<span class="lg-highlight-built_in">Exception</span> <span class="lg-highlight-variable">$error</span>) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">echo</span> <span class="lg-highlight-string">&#34;Error during commit ...</span><span class="lg-highlight-string">\n</span><span class="lg-highlight-string">&#34;</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">throw</span> <span class="lg-highlight-variable">$error</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">private</span> <span class="lg-highlight-keyword lg-highlight-function lg-highlight-function">function</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">updateEmployeeInfo3</span><span class="lg-highlight-function">(</span><span class="lg-highlight-params lg-highlight-function">\MongoDB\Client </span><span class="lg-highlight-variable lg-highlight-params lg-highlight-function">$client</span><span class="lg-highlight-params lg-highlight-function">, \MongoDB\Driver\Session </span><span class="lg-highlight-variable lg-highlight-params lg-highlight-function">$session</span><span class="lg-highlight-function">): </span><span class="lg-highlight-title lg-highlight-function">void</span><span class="lg-highlight-function"></span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-function"></span>{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-variable">$session</span>-&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">startTransaction</span>([</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-string">&#39;readConcern&#39;</span> =&gt; <span class="lg-highlight-keyword">new</span> \MongoDB\Driver\<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">ReadConcern</span>(<span class="lg-highlight-string">&#39;snapshot&#39;</span>)<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-string">&#39;readPrefernece&#39;</span> =&gt; <span class="lg-highlight-keyword">new</span> \MongoDB\Driver\<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">ReadPreference</span>(\MongoDB<span class="lg-highlight-title lg-highlight-class">\Driver\ReadPreference</span>::<span class="lg-highlight-variable lg-highlight-constant">PRIMARY</span>)<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-string">&#39;writeConcern&#39;</span> =&gt; <span class="lg-highlight-keyword">new</span> \MongoDB\Driver\<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">WriteConcern</span>(\MongoDB<span class="lg-highlight-title lg-highlight-class">\Driver\WriteConcern</span>::<span class="lg-highlight-variable lg-highlight-constant">MAJORITY</span>)<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    ])<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">try</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-variable">$client</span>-&gt;hr-&gt;employees-&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">updateOne</span>(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            [<span class="lg-highlight-string">&#39;employee&#39;</span> =&gt; <span class="lg-highlight-number">3</span>],</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            [<span class="lg-highlight-string">&#39;$set&#39;</span> =&gt; [<span class="lg-highlight-string">&#39;status&#39;</span> =&gt; <span class="lg-highlight-string">&#39;Inactive&#39;</span>]],</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            [<span class="lg-highlight-string">&#39;session&#39;</span> =&gt; <span class="lg-highlight-variable">$session</span>],</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        )<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-variable">$client</span>-&gt;reporting-&gt;events-&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">insertOne</span>(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            [<span class="lg-highlight-string">&#39;employee&#39;</span> =&gt; <span class="lg-highlight-number">3</span>, <span class="lg-highlight-string">&#39;status&#39;</span> =&gt; [<span class="lg-highlight-string">&#39;new&#39;</span> =&gt; <span class="lg-highlight-string">&#39;Inactive&#39;</span>, <span class="lg-highlight-string">&#39;old&#39;</span> =&gt; <span class="lg-highlight-string">&#39;Active&#39;</span>]],</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            [<span class="lg-highlight-string">&#39;session&#39;</span> =&gt; <span class="lg-highlight-variable">$session</span>],</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        )<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    } <span class="lg-highlight-keyword">catch</span> (\MongoDB\Driver\<span class="lg-highlight-built_in">Exception</span>\<span class="lg-highlight-built_in">Exception</span> <span class="lg-highlight-variable">$error</span>) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">echo</span> <span class="lg-highlight-string">&#34;Caught exception during transaction, aborting.</span><span class="lg-highlight-string">\n</span><span class="lg-highlight-string">&#34;</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-variable">$session</span>-&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">abortTransaction</span>()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">throw</span> <span class="lg-highlight-variable">$error</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-variable lg-highlight-language">$this</span>-&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">commitWithRetry3</span>(<span class="lg-highlight-variable">$session</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">private</span> <span class="lg-highlight-keyword lg-highlight-function lg-highlight-function">function</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">doUpdateEmployeeInfo</span><span class="lg-highlight-function">(</span><span class="lg-highlight-params lg-highlight-function">\MongoDB\Client </span><span class="lg-highlight-variable lg-highlight-params lg-highlight-function">$client</span><span class="lg-highlight-function">): </span><span class="lg-highlight-title lg-highlight-function">void</span><span class="lg-highlight-function"></span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-function"></span>{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-comment">// Start a session.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-variable">$session</span> = <span class="lg-highlight-variable">$client</span>-&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">startSession</span>()<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">try</span> {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-variable lg-highlight-language">$this</span>-&gt;<span class="lg-highlight-title lg-highlight-function lg-highlight-invoke">runTransactionWithRetry3</span>([<span class="lg-highlight-variable">$this</span>, <span class="lg-highlight-string">&#39;updateEmployeeInfo3&#39;</span>], <span class="lg-highlight-variable">$client</span>, <span class="lg-highlight-variable">$session</span>)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    } <span class="lg-highlight-keyword">catch</span> (\MongoDB\Driver\<span class="lg-highlight-built_in">Exception</span>\<span class="lg-highlight-built_in">Exception</span>) {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-comment">// Do something with error</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_gwb9ruubs" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-85da11"><h2 class="leafygreen-ui-1ac4g5h">Important</h2><div class="leafygreen-ui-9mycqc"><p class="leafygreen-ui-1kp3ins">To associate read and write operations with a transaction, you <strong>must</strong>
pass the session to each operation in the transaction.</p></div></div><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"\ndef run_transaction_with_retry(txn_func, session):\n    while True:\n        try:\n            txn_func(session)  # performs transaction\n            break\n        except (ConnectionFailure, OperationFailure) as exc:\n            # If transient error, retry the whole transaction\n            if exc.has_error_label(\"TransientTransactionError\"):\n                print(\"TransientTransactionError, retrying transaction ...\")\n                continue\n            else:\n                raise\n\ndef commit_with_retry(session):\n    while True:\n        try:\n            # Commit uses write concern set at transaction start.\n            session.commit_transaction()\n            print(\"Transaction committed.\")\n            break\n        except (ConnectionFailure, OperationFailure) as exc:\n            # Can retry commit\n            if exc.has_error_label(\"UnknownTransactionCommitResult\"):\n                print(\"UnknownTransactionCommitResult, retrying commit operation ...\")\n                continue\n            else:\n                print(\"Error during commit ...\")\n                raise\n\n# Updates two collections in a transactions\n\ndef update_employee_info(session):\n    employees_coll = session.client.hr.employees\n    events_coll = session.client.reporting.events\n\n    with session.start_transaction(\n        read_concern=ReadConcern(\"snapshot\"),\n        write_concern=WriteConcern(w=\"majority\"),\n        read_preference=ReadPreference.PRIMARY,\n    ):\n        employees_coll.update_one(\n            {\"employee\": 3}, {\"$set\": {\"status\": \"Inactive\"}}, session=session\n        )\n        events_coll.insert_one(\n            {\"employee\": 3, \"status\": {\"new\": \"Inactive\", \"old\": \"Active\"}}, session=session\n        )\n\n        commit_with_retry(session)\n\n# Start a session.\nwith client.start_session() as session:\n    try:\n        run_transaction_with_retry(update_employee_info, session)\n    except Exception:\n        # Do something with error.\n        raise\n","programmingLanguage":"Python"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light python leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">def</span> <span class="lg-highlight-title lg-highlight-function">run_transaction_with_retry</span>(<span class="lg-highlight-params">txn_func, session</span>)<!-- -->:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">while</span> <span class="lg-highlight-literal">True</span>:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">try</span>:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            txn_func(session)  <span class="lg-highlight-comment"># performs transaction</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">break</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">except</span> (ConnectionFailure, OperationFailure) <span class="lg-highlight-keyword">as</span> exc:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-comment"># If transient error,</span><span class="lg-highlight-comment"> retry the whole </span><span class="lg-highlight-comment">transaction</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">if</span> exc.has_error_label(<span class="lg-highlight-string">&#34;TransientTransactionError&#34;</span>):</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-built_in">print</span>(<span class="lg-highlight-string">&#34;TransientTransactionError, retrying transaction ...&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">continue</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">else</span>:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">raise</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">def</span> <span class="lg-highlight-title lg-highlight-function">commit_with_retry</span>(<span class="lg-highlight-params">session</span>)<!-- -->:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">while</span> <span class="lg-highlight-literal">True</span>:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">try</span>:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-comment">#</span><span class="lg-highlight-comment"> Commit uses write </span><span class="lg-highlight-comment">concern</span><span class="lg-highlight-comment"> set at transaction </span><span class="lg-highlight-comment">start.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            session.commit_transaction()</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-built_in">print</span>(<span class="lg-highlight-string">&#34;Transaction committed.&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">break</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">except</span> (ConnectionFailure, OperationFailure) <span class="lg-highlight-keyword">as</span> exc:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-comment"># Can retry commit</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">if</span> exc.has_error_label(<span class="lg-highlight-string">&#34;UnknownTransactionCommitResult&#34;</span>):</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-built_in">print</span>(<span class="lg-highlight-string">&#34;UnknownTransactionCommitResult, retrying commit operation ...&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">continue</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">            <span class="lg-highlight-keyword">else</span>:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-built_in">print</span>(<span class="lg-highlight-string">&#34;Error during commit ...&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                <span class="lg-highlight-keyword">raise</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">#</span><span class="lg-highlight-comment"> Updates two collections </span><span class="lg-highlight-comment">in a transactions</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">def</span> <span class="lg-highlight-title lg-highlight-function">update_employee_info</span>(<span class="lg-highlight-params">session</span>)<!-- -->:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    employees_coll = session.client.hr.employees</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    events_coll = session.client.reporting.events</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">with</span> session.start_transaction(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        read_concern=ReadConcern(<span class="lg-highlight-string">&#34;snapshot&#34;</span>),</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        write_concern=WriteConcern(w=<span class="lg-highlight-string">&#34;majority&#34;</span>),</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        read_preference=ReadPreference.PRIMARY,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    ):</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        employees_coll.update_one(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            {<span class="lg-highlight-string">&#34;employee&#34;</span>: <span class="lg-highlight-number">3</span>}, {<span class="lg-highlight-string">&#34;$set&#34;</span>: {<span class="lg-highlight-string">&#34;status&#34;</span>: <span class="lg-highlight-string">&#34;Inactive&#34;</span>}}, session=session</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        )</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        events_coll.insert_one(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">            {<span class="lg-highlight-string">&#34;employee&#34;</span>: <span class="lg-highlight-number">3</span>, <span class="lg-highlight-string">&#34;status&#34;</span>: {<span class="lg-highlight-string">&#34;new&#34;</span>: <span class="lg-highlight-string">&#34;Inactive&#34;</span>, <span class="lg-highlight-string">&#34;old&#34;</span>: <span class="lg-highlight-string">&#34;Active&#34;</span>}}, session=session</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        )</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        commit_with_retry(session)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"># Start a session.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">with</span> client.start_session() <span class="lg-highlight-keyword">as</span> session:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">try</span>:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        run_transaction_with_retry(update_employee_info, session)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">except</span> Exception:</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-comment"># Do something with error.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">raise</span></td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_95gmzp0e8" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-85da11"><h2 class="leafygreen-ui-1ac4g5h">Important</h2><div class="leafygreen-ui-9mycqc"><p class="leafygreen-ui-1kp3ins">To associate read and write operations with a transaction, you <strong>must</strong>
pass the session to each operation in the transaction.</p></div></div><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"\ndef run_transaction_with_retry(session)\n  begin\n    yield session # performs transaction\n  rescue Mongo::Error =&gt; e\n    puts 'Transaction aborted. Caught exception during transaction.'\n    raise unless e.label?('TransientTransactionError')\n    puts \"TransientTransactionError, retrying transaction ...\"\n    retry\n  end\nend\n\ndef commit_with_retry(session)\n  begin\n    session.commit_transaction\n    puts 'Transaction committed.'\n  rescue Mongo::Error =&gt; e\n    if e.label?('UnknownTransactionCommitResult')\n      puts \"UnknownTransactionCommitResult, retrying commit operation ...\"\n      retry\n    else\n      puts 'Error during commit ...'\n      raise\n    end\n  end\nend\n\n# updates two collections in a transaction\n\ndef update_employee_info(session)\n  employees_coll = session.client.use(:hr)[:employees]\n  events_coll = session.client.use(:reporting)[:events]\n\n  session.start_transaction(read_concern: { level: :snapshot },\n                            write_concern: { w: :majority },\n                            read: {mode: :primary})\n  employees_coll.update_one({ employee: 3 }, { '$set' =&gt; { status: 'Inactive'} },\n                            session: session)\n  events_coll.insert_one({ employee: 3, status: { new: 'Inactive', old: 'Active' } },\n                         session: session)\n  commit_with_retry(session)\nend\n\nsession = client.start_session\n\nbegin\n  run_transaction_with_retry(session) do\n    update_employee_info(session)\n  end\nrescue StandardError =&gt; e\n  # Do something with error\n  raise\nend\n","programmingLanguage":"Ruby"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light ruby leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">def</span> <span class="lg-highlight-title lg-highlight-function">run_transaction_with_retry</span>(<span class="lg-highlight-params">session</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">begin</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">yield</span> session <span class="lg-highlight-comment"># performs transaction</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">rescue</span> <!-- -->Mongo::<!-- -->Error <!-- -->=<!-- -->&gt; <!-- -->e</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    puts <span class="lg-highlight-string">&#39;Transaction aborted. Caught exception during transaction.&#39;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    raise <span class="lg-highlight-keyword">unless</span> <!-- -->e.label<!-- -->?<!-- -->(<span class="lg-highlight-string">&#39;TransientTransactionError&#39;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    puts <span class="lg-highlight-string">&#34;TransientTransactionError, retrying transaction ...&#34;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">retry</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">end</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">end</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">def</span> <span class="lg-highlight-title lg-highlight-function">commit_with_retry</span>(<span class="lg-highlight-params">session</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">begin</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    session.commit_transaction</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    puts <span class="lg-highlight-string">&#39;Transaction committed.&#39;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">rescue</span> <!-- -->Mongo::<!-- -->Error <!-- -->=<!-- -->&gt; <!-- -->e</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">if</span> e.label<!-- -->?<!-- -->(<span class="lg-highlight-string">&#39;UnknownTransactionCommitResult&#39;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      puts <span class="lg-highlight-string">&#34;UnknownTransactionCommitResult, retrying commit operation ...&#34;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">retry</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">else</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">      puts <span class="lg-highlight-string">&#39;Error during commit ...&#39;</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">      raise</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">end</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">end</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">end</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">#</span><span class="lg-highlight-comment"> updates two collections </span><span class="lg-highlight-comment">in a transaction</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">def</span> <span class="lg-highlight-title lg-highlight-function">update_employee_info</span>(<span class="lg-highlight-params">session</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  employees_coll <!-- -->= <!-- -->session.client.use<!-- -->(<span class="lg-highlight-symbol">:</span><span class="lg-highlight-symbol">hr</span>)<!-- -->[<span class="lg-highlight-symbol">:</span><span class="lg-highlight-symbol">employees</span>]</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  events_coll <!-- -->= <!-- -->session.client.use<!-- -->(<span class="lg-highlight-symbol">:</span><span class="lg-highlight-symbol">reporting</span>)<!-- -->[<span class="lg-highlight-symbol">:</span><span class="lg-highlight-symbol">events</span>]</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  session.start_transaction<!-- -->(<span class="lg-highlight-symbol">read_concern:</span> <!-- -->{ <span class="lg-highlight-symbol">level:</span> <span class="lg-highlight-symbol">:</span><span class="lg-highlight-symbol">snapshot</span> }<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                            <span class="lg-highlight-symbol">write_concern:</span> <!-- -->{ <span class="lg-highlight-symbol">w:</span> <span class="lg-highlight-symbol">:</span><span class="lg-highlight-symbol">majority</span> }<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                            <span class="lg-highlight-symbol">read:</span> <!-- -->{<span class="lg-highlight-symbol">mode:</span> <span class="lg-highlight-symbol">:</span><span class="lg-highlight-symbol">primary</span>})</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  employees_coll.update_one<!-- -->(<!-- -->{ <span class="lg-highlight-symbol">employee:</span> <span class="lg-highlight-number">3</span> }<!-- -->, <!-- -->{ <span class="lg-highlight-string">&#39;$set&#39;</span> <!-- -->=<!-- -->&gt; <!-- -->{ <span class="lg-highlight-symbol">status:</span> <span class="lg-highlight-string">&#39;Inactive&#39;</span>} }<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                            <span class="lg-highlight-symbol">session:</span> session)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  events_coll.insert_one<!-- -->(<!-- -->{ <span class="lg-highlight-symbol">employee:</span> <span class="lg-highlight-number">3</span>, <span class="lg-highlight-symbol">status:</span> <!-- -->{ <span class="lg-highlight-symbol">new:</span> <span class="lg-highlight-string">&#39;Inactive&#39;</span>, <span class="lg-highlight-symbol">old:</span> <span class="lg-highlight-string">&#39;Active&#39;</span> } }<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">                         <span class="lg-highlight-symbol">session:</span> session)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  commit_with_retry<!-- -->(<!-- -->session)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">end</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">session <!-- -->= <!-- -->client.start_session</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">begin</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  run_transaction_with_retry<!-- -->(<!-- -->session) <span class="lg-highlight-keyword">do</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    update_employee_info<!-- -->(<!-- -->session)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">end</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">rescue</span> StandardError <!-- -->=<!-- -->&gt; <!-- -->e</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-comment"># Do something with error</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  raise</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">end</span></td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div><div><div class="leafygreen-ui-38lglc" id="_u3cv5qbww" role="tabpanel"><div class="leafygreen-ui-1kdmo88"><div role="note" class="leafygreen-ui-85da11"><h2 class="leafygreen-ui-1ac4g5h">Important</h2><div class="leafygreen-ui-9mycqc"><p class="leafygreen-ui-1kp3ins">To associate read and write operations with a transaction, you <strong>must</strong>
pass the session to each operation in the transaction.</p></div></div><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"/*\n * Copyright 2008-present MongoDB, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage org.mongodb.scala\n\nimport org.mongodb.scala.model.{Filters, Updates}\nimport org.mongodb.scala.result.UpdateResult\n\nimport scala.concurrent.Await\nimport scala.concurrent.duration.Duration\n\n\n//scalastyle:off magic.number\nclass DocumentationTransactionsExampleSpec extends RequiresMongoDBISpec {\n\n  // Implicit functions that execute the Observable and return the results\n  val waitDuration = Duration(5, \"seconds\")\n  implicit class ObservableExecutor[T](observable: Observable[T]) {\n    def execute(): Seq[T] = Await.result(observable.toFuture(), waitDuration)\n  }\n\n  implicit class SingleObservableExecutor[T](observable: SingleObservable[T]) {\n    def execute(): T = Await.result(observable.toFuture(), waitDuration)\n  }\n  // end implicit functions\n\n  \"The Scala driver\" should \"be able to commit a transaction\" in withClient { client =&gt;\n    assume(serverVersionAtLeast(List(4, 0, 0)) &amp;&amp; !hasSingleHost())\n    client.getDatabase(\"hr\").drop().execute()\n    client.getDatabase(\"hr\").createCollection(\"employees\").execute()\n    client.getDatabase(\"hr\").createCollection(\"events\").execute()\n\n    updateEmployeeInfoWithRetry(client).execute() should equal(Completed())\n    client.getDatabase(\"hr\").drop().execute() should equal(Completed())\n  }\n\n  def updateEmployeeInfo(database: MongoDatabase, observable: SingleObservable[ClientSession]): SingleObservable[ClientSession] = {\n    observable.map(clientSession =&gt; {\n      val employeesCollection = database.getCollection(\"employees\")\n      val eventsCollection = database.getCollection(\"events\")\n\n      val transactionOptions = TransactionOptions.builder()\n        .readPreference(ReadPreference.primary())\n        .readConcern(ReadConcern.SNAPSHOT)\n        .writeConcern(WriteConcern.MAJORITY)\n        .build()\n      clientSession.startTransaction(transactionOptions)\n      employeesCollection.updateOne(clientSession, Filters.eq(\"employee\", 3), Updates.set(\"status\", \"Inactive\"))\n        .subscribe((res: UpdateResult) =&gt; println(res))\n      eventsCollection.insertOne(clientSession, Document(\"employee\" -&gt; 3, \"status\" -&gt; Document(\"new\" -&gt; \"Inactive\", \"old\" -&gt; \"Active\")))\n        .subscribe((res: Completed) =&gt; println(res))\n\n      clientSession\n    })\n  }\n\n  def commitAndRetry(observable: SingleObservable[Completed]): SingleObservable[Completed] = {\n    observable.recoverWith({\n      case e: MongoException if e.hasErrorLabel(MongoException.UNKNOWN_TRANSACTION_COMMIT_RESULT_LABEL) =&gt; {\n        println(\"UnknownTransactionCommitResult, retrying commit operation ...\")\n        commitAndRetry(observable)\n      }\n      case e: Exception =&gt; {\n        println(s\"Exception during commit ...: $e\")\n        throw e\n      }\n    })\n  }\n\n  def runTransactionAndRetry(observable: SingleObservable[Completed]): SingleObservable[Completed] = {\n    observable.recoverWith({\n      case e: MongoException if e.hasErrorLabel(MongoException.TRANSIENT_TRANSACTION_ERROR_LABEL) =&gt; {\n        println(\"TransientTransactionError, aborting transaction and retrying ...\")\n        runTransactionAndRetry(observable)\n      }\n    })\n  }\n\n  def updateEmployeeInfoWithRetry(client: MongoClient): SingleObservable[Completed] = {\n\n    val database = client.getDatabase(\"hr\")\n    val updateEmployeeInfoObservable: Observable[ClientSession] = updateEmployeeInfo(database, client.startSession())\n    val commitTransactionObservable: SingleObservable[Completed] =\n      updateEmployeeInfoObservable.flatMap(clientSession =&gt; clientSession.commitTransaction())\n    val commitAndRetryObservable: SingleObservable[Completed] = commitAndRetry(commitTransactionObservable)\n\n    runTransactionAndRetry(commitAndRetryObservable)\n  }\n}\n","programmingLanguage":"Scala"}</script><div class=" leafygreen-ui-9duavq leafygreen-ui-q0s36i intro-code-block"><div class="leafygreen-ui-196mwvg"><div class="leafygreen-ui-yzcs8i"><pre class="leafygreen-ui-11itue3" tabindex="-1"><code class="lg-highlight-hljs-light scala leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">/*</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> * Copyright 2008-present MongoDB, Inc.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> *</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> *</span><span class="lg-highlight-comment"> Licensed under the </span><span class="lg-highlight-comment">Apache License, Version 2.0 (the &#34;License&#34;);</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> *</span><span class="lg-highlight-comment"> you may not </span><span class="lg-highlight-comment">use</span><span class="lg-highlight-comment"> this file except </span><span class="lg-highlight-comment">in</span><span class="lg-highlight-comment"> compliance with the </span><span class="lg-highlight-comment">License.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> *</span><span class="lg-highlight-comment"> You may obtain </span><span class="lg-highlight-comment">a copy of the License at</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> *</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> *   http://www.apache.org/licenses/LICENSE-2.0</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> *</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> * Unless required by applicable law or</span><span class="lg-highlight-comment"> agreed to in </span><span class="lg-highlight-comment">writing, software</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> *</span><span class="lg-highlight-comment"> distributed under the </span><span class="lg-highlight-comment">License</span><span class="lg-highlight-comment"> is distributed on </span><span class="lg-highlight-comment">an &#34;AS IS&#34; BASIS,</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> *</span><span class="lg-highlight-comment"> See the License </span><span class="lg-highlight-comment">for</span><span class="lg-highlight-comment"> the specific language </span><span class="lg-highlight-comment">governing permissions and</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> *</span><span class="lg-highlight-comment"> limitations under the </span><span class="lg-highlight-comment">License.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment"> */</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">package</span> org.mongodb.scala</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">import</span> org.mongodb.scala.model.{<span class="lg-highlight-type">Filters</span>, <span class="lg-highlight-type">Updates</span>}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">import</span> org.mongodb.scala.result.<span class="lg-highlight-type">UpdateResult</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">import</span> scala.concurrent.<span class="lg-highlight-type">Await</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">import</span> scala.concurrent.duration.<span class="lg-highlight-type">Duration</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">//scalastyle:off magic.number</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword lg-highlight-class lg-highlight-class">class</span><span class="lg-highlight-class"> </span><span class="lg-highlight-title lg-highlight-class">DocumentationTransactionsExampleSpec</span><span class="lg-highlight-class"> </span><span class="lg-highlight-keyword lg-highlight-class">extends</span><span class="lg-highlight-class"> </span><span class="lg-highlight-title lg-highlight-class">RequiresMongoDBISpec</span><span class="lg-highlight-class"> </span>{</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> Implicit functions that </span><span class="lg-highlight-comment">execute</span><span class="lg-highlight-comment"> the Observable and </span><span class="lg-highlight-comment">return the results</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">val</span> waitDuration = <span class="lg-highlight-type">Duration</span>(<span class="lg-highlight-number">5</span>, <span class="lg-highlight-string">&#34;seconds&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">implicit</span> <span class="lg-highlight-keyword lg-highlight-class lg-highlight-class">class</span><span class="lg-highlight-class"> </span><span class="lg-highlight-title lg-highlight-class">ObservableExecutor</span><span class="lg-highlight-class">[</span><span class="lg-highlight-type lg-highlight-class">T</span><span class="lg-highlight-class">](</span><span class="lg-highlight-params lg-highlight-class">observable: </span><span class="lg-highlight-type lg-highlight-params lg-highlight-class">Observable</span><span class="lg-highlight-params lg-highlight-class">[</span><span class="lg-highlight-type lg-highlight-params lg-highlight-class">T</span><span class="lg-highlight-params lg-highlight-class">]</span><span class="lg-highlight-class">) </span>{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword lg-highlight-function">def</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">execute</span>(): <span class="lg-highlight-type">Seq</span>[<span class="lg-highlight-type">T</span>] = <span class="lg-highlight-type">Await</span>.result(observable.toFuture(), waitDuration)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword">implicit</span> <span class="lg-highlight-keyword lg-highlight-class lg-highlight-class">class</span><span class="lg-highlight-class"> </span><span class="lg-highlight-title lg-highlight-class">SingleObservableExecutor</span><span class="lg-highlight-class">[</span><span class="lg-highlight-type lg-highlight-class">T</span><span class="lg-highlight-class">](</span><span class="lg-highlight-params lg-highlight-class">observable: </span><span class="lg-highlight-type lg-highlight-params lg-highlight-class">SingleObservable</span><span class="lg-highlight-params lg-highlight-class">[</span><span class="lg-highlight-type lg-highlight-params lg-highlight-class">T</span><span class="lg-highlight-params lg-highlight-class">]</span><span class="lg-highlight-class">) </span>{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword lg-highlight-function">def</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">execute</span>(): <span class="lg-highlight-type">T</span> = <span class="lg-highlight-type">Await</span>.result(observable.toFuture(), waitDuration)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-comment">// end implicit functions</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-string">&#34;The Scala driver&#34;</span> should <span class="lg-highlight-string">&#34;be able to commit a transaction&#34;</span> in withClient { client =&gt;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    assume(serverVersionAtLeast(<span class="lg-highlight-type">List</span>(<span class="lg-highlight-number">4</span>, <span class="lg-highlight-number">0</span>, <span class="lg-highlight-number">0</span>)) &amp;&amp; !hasSingleHost())</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    client.getDatabase(<span class="lg-highlight-string">&#34;hr&#34;</span>).drop().execute()</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    client.getDatabase(<span class="lg-highlight-string">&#34;hr&#34;</span>).createCollection(<span class="lg-highlight-string">&#34;employees&#34;</span>).execute()</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    client.getDatabase(<span class="lg-highlight-string">&#34;hr&#34;</span>).createCollection(<span class="lg-highlight-string">&#34;events&#34;</span>).execute()</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    updateEmployeeInfoWithRetry(client).execute() should equal(<span class="lg-highlight-type">Completed</span>())</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    client.getDatabase(<span class="lg-highlight-string">&#34;hr&#34;</span>).drop().execute() should equal(<span class="lg-highlight-type">Completed</span>())</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword lg-highlight-function">def</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">updateEmployeeInfo</span>(database: <span class="lg-highlight-type">MongoDatabase</span>, observable: <span class="lg-highlight-type">SingleObservable</span>[<span class="lg-highlight-type">ClientSession</span>]): <span class="lg-highlight-type">SingleObservable</span>[<span class="lg-highlight-type">ClientSession</span>] = {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    observable.map(clientSession =&gt; {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">val</span> employeesCollection = database.getCollection(<span class="lg-highlight-string">&#34;employees&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">val</span> eventsCollection = database.getCollection(<span class="lg-highlight-string">&#34;events&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">val</span> transactionOptions = <span class="lg-highlight-type">TransactionOptions</span>.builder()</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        .readPreference(<span class="lg-highlight-type">ReadPreference</span>.primary())</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        .readConcern(<span class="lg-highlight-type">ReadConcern</span>.<span class="lg-highlight-type">SNAPSHOT</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        .writeConcern(<span class="lg-highlight-type">WriteConcern</span>.<span class="lg-highlight-type">MAJORITY</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        .build()</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      clientSession.startTransaction(transactionOptions)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      employeesCollection.updateOne(clientSession, <span class="lg-highlight-type">Filters</span>.eq(<span class="lg-highlight-string">&#34;employee&#34;</span>, <span class="lg-highlight-number">3</span>), <span class="lg-highlight-type">Updates</span>.set(<span class="lg-highlight-string">&#34;status&#34;</span>, <span class="lg-highlight-string">&#34;Inactive&#34;</span>))</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        .subscribe((res: <span class="lg-highlight-type">UpdateResult</span>) =&gt; println(res))</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      eventsCollection.insertOne(clientSession, <span class="lg-highlight-type">Document</span>(<span class="lg-highlight-string">&#34;employee&#34;</span> -&gt; <span class="lg-highlight-number">3</span>, <span class="lg-highlight-string">&#34;status&#34;</span> -&gt; <span class="lg-highlight-type">Document</span>(<span class="lg-highlight-string">&#34;new&#34;</span> -&gt; <span class="lg-highlight-string">&#34;Inactive&#34;</span>, <span class="lg-highlight-string">&#34;old&#34;</span> -&gt; <span class="lg-highlight-string">&#34;Active&#34;</span>)))</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        .subscribe((res: <span class="lg-highlight-type">Completed</span>) =&gt; println(res))</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">      clientSession</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    })</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword lg-highlight-function">def</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">commitAndRetry</span>(observable: <span class="lg-highlight-type">SingleObservable</span>[<span class="lg-highlight-type">Completed</span>]): <span class="lg-highlight-type">SingleObservable</span>[<span class="lg-highlight-type">Completed</span>] = {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    observable.recoverWith({</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">case</span> e: <span class="lg-highlight-type">MongoException</span> <span class="lg-highlight-keyword">if</span> e.hasErrorLabel(<span class="lg-highlight-type">MongoException</span>.<span class="lg-highlight-type">UNKNOWN_TRANSACTION_COMMIT_RESULT_LABEL</span>) =&gt; {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        println(<span class="lg-highlight-string">&#34;UnknownTransactionCommitResult, retrying commit operation ...&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        commitAndRetry(observable)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">case</span> e: <span class="lg-highlight-type">Exception</span> =&gt; {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        println(<span class="lg-highlight-string">s&#34;Exception during commit ...: </span><span class="lg-highlight-subst lg-highlight-string">$e</span><span class="lg-highlight-string">&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        <span class="lg-highlight-keyword">throw</span> e</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    })</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword lg-highlight-function">def</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">runTransactionAndRetry</span>(observable: <span class="lg-highlight-type">SingleObservable</span>[<span class="lg-highlight-type">Completed</span>]): <span class="lg-highlight-type">SingleObservable</span>[<span class="lg-highlight-type">Completed</span>] = {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    observable.recoverWith({</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      <span class="lg-highlight-keyword">case</span> e: <span class="lg-highlight-type">MongoException</span> <span class="lg-highlight-keyword">if</span> e.hasErrorLabel(<span class="lg-highlight-type">MongoException</span>.<span class="lg-highlight-type">TRANSIENT_TRANSACTION_ERROR_LABEL</span>) =&gt; {</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        println(<span class="lg-highlight-string">&#34;TransientTransactionError, aborting transaction and retrying ...&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">        runTransactionAndRetry(observable)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    })</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  }</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">  <span class="lg-highlight-keyword lg-highlight-function">def</span><span class="lg-highlight-function"> </span><span class="lg-highlight-title lg-highlight-function">updateEmployeeInfoWithRetry</span>(client: <span class="lg-highlight-type">MongoClient</span>): <span class="lg-highlight-type">SingleObservable</span>[<span class="lg-highlight-type">Completed</span>] = {</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">val</span> database = client.getDatabase(<span class="lg-highlight-string">&#34;hr&#34;</span>)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">val</span> updateEmployeeInfoObservable: <span class="lg-highlight-type">Observable</span>[<span class="lg-highlight-type">ClientSession</span>] = updateEmployeeInfo(database, client.startSession())</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">val</span> commitTransactionObservable: <span class="lg-highlight-type">SingleObservable</span>[<span class="lg-highlight-type">Completed</span>] =</td></tr><tr class=""><td class="leafygreen-ui-7razhx">      updateEmployeeInfoObservable.flatMap(clientSession =&gt; clientSession.commitTransaction())</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <span class="lg-highlight-keyword">val</span> commitAndRetryObservable: <span class="lg-highlight-type">SingleObservable</span>[<span class="lg-highlight-type">Completed</span>] = commitAndRetry(commitTransactionObservable)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">    runTransactionAndRetry(commitAndRetryObservable)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">  }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr></tbody></table></code></pre><div class="leafygreen-ui-1bqcprk" data-testid="leafygreen-code-panel"></div></div></div></div></div></div></div></div></div></section></section><section><h2 class="contains-headerlink leafygreen-ui-e8trgl" weight="medium">Driver Versions<a class="headerlink leafygreen-ui-11mfcte" href="index.html#driver-versions" title="Permalink to this heading"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-a30zj9" role="img" aria-label="Link Icon"><path fill="currentColor" d="M6.039 9.953a3.596 3.596 0 0 1-.327-.38l1.45-1.445a1.553 1.553 0 0 0 2.496.423l2.885-2.87a1.57 1.57 0 0 0 .01-2.213 1.553 1.553 0 0 0-2.203-.01l-.379.377A.995.995 0 0 1 8.56 3.83a1.005 1.005 0 0 1 .006-1.418l.38-.377a3.542 3.542 0 0 1 5.024.023 3.58 3.58 0 0 1-.022 5.047l-2.884 2.871a3.542 3.542 0 0 1-5.025-.022Z"></path><path fill="currentColor" d="M9.961 6.047c.12.12.228.248.327.38l-1.45 1.445a1.553 1.553 0 0 0-2.496-.423l-2.885 2.87a1.57 1.57 0 0 0-.01 2.213 1.553 1.553 0 0 0 2.203.01l.379-.377a.995.995 0 0 1 1.411.006 1.005 1.005 0 0 1-.006 1.418l-.38.377a3.542 3.542 0 0 1-5.024-.023 3.58 3.58 0 0 1 .022-5.047l2.884-2.871a3.542 3.542 0 0 1 5.025.022Z"></path></svg><div id="driver-versions" class="css-zena35 e1kswsxc0"></div></a></h2><style data-emotion="leafygreen-ui du5riv" nonce="4.1.1">.leafygreen-ui-du5riv{table-layout:fixed;width:100%;}</style><table class="leafygreen-ui-du5riv hlist"><tbody><tr><style data-emotion="leafygreen-ui 1tjvop5" nonce="4.1.1">.leafygreen-ui-1tjvop5{vertical-align:top;}</style><td class="leafygreen-ui-1tjvop5"><ul class="simple"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins"><a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_blank" href="http://mongoc.org/libmongoc/"><span>C 1.15.0</span><style data-emotion="leafygreen-ui 1ie5kuq" nonce="4.1.1">.leafygreen-ui-1ie5kuq{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:relative;bottom:4px;left:-1px;height:12px;}</style><svg class="leafygreen-ui-1ie5kuq" height="16" width="16" role="presentation" aria-hidden="true" alt="" viewBox="0 0 16 16"><path d="M13.823 2.4491C13.8201 2.30008 13.6999 2.17994 13.5509 2.17704L9.5062 2.09836C9.25654 2.09351 9.12821 2.39519 9.30482 2.5718L10.3856 3.65257L7.93433 6.10383C7.87964 6.15852 7.83047 6.21665 7.78683 6.27752L5.99909 8.06525C5.46457 8.59977 5.46457 9.4664 5.99909 10.0009C6.53361 10.5354 7.40023 10.5354 7.93475 10.0009L9.72249 8.21317C9.78336 8.16953 9.84148 8.12037 9.89618 8.06567L12.3474 5.61441L13.4282 6.69518C13.6048 6.87179 13.9065 6.74347 13.9016 6.4938L13.823 2.4491Z" fill="currentColor"></path><path d="M7.25 3.12893C7.66421 3.12893 8 3.46472 8 3.87893C8 4.29315 7.66421 4.62893 7.25 4.62893H4C3.72386 4.62893 3.5 4.85279 3.5 5.12893V11.9929C3.5 12.2691 3.72386 12.4929 4 12.4929H10.864C11.1401 12.4929 11.364 12.2691 11.364 11.9929V8.75C11.364 8.33579 11.6998 8 12.114 8C12.5282 8 12.864 8.33579 12.864 8.75V11.9929C12.864 13.0975 11.9686 13.9929 10.864 13.9929H4C2.89543 13.9929 2 13.0975 2 11.9929V5.12893C2 4.02436 2.89543 3.12893 4 3.12893H7.25Z" fill="currentColor"></path></svg></a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins"><a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_blank" href="https://mongodb.github.io/mongo-csharp-driver/"><span>C# 2.9.0</span><svg class="leafygreen-ui-1ie5kuq" height="16" width="16" role="presentation" aria-hidden="true" alt="" viewBox="0 0 16 16"><path d="M13.823 2.4491C13.8201 2.30008 13.6999 2.17994 13.5509 2.17704L9.5062 2.09836C9.25654 2.09351 9.12821 2.39519 9.30482 2.5718L10.3856 3.65257L7.93433 6.10383C7.87964 6.15852 7.83047 6.21665 7.78683 6.27752L5.99909 8.06525C5.46457 8.59977 5.46457 9.4664 5.99909 10.0009C6.53361 10.5354 7.40023 10.5354 7.93475 10.0009L9.72249 8.21317C9.78336 8.16953 9.84148 8.12037 9.89618 8.06567L12.3474 5.61441L13.4282 6.69518C13.6048 6.87179 13.9065 6.74347 13.9016 6.4938L13.823 2.4491Z" fill="currentColor"></path><path d="M7.25 3.12893C7.66421 3.12893 8 3.46472 8 3.87893C8 4.29315 7.66421 4.62893 7.25 4.62893H4C3.72386 4.62893 3.5 4.85279 3.5 5.12893V11.9929C3.5 12.2691 3.72386 12.4929 4 12.4929H10.864C11.1401 12.4929 11.364 12.2691 11.364 11.9929V8.75C11.364 8.33579 11.6998 8 12.114 8C12.5282 8 12.864 8.33579 12.864 8.75V11.9929C12.864 13.0975 11.9686 13.9929 10.864 13.9929H4C2.89543 13.9929 2 13.0975 2 11.9929V5.12893C2 4.02436 2.89543 3.12893 4 3.12893H7.25Z" fill="currentColor"></path></svg></a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins"><a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_blank" href="https://godoc.org/go.mongodb.org/mongo-driver/mongo"><span>Go 1.1</span><svg class="leafygreen-ui-1ie5kuq" height="16" width="16" role="presentation" aria-hidden="true" alt="" viewBox="0 0 16 16"><path d="M13.823 2.4491C13.8201 2.30008 13.6999 2.17994 13.5509 2.17704L9.5062 2.09836C9.25654 2.09351 9.12821 2.39519 9.30482 2.5718L10.3856 3.65257L7.93433 6.10383C7.87964 6.15852 7.83047 6.21665 7.78683 6.27752L5.99909 8.06525C5.46457 8.59977 5.46457 9.4664 5.99909 10.0009C6.53361 10.5354 7.40023 10.5354 7.93475 10.0009L9.72249 8.21317C9.78336 8.16953 9.84148 8.12037 9.89618 8.06567L12.3474 5.61441L13.4282 6.69518C13.6048 6.87179 13.9065 6.74347 13.9016 6.4938L13.823 2.4491Z" fill="currentColor"></path><path d="M7.25 3.12893C7.66421 3.12893 8 3.46472 8 3.87893C8 4.29315 7.66421 4.62893 7.25 4.62893H4C3.72386 4.62893 3.5 4.85279 3.5 5.12893V11.9929C3.5 12.2691 3.72386 12.4929 4 12.4929H10.864C11.1401 12.4929 11.364 12.2691 11.364 11.9929V8.75C11.364 8.33579 11.6998 8 12.114 8C12.5282 8 12.864 8.33579 12.864 8.75V11.9929C12.864 13.0975 11.9686 13.9929 10.864 13.9929H4C2.89543 13.9929 2 13.0975 2 11.9929V5.12893C2 4.02436 2.89543 3.12893 4 3.12893H7.25Z" fill="currentColor"></path></svg></a></p></li></ul></td><td class="leafygreen-ui-1tjvop5"><ul class="simple"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins"><a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_blank" href="https://mongodb.github.io/mongo-java-driver/"><span>Java 3.11.0</span><svg class="leafygreen-ui-1ie5kuq" height="16" width="16" role="presentation" aria-hidden="true" alt="" viewBox="0 0 16 16"><path d="M13.823 2.4491C13.8201 2.30008 13.6999 2.17994 13.5509 2.17704L9.5062 2.09836C9.25654 2.09351 9.12821 2.39519 9.30482 2.5718L10.3856 3.65257L7.93433 6.10383C7.87964 6.15852 7.83047 6.21665 7.78683 6.27752L5.99909 8.06525C5.46457 8.59977 5.46457 9.4664 5.99909 10.0009C6.53361 10.5354 7.40023 10.5354 7.93475 10.0009L9.72249 8.21317C9.78336 8.16953 9.84148 8.12037 9.89618 8.06567L12.3474 5.61441L13.4282 6.69518C13.6048 6.87179 13.9065 6.74347 13.9016 6.4938L13.823 2.4491Z" fill="currentColor"></path><path d="M7.25 3.12893C7.66421 3.12893 8 3.46472 8 3.87893C8 4.29315 7.66421 4.62893 7.25 4.62893H4C3.72386 4.62893 3.5 4.85279 3.5 5.12893V11.9929C3.5 12.2691 3.72386 12.4929 4 12.4929H10.864C11.1401 12.4929 11.364 12.2691 11.364 11.9929V8.75C11.364 8.33579 11.6998 8 12.114 8C12.5282 8 12.864 8.33579 12.864 8.75V11.9929C12.864 13.0975 11.9686 13.9929 10.864 13.9929H4C2.89543 13.9929 2 13.0975 2 11.9929V5.12893C2 4.02436 2.89543 3.12893 4 3.12893H7.25Z" fill="currentColor"></path></svg></a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins"><a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_blank" href="https://mongodb.github.io/node-mongodb-native/"><span>Node 3.3.0</span><svg class="leafygreen-ui-1ie5kuq" height="16" width="16" role="presentation" aria-hidden="true" alt="" viewBox="0 0 16 16"><path d="M13.823 2.4491C13.8201 2.30008 13.6999 2.17994 13.5509 2.17704L9.5062 2.09836C9.25654 2.09351 9.12821 2.39519 9.30482 2.5718L10.3856 3.65257L7.93433 6.10383C7.87964 6.15852 7.83047 6.21665 7.78683 6.27752L5.99909 8.06525C5.46457 8.59977 5.46457 9.4664 5.99909 10.0009C6.53361 10.5354 7.40023 10.5354 7.93475 10.0009L9.72249 8.21317C9.78336 8.16953 9.84148 8.12037 9.89618 8.06567L12.3474 5.61441L13.4282 6.69518C13.6048 6.87179 13.9065 6.74347 13.9016 6.4938L13.823 2.4491Z" fill="currentColor"></path><path d="M7.25 3.12893C7.66421 3.12893 8 3.46472 8 3.87893C8 4.29315 7.66421 4.62893 7.25 4.62893H4C3.72386 4.62893 3.5 4.85279 3.5 5.12893V11.9929C3.5 12.2691 3.72386 12.4929 4 12.4929H10.864C11.1401 12.4929 11.364 12.2691 11.364 11.9929V8.75C11.364 8.33579 11.6998 8 12.114 8C12.5282 8 12.864 8.33579 12.864 8.75V11.9929C12.864 13.0975 11.9686 13.9929 10.864 13.9929H4C2.89543 13.9929 2 13.0975 2 11.9929V5.12893C2 4.02436 2.89543 3.12893 4 3.12893H7.25Z" fill="currentColor"></path></svg></a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins"><a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_blank" href="https://metacpan.org/author/MONGODB"><span>Perl 2.2.0</span><svg class="leafygreen-ui-1ie5kuq" height="16" width="16" role="presentation" aria-hidden="true" alt="" viewBox="0 0 16 16"><path d="M13.823 2.4491C13.8201 2.30008 13.6999 2.17994 13.5509 2.17704L9.5062 2.09836C9.25654 2.09351 9.12821 2.39519 9.30482 2.5718L10.3856 3.65257L7.93433 6.10383C7.87964 6.15852 7.83047 6.21665 7.78683 6.27752L5.99909 8.06525C5.46457 8.59977 5.46457 9.4664 5.99909 10.0009C6.53361 10.5354 7.40023 10.5354 7.93475 10.0009L9.72249 8.21317C9.78336 8.16953 9.84148 8.12037 9.89618 8.06567L12.3474 5.61441L13.4282 6.69518C13.6048 6.87179 13.9065 6.74347 13.9016 6.4938L13.823 2.4491Z" fill="currentColor"></path><path d="M7.25 3.12893C7.66421 3.12893 8 3.46472 8 3.87893C8 4.29315 7.66421 4.62893 7.25 4.62893H4C3.72386 4.62893 3.5 4.85279 3.5 5.12893V11.9929C3.5 12.2691 3.72386 12.4929 4 12.4929H10.864C11.1401 12.4929 11.364 12.2691 11.364 11.9929V8.75C11.364 8.33579 11.6998 8 12.114 8C12.5282 8 12.864 8.33579 12.864 8.75V11.9929C12.864 13.0975 11.9686 13.9929 10.864 13.9929H4C2.89543 13.9929 2 13.0975 2 11.9929V5.12893C2 4.02436 2.89543 3.12893 4 3.12893H7.25Z" fill="currentColor"></path></svg></a></p></li></ul></td><td class="leafygreen-ui-1tjvop5"><ul class="simple"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins"><a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_blank" href="https://pymongo.readthedocs.io/en/stable/index.html"><span>Python</span><svg class="leafygreen-ui-1ie5kuq" height="16" width="16" role="presentation" aria-hidden="true" alt="" viewBox="0 0 16 16"><path d="M13.823 2.4491C13.8201 2.30008 13.6999 2.17994 13.5509 2.17704L9.5062 2.09836C9.25654 2.09351 9.12821 2.39519 9.30482 2.5718L10.3856 3.65257L7.93433 6.10383C7.87964 6.15852 7.83047 6.21665 7.78683 6.27752L5.99909 8.06525C5.46457 8.59977 5.46457 9.4664 5.99909 10.0009C6.53361 10.5354 7.40023 10.5354 7.93475 10.0009L9.72249 8.21317C9.78336 8.16953 9.84148 8.12037 9.89618 8.06567L12.3474 5.61441L13.4282 6.69518C13.6048 6.87179 13.9065 6.74347 13.9016 6.4938L13.823 2.4491Z" fill="currentColor"></path><path d="M7.25 3.12893C7.66421 3.12893 8 3.46472 8 3.87893C8 4.29315 7.66421 4.62893 7.25 4.62893H4C3.72386 4.62893 3.5 4.85279 3.5 5.12893V11.9929C3.5 12.2691 3.72386 12.4929 4 12.4929H10.864C11.1401 12.4929 11.364 12.2691 11.364 11.9929V8.75C11.364 8.33579 11.6998 8 12.114 8C12.5282 8 12.864 8.33579 12.864 8.75V11.9929C12.864 13.0975 11.9686 13.9929 10.864 13.9929H4C2.89543 13.9929 2 13.0975 2 11.9929V5.12893C2 4.02436 2.89543 3.12893 4 3.12893H7.25Z" fill="currentColor"></path></svg></a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins"><a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="https://www.mongodb.com/docs/ruby-driver/current/"><span>Ruby 2.10.0</span></a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins"><a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_blank" href="https://mongodb.github.io/mongo-scala-driver/"><span>Scala 2.7.0</span><svg class="leafygreen-ui-1ie5kuq" height="16" width="16" role="presentation" aria-hidden="true" alt="" viewBox="0 0 16 16"><path d="M13.823 2.4491C13.8201 2.30008 13.6999 2.17994 13.5509 2.17704L9.5062 2.09836C9.25654 2.09351 9.12821 2.39519 9.30482 2.5718L10.3856 3.65257L7.93433 6.10383C7.87964 6.15852 7.83047 6.21665 7.78683 6.27752L5.99909 8.06525C5.46457 8.59977 5.46457 9.4664 5.99909 10.0009C6.53361 10.5354 7.40023 10.5354 7.93475 10.0009L9.72249 8.21317C9.78336 8.16953 9.84148 8.12037 9.89618 8.06567L12.3474 5.61441L13.4282 6.69518C13.6048 6.87179 13.9065 6.74347 13.9016 6.4938L13.823 2.4491Z" fill="currentColor"></path><path d="M7.25 3.12893C7.66421 3.12893 8 3.46472 8 3.87893C8 4.29315 7.66421 4.62893 7.25 4.62893H4C3.72386 4.62893 3.5 4.85279 3.5 5.12893V11.9929C3.5 12.2691 3.72386 12.4929 4 12.4929H10.864C11.1401 12.4929 11.364 12.2691 11.364 11.9929V8.75C11.364 8.33579 11.6998 8 12.114 8C12.5282 8 12.864 8.33579 12.864 8.75V11.9929C12.864 13.0975 11.9686 13.9929 10.864 13.9929H4C2.89543 13.9929 2 13.0975 2 11.9929V5.12893C2 4.02436 2.89543 3.12893 4 3.12893H7.25Z" fill="currentColor"></path></svg></a></p></li></ul></td></tr></tbody></table><span class="leafygreen-ui-1qnjd6d" id="std-label-transactions-retry"></span></section><section><h2 class="contains-headerlink leafygreen-ui-e8trgl" weight="medium">Transaction Error Handling<a class="headerlink leafygreen-ui-11mfcte" href="index.html#transaction-error-handling" title="Permalink to this heading"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-a30zj9" role="img" aria-label="Link Icon"><path fill="currentColor" d="M6.039 9.953a3.596 3.596 0 0 1-.327-.38l1.45-1.445a1.553 1.553 0 0 0 2.496.423l2.885-2.87a1.57 1.57 0 0 0 .01-2.213 1.553 1.553 0 0 0-2.203-.01l-.379.377A.995.995 0 0 1 8.56 3.83a1.005 1.005 0 0 1 .006-1.418l.38-.377a3.542 3.542 0 0 1 5.024.023 3.58 3.58 0 0 1-.022 5.047l-2.884 2.871a3.542 3.542 0 0 1-5.025-.022Z"></path><path fill="currentColor" d="M9.961 6.047c.12.12.228.248.327.38l-1.45 1.445a1.553 1.553 0 0 0-2.496-.423l-2.885 2.87a1.57 1.57 0 0 0-.01 2.213 1.553 1.553 0 0 0 2.203.01l.379-.377a.995.995 0 0 1 1.411.006 1.005 1.005 0 0 1-.006 1.418l-.38.377a3.542 3.542 0 0 1-5.024-.023 3.58 3.58 0 0 1 .022-5.047l2.884-2.871a3.542 3.542 0 0 1 5.025.022Z"></path></svg><div id="transaction-error-handling" class="css-zena35 e1kswsxc0"></div></a></h2><p class="leafygreen-ui-1kp3ins">Regardless of the database system, whether MongoDB or relational
databases, applications should take measures to handle errors during
transaction commits and incorporate retry logic for transactions.</p><span class="leafygreen-ui-1qnjd6d" id="std-label-transient-transaction-error"></span><section><h3 class="contains-headerlink leafygreen-ui-3itm7" weight="medium"><code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code><a class="headerlink leafygreen-ui-11mfcte" href="index.html#-transienttransactionerror-" title="Permalink to this heading"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-a30zj9" role="img" aria-label="Link Icon"><path fill="currentColor" d="M6.039 9.953a3.596 3.596 0 0 1-.327-.38l1.45-1.445a1.553 1.553 0 0 0 2.496.423l2.885-2.87a1.57 1.57 0 0 0 .01-2.213 1.553 1.553 0 0 0-2.203-.01l-.379.377A.995.995 0 0 1 8.56 3.83a1.005 1.005 0 0 1 .006-1.418l.38-.377a3.542 3.542 0 0 1 5.024.023 3.58 3.58 0 0 1-.022 5.047l-2.884 2.871a3.542 3.542 0 0 1-5.025-.022Z"></path><path fill="currentColor" d="M9.961 6.047c.12.12.228.248.327.38l-1.45 1.445a1.553 1.553 0 0 0-2.496-.423l-2.885 2.87a1.57 1.57 0 0 0-.01 2.213 1.553 1.553 0 0 0 2.203.01l.379-.377a.995.995 0 0 1 1.411.006 1.005 1.005 0 0 1-.006 1.418l-.38.377a3.542 3.542 0 0 1-5.024-.023 3.58 3.58 0 0 1 .022-5.047l2.884-2.871a3.542 3.542 0 0 1 5.025.022Z"></path></svg><div id="-transienttransactionerror-" class="css-zena35 e1kswsxc0"></div></a></h3><p class="leafygreen-ui-1kp3ins">The <em>individual</em> write operations inside the transaction are not
retryable, regardless of the value of <a class="leafygreen-ui-11szg22" href="../../reference/connection-string-options/index.html#mongodb-urioption-urioption.retryWrites"><code class="leafygreen-ui-19v7id5">retryWrites</code></a>. If an
operation encounters an error <a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_blank" href="https://github.com/mongodb/specifications/blob/master/source/transactions/transactions.rst#error-labels"><span>associated with the label</span><svg class="leafygreen-ui-1ie5kuq" height="16" width="16" role="presentation" aria-hidden="true" alt="" viewBox="0 0 16 16"><path d="M13.823 2.4491C13.8201 2.30008 13.6999 2.17994 13.5509 2.17704L9.5062 2.09836C9.25654 2.09351 9.12821 2.39519 9.30482 2.5718L10.3856 3.65257L7.93433 6.10383C7.87964 6.15852 7.83047 6.21665 7.78683 6.27752L5.99909 8.06525C5.46457 8.59977 5.46457 9.4664 5.99909 10.0009C6.53361 10.5354 7.40023 10.5354 7.93475 10.0009L9.72249 8.21317C9.78336 8.16953 9.84148 8.12037 9.89618 8.06567L12.3474 5.61441L13.4282 6.69518C13.6048 6.87179 13.9065 6.74347 13.9016 6.4938L13.823 2.4491Z" fill="currentColor"></path><path d="M7.25 3.12893C7.66421 3.12893 8 3.46472 8 3.87893C8 4.29315 7.66421 4.62893 7.25 4.62893H4C3.72386 4.62893 3.5 4.85279 3.5 5.12893V11.9929C3.5 12.2691 3.72386 12.4929 4 12.4929H10.864C11.1401 12.4929 11.364 12.2691 11.364 11.9929V8.75C11.364 8.33579 11.6998 8 12.114 8C12.5282 8 12.864 8.33579 12.864 8.75V11.9929C12.864 13.0975 11.9686 13.9929 10.864 13.9929H4C2.89543 13.9929 2 13.0975 2 11.9929V5.12893C2 4.02436 2.89543 3.12893 4 3.12893H7.25Z" fill="currentColor"></path></svg></a>
<code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code>, such as when the primary steps down,
the transaction as a whole can be retried.</p><ul class="leafygreen-ui-rioki0"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">The callback API incorporates retry logic for
<code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code>.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">The core transaction API does not incorporate retry logic
for <code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code>. To handle
<code class="leafygreen-ui-19v7id5">&#34;TransientTransactionError&#34;</code>, applications should explicitly
incorporate retry logic for the error. To view an example that incorporates
retry logic for transient errors, see <a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-txn-core-api-retry"><span>Core API Example<!-- -->.</span></a></p></li></ul><span class="leafygreen-ui-1qnjd6d" id="std-label-unknown-transaction-commit-result"></span></section><section><h3 class="contains-headerlink leafygreen-ui-3itm7" weight="medium"><code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code><a class="headerlink leafygreen-ui-11mfcte" href="index.html#-unknowntransactioncommitresult-" title="Permalink to this heading"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-a30zj9" role="img" aria-label="Link Icon"><path fill="currentColor" d="M6.039 9.953a3.596 3.596 0 0 1-.327-.38l1.45-1.445a1.553 1.553 0 0 0 2.496.423l2.885-2.87a1.57 1.57 0 0 0 .01-2.213 1.553 1.553 0 0 0-2.203-.01l-.379.377A.995.995 0 0 1 8.56 3.83a1.005 1.005 0 0 1 .006-1.418l.38-.377a3.542 3.542 0 0 1 5.024.023 3.58 3.58 0 0 1-.022 5.047l-2.884 2.871a3.542 3.542 0 0 1-5.025-.022Z"></path><path fill="currentColor" d="M9.961 6.047c.12.12.228.248.327.38l-1.45 1.445a1.553 1.553 0 0 0-2.496-.423l-2.885 2.87a1.57 1.57 0 0 0-.01 2.213 1.553 1.553 0 0 0 2.203.01l.379-.377a.995.995 0 0 1 1.411.006 1.005 1.005 0 0 1-.006 1.418l-.38.377a3.542 3.542 0 0 1-5.024-.023 3.58 3.58 0 0 1 .022-5.047l2.884-2.871a3.542 3.542 0 0 1 5.025.022Z"></path></svg><div id="-unknowntransactioncommitresult-" class="css-zena35 e1kswsxc0"></div></a></h3><p class="leafygreen-ui-1kp3ins">Commit operations are <a class="leafygreen-ui-11szg22" href="../retryable-writes/index.html#std-label-retryable-writes">retryable write operations</a>. If
the commit operation encounters an error, MongoDB drivers retry the commit
regardless of the value of <a class="leafygreen-ui-11szg22" href="../../reference/connection-string-options/index.html#mongodb-urioption-urioption.retryWrites"><code class="leafygreen-ui-19v7id5">retryWrites</code>.</a></p><p class="leafygreen-ui-1kp3ins">If the commit operation encounters an error labeled
<code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code>, the commit can be retried.</p><ul class="leafygreen-ui-rioki0"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">The callback API incorporates retry logic for
<code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code>.</p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins">The core transaction API does not incorporate retry logic for
<code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code>. To handle
<code class="leafygreen-ui-19v7id5">&#34;UnknownTransactionCommitResult&#34;</code>, applications should explicitly
incorporate retry logic for the error. To view an example that incorporates
retry logic for unknown commit errors, see <a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-txn-core-api-retry"><span>Core API Example<!-- -->.</span></a></p></li></ul><span class="leafygreen-ui-1qnjd6d" id="std-label-transactionTooLargeForCache-error"></span></section><section><h3 class="contains-headerlink leafygreen-ui-3itm7" weight="medium"><code class="leafygreen-ui-19v7id5">TransactionTooLargeForCache</code><a class="headerlink leafygreen-ui-11mfcte" href="index.html#transactiontoolargeforcache" title="Permalink to this heading"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-a30zj9" role="img" aria-label="Link Icon"><path fill="currentColor" d="M6.039 9.953a3.596 3.596 0 0 1-.327-.38l1.45-1.445a1.553 1.553 0 0 0 2.496.423l2.885-2.87a1.57 1.57 0 0 0 .01-2.213 1.553 1.553 0 0 0-2.203-.01l-.379.377A.995.995 0 0 1 8.56 3.83a1.005 1.005 0 0 1 .006-1.418l.38-.377a3.542 3.542 0 0 1 5.024.023 3.58 3.58 0 0 1-.022 5.047l-2.884 2.871a3.542 3.542 0 0 1-5.025-.022Z"></path><path fill="currentColor" d="M9.961 6.047c.12.12.228.248.327.38l-1.45 1.445a1.553 1.553 0 0 0-2.496-.423l-2.885 2.87a1.57 1.57 0 0 0-.01 2.213 1.553 1.553 0 0 0 2.203.01l.379-.377a.995.995 0 0 1 1.411.006 1.005 1.005 0 0 1-.006 1.418l-.38.377a3.542 3.542 0 0 1-5.024-.023 3.58 3.58 0 0 1 .022-5.047l2.884-2.871a3.542 3.542 0 0 1 5.025.022Z"></path></svg><div id="transactiontoolargeforcache" class="css-zena35 e1kswsxc0"></div></a></h3><div><p><em>New<!-- --> in version <!-- -->5.0.16</em>.</p></div><p class="leafygreen-ui-1kp3ins">Starting in MongoDB 5.0.16, the server does not retry the transaction if
it receives a <code class="leafygreen-ui-19v7id5">TransactionTooLargeForCache</code> error. This error means
the cache is too small and a retry is likely to fail.</p><p class="leafygreen-ui-1kp3ins">The default value for the
<a class="leafygreen-ui-11szg22" href="../../reference/parameters/index.html#mongodb-parameter-param.transactionTooLargeForCacheThreshold"><code class="leafygreen-ui-19v7id5">transactionTooLargeForCacheThreshold</code></a> threshold is <code class="leafygreen-ui-19v7id5">0.75</code>.
The server returns <code class="leafygreen-ui-19v7id5">TransactionTooLargeForCache</code> instead of retrying
the transaction when the transaction uses more than 75% of the cache.</p><p class="leafygreen-ui-1kp3ins">In earlier versions of MongoDB, the server returns
<code class="leafygreen-ui-19v7id5">TemporarilyUnavailable</code> or <code class="leafygreen-ui-19v7id5">WriteConflict</code> instead of
<code class="leafygreen-ui-19v7id5">TransactionTooLargeForCache</code>.</p><p class="leafygreen-ui-1kp3ins">Use the <a class="leafygreen-ui-11szg22" href="../../reference/command/setparameter/index.html#mongodb-dbcommand-dbcmd.setParameter"><code class="leafygreen-ui-19v7id5">setParameter</code></a> command to modify the error threshold.</p></section></section><section><h2 class="contains-headerlink leafygreen-ui-e8trgl" weight="medium">Additional Information<a class="headerlink leafygreen-ui-11mfcte" href="index.html#additional-information" title="Permalink to this heading"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-a30zj9" role="img" aria-label="Link Icon"><path fill="currentColor" d="M6.039 9.953a3.596 3.596 0 0 1-.327-.38l1.45-1.445a1.553 1.553 0 0 0 2.496.423l2.885-2.87a1.57 1.57 0 0 0 .01-2.213 1.553 1.553 0 0 0-2.203-.01l-.379.377A.995.995 0 0 1 8.56 3.83a1.005 1.005 0 0 1 .006-1.418l.38-.377a3.542 3.542 0 0 1 5.024.023 3.58 3.58 0 0 1-.022 5.047l-2.884 2.871a3.542 3.542 0 0 1-5.025-.022Z"></path><path fill="currentColor" d="M9.961 6.047c.12.12.228.248.327.38l-1.45 1.445a1.553 1.553 0 0 0-2.496-.423l-2.885 2.87a1.57 1.57 0 0 0-.01 2.213 1.553 1.553 0 0 0 2.203.01l.379-.377a.995.995 0 0 1 1.411.006 1.005 1.005 0 0 1-.006 1.418l-.38.377a3.542 3.542 0 0 1-5.024-.023 3.58 3.58 0 0 1 .022-5.047l2.884-2.871a3.542 3.542 0 0 1 5.025.022Z"></path></svg><div id="additional-information" class="css-zena35 e1kswsxc0"></div></a></h2><span class="leafygreen-ui-1qnjd6d" id="std-label-txn-mongo-shell-example"></span><section><h3 class="contains-headerlink leafygreen-ui-3itm7" weight="medium"><code class="leafygreen-ui-19v7id5">mongosh</code> Example<a class="headerlink leafygreen-ui-11mfcte" href="index.html#mongosh-example" title="Permalink to this heading"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-a30zj9" role="img" aria-label="Link Icon"><path fill="currentColor" d="M6.039 9.953a3.596 3.596 0 0 1-.327-.38l1.45-1.445a1.553 1.553 0 0 0 2.496.423l2.885-2.87a1.57 1.57 0 0 0 .01-2.213 1.553 1.553 0 0 0-2.203-.01l-.379.377A.995.995 0 0 1 8.56 3.83a1.005 1.005 0 0 1 .006-1.418l.38-.377a3.542 3.542 0 0 1 5.024.023 3.58 3.58 0 0 1-.022 5.047l-2.884 2.871a3.542 3.542 0 0 1-5.025-.022Z"></path><path fill="currentColor" d="M9.961 6.047c.12.12.228.248.327.38l-1.45 1.445a1.553 1.553 0 0 0-2.496-.423l-2.885 2.87a1.57 1.57 0 0 0-.01 2.213 1.553 1.553 0 0 0 2.203.01l.379-.377a.995.995 0 0 1 1.411.006 1.005 1.005 0 0 1-.006 1.418l-.38.377a3.542 3.542 0 0 1-5.024-.023 3.58 3.58 0 0 1 .022-5.047l2.884-2.871a3.542 3.542 0 0 1 5.025.022Z"></path></svg><div id="mongosh-example" class="css-zena35 e1kswsxc0"></div></a></h3><p class="leafygreen-ui-1kp3ins">The following <a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="../../../mongodb-shell/index.html#mongodb-binary-bin.mongosh"><span><code class="leafygreen-ui-19v7id5">mongosh</code></span></a> methods are available for
transactions:</p><ul class="leafygreen-ui-rioki0"><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins"><a class="leafygreen-ui-11szg22" href="../../reference/method/session.starttransaction/index.html#mongodb-method-Session.startTransaction"><code class="leafygreen-ui-19v7id5">Session.startTransaction()</code></a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins"><a class="leafygreen-ui-11szg22" href="../../reference/method/session.committransaction/index.html#mongodb-method-Session.commitTransaction"><code class="leafygreen-ui-19v7id5">Session.commitTransaction()</code></a></p></li><li class="leafygreen-ui-d7p7b6"><p class="leafygreen-ui-1kp3ins"><a class="leafygreen-ui-11szg22" href="../../reference/method/session.aborttransaction/index.html#mongodb-method-Session.abortTransaction"><code class="leafygreen-ui-19v7id5">Session.abortTransaction()</code></a></p></li></ul><div role="note" class="leafygreen-ui-15mdk4"><h2 class="leafygreen-ui-6n7b7d">Note</h2><div class="leafygreen-ui-9mycqc"><p class="leafygreen-ui-1kp3ins">The <a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="../../../mongodb-shell/index.html#mongodb-binary-bin.mongosh"><span><code class="leafygreen-ui-19v7id5">mongosh</code></span></a> example omits retry logic
and robust error handling for simplicity&#39;s sake. For a
more practical example of incorporating transactions in
applications, see <a class="lg-ui-0001 leafygreen-ui-54xlkh" target="_self" href="index.html#std-label-transactions-retry"><span>Transaction Error Handling</span></a> instead.</p></div></div><script class="structured_data" type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","codeSampleType":"code snippet","text":"// Create collections:\ndb.getSiblingDB(\"mydb1\").foo.insertOne(\n    {abc: 0},\n    { writeConcern: { w: \"majority\", wtimeout: 2000 } }\n)\ndb.getSiblingDB(\"mydb2\").bar.insertOne(\n   {xyz: 0},\n   { writeConcern: { w: \"majority\", wtimeout: 2000 } }\n)\n\n// Start a session.\nsession = db.getMongo().startSession( { readPreference: { mode: \"primary\" } } );\n\ncoll1 = session.getDatabase(\"mydb1\").foo;\ncoll2 = session.getDatabase(\"mydb2\").bar;\n\n// Start a transaction\nsession.startTransaction( { readConcern: { level: \"local\" }, writeConcern: { w: \"majority\" } } );\n\n// Operations inside the transaction\ntry {\n   coll1.insertOne( { abc: 1 } );\n   coll2.insertOne( { xyz: 999 } );\n} catch (error) {\n   // Abort transaction on error\n   session.abortTransaction();\n   throw error;\n}\n\n// Commit the transaction using write concern set at transaction start\nsession.commitTransaction();\n\nsession.endSession();","programmingLanguage":"JavaScript"}</script><style data-emotion="leafygreen-ui 15v07rw" nonce="4.1.1">.leafygreen-ui-15v07rw >div>div{display:grid;grid-template-columns:auto 0px!important;}.leafygreen-ui-15v07rw >div{border-top-left-radius:12px;border-top-right-radius:12px;border-color:#E8EDEB;}.dark-theme .leafygreen-ui-15v07rw >div{border-color:#3D4F58;}</style><div class=" leafygreen-ui-9duavq leafygreen-ui-15v07rw intro-code-block"><div class="leafygreen-ui-196mwvg"><style data-emotion="leafygreen-ui 1jheeh3" nonce="4.1.1">.leafygreen-ui-1jheeh3{position:relative;display:grid;grid-template-areas:'code panel';grid-template-columns:auto 38px;border-radius:inherit;z-index:0;grid-template-areas:'code code';}.leafygreen-ui-1jheeh3:before,.leafygreen-ui-1jheeh3:after{content:'';display:block;position:absolute;z-index:1;top:0;height:100%;width:40px;border-radius:40%;box-shadow:unset;-webkit-transition:box-shadow 100ms ease-in-out;transition:box-shadow 100ms ease-in-out;}.leafygreen-ui-1jheeh3:before{grid-column:1;left:-40px;}.leafygreen-ui-1jheeh3:after{grid-column:2;}.leafygreen-ui-1jheeh3:after{grid-column:-1;}</style><div class="leafygreen-ui-1jheeh3"><style data-emotion="leafygreen-ui 1453az5" nonce="4.1.1">.leafygreen-ui-1453az5{grid-area:code;overflow-x:auto;border-radius:inherit;border-top-right-radius:0;border-bottom-right-radius:0;border:0;padding-top:8px;padding-bottom:8px;margin:0;position:relative;-webkit-transition:box-shadow 100ms ease-in-out;transition:box-shadow 100ms ease-in-out;white-space:pre;background-color:#F9FBFA;color:#001E2B;border-left:0;border-radius:inherit;border-top-right-radius:0;border-top-left-radius:0;}@media only screen and (max-device-width: 812px) and (-webkit-min-device-pixel-ratio: 2){.leafygreen-ui-1453az5{white-space:pre-wrap;}}@media only screen and (min-device-width: 813px) and (-webkit-min-device-pixel-ratio: 2){.leafygreen-ui-1453az5{white-space:pre;}}.leafygreen-ui-1453az5:focus-visible{outline:none;box-shadow:0 0 0 2px #0498EC inset;}</style><pre class="leafygreen-ui-1453az5" tabindex="-1"><code class="lg-highlight-hljs-light javascript leafygreen-ui-9ybzas"><table class="leafygreen-ui-1tr4g10"><tbody><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// Create collections:</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">db.<span class="lg-highlight-title lg-highlight-function">getSiblingDB</span>(<span class="lg-highlight-string">&#34;mydb1&#34;</span>).<span class="lg-highlight-property">foo</span>.<span class="lg-highlight-title lg-highlight-function">insertOne</span>(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->{<span class="lg-highlight-attr">abc</span>: <span class="lg-highlight-number">0</span>}<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">    <!-- -->{ <span class="lg-highlight-attr">writeConcern</span>: <!-- -->{ <span class="lg-highlight-attr">w</span>: <span class="lg-highlight-string">&#34;majority&#34;</span>, <span class="lg-highlight-attr">wtimeout</span>: <span class="lg-highlight-number">2000</span> } }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">)</td></tr><tr class=""><td class="leafygreen-ui-7razhx">db.<span class="lg-highlight-title lg-highlight-function">getSiblingDB</span>(<span class="lg-highlight-string">&#34;mydb2&#34;</span>).<span class="lg-highlight-property">bar</span>.<span class="lg-highlight-title lg-highlight-function">insertOne</span>(</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <!-- -->{<span class="lg-highlight-attr">xyz</span>: <span class="lg-highlight-number">0</span>}<!-- -->,</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <!-- -->{ <span class="lg-highlight-attr">writeConcern</span>: <!-- -->{ <span class="lg-highlight-attr">w</span>: <span class="lg-highlight-string">&#34;majority&#34;</span>, <span class="lg-highlight-attr">wtimeout</span>: <span class="lg-highlight-number">2000</span> } }</td></tr><tr class=""><td class="leafygreen-ui-7razhx">)</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// Start a session.</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">session <!-- -->= <!-- -->db.<span class="lg-highlight-title lg-highlight-function">getMongo</span>(<!-- -->).<span class="lg-highlight-title lg-highlight-function">startSession</span>( <!-- -->{ <span class="lg-highlight-attr">readPreference</span>: <!-- -->{ <span class="lg-highlight-attr">mode</span>: <span class="lg-highlight-string">&#34;primary&#34;</span> } } )<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">coll1 <!-- -->= <!-- -->session.<span class="lg-highlight-title lg-highlight-function">getDatabase</span>(<span class="lg-highlight-string">&#34;mydb1&#34;</span>).<span class="lg-highlight-property">foo</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">coll2 <!-- -->= <!-- -->session.<span class="lg-highlight-title lg-highlight-function">getDatabase</span>(<span class="lg-highlight-string">&#34;mydb2&#34;</span>).<span class="lg-highlight-property">bar</span>;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">// Start a transaction</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">session.<span class="lg-highlight-title lg-highlight-function">startTransaction</span>( <!-- -->{ <span class="lg-highlight-attr">readConcern</span>: <!-- -->{ <span class="lg-highlight-attr">level</span>: <span class="lg-highlight-string">&#34;local&#34;</span> }<!-- -->, <span class="lg-highlight-attr">writeConcern</span>: <!-- -->{ <span class="lg-highlight-attr">w</span>: <span class="lg-highlight-string">&#34;majority&#34;</span> } } )<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> Operations inside the </span><span class="lg-highlight-comment">transaction</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-keyword">try</span> <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <!-- -->coll1.<span class="lg-highlight-title lg-highlight-function">insertOne</span>( <!-- -->{ <span class="lg-highlight-attr">abc</span>: <span class="lg-highlight-number">1</span> } )<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <!-- -->coll2.<span class="lg-highlight-title lg-highlight-function">insertOne</span>( <!-- -->{ <span class="lg-highlight-attr">xyz</span>: <span class="lg-highlight-number">999</span> } )<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">} <span class="lg-highlight-keyword">catch</span> <!-- -->(<!-- -->error) <!-- -->{</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> Abort transaction on </span><span class="lg-highlight-comment">error</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <!-- -->session.<span class="lg-highlight-title lg-highlight-function">abortTransaction</span>(<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">   <span class="lg-highlight-keyword">throw</span> <!-- -->error<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx">}</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx"><span class="lg-highlight-comment">//</span><span class="lg-highlight-comment"> Commit the transaction </span><span class="lg-highlight-comment">using</span><span class="lg-highlight-comment"> write concern set </span><span class="lg-highlight-comment">at transaction start</span></td></tr><tr class=""><td class="leafygreen-ui-7razhx">session.<span class="lg-highlight-title lg-highlight-function">commitTransaction</span>(<!-- -->)<!-- -->;</td></tr><tr class=""><td class="leafygreen-ui-7razhx"><div class="leafygreen-ui-ihxujy"></div></td></tr><tr class=""><td class="leafygreen-ui-7razhx">session.<span class="lg-highlight-title lg-highlight-function">endSession</span>(<!-- -->)<!-- -->;</td></tr></tbody></table></code></pre></div></div></div></section></section></section><style data-emotion="leafygreen-ui 1kfvij0" nonce="4.1.1">.leafygreen-ui-1kfvij0{padding-bottom:2.5em;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-column-gap:16px;column-gap:16px;margin-top:88px;}@media only screen and (max-width: 480px){.leafygreen-ui-1kfvij0{-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;row-gap:64px;margin-top:66px;}}@media print{.leafygreen-ui-1kfvij0{display:none;}}.leafygreen-ui-1kfvij0 a{-webkit-text-decoration:none;text-decoration:none;}</style><div class="leafygreen-ui-1kfvij0"><style data-emotion="leafygreen-ui 11gqdff" nonce="4.1.1">.leafygreen-ui-11gqdff{margin-right:auto;}</style><div class="leafygreen-ui-11gqdff"><a class="leafygreen-ui-11szg22" title="Previous Section" href="../transactions/index.html"><style data-emotion="leafygreen-ui y8t853" nonce="4.1.1">.leafygreen-ui-y8t853{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-column-gap:14px;column-gap:14px;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}</style><div class="leafygreen-ui-y8t853"><style data-emotion="leafygreen-ui bf3bb" nonce="4.1.1">.leafygreen-ui-bf3bb{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;padding:0;margin:0;background-color:transparent;border:1px solid transparent;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-transition:all 150ms ease-in-out;transition:all 150ms ease-in-out;position:relative;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;z-index:0;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;border-radius:6px;background-color:#F9FBFA;border-color:#889397;color:#001E2B;font-size:13px;line-height:20px;font-weight:500;height:36px;width:52px;height:48px;background-color:#F9FBFA;color:#001E2B;}.leafygreen-ui-bf3bb:focus-visible,.leafygreen-ui-bf3bb[data-focus="true"]{outline:none;}.leafygreen-ui-bf3bb:active,.leafygreen-ui-bf3bb[data-active="true"],.leafygreen-ui-bf3bb:focus,.leafygreen-ui-bf3bb:hover{-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-bf3bb:focus-visible,.leafygreen-ui-bf3bb[data-focus="true"]{color:#001E2B;}.leafygreen-ui-bf3bb:hover,.leafygreen-ui-bf3bb[data-hover="true"],.leafygreen-ui-bf3bb:active,.leafygreen-ui-bf3bb[data-active="true"]{color:#001E2B;background-color:#FFFFFF;box-shadow:0 0 0 3px #E8EDEB;}.leafygreen-ui-bf3bb:focus-visible,.leafygreen-ui-bf3bb[data-focus="true"]{background-color:#FFFFFF;box-shadow:0 0 0 2px #FFFFFF,0 0 0 4px #0498EC;}@media not all and (max-width: 767px){.leafygreen-ui-bf3bb{width:40px;height:36px;}}.dark-theme .leafygreen-ui-bf3bb{background-color:#3D4F58;color:#FFFFFF;}</style><button data-lgid="lg-button" type="button" class="lg-ui-button-0000 leafygreen-ui-bf3bb" aria-disabled="false"><div class="leafygreen-ui-v038xi"></div><div class="leafygreen-ui-16tr4y"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="" role="img" aria-label="Arrow Left Icon"><path fill="currentColor" d="M13 6.832H6.056L7.59 5.297a1 1 0 0 0 0-1.414l-.24-.239a1 1 0 0 0-1.414 0L2.555 7.027c-.01.008-.018.017-.027.026l-.24.239a1 1 0 0 0 0 1.414l3.652 3.651a1 1 0 0 0 1.414 0l.239-.239a1 1 0 0 0 0-1.414L6.059 9.17H13a1 1 0 0 0 1-1v-.338a1 1 0 0 0-1-1Z"></path></svg></div></button><style data-emotion="leafygreen-ui 1jhwqsf" nonce="4.1.1">.leafygreen-ui-1jhwqsf{text-align:start;}</style><div class="leafygreen-ui-1jhwqsf"><style data-emotion="leafygreen-ui 1r3nsao" nonce="4.1.1">.leafygreen-ui-1r3nsao{margin:unset;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;color:#001E2B;font-size:16px;line-height:28px;color:#001E2B;font-weight:400;font-size:13px;line-height:20px;font-weight:500;color:var(--font-color-primary);}.leafygreen-ui-1r3nsao strong,.leafygreen-ui-1r3nsao b{font-weight:700;}</style><p class="leafygreen-ui-1r3nsao">Back</p><style data-emotion="leafygreen-ui euxezt" nonce="4.1.1">.leafygreen-ui-euxezt{margin:unset;font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;color:#001E2B;font-size:16px;line-height:28px;color:#001E2B;font-weight:400;font-size:13px;line-height:20px;color:#889397;}.leafygreen-ui-euxezt strong,.leafygreen-ui-euxezt b{font-weight:700;}.dark-theme .leafygreen-ui-euxezt{color:#C1C7C6;}</style><p class="leafygreen-ui-euxezt">Transactions</p></div></div></a></div><style data-emotion="leafygreen-ui n7fkea" nonce="4.1.1">.leafygreen-ui-n7fkea{margin-left:auto;}</style><div class="leafygreen-ui-n7fkea"><a class="leafygreen-ui-11szg22" title="Next Section" href="../transactions-operations/index.html"><style data-emotion="leafygreen-ui ixh526" nonce="4.1.1">.leafygreen-ui-ixh526{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-column-gap:14px;column-gap:14px;-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;}</style><div class="leafygreen-ui-ixh526"><button data-lgid="lg-button" type="button" class="lg-ui-button-0000 leafygreen-ui-bf3bb" aria-disabled="false"><div class="leafygreen-ui-v038xi"></div><div class="leafygreen-ui-16tr4y"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="" role="img" aria-label="Arrow Right Icon"><path fill="currentColor" d="M3 6.832h6.944L8.41 5.297a1 1 0 0 1 0-1.414l.24-.239a1 1 0 0 1 1.414 0l3.382 3.383c.01.008.018.017.027.026l.24.239a1 1 0 0 1 0 1.414l-3.652 3.651a1 1 0 0 1-1.414 0l-.239-.239a1 1 0 0 1 0-1.414L9.941 9.17H3a1 1 0 0 1-1-1v-.338a1 1 0 0 1 1-1Z"></path></svg></div></button><style data-emotion="leafygreen-ui 1vnwpg6" nonce="4.1.1">.leafygreen-ui-1vnwpg6{text-align:end;}</style><div class="leafygreen-ui-1vnwpg6"><p class="leafygreen-ui-1r3nsao">Next</p><p class="leafygreen-ui-euxezt">Operations</p></div></div></a></div></div></div></main><style data-emotion="css 1imhenx">.css-1imhenx{grid-area:right;overflow:visible;}</style><style data-emotion="leafygreen-ui l8w3pm" nonce="4.1.1">.leafygreen-ui-l8w3pm{margin:70px 24px 40px 5px;min-width:180px;max-width:250px;z-index:3;}@media only screen and (max-width: 1024px){.leafygreen-ui-l8w3pm{display:none;}}</style><div class="leafygreen-ui-l8w3pm"><style data-emotion="leafygreen-ui q4lq1b" nonce="4.1.1">.leafygreen-ui-q4lq1b{height:calc(100vh - 120px);position:-webkit-sticky;position:sticky;top:calc(60px + 24px);}.leafygreen-ui-q4lq1b>*:not(.dismissible-skills-card){margin-bottom:30px;margin-right:24px;}</style><div class="leafygreen-ui-q4lq1b"><style data-emotion="leafygreen-ui 1n4j8eg" nonce="4.1.1">.leafygreen-ui-1n4j8eg{position:relative;width:100%;}.leafygreen-ui-1n4j8eg button>div>div>div{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media not all and (max-width: 480px){.leafygreen-ui-1n4j8eg{max-width:140px;}}@media only screen and (max-width: 1024px){.leafygreen-ui-1n4j8eg{max-width:300px;}}@media only screen and (max-width: 1024px){.leafygreen-ui-1n4j8eg label,.leafygreen-ui-1n4j8eg p,.leafygreen-ui-1n4j8eg button,.leafygreen-ui-1n4j8eg div,.leafygreen-ui-1n4j8eg span{font-size:13px;}}.leafygreen-ui-1n4j8eg label{color:#001E2B;}.dark-theme .leafygreen-ui-1n4j8eg label{color:#E8EDEB;}</style><div class="leafygreen-ui-1n4j8eg"><style data-emotion="leafygreen-ui 11axf7x" nonce="4.1.1">.leafygreen-ui-11axf7x{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.leafygreen-ui-11axf7x >label+button,.leafygreen-ui-11axf7x >p+button{margin-top:3px;}.leafygreen-ui-11axf7x >button{background-color:#FFFFFF;text-align:left;}.leafygreen-ui-11axf7x >button >*:last-child >svg{color:#5C6C75;}.leafygreen-ui-11axf7x >button:focus-visible{box-shadow:0 0 0 3px #0498EC;border-color:rgba(255, 255, 255, 0);}.dark-theme .leafygreen-ui-11axf7x >button{border-color:#889397;background-color:#112733;}.dark-theme .leafygreen-ui-11axf7x >button >*:last-child >svg{color:#C1C7C6;}.dark-theme .leafygreen-ui-11axf7x >button:hover,.dark-theme .leafygreen-ui-11axf7x >button:active,.dark-theme .leafygreen-ui-11axf7x >button:focus{background-color:#112733;color:#E8EDEB;}.dark-theme .leafygreen-ui-11axf7x >button:focus-visible{background-color:#112733;box-shadow:0 0 0 3px #0498EC;border-color:rgba(255, 255, 255, 0);}</style><div class="leafygreen-ui-11axf7x"><style data-emotion="leafygreen-ui 1tkxwjq" nonce="4.1.1">.leafygreen-ui-1tkxwjq{font-family:'Euclid Circular A',Akzidenz,'Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:bold;color:#001E2B;font-size:16px;line-height:20px;font-size:13px;line-height:20px;pointer-events:none;}@media only screen and (max-width: 1024px){.leafygreen-ui-1tkxwjq{font-size:16px;line-height:19px;}}</style><label class="leafygreen-ui-1tkxwjq" for="select-null" id="select-null-label">Select your language</label><style data-emotion="leafygreen-ui yxx2qh" nonce="4.1.1">.leafygreen-ui-yxx2qh{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;padding:0;margin:0;background-color:transparent;border:1px solid transparent;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-transition:all 150ms ease-in-out;transition:all 150ms ease-in-out;position:relative;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;z-index:0;font-family:'Euclid Circular A',Akzidenz,'Helvetica Neue',Helvetica,Arial,sans-serif;border-radius:6px;background-color:#F9FBFA;border-color:#889397;color:#001E2B;font-size:13px;line-height:20px;font-weight:500;height:36px;font-weight:400;background-color:#FFFFFF;color:#5C6C75;width:100%;font-size:13px;}.leafygreen-ui-yxx2qh:focus{outline:none;}.leafygreen-ui-yxx2qh[disabled],.leafygreen-ui-yxx2qh:disabled{pointer-events:none;}.leafygreen-ui-yxx2qh:active,.leafygreen-ui-yxx2qh:focus,.leafygreen-ui-yxx2qh:hover{-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-yxx2qh:hover,.leafygreen-ui-yxx2qh:active{color:#001E2B;background-color:#FFFFFF;box-shadow:0 0 0 3px #E8EDEB;}.leafygreen-ui-yxx2qh:focus{background-color:#FFFFFF;box-shadow:0 0 0 2px #FFFFFF,0 0 0 4px #0498EC;}.leafygreen-ui-yxx2qh >*:last-child{grid-template-columns:1fr 16px;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;}.leafygreen-ui-yxx2qh >*:last-child >svg{justify-self:right;width:16px;height:16px;}.leafygreen-ui-yxx2qh >*:last-child >svg{color:#3D4F58;}.leafygreen-ui-yxx2qh >*:last-child{padding:0 4px 0 12px;}.leafygreen-ui-yxx2qh:focus{box-shadow:0 0 0 3px #0498EC;border-color:rgba(255, 255, 255, 0);}@media only screen and (max-width: 1024px){.leafygreen-ui-yxx2qh{height:36px;font-size:16px;}}</style><button type="button" class="leafygreen-ui-yxx2qh" aria-disabled="false" data-leafygreen-ui="button" data-testid="lg-select" id="select-null" aria-labelledby="select-null-label" aria-controls="select-null-menu" aria-expanded="false" aria-describedby="select-null-description" aria-invalid="false" value=""><div class="leafygreen-ui-v038xi"></div><div class="leafygreen-ui-1qmzz4y"><div class="leafygreen-ui-obh8q1"><div class="leafygreen-ui-17aj16e"></div></div><svg class="leafygreen-ui-4dp7tf" height="16" width="16" role="presentation" aria-hidden="true" alt="" viewBox="0 0 16 16"><path d="M8.67903 10.7962C8.45271 11.0679 8.04729 11.0679 7.82097 10.7962L4.63962 6.97649C4.3213 6.59428 4.5824 6 5.06866 6L11.4313 6C11.9176 6 12.1787 6.59428 11.8604 6.97649L8.67903 10.7962Z" fill="currentColor"></path></svg></div></button></div></div><style data-emotion="leafygreen-ui 1f5j3m7" nonce="4.1.1">@media only screen and (min-width: 481px) and (max-width: 1024px){.leafygreen-ui-1f5j3m7{z-index:1;}}</style><div class="leafygreen-ui-1f5j3m7" data-testid="feedback-container"><style data-emotion="leafygreen-ui 11b6yii" nonce="4.1.1">.leafygreen-ui-11b6yii{font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:700;color:#001E2B;font-size:16px;line-height:20px;font-size:13px;font-weight:500!important;color:--label-color;}</style><label data-lgid="lg-label" class="leafygreen-ui-11b6yii" for="rating">Rate this page</label><style data-emotion="css 1h9qtyq">.css-1h9qtyq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:8px;margin:10px 0 16px;}@media only screen and (max-width: 1024px){.css-1h9qtyq{gap:12px;}}</style><div class="css-1h9qtyq e1ajxwyb2"><div><style data-emotion="css e0dnmk">.css-e0dnmk{cursor:pointer;}</style><div class="css-e0dnmk e1ajxwyb1"><style data-emotion="leafygreen-ui qa9ign" nonce="4.1.1">.leafygreen-ui-qa9ign{color:#FFFFFF;stroke-width:0.5px;stroke:#3D4F58;display:block;}.leafygreen-ui-qa9ign:focus:not(:focus-visible){outline:none;}.leafygreen-ui-qa9ign:focus-visible{outline-color:#0498EC;outline-offset:1px;border-radius:6px;}</style><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 -0.5 16 16" class="leafygreen-ui-qa9ign" role="img" aria-label="Favorite Icon" data-testid="rating-star" tabindex="0"><path fill="currentColor" d="M7.538 1.11a.5.5 0 0 1 .924 0l1.537 3.696a.5.5 0 0 0 .421.306l3.99.32a.5.5 0 0 1 .285.878l-3.04 2.604a.5.5 0 0 0-.16.496l.928 3.893a.5.5 0 0 1-.747.542L8.261 11.76a.5.5 0 0 0-.522 0l-3.415 2.086a.5.5 0 0 1-.747-.542l.928-3.893a.5.5 0 0 0-.16-.496L1.304 6.31a.5.5 0 0 1 .285-.878l3.99-.32A.5.5 0 0 0 6 4.806L7.538 1.11Z"></path></svg></div></div><div><div class="css-e0dnmk e1ajxwyb1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 -0.5 16 16" class="leafygreen-ui-qa9ign" role="img" aria-label="Favorite Icon" data-testid="rating-star" tabindex="0"><path fill="currentColor" d="M7.538 1.11a.5.5 0 0 1 .924 0l1.537 3.696a.5.5 0 0 0 .421.306l3.99.32a.5.5 0 0 1 .285.878l-3.04 2.604a.5.5 0 0 0-.16.496l.928 3.893a.5.5 0 0 1-.747.542L8.261 11.76a.5.5 0 0 0-.522 0l-3.415 2.086a.5.5 0 0 1-.747-.542l.928-3.893a.5.5 0 0 0-.16-.496L1.304 6.31a.5.5 0 0 1 .285-.878l3.99-.32A.5.5 0 0 0 6 4.806L7.538 1.11Z"></path></svg></div></div><div><div class="css-e0dnmk e1ajxwyb1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 -0.5 16 16" class="leafygreen-ui-qa9ign" role="img" aria-label="Favorite Icon" data-testid="rating-star" tabindex="0"><path fill="currentColor" d="M7.538 1.11a.5.5 0 0 1 .924 0l1.537 3.696a.5.5 0 0 0 .421.306l3.99.32a.5.5 0 0 1 .285.878l-3.04 2.604a.5.5 0 0 0-.16.496l.928 3.893a.5.5 0 0 1-.747.542L8.261 11.76a.5.5 0 0 0-.522 0l-3.415 2.086a.5.5 0 0 1-.747-.542l.928-3.893a.5.5 0 0 0-.16-.496L1.304 6.31a.5.5 0 0 1 .285-.878l3.99-.32A.5.5 0 0 0 6 4.806L7.538 1.11Z"></path></svg></div></div><div><div class="css-e0dnmk e1ajxwyb1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 -0.5 16 16" class="leafygreen-ui-qa9ign" role="img" aria-label="Favorite Icon" data-testid="rating-star" tabindex="0"><path fill="currentColor" d="M7.538 1.11a.5.5 0 0 1 .924 0l1.537 3.696a.5.5 0 0 0 .421.306l3.99.32a.5.5 0 0 1 .285.878l-3.04 2.604a.5.5 0 0 0-.16.496l.928 3.893a.5.5 0 0 1-.747.542L8.261 11.76a.5.5 0 0 0-.522 0l-3.415 2.086a.5.5 0 0 1-.747-.542l.928-3.893a.5.5 0 0 0-.16-.496L1.304 6.31a.5.5 0 0 1 .285-.878l3.99-.32A.5.5 0 0 0 6 4.806L7.538 1.11Z"></path></svg></div></div><div><div class="css-e0dnmk e1ajxwyb1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 -0.5 16 16" class="leafygreen-ui-qa9ign" role="img" aria-label="Favorite Icon" data-testid="rating-star" tabindex="0"><path fill="currentColor" d="M7.538 1.11a.5.5 0 0 1 .924 0l1.537 3.696a.5.5 0 0 0 .421.306l3.99.32a.5.5 0 0 1 .285.878l-3.04 2.604a.5.5 0 0 0-.16.496l.928 3.893a.5.5 0 0 1-.747.542L8.261 11.76a.5.5 0 0 0-.522 0l-3.415 2.086a.5.5 0 0 1-.747-.542l.928-3.893a.5.5 0 0 0-.16-.496L1.304 6.31a.5.5 0 0 1 .285-.878l3.99-.32A.5.5 0 0 0 6 4.806L7.538 1.11Z"></path></svg></div></div></div></div><style data-emotion="leafygreen-ui 1txnu8g" nonce="4.1.1">.leafygreen-ui-1txnu8g{overflow:auto;height:80%;}</style><div class="leafygreen-ui-1txnu8g"><style data-emotion="leafygreen-ui m1e3ke" nonce="4.1.1">.leafygreen-ui-m1e3ke{border-top:1px solid #E8EDEB;border-bottom:1px solid #E8EDEB;padding:5px 0;margin-bottom:24px;}@media not all and (max-width: 1024px){.leafygreen-ui-m1e3ke{display:none;}}</style><div aria-expanded="false" class="leafygreen-ui-m1e3ke"><style data-emotion="leafygreen-ui 1bnxvcn" nonce="4.1.1">.leafygreen-ui-1bnxvcn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:2px;height:32px;}</style><div class="leafygreen-ui-1bnxvcn"><style data-emotion="leafygreen-ui 11vw93h" nonce="4.1.1">.leafygreen-ui-11vw93h{margin-left:-4px;color:#5C6C75;}.dark-theme .leafygreen-ui-11vw93h{color:#E8EDEB;}</style><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" class="leafygreen-ui-11vw93h" role="img" aria-label="Caret Right Icon"><path fill="currentColor" d="M10.796 7.321a.554.554 0 0 1 0 .858l-3.82 3.181c-.382.319-.976.058-.976-.429V4.57c0-.487.594-.748.976-.43l3.82 3.182Z"></path></svg><style data-emotion="leafygreen-ui 1fx8u8g" nonce="4.1.1">.leafygreen-ui-1fx8u8g{font-size:13px;--label-color:#3D4F58;font-weight:400;margin:0;width:#3D4F58;}.dark-theme .leafygreen-ui-1fx8u8g{--label-color:#C1C7C6;}</style><p class="leafygreen-ui-1fx8u8g">On this page</p></div><style data-emotion="leafygreen-ui y0krma" nonce="4.1.1">.leafygreen-ui-y0krma{overflow:hidden;height:0;color:--font-color-primary;}[aria-expanded='true'] .leafygreen-ui-y0krma{height:auto;}</style><div class="leafygreen-ui-y0krma"><style data-emotion="leafygreen-ui ipstek" nonce="4.1.1">.leafygreen-ui-ipstek{list-style-type:none;padding:0;margin:0;--label-color:#3D4F58;}.dark-theme .leafygreen-ui-ipstek{--label-color:#C1C7C6;}.leafygreen-ui-ipstek >li{margin:6px 0 6px 13px;}</style><ul class="leafygreen-ui-ipstek"><style data-emotion="leafygreen-ui 1e7a0ei" nonce="4.1.1">.leafygreen-ui-1e7a0ei{padding:6px 0 6px 1px;--active-border-color:#001E2B;--border-color:#E8EDEB;}.leafygreen-ui-1e7a0ei:hover,.leafygreen-ui-1e7a0ei:active{padding-left:4px;}.dark-theme .leafygreen-ui-1e7a0ei{--active-border-color:#C1C7C6;--border-color:#3D4F58;}@media not all and (max-width: 1024px){.leafygreen-ui-1e7a0ei{border-left-style:solid;border-left-width:2px;border-left-color:var(--active-border-color);padding-left:0;}.leafygreen-ui-1e7a0ei:hover,.leafygreen-ui-1e7a0ei:active{border-left-width:2px;border-left-color:var(--active-border-color);padding-left:0;}}</style><li class="leafygreen-ui-1e7a0ei"><style data-emotion="leafygreen-ui 70ed0j" nonce="4.1.1">.leafygreen-ui-70ed0j{font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;text-decoration-color:transparent;cursor:pointer;font-size:inherit;line-height:inherit;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:none;border:none;padding:0;font-size:16px;line-height:28px;color:#016BF8;font-weight:400;display:inline;color:var(--link-color-primary);font-weight:var(--link-font-weight);color:var(--font-color-primary);font-size:13px;line-height:16px;font-weight:normal;font-weight:600;display:inline-block;padding-left:0px;width:100%;}.leafygreen-ui-70ed0j:hover,.leafygreen-ui-70ed0j:focus{-webkit-text-decoration:underline;text-decoration:underline;-webkit-transition:text-decoration 150ms ease-in-out;transition:text-decoration 150ms ease-in-out;text-underline-offset:4px;text-decoration-thickness:2px;}.leafygreen-ui-70ed0j:focus{outline:none;}.leafygreen-ui-70ed0j:hover{text-decoration-color:#E8EDEB;}.leafygreen-ui-70ed0j:focus{text-decoration-color:#016BF8;}.leafygreen-ui-70ed0j >span>code,.leafygreen-ui-70ed0j >code{color:var(--link-color-primary);font-weight:var(--link-font-weight);}@media not all and (max-width: 1024px){.leafygreen-ui-70ed0j{padding-left:calc(14px + 0px);}}.leafygreen-ui-70ed0j:hover,.leafygreen-ui-70ed0j:active{color:currentColor;-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-70ed0j span>span{position:unset;}</style><a class="lg-ui-0001 leafygreen-ui-70ed0j" target="_self" href="index.html#callback-api-vs-core-api"><span>Callback API vs Core API</span></a></li><style data-emotion="leafygreen-ui 1jqtqlb" nonce="4.1.1">.leafygreen-ui-1jqtqlb{padding:6px 0 6px 1px;--active-border-color:#001E2B;--border-color:#E8EDEB;}.leafygreen-ui-1jqtqlb:hover,.leafygreen-ui-1jqtqlb:active{padding-left:4px;}.dark-theme .leafygreen-ui-1jqtqlb{--active-border-color:#C1C7C6;--border-color:#3D4F58;}@media not all and (max-width: 1024px){.leafygreen-ui-1jqtqlb{border-left-style:solid;border-left-width:1px;border-left-color:var(--border-color);}.leafygreen-ui-1jqtqlb:hover,.leafygreen-ui-1jqtqlb:active{border-left-width:2px;border-left-color:var(--active-border-color);padding-left:0;}}</style><li class="leafygreen-ui-1jqtqlb"><style data-emotion="leafygreen-ui nda2v9" nonce="4.1.1">.leafygreen-ui-nda2v9{font-family:'Euclid Circular A','Helvetica Neue',Helvetica,Arial,sans-serif;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;text-decoration-color:transparent;cursor:pointer;font-size:inherit;line-height:inherit;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:none;border:none;padding:0;font-size:16px;line-height:28px;color:#016BF8;font-weight:400;display:inline;color:var(--link-color-primary);font-weight:var(--link-font-weight);color:var(--font-color-primary);font-size:13px;line-height:16px;font-weight:normal;display:inline-block;padding-left:0px;width:100%;}.leafygreen-ui-nda2v9:hover,.leafygreen-ui-nda2v9:focus{-webkit-text-decoration:underline;text-decoration:underline;-webkit-transition:text-decoration 150ms ease-in-out;transition:text-decoration 150ms ease-in-out;text-underline-offset:4px;text-decoration-thickness:2px;}.leafygreen-ui-nda2v9:focus{outline:none;}.leafygreen-ui-nda2v9:hover{text-decoration-color:#E8EDEB;}.leafygreen-ui-nda2v9:focus{text-decoration-color:#016BF8;}.leafygreen-ui-nda2v9 >span>code,.leafygreen-ui-nda2v9 >code{color:var(--link-color-primary);font-weight:var(--link-font-weight);}@media not all and (max-width: 1024px){.leafygreen-ui-nda2v9{padding-left:calc(14px + 0px);}}.leafygreen-ui-nda2v9:hover,.leafygreen-ui-nda2v9:active{color:currentColor;-webkit-text-decoration:none;text-decoration:none;}.leafygreen-ui-nda2v9 span>span{position:unset;}</style><a class="lg-ui-0001 leafygreen-ui-nda2v9" target="_self" href="index.html#callback-api"><span>Callback API</span></a></li><li class="leafygreen-ui-1jqtqlb"><a class="lg-ui-0001 leafygreen-ui-nda2v9" target="_self" href="index.html#core-api"><span>Core API</span></a></li><li class="leafygreen-ui-1jqtqlb"><a class="lg-ui-0001 leafygreen-ui-nda2v9" target="_self" href="index.html#driver-versions"><span>Driver Versions</span></a></li><li class="leafygreen-ui-1jqtqlb"><a class="lg-ui-0001 leafygreen-ui-nda2v9" target="_self" href="index.html#transaction-error-handling"><span>Transaction Error Handling</span></a></li><li class="leafygreen-ui-1jqtqlb"><a class="lg-ui-0001 leafygreen-ui-nda2v9" target="_self" href="index.html#additional-information"><span>Additional Information</span></a></li></ul></div></div><style data-emotion="leafygreen-ui 17tkapa" nonce="4.1.1">@media only screen and (max-width: 1024px){.leafygreen-ui-17tkapa{display:none;}}</style><div class="leafygreen-ui-17tkapa"><style data-emotion="leafygreen-ui 1lvnqao" nonce="4.1.1">.leafygreen-ui-1lvnqao{font-size:13px;--label-color:#3D4F58;line-height:16px;font-weight:bolder;letter-spacing:0;margin:0 0 12px!important;}.dark-theme .leafygreen-ui-1lvnqao{--label-color:#C1C7C6;}</style><p class="leafygreen-ui-1lvnqao">On this page</p><style data-emotion="leafygreen-ui 1qpv1j4" nonce="4.1.1">.leafygreen-ui-1qpv1j4{list-style-type:none;padding:0;}</style><ul class="leafygreen-ui-1qpv1j4"><li class="leafygreen-ui-1e7a0ei"><a class="lg-ui-0001 leafygreen-ui-70ed0j" target="_self" href="index.html#callback-api-vs-core-api"><span>Callback API vs Core API</span></a></li><li class="leafygreen-ui-1jqtqlb"><a class="lg-ui-0001 leafygreen-ui-nda2v9" target="_self" href="index.html#callback-api"><span>Callback API</span></a></li><li class="leafygreen-ui-1jqtqlb"><a class="lg-ui-0001 leafygreen-ui-nda2v9" target="_self" href="index.html#core-api"><span>Core API</span></a></li><li class="leafygreen-ui-1jqtqlb"><a class="lg-ui-0001 leafygreen-ui-nda2v9" target="_self" href="index.html#driver-versions"><span>Driver Versions</span></a></li><li class="leafygreen-ui-1jqtqlb"><a class="lg-ui-0001 leafygreen-ui-nda2v9" target="_self" href="index.html#transaction-error-handling"><span>Transaction Error Handling</span></a></li><li class="leafygreen-ui-1jqtqlb"><a class="lg-ui-0001 leafygreen-ui-nda2v9" target="_self" href="index.html#additional-information"><span>Additional Information</span></a></li></ul></div></div></div></div></div></div> <div data-testid="consistent-footer" id="footer-container"><!--$--><!--/$--></div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/core/transactions-in-applications/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script id="gatsby-chunk-mapping">
            window.___chunkMapping="{\"app\":[\"/app-f69ccfe765de8634d67c.js\"],\"component---src-components-document-body-tsx\":[\"/component---src-components-document-body-tsx-fc572df17db5686016e3.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="3b4693057d0b7ffabe3c";</script><script src="../../webpack-runtime-6f67b020c375373022bd.js" async=""></script><script src="../../framework-597818b98b5e9b9c3c80.js" async=""></script><script src="../../5c0b189e-ba3763977244801c4954.js" async=""></script><script src="../../29107295-1d5844b04ec6a8e36af3.js" async=""></script><script src="../../76277a1e-dd0b21016cc4b7086310.js" async=""></script><script src="../../8d3d71ee-5a84ed498ce9a9741c41.js" async=""></script><script src="../../f5fe3abf-3da27aa7a8f4322b46e7.js" async=""></script><script src="../../cde78662-69f3e914830725b6f8d3.js" async=""></script><script src="../../9a8bd14d-c22a3556d5e370dd553d.js" async=""></script><script src="../../a1a65adf-c0039e593335c379a227.js" async=""></script><script src="../../ec740807-b43bff36235fdfb322cf.js" async=""></script><script src="../../9c6d7990-8aa45243fc1988fad52b.js" async=""></script><script src="../../app-f69ccfe765de8634d67c.js" async=""></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>