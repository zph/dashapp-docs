<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>
  <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css"/><a class="dashingAutolink" name="autolink-61"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Indexing%20Overview%20%E2%80%94%20MongoDB%20Manual"></a><title>Indexing Overview &mdash; MongoDB Manual</title><link rel="shortcut icon" href="https://www.mongodb.com/docs/assets/favicon.ico"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
      <link rel="canonical" href="https://www.mongodb.com/docs/manual/core/indexes/"/><meta name="robots" content="index"/>
  <meta name="release" content="2.2.7"/>
  <meta name="version" content="2.2"/>
  <meta name="DC.Source" content="https://github.com/mongodb/docs/blob/v2.2/source/core/indexes.txt"/>
  <meta property="og:image" content="http://s3.amazonaws.com/info-mongodb-com/_com_assets/cms/mongodb-for-giant-ideas-bbab5c3cf8.png"/>
  <meta property="og:image:secure_url" content="https://webassets.mongodb.com/_com_assets/cms/mongodb-for-giant-ideas-bbab5c3cf8.png"/>
  
   <link rel="stylesheet" href="../_static/mongodb-docs.css" type="text/css"/>
   <link rel="stylesheet" href="../_static/pygments.css" type="text/css"/>
   <link rel="stylesheet" href="../_static/css/navbar.min.css?t=nocache" type="text/css"/>
    
    <script type="text/javascript" src="../_static/lib/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/lib/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/lib/jquery.cookie.js"></script>
    <script type="text/javascript" src="../_static/controller.js"></script>
      <link rel="search" type="application/opensearchdescription+xml" href="https://www.mongodb.com/docs/osd.xml" title="MongoDB Help"/>
<link rel="author" title="About these documents" href="../about.html"/>
<!-- <link rel="index" title="Index" href="../genindex.html" /> -->
<link rel="search" title="Search" href="../search.html"/>
<link rel="top" title="MongoDB Manual" href="../index.html"/>
<link rel="up" title="Indexes" href="../indexes.html"/>
<link rel="next" title="Indexing Operations" href="../administration/indexes.html"/>
<link rel="prev" title="Indexes" href="../indexes.html"/><script type="text/javascript">
   var gptadslots=[];
   var googletag = googletag || {};
   googletag.cmd = googletag.cmd || [];
   (function(){ var gads = document.createElement('script');
      gads.async = true; gads.type = 'text/javascript';
      var useSSL = 'https:' == document.location.protocol;
      gads.src = (useSSL ? 'https:' : 'http:') + '//www.googletagservices.com/tag/js/gpt.js';
      var node = document.getElementsByTagName('script')[0];
      node.parentNode.insertBefore(gads, node);
   })();
</script>

<script type="text/javascript">
   googletag.cmd.push(function() {

      var pathname = location.href;
      
      if ( (pathname.indexOf("auth") >= 0) || (pathname.indexOf("security") >= 0) ) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/security', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if ( (pathname.indexOf("crud") >= 0) ||  (pathname.indexOf("query") >= 0) || (pathname.indexOf("insert") >= 0) || (pathname.indexOf("update") >= 0) || (pathname.indexOf("remove") >= 0) || (pathname.indexOf("delete") >= 0) || (pathname.indexOf("aggregation") >= 0) ) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/crud', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("shard") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/sharding', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("replica") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/replication', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("model") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/data-modeling', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("administration") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/support', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("install-mongodb-on-windows") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/install-mongodb-on-windows', [160, 600], 'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("tutorial/getting-started") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/docs_server_gettingstarted', [160, 600], 'mongodb-docs-1').addService(googletag.pubads());
      } else {
         //Adslot 1 declaration
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      }
      googletag.pubads().enableSingleRequest();
      googletag.pubads().enableAsyncRendering();
      googletag.enableServices();
   });
</script></head>
<body data-project="manual" data-project-title="MongoDB Manual" data-branch="v2.2" data-enable-marian="1" data-eol="True">
  <!-- Google Tag Manager -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-GDFN"
                    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
  {'gtm.start':new Date().getTime(),event:'gtm.js'}
  );var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-GDFN');
  </script>
  <!-- End Google Tag Manager -->
      <script>
        window.googleSearchCx = "017213726194841070573:WMX6838984"
	window.googleSearchPlaceholder = "Search Documentation"
        window.googleSearchResultsUrl = "https://www.mongodb.com/docs/manual/search/"
      </script><div class="content" style="margin-top: 0;">

   <div id="left-column">
         <aside id="sidebar" class="sidebar">
             
  <div class="sphinxsidebar" id="sphinxsidebar">
    <div id="sphinxsidebarwrapper" class="sphinxsidebarwrapper"><a href="javascript:void(0)" class="closeNav" id="closeNav">Close &times;</a>


<h3>
  <a class="index-link" href="../index.html">MongoDB Manual</a>
</h3>


    <div class="btn-group version-sidebar">
      
        <button type="button" class="version-button dropdown-toggle" data-toggle="dropdown" disabled="" aria-disabled="disabled">
          
          
          Version 2.2
        </button>
        <a href="https://www.mongodb.com/docs/legacy">&larr; Return to Documentation</a>
      
    </div>


<ul class="current"><li class="toctree-l1"><a class="reference internal" href="../installation.html">Installing MongoDB</a><ul><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-red-hat-centos-or-fedora-linux.html">Install MongoDB on Red Hat Enterprise, CentOS, or Fedora</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-ubuntu.html">Install MongoDB on Ubuntu</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-debian.html">Install MongoDB on Debian</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-linux.html">Install MongoDB on Linux Systems</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-os-x.html">Install MongoDB on OS X</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-windows.html">Install MongoDB on Windows</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/getting-started.html">Getting Started with MongoDB Development</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../administration.html">Administration</a><ul><li class="toctree-l2"><a class="reference internal" href="../administration/configuration.html">Run-time Database Configuration</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/operational-segregation.html">Operational Segregation in MongoDB Operations and Deployments</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/journaling.html">Journaling</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/ssl.html">Use MongoDB with SSL Connections</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/snmp.html">Use MongoDB with SNMP Monitoring</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/monitoring.html">Monitoring Database Systems</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/import-export.html">Importing and Exporting MongoDB Data</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/backups.html">Backup Strategies for MongoDB Systems</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/ulimit.html">UNIX <code class="docutils literal"><span class="pre">ulimit</span></code> Settings</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/production-notes.html">Production Notes</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a><ul><li class="toctree-l2"><a class="reference internal" href="../administration/security.html">Security Practices and Management</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/vulnerability-notification.html">Vulnerability Notification</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/configure-linux-iptables-firewall.html">Configure Linux <code class="docutils literal"><span class="pre">iptables</span></code> Firewall for MongoDB</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/configure-windows-netsh-firewall.html">Configure Windows <code class="docutils literal"><span class="pre">netsh</span></code> Firewall for MongoDB</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/control-access-to-mongodb-with-authentication.html">Control Access to MongoDB Instances with Authentication</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../crud.html">Core MongoDB Operations (CRUD)</a><ul><li class="toctree-l2"><a class="reference internal" href="read-operations.html">Read Operations</a></li><li class="toctree-l2"><a class="reference internal" href="write-operations.html">Write Operations</a></li><li class="toctree-l2"><a class="reference internal" href="data-modeling.html">Data Modeling Considerations for MongoDB Applications</a></li><li class="toctree-l2"><a class="reference internal" href="document.html">BSON Documents</a></li><li class="toctree-l2"><a class="reference internal" href="object-id.html">ObjectId</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/database-references.html">Database References</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/gridfs.html">GridFS</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/create.html">Create</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/read.html">Read</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/update.html">Update</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/delete.html">Delete</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-embedded-one-to-one-relationships-between-documents.html">Model Embedded One-to-One Relationships Between Documents</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-embedded-one-to-many-relationships-between-documents.html">Model Embedded One-to-Many Relationships Between Documents</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-referenced-one-to-many-relationships-between-documents.html">Model Referenced One-to-Many Relationships Between Documents</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-data-for-atomic-operations.html">Model Data for Atomic Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-tree-structures-with-parent-references.html">Model Tree Structures with Parent References</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-tree-structures-with-child-references.html">Model Tree Structures with Child References</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-tree-structures-with-ancestors-array.html">Model Tree Structures with an Array of Ancestors</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-tree-structures-with-materialized-paths.html">Model Tree Structures with Materialized Paths</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-tree-structures-with-nested-sets.html">Model Tree Structures with Nested Sets</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-data-for-keyword-search.html">Model Data to Support Keyword Search</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../aggregation.html">Aggregation</a><ul><li class="toctree-l2"><a class="reference internal" href="../applications/aggregation.html">Aggregation Framework</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/aggregation-examples.html">Aggregation Framework Examples</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/aggregation.html">Aggregation Framework Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/map-reduce.html">Map-Reduce</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/simple-aggregation.html">Simple Aggregation Methods and Commands</a></li></ul></li><li class="toctree-l1 current"><a class="reference internal" href="../indexes.html">Indexes</a><ul class="current"><li class="toctree-l2 current"><a class="reference internal current" href="">Indexing Overview</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/indexes.html">Indexing Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/indexes.html">Indexing Strategies</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/geospatial-indexes.html">Geospatial Queries with <code class="docutils literal"><span class="pre">2d</span></code> Indexes</a></li><li class="toctree-l2"><a class="reference internal" href="geospatial-indexes.html"><code class="docutils literal"><span class="pre">2d</span></code> Geospatial Indexes</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../replication.html">Replication</a><ul><li class="toctree-l2"><a class="reference internal" href="replication.html">Replica Set Fundamental Concepts</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/replica-sets.html">Replica Set Operation and Management</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/replica-set-architectures.html">Replica Set Architectures and Deployment Patterns</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/replication.html">Replica Set Considerations and Behaviors for Applications and Development</a></li><li class="toctree-l2"><a class="reference internal" href="replication-internals.html">Replica Set Internals and Behaviors</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/master-slave.html">Master Slave Replication</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/deploy-replica-set.html">Deploy a Replica Set</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/convert-standalone-to-replica-set.html">Convert a Standalone to a Replica Set</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/expand-replica-set.html">Add Members to a Replica Set</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/deploy-geographically-distributed-replica-set.html">Deploy a Geographically Distributed Replica Set</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/change-oplog-size.html">Change the Size of the Oplog</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/force-member-to-be-primary.html">Force a Member to Become Primary</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/change-hostnames-in-a-replica-set.html">Change Hostnames in a Replica Set</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/convert-secondary-into-arbiter.html">Convert a Secondary to an Arbiter</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/reconfigure-replica-set-with-unavailable-members.html">Reconfigure a Replica Set with Unavailable Members</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/recover-data-following-unexpected-shutdown.html">Recover MongoDB Data following Unexpected Shutdown</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/replica-commands.html">Replica Set Commands</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/replica-set-features.html">Replica Set Features and Version Compatibility</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../sharding.html">Sharding</a><ul><li class="toctree-l2"><a class="reference internal" href="sharded-clusters.html">Sharded Cluster Overview</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/sharded-clusters.html">Sharded Cluster Administration</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/sharded-cluster-architectures.html">Sharded Cluster Architectures</a></li><li class="toctree-l2"><a class="reference internal" href="sharded-cluster-internals.html">Sharded Cluster Internals and Behaviors</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/deploy-shard-cluster.html">Deploy a Sharded Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/add-shards-to-shard-cluster.html">Add Shards to a Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/view-sharded-cluster-configuration.html">View Cluster Configuration</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/manage-sharded-cluster-config-server.html">Manage the Config Servers</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/manage-chunks-in-sharded-cluster.html">Manage Chunks in a Sharded Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/configure-sharded-cluster-balancer.html">Configure Behavior of Balancer Process in Sharded Clusters</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/manage-sharded-cluster-balancer.html">Manage Sharded Cluster Balancer</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/remove-shards-from-cluster.html">Remove Shards from an Existing Sharded Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/backup-small-sharded-cluster-with-mongodump.html">Backup a Small Sharded Cluster with <code class="docutils literal"><span class="pre">mongodump</span></code></a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/backup-sharded-cluster-with-filesystem-snapshots.html">Create Backup of a Sharded Cluster with Filesystem Snapshots</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/backup-sharded-cluster-with-database-dumps.html">Create Backup of a Sharded Cluster with Database Dumps</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/restore-single-shard.html">Restore a Single Shard</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/restore-sharded-cluster.html">Restore Sharded Clusters</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/schedule-backup-window-for-sharded-clusters.html">Schedule Backup Window for Sharded Clusters</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/tag-aware-sharding.html">Tag Aware Sharding</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/enforce-unique-keys-for-sharded-collections.html">Enforce Unique Keys for Sharded Collections</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/convert-replica-set-to-replicated-shard-cluster.html">Convert a Replica Set to a Replicated Sharded Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/sharding-commands.html">Sharding Commands</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../applications.html">Application Development</a><ul><li class="toctree-l2"><a class="reference internal" href="../applications/drivers.html">MongoDB Drivers and Client Libraries</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/optimization.html">Optimization Strategies for MongoDB Applications</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/server-side-javascript.html">Server-side JavaScript</a></li><li class="toctree-l2"><a class="reference internal" href="capped-collections.html">Capped Collections</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/perform-two-phase-commits.html">Perform Two Phase Commits</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/create-tailable-cursor.html">Create Tailable Cursor</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/isolate-sequence-of-operations.html">Isolate Sequence of Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/create-an-auto-incrementing-field.html">Create an Auto-Incrementing Sequence Field</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/expire-data.html">Expire Data from Collections by Setting TTL</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../mongo.html">Using the <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a><ul><li class="toctree-l2"><a class="reference internal" href="../tutorial/getting-started-with-the-mongo-shell.html">Getting Started with the <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a></li><li class="toctree-l2"><a class="reference internal" href="shell-types.html">Data Types in the <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/access-mongo-shell-help.html">Access the <code class="docutils literal"><span class="pre">mongo</span></code> Shell Help Information</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/write-scripts-for-the-mongo-shell.html">Write Scripts for the <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/mongo-shell.html"><code class="docutils literal"><span class="pre">mongo</span></code> Shell Quick Reference</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../tutorial.html">MongoDB Tutorials</a><ul><li class="toctree-l2"><a class="reference internal" href="../tutorial/use-database-commands.html">Use Database Commands</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/recover-data-following-unexpected-shutdown.html">Recover MongoDB Data following Unexpected Shutdown</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/manage-mongodb-processes.html">Manage <code class="docutils literal"><span class="pre">mongod</span></code> Processes</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/convert-replica-set-to-replicated-shard-cluster.html">Convert a Replica Set to a Replicated Sharded Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/copy-databases-between-instances.html">Copy Databases Between Instances</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/backup-databases-with-binary-database-dumps.html">Use <code class="docutils literal"><span class="pre">mongodump</span></code> and <code class="docutils literal"><span class="pre">mongorestore</span></code> to Backup and Restore MongoDB Databases</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/backup-databases-with-filesystem-snapshots.html">Use Filesystem Snapshots to Backup and Restore MongoDB Databases</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/manage-the-database-profiler.html">Analyze Performance of Database Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/rotate-log-files.html">Rotate Log Files</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/roll-back-to-v1.8-index.html">Build Old Style Indexes</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a><ul><li class="toctree-l2"><a class="reference internal" href="../faq/fundamentals.html">FAQ: MongoDB Fundamentals</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/developers.html">FAQ: MongoDB for Application Developers</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/mongo.html">FAQ: The <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/concurrency.html">FAQ: Concurrency</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/sharding.html">FAQ: Sharding with MongoDB</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/replica-sets.html">FAQ: Replica Sets and Replication in MongoDB</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/storage.html">FAQ: MongoDB Storage</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/indexes.html">FAQ: Indexes</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/diagnostics.html">FAQ: MongoDB Diagnostics</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a><ul><li class="toctree-l2"><a class="reference internal" href="../reference/operator.html">Query, Update, Projection, and Aggregation Operators</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/all.html">$all</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/and.html">$and</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/box.html">$box</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/center.html">$center</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/centerSphere.html">$centerSphere</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/elemMatch.html">$elemMatch (query)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/exists.html">$exists</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/gt.html">$gt</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/gte.html">$gte</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/in.html">$in</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/lt.html">$lt</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/lte.html">$lte</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/maxDistance.html">$maxDistance</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/mod.html">$mod</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/ne.html">$ne</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/near.html">$near</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/nearSphere.html">$nearSphere</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/nin.html">$nin</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/nor.html">$nor</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/not.html">$not</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/or.html">$or</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/polygon.html">$polygon</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/regex.html">$regex</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/size.html">$size</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/type.html">$type</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/uniqueDocs.html">$uniqueDocs</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/where.html">$where</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/within.html">$within</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/addToSet.html">$addToSet</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/bit.html">$bit</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/each.html">$each</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/inc.html">$inc</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/isolated.html">$isolated</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/pop.html">$pop</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/positional.html">$ (update)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/pull.html">$pull</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/pullAll.html">$pullAll</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/push.html">$push</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/pushAll.html">$pushAll</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/rename.html">$rename</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/set.html">$set</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/unset.html">$unset</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/projection/elemMatch.html">$elemMatch (projection)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/projection/positional.html">$ (projection)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/projection/slice.html">$slice (projection)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/comment.html">$comment</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/explain.html">$explain</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/hint.html">$hint</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/max.html">$max</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/maxScan.html">$maxScan</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/min.html">$min</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/natural.html">$natural</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/orderby.html">$orderby</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/query.html">$query</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/returnKey.html">$returnKey</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/showDiskLoc.html">$showDiskLoc</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/snapshot.html">$snapshot</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/add.html">$add (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/addToSet.html">$addToSet (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/and.html">$and (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/avg.html">$avg (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/cmp.html">$cmp (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/cond.html">$cond (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/dayOfMonth.html">$dayOfMonth (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/dayOfWeek.html">$dayOfWeek (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/dayOfYear.html">$dayOfYear (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/divide.html">$divide (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/eq.html">$eq (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/first.html">$first (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/group.html">$group (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/gt.html">$gt (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/gte.html">$gte (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/hour.html">$hour (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/ifNull.html">$ifNull (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/last.html">$last (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/limit.html">$limit (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/lt.html">$lt (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/lte.html">$lte (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/match.html">$match (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/max.html">$max (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/min.html">$min (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/minute.html">$minute (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/mod.html">$mod (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/month.html">$month (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/multiply.html">$multiply (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/ne.html">$ne (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/not.html">$not (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/or.html">$or (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/project.html">$project (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/push.html">$push (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/second.html">$second (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/skip.html">$skip (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/sort.html">$sort (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/strcasecmp.html">$strcasecmp (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/substr.html">$substr (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/subtract.html">$subtract (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/sum.html">$sum (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/toLower.html">$toLower (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/toUpper.html">$toUpper (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/unwind.html">$unwind (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/week.html">$week (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/year.html">$year (aggregation)</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/command.html">Database Commands</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/command/addShard.html">addShard</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/aggregate.html">aggregate</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/applyOps.html">applyOps (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/authenticate.html">authenticate</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/availableQueryOptions.html">availableQueryOptions (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/buildInfo.html">buildInfo</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/checkShardingIndex.html">checkShardingIndex (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/clean.html">clean (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/clone.html">clone</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/cloneCollection.html">cloneCollection</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/cloneCollectionAsCapped.html">cloneCollectionAsCapped</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/closeAllDatabases.html">closeAllDatabases (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/collMod.html">collMod</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/collStats.html">collStats</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/compact.html">compact</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/connPoolStats.html">connPoolStats</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/connPoolSync.html">connPoolSync (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/convertToCapped.html">convertToCapped</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/copydb.html">copydb</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/copydbgetnonce.html">copydbgetnonce (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/count.html">count</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/create.html">create</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/cursorInfo.html">cursorInfo</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/dataSize.html">dataSize</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/dbHash.html">dbHash (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/dbStats.html">dbStats</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/diagLogging.html">diagLogging (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/distinct.html">distinct</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/driverOIDTest.html">driverOIDTest (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/drop.html">drop</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/dropDatabase.html">dropDatabase</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/dropIndexes.html">dropIndexes</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/enableSharding.html">enableSharding</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/eval.html">eval</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/features.html">features (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/filemd5.html">filemd5</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/findAndModify.html">findAndModify</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/flushRouterConfig.html">flushRouterConfig</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/fsync.html">fsync</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/geoNear.html">geoNear</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/geoSearch.html">geoSearch</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/geoWalk.html">geoWalk</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getCmdLineOpts.html">getCmdLineOpts</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getLastError.html">getLastError</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getLog.html">getLog</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getParameter.html">getParameter</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getPrevError.html">getPrevError</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getShardMap.html">getShardMap (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getShardVersion.html">getShardVersion (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getnonce.html">getnonce (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getoptime.html">getoptime (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/group.html">group</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/isMaster.html">isMaster</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/isSelf.html">isSelf (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/isdbgrid.html">isdbgrid</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/listCommands.html">listCommands</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/listDatabases.html">listDatabases</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/listShards.html">listShards</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/logRotate.html">logRotate</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/logout.html">logout</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/mapReduce.html">mapReduce</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/medianKey.html">medianKey (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/moveChunk.html">moveChunk</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/movePrimary.html">movePrimary</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/netstat.html">netstat (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/ping.html">ping</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/profile.html">profile</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/reIndex.html">reIndex</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/removeShard.html">removeShard</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/renameCollection.html">renameCollection</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/repairDatabase.html">repairDatabase</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/replSetFreeze.html">replSetFreeze</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/replSetGetStatus.html">replSetGetStatus</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/replSetInitiate.html">replSetInitiate</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/replSetMaintenance.html">replSetMaintenance</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/replSetReconfig.html">replSetReconfig</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/replSetStepDown.html">replSetStepDown</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/replSetSyncFrom.html">replSetSyncFrom</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/resetError.html">resetError</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/resync.html">resync</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/serverStatus.html">serverStatus</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/setParameter.html">setParameter</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/setShardVersion.html">setShardVersion</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/shardCollection.html">shardCollection</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/shardingState.html">shardingState</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/shutdown.html">shutdown</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/split.html">split</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/splitChunk.html">splitChunk</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/splitVector.html">splitVector</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/top.html">top</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/touch.html">touch</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/unsetSharding.html">unsetSharding (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/validate.html">validate</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/whatsmyuri.html">whatsmyuri (internal)</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/method.html">JavaScript Methods</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/method/Date.html">Date()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/Mongo.html">Mongo()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/Mongo.getDB.html">Mongo.getDB()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/ObjectId.getTimestamp.html">ObjectId.getTimestamp()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/ObjectId.toString.html">ObjectId.toString()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/ObjectId.valueOf.html">ObjectId.valueOf()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cat.html">cat()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cd.html">cd()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/connect.html">connect()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/copyDbpath.html">copyDbpath()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.addOption.html">cursor.addOption()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.batchSize.html">cursor.batchSize()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.count.html">cursor.count()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.explain.html">cursor.explain()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.forEach.html">cursor.forEach()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.hasNext.html">cursor.hasNext()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.hint.html">cursor.hint()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.limit.html">cursor.limit()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.map.html">cursor.map()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.max.html">cursor.max()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.min.html">cursor.min()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.next.html">cursor.next()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.objsLeftInBatch.html">cursor.objsLeftInBatch()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.readPref.html">cursor.readPref()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.showDiskLoc.html">cursor.showDiskLoc()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.size.html">cursor.size()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.skip.html">cursor.skip()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.snapshot.html">cursor.snapshot()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.sort.html">cursor.sort()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.toArray.html">cursor.toArray()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.addUser.html">db.addUser()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.auth.html">db.auth()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.cloneCollection.html">db.cloneCollection()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.cloneDatabase.html">db.cloneDatabase()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.aggregate.html">db.collection.aggregate()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.copyTo.html">db.collection.copyTo()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.count.html">db.collection.count()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.createIndex.html">db.collection.createIndex()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.dataSize.html">db.collection.dataSize()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.distinct.html">db.collection.distinct()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.drop.html">db.collection.drop()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.dropIndex.html">db.collection.dropIndex()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.dropIndexes.html">db.collection.dropIndexes()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.ensureIndex.html">db.collection.ensureIndex()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.find.html">db.collection.find()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.findAndModify.html">db.collection.findAndModify()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.findOne.html">db.collection.findOne()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.getIndexes.html">db.collection.getIndexes()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.getShardDistribution.html">db.collection.getShardDistribution()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.getShardVersion.html">db.collection.getShardVersion()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.group.html">db.collection.group()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.insert.html">db.collection.insert()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.isCapped.html">db.collection.isCapped()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.mapReduce.html">db.collection.mapReduce()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.reIndex.html">db.collection.reIndex()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.remove.html">db.collection.remove()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.renameCollection.html">db.collection.renameCollection()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.save.html">db.collection.save()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.stats.html">db.collection.stats()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.storageSize.html">db.collection.storageSize()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.totalIndexSize.html">db.collection.totalIndexSize()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.totalSize.html">db.collection.totalSize()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.update.html">db.collection.update()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.validate.html">db.collection.validate()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.commandHelp.html">db.commandHelp()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.copyDatabase.html">db.copyDatabase()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.createCollection.html">db.createCollection()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.currentOp.html">db.currentOp()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.dropDatabase.html">db.dropDatabase()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.eval.html">db.eval()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.fsyncLock.html">db.fsyncLock()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.fsyncUnlock.html">db.fsyncUnlock()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getCollection.html">db.getCollection()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getCollectionNames.html">db.getCollectionNames()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getLastError.html">db.getLastError()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getLastErrorObj.html">db.getLastErrorObj()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getMongo.html">db.getMongo()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getName.html">db.getName()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getPrevError.html">db.getPrevError()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getProfilingLevel.html">db.getProfilingLevel()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getProfilingStatus.html">db.getProfilingStatus()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getReplicationInfo.html">db.getReplicationInfo()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getSiblingDB.html">db.getSiblingDB()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.help.html">db.help()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.isMaster.html">db.isMaster()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.killOp.html">db.killOp()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.listCommands.html">db.listCommands()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.loadServerScripts.html">db.loadServerScripts()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.logout.html">db.logout()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.printCollectionStats.html">db.printCollectionStats()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.printReplicationInfo.html">db.printReplicationInfo()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.printShardingStatus.html">db.printShardingStatus()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.printSlaveReplicationInfo.html">db.printSlaveReplicationInfo()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.removeUser.html">db.removeUser()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.repairDatabase.html">db.repairDatabase()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.resetError.html">db.resetError()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.runCommand.html">db.runCommand()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.serverBuildInfo.html">db.serverBuildInfo()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.serverStatus.html">db.serverStatus()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.setProfilingLevel.html">db.setProfilingLevel()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.shutdownServer.html">db.shutdownServer()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.stats.html">db.stats()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.version.html">db.version()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/fuzzFile.html">fuzzFile()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/getHostName.html">getHostName()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/getMemInfo.html">getMemInfo</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/hostname.html">hostname()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/isWindows.html">_isWindows()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/listFiles.html">listFiles()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/load.html">load()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/ls.html">ls()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/md5sumFile.html">md5sumFile()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/mkdir.html">mkdir()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/pwd.html">pwd()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/quit.html">quit()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rand.html">rand()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/removeFile.html">removeFile()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/resetDbpath.html">resetDbpath()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.add.html">rs.add()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.addArb.html">rs.addArb()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.conf.html">rs.conf()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.freeze.html">rs.freeze()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.help.html">rs.help()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.initiate.html">rs.initiate()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.reconfig.html">rs.reconfig()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.remove.html">rs.remove()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.status.html">rs.status()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.stepDown.html">rs.stepDown()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.syncFrom.html">rs.syncFrom()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.addShard.html">sh.addShard()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.addShardTag.html">sh.addShardTag()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.addTagRange.html">sh.addTagRange()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.disableBalancing.html">sh.disableBalancing()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.enableBalancing.html">sh.enableBalancing()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.enableSharding.html">sh.enableSharding()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.getBalancerHost.html">sh.getBalancerHost()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.getBalancerState.html">sh.getBalancerState()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.help.html">sh.help()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.isBalancerRunning.html">sh.isBalancerRunning()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.moveChunk.html">sh.moveChunk()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.removeShardTag.html">sh.removeShardTag()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.setBalancerState.html">sh.setBalancerState()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.shardCollection.html">sh.shardCollection()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.splitAt.html">sh.splitAt()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.splitFind.html">sh.splitFind()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.startBalancer.html">sh.startBalancer()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.status.html">sh.status()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.stopBalancer.html">sh.stopBalancer()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.waitForBalancer.html">sh.waitForBalancer()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.waitForBalancerOff.html">sh.waitForBalancerOff()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.waitForPingChange.html">sh.waitForPingChange()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/srand.html">_srand()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/version.html">version()</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/sql-comparison.html">SQL to MongoDB Mapping Chart</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/sql-aggregation-comparison.html">SQL to Aggregation Mapping Chart</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/operators.html">Query, Update, and Projection Operators Quick Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/meta-query-operators.html">Meta Query Operator Quick Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/commands.html">Database Commands Quick Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/javascript.html"><code class="docutils literal"><span class="pre">mongo</span></code> Shell JavaScript Quick Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/components.html">MongoDB Package Components</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/mongod.html"><code class="docutils literal"><span class="pre">mongod</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongos.html"><code class="docutils literal"><span class="pre">mongos</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongo.html"><code class="docutils literal"><span class="pre">mongo</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongod.exe.html"><code class="docutils literal"><span class="pre">mongod.exe</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongos.exe.html"><code class="docutils literal"><span class="pre">mongos.exe</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongodump.html"><code class="docutils literal"><span class="pre">mongodump</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongorestore.html"><code class="docutils literal"><span class="pre">mongorestore</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/bsondump.html"><code class="docutils literal"><span class="pre">bsondump</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongooplog.html"><code class="docutils literal"><span class="pre">mongooplog</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongoimport.html"><code class="docutils literal"><span class="pre">mongoimport</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongoexport.html"><code class="docutils literal"><span class="pre">mongoexport</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongostat.html"><code class="docutils literal"><span class="pre">mongostat</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongotop.html"><code class="docutils literal"><span class="pre">mongotop</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongosniff.html"><code class="docutils literal"><span class="pre">mongosniff</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongoperf.html"><code class="docutils literal"><span class="pre">mongoperf</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongofiles.html"><code class="docutils literal"><span class="pre">mongofiles</span></code></a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/configuration-options.html">Configuration File Options</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/connection-string.html">Connection String URI Format</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/server-status-index.html">Server Status Output Index</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/server-status.html">Server Status Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/database-statistics.html">Database Statistics Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/collection-statistics.html">Collection Statistics Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/collection-validation.html">Collection Validation Data</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/connection-pool-stats.html">Connection Pool Statistics Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/replica-status.html">Replica Set Status Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/replica-configuration.html">Replica Set Configuration</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/replication-info.html">Replication Info Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/current-op.html">Current Operation Reporting</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/database-profiler.html">Database Profiler Output</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/explain.html">Explain Output</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/exit-codes.html">Exit Codes and Statuses</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/config-database.html">Config Database Contents</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/local-database.html">The <code class="docutils literal"><span class="pre">local</span></code> Database</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/system-collections.html">System Collections</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/limits.html">MongoDB Limits and Thresholds</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/mongodb-extended-json.html">MongoDB Extended JSON</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/glossary.html">Glossary</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/2.2.html">Release Notes for MongoDB 2.2</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/2.0.html">Release Notes for MongoDB 2.0</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/1.8.html">Release Notes for MongoDB 1.8</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/1.6.html">Release Notes for MongoDB 1.6</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/1.4.html">Release Notes for MongoDB 1.4</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/1.2.html">Release Notes for MongoDB 1.2.x</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/drivers-write-concern.html">Default Write Concern Change</a></li></ul></li></ul>


    </div>
  </div>
           
         </aside>

   </div>

    <div id="main-column" class="main-column">

    <span id="showNav" class="showNav">Navigation</span>

      
            <div class="alert alert-warning">
              <span class="alert-message">This version of the documentation is archived and no longer supported.</span>
            </div>
      
        <div class="document">
            <div class="documentwrapper"><div class="bodywrapper">
              <div class="body" data-pagename="core/indexes">
                   <a class="edit-link" href="https://github.com/mongodb/docs/blob/v2.2/source/core/indexes.txt" target="_blank" title="Edit core/indexes.txt on GitHub">
    
      <span class="icon-edit"></span>
    
  </a>
                

                
  <div class="bc">
    
      <ul>
          <li><a href="../indexes.html">Indexes</a><span class="bcpoint"> &gt; </span></li>
            <li>Indexing Overview</li> 
      </ul>
    
    
  </div>
                
                  <div class="section" id="indexing-overview">
<h1>Indexing Overview<a class="headerlink" href="#indexing-overview" title="Permalink to this headline">&para;</a></h1>
<div class="contents twocols local topic" id="on-this-page">
<p class="topic-title first">On this page</p>
<ul class="simple">
<li><a class="reference internal" href="#synopsis" id="id8">Synopsis</a></li>
<li><a class="reference internal" href="#index-types" id="id9">Index Types</a></li>
<li><a class="reference internal" href="#index-creation-options" id="id10">Index Creation Options</a></li>
<li><a class="reference internal" href="#index-feature" id="id11">Index Features</a></li>
<li><a class="reference internal" href="#index-behaviors-and-limitations" id="id12">Index Behaviors and Limitations</a></li>
</ul>
</div>
<p>This document provides an overview of indexes in MongoDB, including
index types and creation options. For operational guidelines and
procedures, see the <a class="reference internal" href="../administration/indexes.html"><span class="doc">Indexing Operations</span></a> document. For
strategies and practical approaches, see the
<a class="reference internal" href="../applications/indexes.html"><span class="doc">Indexing Strategies</span></a> document.</p>
<div class="section" id="synopsis">
<span id="index-overview-synopsis"></span><span id="index-0"></span><h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">&para;</a></h2>
<p>An index is a data structure that allows you to quickly locate documents
based on the values stored in certain specified fields. Fundamentally,
indexes in MongoDB are similar to indexes in other database systems.
MongoDB supports indexes on any field or sub-field contained in
documents within a MongoDB collection.</p>
<p>MongoDB indexes have the following core features:</p>
<ul>
<li><p class="first">MongoDB defines indexes on a per-<a class="reference internal" href="../reference/glossary.html#term-collection"><span class="xref std std-term">collection</span></a> level.</p>
</li>
<li><p class="first">You can create indexes on a single field or on multiple fields using
a <a class="reference internal" href="#index-type-compound"><span class="std std-ref">compound index</span></a>.</p>
</li>
<li><p class="first">Indexes enhance query performance, often dramatically.
However, each index also incurs some overhead for every write
operation.
Consider the queries, the frequency of these queries, the size of
your working set, the insert load, and your application&rsquo;s
requirements as you create indexes in your MongoDB environment.</p>
</li>
<li><p class="first">All MongoDB indexes use a B-tree data structure. MongoDB can use
these representation of the data to optimize query responses.</p>
</li>
<li><p class="first">Every query, including update operations, use one and only one
index. The <a class="reference internal" href="read-operations.html#read-operations-query-optimization"><span class="std std-ref">query optimizer</span></a>
selects the index empirically by
occasionally running alternate query plans and by selecting the plan
with the best response time for each query type. You can override
the query optimizer using the <a class="reference internal" href="../reference/method/cursor.hint.html#cursor.hint" title="cursor.hint()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">cursor.hint()</span></code></a> method.</p>
</li>
<li><p class="first">An index &ldquo;covers&rdquo; a query if:</p>
<ul class="simple">
<li>all the fields in the <a class="reference internal" href="read-operations.html#read-operations-query-document"><span class="std std-ref">query</span></a>
are part of that index, <strong>and</strong></li>
<li>all the fields returned in the documents that match the query are
in the same index.</li>
</ul>
<p>When an index covers a query, the server can both match the
<a class="reference internal" href="read-operations.html#read-operations-query-document"><span class="std std-ref">query conditions</span></a> <strong>and</strong>
return the results using only the index; MongoDB does not need to
look at the documents, only the index, to fulfill the query.
Querying the index can be faster than querying the documents outside
of the index.</p>
<p>See <a class="reference internal" href="../applications/indexes.html#indexes-covered-queries"><span class="std std-ref">Create Indexes that Support Covered Queries</span></a> for more information.</p>
</li>
<li><p class="first">Using queries with good index coverage reduces the number of full
documents that MongoDB needs to store in memory, thus maximizing database
performance and throughput.</p>
</li>
<li><p class="first">If an update does not change the size of a document or cause the
document to outgrow its allocated area, then MongoDB will update an
index <em>only if</em> the indexed fields have changed. This improves
performance. Note that if the document has grown and must move, all
index keys must then update.</p>
</li>
</ul>
</div>
<div class="section" id="index-types">
<span id="index-1"></span><span id="id1"></span><h2>Index Types<a class="headerlink" href="#index-types" title="Permalink to this headline">&para;</a></h2>
<p>This section enumerates the types of indexes available in MongoDB.
For all collections, MongoDB creates the default <a class="reference internal" href="#index-type-id"><span class="std std-ref">_id index</span></a>. You can create additional indexes with the
<a class="reference internal" href="../reference/method/db.collection.ensureIndex.html#db.collection.ensureIndex" title="db.collection.ensureIndex()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">ensureIndex()</span></code></a> method on any
single field or <a class="reference internal" href="#index-type-compound"><span class="std std-ref">sequence of fields</span></a> within
any document or <a class="reference internal" href="#index-sub-document"><span class="std std-ref">sub-document</span></a>. MongoDB also
supports indexes of arrays, called <a class="reference internal" href="#index-type-multi-key"><span class="std std-ref">multi-key indexes</span></a>.</p>
<span class="target" id="index-2"></span><span class="target" id="index-3"></span><span class="target" id="index-4"></span><div class="section" id="index-type-id">
<span id="index-5"></span><span id="id-index"></span><h3>_id Index<a class="headerlink" href="#index-type-id" title="Permalink to this headline">&para;</a></h3>
<p>The <code class="docutils literal"><span class="pre">_id</span></code> index is a <a class="reference internal" href="#index-type-unique"><span class="std std-ref">unique index</span></a>
<a class="footnote-reference" href="#unique-index-report" id="id2">[1]</a> on the <code class="docutils literal"><span class="pre">_id</span></code> field, and MongoDB creates this
index by default on all collections. <a class="footnote-reference" href="#capped-collections" id="id3">[2]</a>
You cannot delete the index on <code class="docutils literal"><span class="pre">_id</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">_id</span></code> field is the <a class="reference internal" href="../reference/glossary.html#term-primary-key"><span class="xref std std-term">primary key</span></a> for the collection, and
every document <em>must</em> have a unique <code class="docutils literal"><span class="pre">_id</span></code> field. You may store any
unique value in the <code class="docutils literal"><span class="pre">_id</span></code> field. The default value of <code class="docutils literal"><span class="pre">_id</span></code> is
<a class="reference internal" href="../reference/glossary.html#term-objectid"><span class="xref std std-term">ObjectId</span></a> on every insert() &lt;db.collection.insert()` operation. An <a class="reference internal" href="../reference/glossary.html#term-objectid"><span class="xref std std-term">ObjectId</span></a>
is a 12-byte unique identifiers suitable for use as the value of an
<code class="docutils literal"><span class="pre">_id</span></code> field.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In <a class="reference internal" href="../reference/glossary.html#term-sharded-cluster"><span class="xref std std-term">sharded clusters</span></a>, if you do <em>not</em> use
the <code class="docutils literal"><span class="pre">_id</span></code> field as the <a class="reference internal" href="../reference/glossary.html#term-shard-key"><span class="xref std std-term">shard key</span></a>, then your application
<strong>must</strong> ensure the uniqueness of the values in the <code class="docutils literal"><span class="pre">_id</span></code> field
to prevent errors.  This is most-often done by using a standard
auto-generated <a class="reference internal" href="../reference/glossary.html#term-objectid"><span class="xref std std-term">ObjectId</span></a>.</p>
</div>
<table class="docutils footnote" frame="void" id="unique-index-report" rules="none">
<colgroup><col class="label"/><col/></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td>Although the index on <code class="docutils literal"><span class="pre">_id</span></code> <em>is</em> unique,
the <a class="reference internal" href="../reference/method/db.collection.getIndexes.html#db.collection.getIndexes" title="db.collection.getIndexes()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">getIndexes()</span></code></a> method will
<em>not</em> print <code class="docutils literal"><span class="pre">unique:</span> <span class="pre">true</span></code> in the <a class="reference internal" href="../reference/mongo.html#bin.mongo" title="bin.mongo"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code></a> shell.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="capped-collections" rules="none">
<colgroup><col class="label"/><col/></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[2]</a></td><td>Before version 2.2 capped collections did not
have an <code class="docutils literal"><span class="pre">_id</span></code> field. In 2.2, all capped collections
have an <code class="docutils literal"><span class="pre">_id</span></code> field, except those in the <code class="docutils literal"><span class="pre">local</span></code> <a class="reference internal" href="../reference/glossary.html#term-database"><span class="xref std std-term">database</span></a>.
See the <a class="reference internal" href="../release-notes/2.2.html#id-indexes-capped-collections"><span class="std std-ref">release notes</span></a>
for more information.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="secondary-indexes">
<h3>Secondary Indexes<a class="headerlink" href="#secondary-indexes" title="Permalink to this headline">&para;</a></h3>
<p>All indexes in MongoDB are <a class="reference internal" href="../reference/glossary.html#term-secondary-index"><span class="xref std std-term">secondary indexes</span></a>. You can create indexes on any field within any document or
sub-document. Additionally, you can create compound indexes with
multiple fields, so that a single query can match multiple components
using the index while scanning fewer whole documents.</p>
<p>In general, you should create indexes that support your primary, common,
and user-facing queries. Doing so requires MongoDB to scan the fewest
number of documents possible.</p>
<p>In the <a class="reference internal" href="../reference/mongo.html#bin.mongo" title="bin.mongo"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code></a> shell, you can create an index by calling the
<a class="reference internal" href="../reference/method/db.collection.ensureIndex.html#db.collection.ensureIndex" title="db.collection.ensureIndex()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">ensureIndex()</span></code></a> method.
Arguments to <a class="reference internal" href="../reference/method/db.collection.ensureIndex.html#db.collection.ensureIndex" title="db.collection.ensureIndex()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">ensureIndex()</span></code></a>
resemble the following:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">&#34;field&#34;</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
<span class="p">{</span> <span class="s2">&#34;product.quantity&#34;</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
<span class="p">{</span> <span class="s2">&#34;product&#34;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&#34;quantity&#34;</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p>For each field in the index specify either <code class="docutils literal"><span class="pre">1</span></code> for an
ascending order or <code class="docutils literal"><span class="pre">-1</span></code> for a descending order, which represents the
order of the keys in the index. For indexes with more than one key (i.e.
<a class="reference internal" href="#index-type-compound"><span class="std std-ref">compound indexes</span></a>) the sequence of fields is
important.</p>
</div>
<div class="section" id="indexes-on-sub-documents">
<span id="index-sub-document"></span><span id="index-subdocument"></span><span id="index-sub-documents"></span><span id="index-subdocuments"></span><span id="index-7"></span><h3>Indexes on Sub-documents<a class="headerlink" href="#indexes-on-sub-documents" title="Permalink to this headline">&para;</a></h3>
<p>You can create indexes on fields that hold sub-documents as in the
following example:</p>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<p>Given the following document in the <code class="docutils literal"><span class="pre">factories</span></code> collection:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">&#34;_id&#34;</span><span class="o">:</span> <span class="nx">ObjectId</span><span class="p">(...),</span> <span class="nx">metro</span><span class="o">:</span> <span class="p">{</span> <span class="nx">city</span><span class="o">:</span> <span class="s2">&#34;New York&#34;</span><span class="p">,</span> <span class="nx">state</span><span class="o">:</span> <span class="s2">&#34;NY&#34;</span> <span class="p">}</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p>You can create an index on the <code class="docutils literal"><span class="pre">metro</span></code> key. The following queries would
then use that index, and both would return the above document:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">factories</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span> <span class="p">{</span> <span class="nx">metro</span><span class="o">:</span> <span class="p">{</span> <span class="nx">city</span><span class="o">:</span> <span class="s2">&#34;New York&#34;</span><span class="p">,</span> <span class="nx">state</span><span class="o">:</span> <span class="s2">&#34;NY&#34;</span> <span class="p">}</span> <span class="p">}</span> <span class="p">);</span>

<span class="nx">db</span><span class="p">.</span><span class="nx">factories</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span> <span class="p">{</span> <span class="nx">metro</span><span class="o">:</span> <span class="p">{</span> <span class="nx">$gte</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">city</span><span class="o">:</span> <span class="s2">&#34;New York&#34;</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<p class="last">The second query returns the document because <code class="docutils literal"><span class="pre">{</span> <span class="pre">city:</span> <span class="pre">&#34;New</span> <span class="pre">York&#34;</span>
<span class="pre">}</span></code> is less than <code class="docutils literal"><span class="pre">{</span> <span class="pre">city:</span> <span class="pre">&#34;New</span> <span class="pre">York&#34;,</span> <span class="pre">state:</span> <span class="pre">&#34;NY&#34;</span> <span class="pre">}</span></code> The order of
comparison is in ascending key order in the order the keys occur in
the <a class="reference internal" href="../reference/glossary.html#term-bson"><span class="xref std std-term">BSON</span></a> document.</p>
</div>
</div>
<div class="section" id="indexes-on-embedded-fields">
<span id="index-embedded-fields"></span><span id="index-8"></span><h3>Indexes on Embedded Fields<a class="headerlink" href="#indexes-on-embedded-fields" title="Permalink to this headline">&para;</a></h3>
<p>You can create indexes on fields in sub-documents, just as you can
index top-level fields in documents. <a class="footnote-reference" href="#sub-document-indexes" id="id4">[3]</a> These
indexes allow you to use a &ldquo;dot notation,&rdquo; to introspect into
sub-documents.</p>
<p>Consider a collection named <code class="docutils literal"><span class="pre">people</span></code> that holds documents that resemble
the following example document:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&#34;_id&#34;</span><span class="o">:</span> <span class="nx">ObjectId</span><span class="p">(...)</span>
 <span class="s2">&#34;name&#34;</span><span class="o">:</span> <span class="s2">&#34;John Doe&#34;</span>
 <span class="s2">&#34;address&#34;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&#34;street&#34;</span><span class="o">:</span> <span class="s2">&#34;Main&#34;</span>
        <span class="s2">&#34;zipcode&#34;</span><span class="o">:</span> <span class="mi">53511</span>
        <span class="s2">&#34;state&#34;</span><span class="o">:</span> <span class="s2">&#34;WI&#34;</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>You can create an index on the <code class="docutils literal"><span class="pre">address.zipcode</span></code> field, using the
following specification:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">people</span><span class="p">.</span><span class="nx">ensureIndex</span><span class="p">(</span> <span class="p">{</span> <span class="s2">&#34;address.zipcode&#34;</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<table class="docutils footnote" frame="void" id="sub-document-indexes" rules="none">
<colgroup><col class="label"/><col/></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[3]</a></td><td><a class="reference internal" href="#index-sub-documents"><span class="std std-ref">Indexes on Sub-documents</span></a>, by contrast
allow you to index fields that hold documents, including the full
content, up to the maximum <a class="reference internal" href="../reference/limits.html#Index-Size" title="Index Size"><code class="xref mongodb mongodb-limit docutils literal"><span class="pre">Index</span> <span class="pre">Size</span></code></a> of the sub-document
in the index.</td></tr>
</tbody>
</table>
<span class="target" id="index-9"></span></div>
<div class="section" id="compound-indexes">
<span id="index-type-compound"></span><span id="index-10"></span><h3>Compound Indexes<a class="headerlink" href="#compound-indexes" title="Permalink to this headline">&para;</a></h3>
<p>MongoDB supports &ldquo;compound indexes,&rdquo; where a single index structure
holds references to multiple fields within a collection&rsquo;s
documents. Consider a collection named <code class="docutils literal"><span class="pre">products</span></code> that holds documents
that resemble the following document:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="s2">&#34;_id&#34;</span><span class="o">:</span> <span class="nx">ObjectId</span><span class="p">(...)</span>
 <span class="s2">&#34;item&#34;</span><span class="o">:</span> <span class="s2">&#34;Banana&#34;</span>
 <span class="s2">&#34;category&#34;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;food&#34;</span><span class="p">,</span> <span class="s2">&#34;produce&#34;</span><span class="p">,</span> <span class="s2">&#34;grocery&#34;</span><span class="p">]</span>
 <span class="s2">&#34;location&#34;</span><span class="o">:</span> <span class="s2">&#34;4th Street Store&#34;</span>
 <span class="s2">&#34;stock&#34;</span><span class="o">:</span> <span class="mi">4</span>
 <span class="s2">&#34;type&#34;</span><span class="o">:</span> <span class="nx">cases</span>
 <span class="s2">&#34;arrival&#34;</span><span class="o">:</span> <span class="nb">Date</span><span class="p">(...)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>If most applications queries include the <code class="docutils literal"><span class="pre">item</span></code> field and a
significant number of queries will also check the <code class="docutils literal"><span class="pre">stock</span></code> field, you
can specify a single compound index to support both of these queries:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">products</span><span class="p">.</span><span class="nx">ensureIndex</span><span class="p">(</span> <span class="p">{</span> <span class="s2">&#34;item&#34;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&#34;location&#34;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&#34;stock&#34;</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p>Compound indexes support queries on any prefix of the fields in the
index. <a class="footnote-reference" href="#prefix" id="id5">[4]</a> For example, MongoDB can use the above index to
support queries that select the <code class="docutils literal"><span class="pre">item</span></code> field and to support queries
that select the <code class="docutils literal"><span class="pre">item</span></code> field <strong>and</strong> the <code class="docutils literal"><span class="pre">location</span></code> field. The
index, however, would not support queries that select the following:</p>
<ul class="simple">
<li>only the <code class="docutils literal"><span class="pre">location</span></code> field</li>
<li>only the <code class="docutils literal"><span class="pre">stock</span></code> field</li>
<li>only the <code class="docutils literal"><span class="pre">location</span></code> and <code class="docutils literal"><span class="pre">stock</span></code> fields</li>
<li>only the <code class="docutils literal"><span class="pre">item</span></code> and <code class="docutils literal"><span class="pre">stock</span></code> fields</li>
</ul>
<p>When creating an index, the number associated with a key specifies the
direction of the index. The options are <code class="docutils literal"><span class="pre">1</span></code> (ascending) and <code class="docutils literal"><span class="pre">-1</span></code>
(descending). Direction doesn&rsquo;t matter for single key indexes or for
random access retrieval but is important if you are doing sort
queries on compound indexes.</p>
<p>The order of fields in a compound index is very important. In the
previous example, the index will contain references to documents
sorted first by the values of the <code class="docutils literal"><span class="pre">item</span></code> field and, within each
value of the <code class="docutils literal"><span class="pre">item</span></code> field, sorted by the values of <code class="docutils literal"><span class="pre">location</span></code>, and
then sorted by values of the <code class="docutils literal"><span class="pre">stock</span></code> field.</p>
<table class="docutils footnote" frame="void" id="prefix" rules="none">
<colgroup><col class="label"/><col/></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[4]</a></td><td>Index prefixes are the beginning subset of fields. For
example, given the index <code class="docutils literal"><span class="pre">{</span> <span class="pre">a:</span> <span class="pre">1,</span> <span class="pre">b:</span> <span class="pre">1,</span> <span class="pre">c:</span> <span class="pre">1</span> <span class="pre">}</span></code> both <code class="docutils literal"><span class="pre">{</span> <span class="pre">a:</span> <span class="pre">1</span> <span class="pre">}</span></code>
and <code class="docutils literal"><span class="pre">{</span> <span class="pre">a:</span> <span class="pre">1,</span> <span class="pre">b:</span> <span class="pre">1</span> <span class="pre">}</span></code> are prefixes of the index.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="indexes-with-ascending-and-descending-keys">
<span id="index-ascending-and-descending"></span><span id="index-11"></span><h3>Indexes with Ascending and Descending Keys<a class="headerlink" href="#indexes-with-ascending-and-descending-keys" title="Permalink to this headline">&para;</a></h3>
<p>Indexes store references to fields in either ascending or descending
order. For single-field indexes, the order of keys doesn&rsquo;t matter,
because MongoDB can traverse the index in either direction. However,
for <a class="reference internal" href="#index-type-compound"><span class="std std-ref">compound indexes</span></a>, if you need to order results against two fields,
sometimes you need the index fields running in opposite order relative
to each other.</p>
<p>To specify an index with a descending order, use the following form:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">products</span><span class="p">.</span><span class="nx">ensureIndex</span><span class="p">(</span> <span class="p">{</span> <span class="s2">&#34;field&#34;</span><span class="o">:</span> <span class="o">-</span><span class="mi">1</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p>More typically in the context of a <a class="reference internal" href="#index-type-compound"><span class="std std-ref">compound
index</span></a>, the specification would resemble the
following prototype:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">products</span><span class="p">.</span><span class="nx">ensureIndex</span><span class="p">(</span> <span class="p">{</span> <span class="s2">&#34;fieldA&#34;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&#34;fieldB&#34;</span><span class="o">:</span> <span class="o">-</span><span class="mi">1</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p>Consider a collection of event data that includes both usernames and a
timestamp. If you want to return a list of events sorted by username
and then with the most recent events first. To create this index, use
the following command:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">ensureIndex</span><span class="p">(</span> <span class="p">{</span> <span class="s2">&#34;username&#34;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&#34;timestamp&#34;</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="multikey-indexes">
<span id="index-type-multikey"></span><span id="index-type-multi-key"></span><span id="index-12"></span><h3>Multikey Indexes<a class="headerlink" href="#multikey-indexes" title="Permalink to this headline">&para;</a></h3>
<p>If you index a field that contains an array, MongoDB indexes each
value in the array separately, in a &ldquo;multikey index.&rdquo;</p>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<p>Given the following document:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">&#34;_id&#34;</span> <span class="o">:</span> <span class="nx">ObjectId</span><span class="p">(</span><span class="s2">&#34;...&#34;</span><span class="p">),</span>
  <span class="s2">&#34;name&#34;</span> <span class="o">:</span> <span class="s2">&#34;Warm Weather&#34;</span><span class="p">,</span>
  <span class="s2">&#34;author&#34;</span> <span class="o">:</span> <span class="s2">&#34;Steve&#34;</span><span class="p">,</span>
  <span class="s2">&#34;tags&#34;</span> <span class="o">:</span> <span class="p">[</span> <span class="s2">&#34;weather&#34;</span><span class="p">,</span> <span class="s2">&#34;hot&#34;</span><span class="p">,</span> <span class="s2">&#34;record&#34;</span><span class="p">,</span> <span class="s2">&#34;april&#34;</span> <span class="p">]</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p>Then an index on the <code class="docutils literal"><span class="pre">tags</span></code> field would be a multikey index and
would include these separate entries:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">tags</span><span class="o">:</span> <span class="s2">&#34;weather&#34;</span> <span class="p">}</span>
<span class="p">{</span> <span class="nx">tags</span><span class="o">:</span> <span class="s2">&#34;hot&#34;</span> <span class="p">}</span>
<span class="p">{</span> <span class="nx">tags</span><span class="o">:</span> <span class="s2">&#34;record&#34;</span> <span class="p">}</span>
<span class="p">{</span> <span class="nx">tags</span><span class="o">:</span> <span class="s2">&#34;april&#34;</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p class="last">Queries could use the multikey index to return queries for any of
the above values.</p>
</div>
<p>You can use multikey indexes to index fields within objects embedded in
arrays, as in the following example:</p>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<p>Consider a <code class="docutils literal"><span class="pre">feedback</span></code> collection with documents in the following
form:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="s2">&#34;_id&#34;</span><span class="o">:</span> <span class="nx">ObjectId</span><span class="p">(...)</span>
 <span class="s2">&#34;title&#34;</span><span class="o">:</span> <span class="s2">&#34;Grocery Quality&#34;</span>
 <span class="s2">&#34;comments&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="nx">author_id</span><span class="o">:</span> <span class="nx">ObjectId</span><span class="p">(...)</span>
      <span class="nx">date</span><span class="o">:</span> <span class="nb">Date</span><span class="p">(...)</span>
      <span class="nx">text</span><span class="o">:</span> <span class="s2">&#34;Please expand the cheddar selection.&#34;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">author_id</span><span class="o">:</span> <span class="nx">ObjectId</span><span class="p">(...)</span>
      <span class="nx">date</span><span class="o">:</span> <span class="nb">Date</span><span class="p">(...)</span>
      <span class="nx">text</span><span class="o">:</span> <span class="s2">&#34;Please expand the mustard selection.&#34;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">author_id</span><span class="o">:</span> <span class="nx">ObjectId</span><span class="p">(...)</span>
      <span class="nx">date</span><span class="o">:</span> <span class="nb">Date</span><span class="p">(...)</span>
      <span class="nx">text</span><span class="o">:</span> <span class="s2">&#34;Please expand the olive selection.&#34;</span> <span class="p">}</span>
 <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>An index on the <code class="docutils literal"><span class="pre">comments.text</span></code> field would be a multikey index
and would add items to the index for all of the sub-documents in
the array.</p>
<p>With an index, such as <code class="docutils literal"><span class="pre">{</span> <span class="pre">comments.text:</span> <span class="pre">1</span> <span class="pre">}</span></code>, consider the
following query:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">feedback</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span> <span class="p">{</span> <span class="s2">&#34;comments.text&#34;</span><span class="o">:</span> <span class="s2">&#34;Please expand the olive selection.&#34;</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p>This would select the document, that contains the following
document in the <code class="docutils literal"><span class="pre">comments.text</span></code> array:</p>
<div class="last button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">author_id</span><span class="o">:</span> <span class="nx">ObjectId</span><span class="p">(...)</span>
  <span class="nx">date</span><span class="o">:</span> <span class="nb">Date</span><span class="p">(...)</span>
  <span class="nx">text</span><span class="o">:</span> <span class="s2">&#34;Please expand the olive selection.&#34;</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition-compound-multikey-indexes-may-only-include-one-array-field admonition">
<p class="first admonition-title">Compound Multikey Indexes May Only Include One Array Field</p>
<p>While you can create multikey <a class="reference internal" href="#index-type-compound"><span class="std std-ref">compound indexes</span></a>, at most one field in a compound index may hold
an array. For example, given an index on <code class="docutils literal"><span class="pre">{</span> <span class="pre">a:</span> <span class="pre">1,</span> <span class="pre">b:</span> <span class="pre">1</span> <span class="pre">}</span></code>, the
following documents are permissible:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nx">a</span><span class="o">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="nx">b</span><span class="o">:</span> <span class="mi">1</span><span class="p">}</span>

<span class="p">{</span><span class="nx">a</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]}</span>
</pre></div>
</div>
</div>
<p>However, the following document is impermissible, and MongoDB
cannot insert such a document into a collection with the <code class="docutils literal"><span class="pre">{a:</span> <span class="pre">1,</span>
<span class="pre">b:</span> <span class="pre">1</span> <span class="pre">}</span></code> index:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nx">a</span><span class="o">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="nx">b</span><span class="o">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]}</span>
</pre></div>
</div>
</div>
<p class="last">If you attempt to insert a such a document, MongoDB will reject the
insertion, and produce an error that says <code class="docutils literal"><span class="pre">cannot</span> <span class="pre">index</span> <span class="pre">parallel</span>
<span class="pre">arrays</span></code>. MongoDB does not index parallel arrays because they
require the index to include each value in the Cartesian product of
the compound keys, which could quickly result in incredibly large
and difficult to maintain indexes.</p>
</div>
</div>
<div class="section" id="unique-indexes">
<span id="index-type-unique"></span><span id="index-13"></span><h3>Unique Indexes<a class="headerlink" href="#unique-indexes" title="Permalink to this headline">&para;</a></h3>
<p>A unique index causes MongoDB to reject all documents that
contain a duplicate value for the indexed field. To create a unique index
on the <code class="docutils literal"><span class="pre">user_id</span></code> field of the <code class="docutils literal"><span class="pre">members</span></code> collection, use the
following operation in the <a class="reference internal" href="../reference/mongo.html#bin.mongo" title="bin.mongo"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code></a> shell:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">addresses</span><span class="p">.</span><span class="nx">ensureIndex</span><span class="p">(</span> <span class="p">{</span> <span class="s2">&#34;user_id&#34;</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">unique</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p>By default, <code class="docutils literal"><span class="pre">unique</span></code> is <code class="docutils literal"><span class="pre">false</span></code> on MongoDB indexes.</p>
<p>If you use the unique constraint on a <a class="reference internal" href="#index-type-compound"><span class="std std-ref">compound index</span></a> then MongoDB will enforce uniqueness on the
<em>combination</em> of values, rather than the individual value for any or all
values of the key.</p>
<p>If a document does not have a value for the indexed field in a unique
index, the index will store a null value for this document. MongoDB
will only permit one document without a unique value in the collection
because of this unique constraint. You can combine with the
<a class="reference internal" href="#index-type-sparse"><span class="std std-ref">sparse index</span></a> to filter these null values
from the unique index.</p>
</div>
<div class="section" id="sparse-indexes">
<span id="index-type-sparse"></span><span id="index-14"></span><h3>Sparse Indexes<a class="headerlink" href="#sparse-indexes" title="Permalink to this headline">&para;</a></h3>
<p>Sparse indexes only contain entries for documents that have the
indexed field. <a class="footnote-reference" href="#null-values-are-indexed-in-sparse-indexes" id="id6">[5]</a> Any
document that is missing the field is not indexed. The index is
&ldquo;sparse&rdquo; because of the missing documents when values are missing.</p>
<p>By contrast, non-sparse indexes contain all documents
in a collection, and store null values for documents that do not
contain the indexed field. Create a sparse index on the <code class="docutils literal"><span class="pre">xmpp_id</span></code>
field, of the <code class="docutils literal"><span class="pre">members</span></code> collection, using the following operation in
the <a class="reference internal" href="../reference/mongo.html#bin.mongo" title="bin.mongo"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code></a> shell:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">addresses</span><span class="p">.</span><span class="nx">ensureIndex</span><span class="p">(</span> <span class="p">{</span> <span class="s2">&#34;xmpp_id&#34;</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">sparse</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p>By default, <code class="docutils literal"><span class="pre">sparse</span></code> is <code class="docutils literal"><span class="pre">false</span></code> on MongoDB indexes.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Using these indexes will sometimes result in incomplete results
when filtering or sorting results, because sparse indexes are not
complete for all documents in a collection.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Do not confuse sparse indexes in MongoDB with <a class="reference external" href="http://en.wikipedia.org/wiki/Database_index#Sparse_index">block-level</a>
indexes in other databases. Think of them as dense indexes with a
specific filter.</p>
<p class="last">You can combine the sparse index option with the <a class="reference internal" href="#index-type-unique"><span class="std std-ref">unique
indexes</span></a> option so that <a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> will
reject documents that have duplicate values for a field, but that
ignore documents that do not have the key.</p>
</div>
<table class="docutils footnote" frame="void" id="null-values-are-indexed-in-sparse-indexes" rules="none">
<colgroup><col class="label"/><col/></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id6">[5]</a></td><td>All documents that
have the indexed field <em>are</em> indexed in a sparse index, even if
that field stores a null value in some documents.</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="index-creation-options">
<span id="index-operations"></span><span id="index-creation-operations"></span><span id="index-15"></span><h2>Index Creation Options<a class="headerlink" href="#index-creation-options" title="Permalink to this headline">&para;</a></h2>
<p>You specify index creation options in the second argument in
<a class="reference internal" href="../reference/method/db.collection.ensureIndex.html#db.collection.ensureIndex" title="db.collection.ensureIndex()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">ensureIndex()</span></code></a>.</p>
<p>The options <a class="reference internal" href="#index-type-sparse"><span class="std std-ref">sparse</span></a>, <a class="reference internal" href="#index-type-unique"><span class="std std-ref">unique</span></a>, and <a class="reference internal" href="#index-feature-ttl"><span class="std std-ref">TTL</span></a> affect the
kind of index that MongoDB creates. This section addresses,
<a class="reference internal" href="#index-creation-background"><span class="std std-ref">background construction</span></a> and
<a class="reference internal" href="#index-creation-duplicate-dropping"><span class="std std-ref">duplicate dropping</span></a>, which
affect how MongoDB builds the indexes.</p>
<div class="section" id="background-construction">
<span id="index-creation-background"></span><span id="index-16"></span><h3>Background Construction<a class="headerlink" href="#background-construction" title="Permalink to this headline">&para;</a></h3>
<p>By default, creating an index is a blocking operation. Building an
index on a large collection of data can take a long
time to complete. To resolve this issue, the background option can
allow you to continue to use your <a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> instance during
the index build.</p>
<p>For example, to create an index in the background of the <code class="docutils literal"><span class="pre">zipcode</span></code>
field of the <code class="docutils literal"><span class="pre">people</span></code> collection you would issue the following:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">people</span><span class="p">.</span><span class="nx">ensureIndex</span><span class="p">(</span> <span class="p">{</span> <span class="nx">zipcode</span><span class="o">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nx">background</span><span class="o">:</span> <span class="kc">true</span><span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p>By default, <code class="docutils literal"><span class="pre">background</span></code> is <code class="docutils literal"><span class="pre">false</span></code> for building MongoDB indexes.</p>
<p>You can combine the background option with other options, as in the
following:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">people</span><span class="p">.</span><span class="nx">ensureIndex</span><span class="p">(</span> <span class="p">{</span> <span class="nx">zipcode</span><span class="o">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nx">background</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">sparse</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p>Be aware of the following behaviors with background index
construction:</p>
<ul>
<li><p class="first">A <a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> instance can only build one background index per
database, at a time.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.2: </span>Before 2.2, a single <a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> instance could only build
one index at a time.</p>
</div>
</li>
<li><p class="first">The indexing operation runs in the background so that other database
operations can run while creating the index. However, the
<a class="reference internal" href="../reference/mongo.html#bin.mongo" title="bin.mongo"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code></a> shell session or connection where you are creating
the index will block until the index build is complete. Open another
connection or <a class="reference internal" href="../reference/mongo.html#bin.mongo" title="bin.mongo"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code></a> instance to continue using commands
to the database.</p>
</li>
<li><p class="first">The background index operation use an incremental approach that is
slower than the normal &ldquo;foreground&rdquo; index builds. If the index is
larger than the available RAM, then the incremental process
can take <em>much</em> longer than the foreground build.</p>
</li>
<li><p class="first">If your application includes <a class="reference internal" href="../reference/method/db.collection.ensureIndex.html#db.collection.ensureIndex" title="db.collection.ensureIndex()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">ensureIndex()</span></code></a> operations, and an index <em>doesn&rsquo;t</em>
exist for other operational concerns, building the index can have a
severe impact on the performance of the database.</p>
<p>Make sure that your application checks for the indexes at start up
using the <a class="reference internal" href="../reference/method/db.collection.getIndexes.html#db.collection.getIndexes" title="db.collection.getIndexes()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">getIndexes()</span></code></a> method
or the <a class="reference external" href="https://api.mongodb.com/">equivalent method for your driver</a> and terminates if
the proper indexes do not exist. Always build indexes in production
instances using separate application code, during designated
maintenance windows.</p>
</li>
</ul>
<div class="admonition-building-indexes-on-secondaries admonition">
<p class="first admonition-title">Building Indexes on Secondaries</p>
<p>Background index operations on a <a class="reference internal" href="../reference/glossary.html#term-replica-set"><span class="xref std std-term">replica set</span></a>
<a class="reference internal" href="../reference/glossary.html#term-primary"><span class="xref std std-term">primary</span></a> become foreground indexing operations on secondary
members of the set. All indexing operations on secondaries block
replication.</p>
<p>To build large indexes on secondaries the best approach is to
restart one secondary at a time in <a class="reference internal" href="../reference/glossary.html#term-standalone"><span class="xref std std-term">standalone</span></a> mode and build the
index. After building the index, restart as a member of the
replica set, allow it to catch up with the other members of the
set, and then build the index on the next secondary. When all the
secondaries have the new index, step down the primary, restart it
as a standalone, and build the index on the former primary.</p>
<p>Remember, the amount of time required to build the index on a
secondary node must be within the window of the <a class="reference internal" href="../reference/glossary.html#term-oplog"><span class="xref std std-term">oplog</span></a>, so
that the secondary can catch up with the primary.</p>
<p>See <a class="reference internal" href="../administration/indexes.html#index-building-replica-sets"><span class="std std-ref">Build Indexes on Replica Sets</span></a> for more information on
this process.</p>
<p>Indexes on secondary members in &ldquo;recovering&rdquo; mode are always built in
the foreground to allow them to catch up as soon as possible.</p>
<p class="last">See <a class="reference internal" href="../administration/indexes.html#index-building-replica-sets"><span class="std std-ref">Build Indexes on Replica Sets</span></a> for a complete procedure for
rebuilding indexes on secondaries.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If MongoDB is building an index in the background, you cannot
perform other administrative operations involving that collection,
including <a class="reference internal" href="../reference/command/repairDatabase.html#dbcmd.repairDatabase" title="repairDatabase"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">repairDatabase</span></code></a>, drop that collection
(i.e. <a class="reference internal" href="../reference/method/db.collection.drop.html#db.collection.drop" title="db.collection.drop()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.drop()</span></code></a>,) and
<a class="reference internal" href="../reference/command/compact.html#dbcmd.compact" title="compact"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">compact</span></code></a>. These operations will return an error during
background index builds.</p>
</div>
<p>Queries will not use these indexes until the index build is complete.</p>
<span class="target" id="index-17"></span></div>
<div class="section" id="drop-duplicates">
<span id="index-creation-duplicate-dropping"></span><span id="index-18"></span><h3>Drop Duplicates<a class="headerlink" href="#drop-duplicates" title="Permalink to this headline">&para;</a></h3>
<p>MongoDB cannot create a <a class="reference internal" href="#index-type-unique"><span class="std std-ref">unique index</span></a> on a
field that has duplicate values. To force the creation of a unique
index, you can specify the <code class="docutils literal"><span class="pre">dropDups</span></code> option, which will only index
the first occurrence of a value for the key, and delete all subsequent
values.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>As in all unique indexes, if a document does not have the indexed
field, MongoDB will include it in the index with a &ldquo;null&rdquo; value.</p>
<p class="last">If subsequent fields <em>do not</em> have the indexed field, and you have
set <code class="docutils literal"><span class="pre">{dropDups:</span> <span class="pre">true}</span></code>, MongoDB will remove these documents from
the collection when creating the index. If you combine <code class="docutils literal"><span class="pre">dropDups</span></code>
with the <a class="reference internal" href="#index-type-sparse"><span class="std std-ref">sparse</span></a> option, this index will
only include documents in the index that have the value, and the
documents without the field will remain in the database.</p>
</div>
<p>To create a unique index that drops duplicates on the <code class="docutils literal"><span class="pre">username</span></code>
field of the <code class="docutils literal"><span class="pre">accounts</span></code> collection, use a command in the following form:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">accounts</span><span class="p">.</span><span class="nx">ensureIndex</span><span class="p">(</span> <span class="p">{</span> <span class="nx">username</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">unique</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">dropDups</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Specifying <code class="docutils literal"><span class="pre">{</span> <span class="pre">dropDups:</span> <span class="pre">true</span> <span class="pre">}</span></code> will delete data from your
database. Use with extreme caution.</p>
</div>
<p>By default, <code class="docutils literal"><span class="pre">dropDups</span></code> is <code class="docutils literal"><span class="pre">false</span></code>.</p>
</div>
</div>
<div class="section" id="index-feature">
<span id="index-features"></span><span id="id7"></span><h2>Index Features<a class="headerlink" href="#index-feature" title="Permalink to this headline">&para;</a></h2>
<span class="target" id="index-19"></span><div class="section" id="ttl-indexes">
<span id="index-feature-ttl"></span><span id="index-20"></span><h3>TTL Indexes<a class="headerlink" href="#ttl-indexes" title="Permalink to this headline">&para;</a></h3>
<p>TTL indexes are special indexes that MongoDB can use to automatically
remove documents from a collection after a certain amount of
time. This is ideal for some types of information like machine
generated event data, logs, and session information that only need to
persist in a database for a limited amount of time.</p>
<p>These indexes have the following limitations:</p>
<ul class="simple">
<li><a class="reference internal" href="#index-type-compound"><span class="std std-ref">Compound indexes</span></a> are <em>not</em> supported.</li>
<li>The indexed field <strong>must</strong> be a date <a class="reference internal" href="../reference/glossary.html#term-bson-types"><span class="xref std std-term">type</span></a>.</li>
<li>If the field holds an array, and there are multiple date-typed data
in the index, the document will expire when the <em>lowest</em>
(i.e. earliest) matches the expiration threshold.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>TTL indexes expire data by removing documents in a background task
that runs <em>every 60 seconds</em>. As a result, the TTL index provides no
guarantees that expired documents will not exist in the
collection. Consider that:</p>
<ul class="last simple">
<li>Documents may remain in a collection <em>after</em> they expire and before
the background process runs.</li>
<li>The duration of the removal operations depend on the workload of
your <a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> instance.</li>
</ul>
</div>
<p>In all other respects, TTL indexes are normal indexes,
and if appropriate, MongoDB can use these
indexes to fulfill arbitrary queries.</p>
<div class="admonition-see admonition">
<p class="first admonition-title">See</p>
<p class="last"><a class="reference internal" href="../tutorial/expire-data.html"><span class="doc">Expire Data from Collections by Setting TTL</span></a></p>
</div>
<span class="target" id="index-21"></span></div>
<div class="section" id="geospatial-indexes">
<span id="index-feature-geospatial"></span><span id="index-22"></span><h3>Geospatial Indexes<a class="headerlink" href="#geospatial-indexes" title="Permalink to this headline">&para;</a></h3>
<p>MongoDB provides &ldquo;geospatial indexes&rdquo; to support location-based and
other similar queries in a two dimensional coordinate systems. For
example, use geospatial indexes when you need to take a collection of
documents that have coordinates, and return a number of options that
are &ldquo;near&rdquo; a given coordinate pair.</p>
<p>To create a geospatial index, your <a class="reference internal" href="../reference/glossary.html#term-document"><span class="xref std std-term">documents</span></a> must
have a coordinate pair. For maximum compatibility, these coordinate
pairs should be in the form of a two element array, such as <code class="docutils literal"><span class="pre">[</span> <span class="pre">x</span> <span class="pre">,</span> <span class="pre">y</span>
<span class="pre">]</span></code>. Given the field of <code class="docutils literal"><span class="pre">loc</span></code>, that held a coordinate pair, in the
collection <code class="docutils literal"><span class="pre">places</span></code>, you would create a geospatial index as follows:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">places</span><span class="p">.</span><span class="nx">ensureIndex</span><span class="p">(</span> <span class="p">{</span> <span class="nx">loc</span> <span class="o">:</span> <span class="s2">&#34;2d&#34;</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p>MongoDB will reject documents that have values in the <code class="docutils literal"><span class="pre">loc</span></code> field
beyond the minimum and maximum values.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">MongoDB permits only one geospatial index per collection. Although,
MongoDB will allow clients to create multiple geospatial indexes, a
single query can use only one index.</p>
</div>
<p>See the <a class="reference internal" href="../reference/operator/query/near.html#op._S_near" title="$near"><code class="xref mongodb mongodb-query docutils literal"><span class="pre">$near</span></code></a>, and the database command
<a class="reference internal" href="../reference/command/geoNear.html#dbcmd.geoNear" title="geoNear"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">geoNear</span></code></a> for more information on accessing geospatial
data.</p>
<span class="target" id="index-24"></span></div>
<div class="section" id="geohaystack-indexes">
<span id="index-geohaystack-index"></span><span id="index-25"></span><h3>Geohaystack Indexes<a class="headerlink" href="#geohaystack-indexes" title="Permalink to this headline">&para;</a></h3>
<p>In addition to conventional <a class="reference internal" href="#index-feature-geospatial"><span class="std std-ref">geospatial indexes</span></a>, MongoDB also provides a bucket-based
geospatial index, called &ldquo;geospatial haystack indexes.&rdquo; These indexes
support high performance queries for locations within a small area,
when the query must filter along another dimension.</p>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<p class="last">If you need to return all documents that have coordinates within 25
miles of a given point <em>and</em> have a type field value of &ldquo;museum,&rdquo; a
haystack index would be provide the best support for these queries.</p>
</div>
<p>Haystack indexes allow you to tune your bucket size to the
distribution of your data, so that in general you search only very
small regions of 2d space for a particular kind of document. These
indexes are not suited for finding the closest documents to a
particular location, when the closest documents are far away compared
to bucket size.</p>
</div>
</div>
<div class="section" id="index-behaviors-and-limitations">
<span id="index-limitations"></span><span id="index-27"></span><h2>Index Behaviors and Limitations<a class="headerlink" href="#index-behaviors-and-limitations" title="Permalink to this headline">&para;</a></h2>
<p>Be aware of the following behaviors and limitations:</p>
<ul>
<li><p class="first">A collection may have no more than <a class="reference internal" href="../reference/limits.html#limit-number-of-indexes-per-collection"><span class="std std-ref">64 indexes</span></a>.</p>
</li>
<li><p class="first">Index keys can be no larger than <a class="reference internal" href="../reference/limits.html#limit-index-size"><span class="std std-ref">1024 bytes</span></a>.</p>
<blockquote>
<div><p>Documents with fields that have values greater than
this size cannot be indexed.</p>
<p>To query for documents that were too large to index, you can use a
command similar to the following:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">myCollection</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="o">&lt;</span><span class="nx">key</span><span class="o">&gt;:</span> <span class="o">&lt;</span><span class="nx">value</span> <span class="nx">too</span> <span class="nx">large</span> <span class="nx">to</span> <span class="nx">index</span><span class="o">&gt;</span><span class="p">}).</span><span class="nx">hint</span><span class="p">({</span><span class="nx">$natural</span><span class="o">:</span> <span class="mi">1</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p class="first">The name of an index, including the <a class="reference internal" href="../reference/glossary.html#term-namespace"><span class="xref std std-term">namespace</span></a> must be
shorter than <a class="reference internal" href="../reference/limits.html#limit-index-name-length"><span class="std std-ref">128 characters</span></a>.</p>
</li>
<li><p class="first">Indexes have storage requirements, and impacts insert/update speed
to some degree.</p>
</li>
<li><p class="first">Create indexes to support queries and other operations, but do not
maintain indexes that your MongoDB instance cannot or will not use.</p>
</li>
<li><p class="first">For queries with the <a class="reference internal" href="../reference/operator/query/or.html#op._S_or" title="$or"><code class="xref mongodb mongodb-query docutils literal"><span class="pre">$or</span></code></a> operator,
each clause of an <a class="reference internal" href="../reference/operator/query/or.html#op._S_or" title="$or"><code class="xref mongodb mongodb-query docutils literal"><span class="pre">$or</span></code></a> query executes in parallel, and
can each use a different index.</p>
</li>
<li><p class="first">For queries that use the <a class="reference internal" href="../reference/method/cursor.sort.html#cursor.sort" title="cursor.sort()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sort()</span></code></a> method and
use the <a class="reference internal" href="../reference/operator/query/or.html#op._S_or" title="$or"><code class="xref mongodb mongodb-query docutils literal"><span class="pre">$or</span></code></a> operator, the query <strong>cannot</strong> use the
indexes on the <a class="reference internal" href="../reference/operator/query/or.html#op._S_or" title="$or"><code class="xref mongodb mongodb-query docutils literal"><span class="pre">$or</span></code></a> fields.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">2d</span></code> <a class="reference internal" href="geospatial-indexes.html"><span class="doc">geospatial queries</span></a> do not
support queries that use the <a class="reference internal" href="../reference/operator/query/or.html#op._S_or" title="$or"><code class="xref mongodb mongodb-query docutils literal"><span class="pre">$or</span></code></a> operator.</p>
</li>
</ul>
</div>
</div>

                
    <div id="btnv">
      <span class="btn-arrow-left">&larr; &nbsp;</span>
      <a class="btn-prev-text" href="../indexes.html" title="Previous Section: Indexes"><span>Indexes</span></a>
      <a class="btn-next-text" href="../administration/indexes.html" title="Next Section: Indexing Operations"><span>Indexing Operations</span></a>
      <span class="btn-arrow-right">&nbsp;&rarr;</span>
    </div>
                  <div class="footer">
                    <div class="copyright">
                      <p>&copy; MongoDB, Inc 2008-present. MongoDB, Mongo, and the leaf logo are registered trademarks of MongoDB, Inc.</p>
                    </div>
                  </div>
              </div></div>
            </div>
        </div>
    </div>
    <div class="right-column">
      <div class="wrapper"> <div id="mongodb-docs-1">
   <script type="text/javascript">
      googletag.cmd.push(function() { googletag.display('mongodb-docs-1'); });
   </script>
</div>
            <div class="social">
               <a class="slack-icon" href="https://slackpass.io/mongo-db?jmp=docs" title="https://slackpass.io/mongo-db?jmp=docs"><i class="fab fa-slack" aria-hidden="true"></i></a>
               <a class="twitter-icon" href="https://twitter.com/MongoDB" title="https://twitter.com/MongoDB"><i class="fab fa-twitter-square"></i></a>
               <a class="youtube-icon" href="https://www.youtube.com/user/MongoDB" title="https://www.youtube.com/user/MongoDB"><i class="fab fa-youtube-square"></i></a>
               <a class="facebook-icon" href="https://www.facebook.com/mongodb" title="https://www.facebook.com/mongodb"><i class="fab fa-facebook-square"></i></a>
               <a class="stack-overflow-icon" href="https://stackoverflow.com/tags/mongodb/info" title="https://stackoverflow.com/tags/mongodb/info"><i class="fab fa-stack-overflow" aria-hidden="true"></i></a>
            </div>
        

      </div>
    </div>
    
      <div id="rating-panel"></div>
    
    <div class="clearfix"></div>
  </div>
<div id="navbar" data-navprops="{&#34;links&#34;: [{&#34;url&#34;: &#34;https://www.mongodb.com/docs/manual/&#34;,&#34;text&#34;: &#34;Server&#34;,&#34;active&#34;: true},{&#34;url&#34;: &#34;https://www.mongodb.com/docs/drivers/&#34;,&#34;text&#34;: &#34;Drivers&#34;},{&#34;url&#34;: &#34;https://www.mongodb.com/docs/cloud/&#34;,&#34;text&#34;: &#34;Cloud&#34;},{&#34;url&#34;: &#34;https://www.mongodb.com/docs/tools/&#34;,&#34;text&#34;: &#34;Tools&#34;},{&#34;url&#34;: &#34;https://www.mongodb.com/docs/guides/&#34;,&#34;text&#34;: &#34;Guides&#34;}], &#34;baseUrl&#34;: &#34;https://www.mongodb.com/docs&#34;}"></div>

  

  

  <script type="text/javascript">
  // Bootstrap array of links that should trigger a full page reload
  window.docsExcludedNav = [];
  </script>
</body></html>