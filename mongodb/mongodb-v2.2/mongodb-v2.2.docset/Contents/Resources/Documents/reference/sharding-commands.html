<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>
  <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css"/><a class="dashingAutolink" name="autolink-3622"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Sharding%20Commands%20%E2%80%94%20MongoDB%20Manual"></a><title>Sharding Commands &mdash; MongoDB Manual</title><link rel="shortcut icon" href="https://www.mongodb.com/docs/assets/favicon.ico"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
      <link rel="canonical" href="https://www.mongodb.com/docs/manual/reference/sharding-commands/"/><meta name="robots" content="index"/>
  <meta name="release" content="2.2.7"/>
  <meta name="version" content="2.2"/>
  <meta name="DC.Source" content="https://github.com/mongodb/docs/blob/v2.2/source/reference/sharding-commands.txt"/>
  <meta property="og:image" content="http://s3.amazonaws.com/info-mongodb-com/_com_assets/cms/mongodb-for-giant-ideas-bbab5c3cf8.png"/>
  <meta property="og:image:secure_url" content="https://webassets.mongodb.com/_com_assets/cms/mongodb-for-giant-ideas-bbab5c3cf8.png"/>
  
   <link rel="stylesheet" href="../_static/mongodb-docs.css" type="text/css"/>
   <link rel="stylesheet" href="../_static/pygments.css" type="text/css"/>
   <link rel="stylesheet" href="../_static/css/navbar.min.css?t=nocache" type="text/css"/>
    
    <script type="text/javascript" src="../_static/lib/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/lib/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/lib/jquery.cookie.js"></script>
    <script type="text/javascript" src="../_static/controller.js"></script>
      <link rel="search" type="application/opensearchdescription+xml" href="https://www.mongodb.com/docs/osd.xml" title="MongoDB Help"/>
<link rel="author" title="About these documents" href="../about.html"/>
<!-- <link rel="index" title="Index" href="../genindex.html" /> -->
<link rel="search" title="Search" href="../search.html"/>
<link rel="top" title="MongoDB Manual" href="../index.html"/>
<link rel="up" title="Sharding" href="../sharding.html"/>
<link rel="next" title="Application Development" href="../applications.html"/>
<link rel="prev" title="Convert a Replica Set to a Replicated Sharded Cluster" href="../tutorial/convert-replica-set-to-replicated-shard-cluster.html"/><script type="text/javascript">
   var gptadslots=[];
   var googletag = googletag || {};
   googletag.cmd = googletag.cmd || [];
   (function(){ var gads = document.createElement('script');
      gads.async = true; gads.type = 'text/javascript';
      var useSSL = 'https:' == document.location.protocol;
      gads.src = (useSSL ? 'https:' : 'http:') + '//www.googletagservices.com/tag/js/gpt.js';
      var node = document.getElementsByTagName('script')[0];
      node.parentNode.insertBefore(gads, node);
   })();
</script>

<script type="text/javascript">
   googletag.cmd.push(function() {

      var pathname = location.href;
      
      if ( (pathname.indexOf("auth") >= 0) || (pathname.indexOf("security") >= 0) ) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/security', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if ( (pathname.indexOf("crud") >= 0) ||  (pathname.indexOf("query") >= 0) || (pathname.indexOf("insert") >= 0) || (pathname.indexOf("update") >= 0) || (pathname.indexOf("remove") >= 0) || (pathname.indexOf("delete") >= 0) || (pathname.indexOf("aggregation") >= 0) ) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/crud', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("shard") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/sharding', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("replica") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/replication', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("model") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/data-modeling', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("administration") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/support', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("install-mongodb-on-windows") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/install-mongodb-on-windows', [160, 600], 'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("tutorial/getting-started") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/docs_server_gettingstarted', [160, 600], 'mongodb-docs-1').addService(googletag.pubads());
      } else {
         //Adslot 1 declaration
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      }
      googletag.pubads().enableSingleRequest();
      googletag.pubads().enableAsyncRendering();
      googletag.enableServices();
   });
</script></head>
<body data-project="manual" data-project-title="MongoDB Manual" data-branch="v2.2" data-enable-marian="1" data-eol="True">
  <!-- Google Tag Manager -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-GDFN"
                    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
  {'gtm.start':new Date().getTime(),event:'gtm.js'}
  );var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-GDFN');
  </script>
  <!-- End Google Tag Manager -->
      <script>
        window.googleSearchCx = "017213726194841070573:WMX6838984"
	window.googleSearchPlaceholder = "Search Documentation"
        window.googleSearchResultsUrl = "https://www.mongodb.com/docs/manual/search/"
      </script><div class="content" style="margin-top: 0;">

   <div id="left-column">
         <aside id="sidebar" class="sidebar">
             
  <div class="sphinxsidebar" id="sphinxsidebar">
    <div id="sphinxsidebarwrapper" class="sphinxsidebarwrapper"><a href="javascript:void(0)" class="closeNav" id="closeNav">Close &times;</a>


<h3>
  <a class="index-link" href="../index.html">MongoDB Manual</a>
</h3>


    <div class="btn-group version-sidebar">
      
        <button type="button" class="version-button dropdown-toggle" data-toggle="dropdown" disabled="" aria-disabled="disabled">
          
          
          Version 2.2
        </button>
        <a href="https://www.mongodb.com/docs/legacy">&larr; Return to Documentation</a>
      
    </div>


<ul class="current"><li class="toctree-l1"><a class="reference internal" href="../installation.html">Installing MongoDB</a><ul><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-red-hat-centos-or-fedora-linux.html">Install MongoDB on Red Hat Enterprise, CentOS, or Fedora</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-ubuntu.html">Install MongoDB on Ubuntu</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-debian.html">Install MongoDB on Debian</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-linux.html">Install MongoDB on Linux Systems</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-os-x.html">Install MongoDB on OS X</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-windows.html">Install MongoDB on Windows</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/getting-started.html">Getting Started with MongoDB Development</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../administration.html">Administration</a><ul><li class="toctree-l2"><a class="reference internal" href="../administration/configuration.html">Run-time Database Configuration</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/operational-segregation.html">Operational Segregation in MongoDB Operations and Deployments</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/journaling.html">Journaling</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/ssl.html">Use MongoDB with SSL Connections</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/snmp.html">Use MongoDB with SNMP Monitoring</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/monitoring.html">Monitoring Database Systems</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/import-export.html">Importing and Exporting MongoDB Data</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/backups.html">Backup Strategies for MongoDB Systems</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/ulimit.html">UNIX <code class="docutils literal"><span class="pre">ulimit</span></code> Settings</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/production-notes.html">Production Notes</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a><ul><li class="toctree-l2"><a class="reference internal" href="../administration/security.html">Security Practices and Management</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/vulnerability-notification.html">Vulnerability Notification</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/configure-linux-iptables-firewall.html">Configure Linux <code class="docutils literal"><span class="pre">iptables</span></code> Firewall for MongoDB</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/configure-windows-netsh-firewall.html">Configure Windows <code class="docutils literal"><span class="pre">netsh</span></code> Firewall for MongoDB</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/control-access-to-mongodb-with-authentication.html">Control Access to MongoDB Instances with Authentication</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../crud.html">Core MongoDB Operations (CRUD)</a><ul><li class="toctree-l2"><a class="reference internal" href="../core/read-operations.html">Read Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../core/write-operations.html">Write Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../core/data-modeling.html">Data Modeling Considerations for MongoDB Applications</a></li><li class="toctree-l2"><a class="reference internal" href="../core/document.html">BSON Documents</a></li><li class="toctree-l2"><a class="reference internal" href="../core/object-id.html">ObjectId</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/database-references.html">Database References</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/gridfs.html">GridFS</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/create.html">Create</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/read.html">Read</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/update.html">Update</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/delete.html">Delete</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-embedded-one-to-one-relationships-between-documents.html">Model Embedded One-to-One Relationships Between Documents</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-embedded-one-to-many-relationships-between-documents.html">Model Embedded One-to-Many Relationships Between Documents</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-referenced-one-to-many-relationships-between-documents.html">Model Referenced One-to-Many Relationships Between Documents</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-data-for-atomic-operations.html">Model Data for Atomic Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-tree-structures-with-parent-references.html">Model Tree Structures with Parent References</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-tree-structures-with-child-references.html">Model Tree Structures with Child References</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-tree-structures-with-ancestors-array.html">Model Tree Structures with an Array of Ancestors</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-tree-structures-with-materialized-paths.html">Model Tree Structures with Materialized Paths</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-tree-structures-with-nested-sets.html">Model Tree Structures with Nested Sets</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-data-for-keyword-search.html">Model Data to Support Keyword Search</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../aggregation.html">Aggregation</a><ul><li class="toctree-l2"><a class="reference internal" href="../applications/aggregation.html">Aggregation Framework</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/aggregation-examples.html">Aggregation Framework Examples</a></li><li class="toctree-l2"><a class="reference internal" href="aggregation.html">Aggregation Framework Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/map-reduce.html">Map-Reduce</a></li><li class="toctree-l2"><a class="reference internal" href="simple-aggregation.html">Simple Aggregation Methods and Commands</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../indexes.html">Indexes</a><ul><li class="toctree-l2"><a class="reference internal" href="../core/indexes.html">Indexing Overview</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/indexes.html">Indexing Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/indexes.html">Indexing Strategies</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/geospatial-indexes.html">Geospatial Queries with <code class="docutils literal"><span class="pre">2d</span></code> Indexes</a></li><li class="toctree-l2"><a class="reference internal" href="../core/geospatial-indexes.html"><code class="docutils literal"><span class="pre">2d</span></code> Geospatial Indexes</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../replication.html">Replication</a><ul><li class="toctree-l2"><a class="reference internal" href="../core/replication.html">Replica Set Fundamental Concepts</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/replica-sets.html">Replica Set Operation and Management</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/replica-set-architectures.html">Replica Set Architectures and Deployment Patterns</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/replication.html">Replica Set Considerations and Behaviors for Applications and Development</a></li><li class="toctree-l2"><a class="reference internal" href="../core/replication-internals.html">Replica Set Internals and Behaviors</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/master-slave.html">Master Slave Replication</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/deploy-replica-set.html">Deploy a Replica Set</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/convert-standalone-to-replica-set.html">Convert a Standalone to a Replica Set</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/expand-replica-set.html">Add Members to a Replica Set</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/deploy-geographically-distributed-replica-set.html">Deploy a Geographically Distributed Replica Set</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/change-oplog-size.html">Change the Size of the Oplog</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/force-member-to-be-primary.html">Force a Member to Become Primary</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/change-hostnames-in-a-replica-set.html">Change Hostnames in a Replica Set</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/convert-secondary-into-arbiter.html">Convert a Secondary to an Arbiter</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/reconfigure-replica-set-with-unavailable-members.html">Reconfigure a Replica Set with Unavailable Members</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/recover-data-following-unexpected-shutdown.html">Recover MongoDB Data following Unexpected Shutdown</a></li><li class="toctree-l2"><a class="reference internal" href="replica-commands.html">Replica Set Commands</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/replica-set-features.html">Replica Set Features and Version Compatibility</a></li></ul></li><li class="toctree-l1 current"><a class="reference internal" href="../sharding.html">Sharding</a><ul class="current"><li class="toctree-l2"><a class="reference internal" href="../core/sharded-clusters.html">Sharded Cluster Overview</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/sharded-clusters.html">Sharded Cluster Administration</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/sharded-cluster-architectures.html">Sharded Cluster Architectures</a></li><li class="toctree-l2"><a class="reference internal" href="../core/sharded-cluster-internals.html">Sharded Cluster Internals and Behaviors</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/deploy-shard-cluster.html">Deploy a Sharded Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/add-shards-to-shard-cluster.html">Add Shards to a Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/view-sharded-cluster-configuration.html">View Cluster Configuration</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/manage-sharded-cluster-config-server.html">Manage the Config Servers</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/manage-chunks-in-sharded-cluster.html">Manage Chunks in a Sharded Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/configure-sharded-cluster-balancer.html">Configure Behavior of Balancer Process in Sharded Clusters</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/manage-sharded-cluster-balancer.html">Manage Sharded Cluster Balancer</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/remove-shards-from-cluster.html">Remove Shards from an Existing Sharded Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/backup-small-sharded-cluster-with-mongodump.html">Backup a Small Sharded Cluster with <code class="docutils literal"><span class="pre">mongodump</span></code></a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/backup-sharded-cluster-with-filesystem-snapshots.html">Create Backup of a Sharded Cluster with Filesystem Snapshots</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/backup-sharded-cluster-with-database-dumps.html">Create Backup of a Sharded Cluster with Database Dumps</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/restore-single-shard.html">Restore a Single Shard</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/restore-sharded-cluster.html">Restore Sharded Clusters</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/schedule-backup-window-for-sharded-clusters.html">Schedule Backup Window for Sharded Clusters</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/tag-aware-sharding.html">Tag Aware Sharding</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/enforce-unique-keys-for-sharded-collections.html">Enforce Unique Keys for Sharded Collections</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/convert-replica-set-to-replicated-shard-cluster.html">Convert a Replica Set to a Replicated Sharded Cluster</a></li><li class="toctree-l2 current"><a class="reference internal current" href="">Sharding Commands</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../applications.html">Application Development</a><ul><li class="toctree-l2"><a class="reference internal" href="../applications/drivers.html">MongoDB Drivers and Client Libraries</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/optimization.html">Optimization Strategies for MongoDB Applications</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/server-side-javascript.html">Server-side JavaScript</a></li><li class="toctree-l2"><a class="reference internal" href="../core/capped-collections.html">Capped Collections</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/perform-two-phase-commits.html">Perform Two Phase Commits</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/create-tailable-cursor.html">Create Tailable Cursor</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/isolate-sequence-of-operations.html">Isolate Sequence of Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/create-an-auto-incrementing-field.html">Create an Auto-Incrementing Sequence Field</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/expire-data.html">Expire Data from Collections by Setting TTL</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../mongo.html">Using the <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a><ul><li class="toctree-l2"><a class="reference internal" href="../tutorial/getting-started-with-the-mongo-shell.html">Getting Started with the <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a></li><li class="toctree-l2"><a class="reference internal" href="../core/shell-types.html">Data Types in the <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/access-mongo-shell-help.html">Access the <code class="docutils literal"><span class="pre">mongo</span></code> Shell Help Information</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/write-scripts-for-the-mongo-shell.html">Write Scripts for the <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a></li><li class="toctree-l2"><a class="reference internal" href="mongo-shell.html"><code class="docutils literal"><span class="pre">mongo</span></code> Shell Quick Reference</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../tutorial.html">MongoDB Tutorials</a><ul><li class="toctree-l2"><a class="reference internal" href="../tutorial/use-database-commands.html">Use Database Commands</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/recover-data-following-unexpected-shutdown.html">Recover MongoDB Data following Unexpected Shutdown</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/manage-mongodb-processes.html">Manage <code class="docutils literal"><span class="pre">mongod</span></code> Processes</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/convert-replica-set-to-replicated-shard-cluster.html">Convert a Replica Set to a Replicated Sharded Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/copy-databases-between-instances.html">Copy Databases Between Instances</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/backup-databases-with-binary-database-dumps.html">Use <code class="docutils literal"><span class="pre">mongodump</span></code> and <code class="docutils literal"><span class="pre">mongorestore</span></code> to Backup and Restore MongoDB Databases</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/backup-databases-with-filesystem-snapshots.html">Use Filesystem Snapshots to Backup and Restore MongoDB Databases</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/manage-the-database-profiler.html">Analyze Performance of Database Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/rotate-log-files.html">Rotate Log Files</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/roll-back-to-v1.8-index.html">Build Old Style Indexes</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a><ul><li class="toctree-l2"><a class="reference internal" href="../faq/fundamentals.html">FAQ: MongoDB Fundamentals</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/developers.html">FAQ: MongoDB for Application Developers</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/mongo.html">FAQ: The <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/concurrency.html">FAQ: Concurrency</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/sharding.html">FAQ: Sharding with MongoDB</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/replica-sets.html">FAQ: Replica Sets and Replication in MongoDB</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/storage.html">FAQ: MongoDB Storage</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/indexes.html">FAQ: Indexes</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/diagnostics.html">FAQ: MongoDB Diagnostics</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a><ul><li class="toctree-l2"><a class="reference internal" href="operator.html">Query, Update, Projection, and Aggregation Operators</a><ul><li class="toctree-l3"><a class="reference internal" href="operator/query/all.html">$all</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/and.html">$and</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/box.html">$box</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/center.html">$center</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/centerSphere.html">$centerSphere</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/elemMatch.html">$elemMatch (query)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/exists.html">$exists</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/gt.html">$gt</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/gte.html">$gte</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/in.html">$in</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/lt.html">$lt</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/lte.html">$lte</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/maxDistance.html">$maxDistance</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/mod.html">$mod</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/ne.html">$ne</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/near.html">$near</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/nearSphere.html">$nearSphere</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/nin.html">$nin</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/nor.html">$nor</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/not.html">$not</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/or.html">$or</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/polygon.html">$polygon</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/regex.html">$regex</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/size.html">$size</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/type.html">$type</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/uniqueDocs.html">$uniqueDocs</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/where.html">$where</a></li><li class="toctree-l3"><a class="reference internal" href="operator/query/within.html">$within</a></li><li class="toctree-l3"><a class="reference internal" href="operator/update/addToSet.html">$addToSet</a></li><li class="toctree-l3"><a class="reference internal" href="operator/update/bit.html">$bit</a></li><li class="toctree-l3"><a class="reference internal" href="operator/update/each.html">$each</a></li><li class="toctree-l3"><a class="reference internal" href="operator/update/inc.html">$inc</a></li><li class="toctree-l3"><a class="reference internal" href="operator/update/isolated.html">$isolated</a></li><li class="toctree-l3"><a class="reference internal" href="operator/update/pop.html">$pop</a></li><li class="toctree-l3"><a class="reference internal" href="operator/update/positional.html">$ (update)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/update/pull.html">$pull</a></li><li class="toctree-l3"><a class="reference internal" href="operator/update/pullAll.html">$pullAll</a></li><li class="toctree-l3"><a class="reference internal" href="operator/update/push.html">$push</a></li><li class="toctree-l3"><a class="reference internal" href="operator/update/pushAll.html">$pushAll</a></li><li class="toctree-l3"><a class="reference internal" href="operator/update/rename.html">$rename</a></li><li class="toctree-l3"><a class="reference internal" href="operator/update/set.html">$set</a></li><li class="toctree-l3"><a class="reference internal" href="operator/update/unset.html">$unset</a></li><li class="toctree-l3"><a class="reference internal" href="operator/projection/elemMatch.html">$elemMatch (projection)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/projection/positional.html">$ (projection)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/projection/slice.html">$slice (projection)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/meta/comment.html">$comment</a></li><li class="toctree-l3"><a class="reference internal" href="operator/meta/explain.html">$explain</a></li><li class="toctree-l3"><a class="reference internal" href="operator/meta/hint.html">$hint</a></li><li class="toctree-l3"><a class="reference internal" href="operator/meta/max.html">$max</a></li><li class="toctree-l3"><a class="reference internal" href="operator/meta/maxScan.html">$maxScan</a></li><li class="toctree-l3"><a class="reference internal" href="operator/meta/min.html">$min</a></li><li class="toctree-l3"><a class="reference internal" href="operator/meta/natural.html">$natural</a></li><li class="toctree-l3"><a class="reference internal" href="operator/meta/orderby.html">$orderby</a></li><li class="toctree-l3"><a class="reference internal" href="operator/meta/query.html">$query</a></li><li class="toctree-l3"><a class="reference internal" href="operator/meta/returnKey.html">$returnKey</a></li><li class="toctree-l3"><a class="reference internal" href="operator/meta/showDiskLoc.html">$showDiskLoc</a></li><li class="toctree-l3"><a class="reference internal" href="operator/meta/snapshot.html">$snapshot</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/add.html">$add (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/addToSet.html">$addToSet (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/and.html">$and (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/avg.html">$avg (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/cmp.html">$cmp (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/cond.html">$cond (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/dayOfMonth.html">$dayOfMonth (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/dayOfWeek.html">$dayOfWeek (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/dayOfYear.html">$dayOfYear (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/divide.html">$divide (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/eq.html">$eq (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/first.html">$first (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/group.html">$group (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/gt.html">$gt (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/gte.html">$gte (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/hour.html">$hour (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/ifNull.html">$ifNull (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/last.html">$last (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/limit.html">$limit (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/lt.html">$lt (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/lte.html">$lte (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/match.html">$match (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/max.html">$max (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/min.html">$min (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/minute.html">$minute (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/mod.html">$mod (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/month.html">$month (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/multiply.html">$multiply (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/ne.html">$ne (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/not.html">$not (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/or.html">$or (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/project.html">$project (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/push.html">$push (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/second.html">$second (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/skip.html">$skip (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/sort.html">$sort (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/strcasecmp.html">$strcasecmp (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/substr.html">$substr (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/subtract.html">$subtract (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/sum.html">$sum (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/toLower.html">$toLower (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/toUpper.html">$toUpper (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/unwind.html">$unwind (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/week.html">$week (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="operator/aggregation/year.html">$year (aggregation)</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="command.html">Database Commands</a><ul><li class="toctree-l3"><a class="reference internal" href="command/addShard.html">addShard</a></li><li class="toctree-l3"><a class="reference internal" href="command/aggregate.html">aggregate</a></li><li class="toctree-l3"><a class="reference internal" href="command/applyOps.html">applyOps (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/authenticate.html">authenticate</a></li><li class="toctree-l3"><a class="reference internal" href="command/availableQueryOptions.html">availableQueryOptions (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/buildInfo.html">buildInfo</a></li><li class="toctree-l3"><a class="reference internal" href="command/checkShardingIndex.html">checkShardingIndex (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/clean.html">clean (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/clone.html">clone</a></li><li class="toctree-l3"><a class="reference internal" href="command/cloneCollection.html">cloneCollection</a></li><li class="toctree-l3"><a class="reference internal" href="command/cloneCollectionAsCapped.html">cloneCollectionAsCapped</a></li><li class="toctree-l3"><a class="reference internal" href="command/closeAllDatabases.html">closeAllDatabases (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/collMod.html">collMod</a></li><li class="toctree-l3"><a class="reference internal" href="command/collStats.html">collStats</a></li><li class="toctree-l3"><a class="reference internal" href="command/compact.html">compact</a></li><li class="toctree-l3"><a class="reference internal" href="command/connPoolStats.html">connPoolStats</a></li><li class="toctree-l3"><a class="reference internal" href="command/connPoolSync.html">connPoolSync (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/convertToCapped.html">convertToCapped</a></li><li class="toctree-l3"><a class="reference internal" href="command/copydb.html">copydb</a></li><li class="toctree-l3"><a class="reference internal" href="command/copydbgetnonce.html">copydbgetnonce (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/count.html">count</a></li><li class="toctree-l3"><a class="reference internal" href="command/create.html">create</a></li><li class="toctree-l3"><a class="reference internal" href="command/cursorInfo.html">cursorInfo</a></li><li class="toctree-l3"><a class="reference internal" href="command/dataSize.html">dataSize</a></li><li class="toctree-l3"><a class="reference internal" href="command/dbHash.html">dbHash (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/dbStats.html">dbStats</a></li><li class="toctree-l3"><a class="reference internal" href="command/diagLogging.html">diagLogging (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/distinct.html">distinct</a></li><li class="toctree-l3"><a class="reference internal" href="command/driverOIDTest.html">driverOIDTest (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/drop.html">drop</a></li><li class="toctree-l3"><a class="reference internal" href="command/dropDatabase.html">dropDatabase</a></li><li class="toctree-l3"><a class="reference internal" href="command/dropIndexes.html">dropIndexes</a></li><li class="toctree-l3"><a class="reference internal" href="command/enableSharding.html">enableSharding</a></li><li class="toctree-l3"><a class="reference internal" href="command/eval.html">eval</a></li><li class="toctree-l3"><a class="reference internal" href="command/features.html">features (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/filemd5.html">filemd5</a></li><li class="toctree-l3"><a class="reference internal" href="command/findAndModify.html">findAndModify</a></li><li class="toctree-l3"><a class="reference internal" href="command/flushRouterConfig.html">flushRouterConfig</a></li><li class="toctree-l3"><a class="reference internal" href="command/fsync.html">fsync</a></li><li class="toctree-l3"><a class="reference internal" href="command/geoNear.html">geoNear</a></li><li class="toctree-l3"><a class="reference internal" href="command/geoSearch.html">geoSearch</a></li><li class="toctree-l3"><a class="reference internal" href="command/geoWalk.html">geoWalk</a></li><li class="toctree-l3"><a class="reference internal" href="command/getCmdLineOpts.html">getCmdLineOpts</a></li><li class="toctree-l3"><a class="reference internal" href="command/getLastError.html">getLastError</a></li><li class="toctree-l3"><a class="reference internal" href="command/getLog.html">getLog</a></li><li class="toctree-l3"><a class="reference internal" href="command/getParameter.html">getParameter</a></li><li class="toctree-l3"><a class="reference internal" href="command/getPrevError.html">getPrevError</a></li><li class="toctree-l3"><a class="reference internal" href="command/getShardMap.html">getShardMap (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/getShardVersion.html">getShardVersion (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/getnonce.html">getnonce (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/getoptime.html">getoptime (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/group.html">group</a></li><li class="toctree-l3"><a class="reference internal" href="command/isMaster.html">isMaster</a></li><li class="toctree-l3"><a class="reference internal" href="command/isSelf.html">isSelf (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/isdbgrid.html">isdbgrid</a></li><li class="toctree-l3"><a class="reference internal" href="command/listCommands.html">listCommands</a></li><li class="toctree-l3"><a class="reference internal" href="command/listDatabases.html">listDatabases</a></li><li class="toctree-l3"><a class="reference internal" href="command/listShards.html">listShards</a></li><li class="toctree-l3"><a class="reference internal" href="command/logRotate.html">logRotate</a></li><li class="toctree-l3"><a class="reference internal" href="command/logout.html">logout</a></li><li class="toctree-l3"><a class="reference internal" href="command/mapReduce.html">mapReduce</a></li><li class="toctree-l3"><a class="reference internal" href="command/medianKey.html">medianKey (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/moveChunk.html">moveChunk</a></li><li class="toctree-l3"><a class="reference internal" href="command/movePrimary.html">movePrimary</a></li><li class="toctree-l3"><a class="reference internal" href="command/netstat.html">netstat (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/ping.html">ping</a></li><li class="toctree-l3"><a class="reference internal" href="command/profile.html">profile</a></li><li class="toctree-l3"><a class="reference internal" href="command/reIndex.html">reIndex</a></li><li class="toctree-l3"><a class="reference internal" href="command/removeShard.html">removeShard</a></li><li class="toctree-l3"><a class="reference internal" href="command/renameCollection.html">renameCollection</a></li><li class="toctree-l3"><a class="reference internal" href="command/repairDatabase.html">repairDatabase</a></li><li class="toctree-l3"><a class="reference internal" href="command/replSetFreeze.html">replSetFreeze</a></li><li class="toctree-l3"><a class="reference internal" href="command/replSetGetStatus.html">replSetGetStatus</a></li><li class="toctree-l3"><a class="reference internal" href="command/replSetInitiate.html">replSetInitiate</a></li><li class="toctree-l3"><a class="reference internal" href="command/replSetMaintenance.html">replSetMaintenance</a></li><li class="toctree-l3"><a class="reference internal" href="command/replSetReconfig.html">replSetReconfig</a></li><li class="toctree-l3"><a class="reference internal" href="command/replSetStepDown.html">replSetStepDown</a></li><li class="toctree-l3"><a class="reference internal" href="command/replSetSyncFrom.html">replSetSyncFrom</a></li><li class="toctree-l3"><a class="reference internal" href="command/resetError.html">resetError</a></li><li class="toctree-l3"><a class="reference internal" href="command/resync.html">resync</a></li><li class="toctree-l3"><a class="reference internal" href="command/serverStatus.html">serverStatus</a></li><li class="toctree-l3"><a class="reference internal" href="command/setParameter.html">setParameter</a></li><li class="toctree-l3"><a class="reference internal" href="command/setShardVersion.html">setShardVersion</a></li><li class="toctree-l3"><a class="reference internal" href="command/shardCollection.html">shardCollection</a></li><li class="toctree-l3"><a class="reference internal" href="command/shardingState.html">shardingState</a></li><li class="toctree-l3"><a class="reference internal" href="command/shutdown.html">shutdown</a></li><li class="toctree-l3"><a class="reference internal" href="command/split.html">split</a></li><li class="toctree-l3"><a class="reference internal" href="command/splitChunk.html">splitChunk</a></li><li class="toctree-l3"><a class="reference internal" href="command/splitVector.html">splitVector</a></li><li class="toctree-l3"><a class="reference internal" href="command/top.html">top</a></li><li class="toctree-l3"><a class="reference internal" href="command/touch.html">touch</a></li><li class="toctree-l3"><a class="reference internal" href="command/unsetSharding.html">unsetSharding (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="command/validate.html">validate</a></li><li class="toctree-l3"><a class="reference internal" href="command/whatsmyuri.html">whatsmyuri (internal)</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="method.html">JavaScript Methods</a><ul><li class="toctree-l3"><a class="reference internal" href="method/Date.html">Date()</a></li><li class="toctree-l3"><a class="reference internal" href="method/Mongo.html">Mongo()</a></li><li class="toctree-l3"><a class="reference internal" href="method/Mongo.getDB.html">Mongo.getDB()</a></li><li class="toctree-l3"><a class="reference internal" href="method/ObjectId.getTimestamp.html">ObjectId.getTimestamp()</a></li><li class="toctree-l3"><a class="reference internal" href="method/ObjectId.toString.html">ObjectId.toString()</a></li><li class="toctree-l3"><a class="reference internal" href="method/ObjectId.valueOf.html">ObjectId.valueOf()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cat.html">cat()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cd.html">cd()</a></li><li class="toctree-l3"><a class="reference internal" href="method/connect.html">connect()</a></li><li class="toctree-l3"><a class="reference internal" href="method/copyDbpath.html">copyDbpath()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.addOption.html">cursor.addOption()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.batchSize.html">cursor.batchSize()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.count.html">cursor.count()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.explain.html">cursor.explain()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.forEach.html">cursor.forEach()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.hasNext.html">cursor.hasNext()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.hint.html">cursor.hint()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.limit.html">cursor.limit()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.map.html">cursor.map()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.max.html">cursor.max()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.min.html">cursor.min()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.next.html">cursor.next()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.objsLeftInBatch.html">cursor.objsLeftInBatch()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.readPref.html">cursor.readPref()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.showDiskLoc.html">cursor.showDiskLoc()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.size.html">cursor.size()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.skip.html">cursor.skip()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.snapshot.html">cursor.snapshot()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.sort.html">cursor.sort()</a></li><li class="toctree-l3"><a class="reference internal" href="method/cursor.toArray.html">cursor.toArray()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.addUser.html">db.addUser()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.auth.html">db.auth()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.cloneCollection.html">db.cloneCollection()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.cloneDatabase.html">db.cloneDatabase()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.aggregate.html">db.collection.aggregate()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.copyTo.html">db.collection.copyTo()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.count.html">db.collection.count()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.createIndex.html">db.collection.createIndex()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.dataSize.html">db.collection.dataSize()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.distinct.html">db.collection.distinct()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.drop.html">db.collection.drop()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.dropIndex.html">db.collection.dropIndex()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.dropIndexes.html">db.collection.dropIndexes()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.ensureIndex.html">db.collection.ensureIndex()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.find.html">db.collection.find()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.findAndModify.html">db.collection.findAndModify()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.findOne.html">db.collection.findOne()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.getIndexes.html">db.collection.getIndexes()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.getShardDistribution.html">db.collection.getShardDistribution()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.getShardVersion.html">db.collection.getShardVersion()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.group.html">db.collection.group()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.insert.html">db.collection.insert()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.isCapped.html">db.collection.isCapped()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.mapReduce.html">db.collection.mapReduce()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.reIndex.html">db.collection.reIndex()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.remove.html">db.collection.remove()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.renameCollection.html">db.collection.renameCollection()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.save.html">db.collection.save()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.stats.html">db.collection.stats()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.storageSize.html">db.collection.storageSize()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.totalIndexSize.html">db.collection.totalIndexSize()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.totalSize.html">db.collection.totalSize()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.update.html">db.collection.update()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.collection.validate.html">db.collection.validate()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.commandHelp.html">db.commandHelp()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.copyDatabase.html">db.copyDatabase()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.createCollection.html">db.createCollection()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.currentOp.html">db.currentOp()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.dropDatabase.html">db.dropDatabase()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.eval.html">db.eval()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.fsyncLock.html">db.fsyncLock()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.fsyncUnlock.html">db.fsyncUnlock()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.getCollection.html">db.getCollection()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.getCollectionNames.html">db.getCollectionNames()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.getLastError.html">db.getLastError()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.getLastErrorObj.html">db.getLastErrorObj()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.getMongo.html">db.getMongo()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.getName.html">db.getName()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.getPrevError.html">db.getPrevError()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.getProfilingLevel.html">db.getProfilingLevel()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.getProfilingStatus.html">db.getProfilingStatus()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.getReplicationInfo.html">db.getReplicationInfo()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.getSiblingDB.html">db.getSiblingDB()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.help.html">db.help()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.isMaster.html">db.isMaster()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.killOp.html">db.killOp()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.listCommands.html">db.listCommands()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.loadServerScripts.html">db.loadServerScripts()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.logout.html">db.logout()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.printCollectionStats.html">db.printCollectionStats()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.printReplicationInfo.html">db.printReplicationInfo()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.printShardingStatus.html">db.printShardingStatus()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.printSlaveReplicationInfo.html">db.printSlaveReplicationInfo()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.removeUser.html">db.removeUser()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.repairDatabase.html">db.repairDatabase()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.resetError.html">db.resetError()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.runCommand.html">db.runCommand()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.serverBuildInfo.html">db.serverBuildInfo()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.serverStatus.html">db.serverStatus()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.setProfilingLevel.html">db.setProfilingLevel()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.shutdownServer.html">db.shutdownServer()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.stats.html">db.stats()</a></li><li class="toctree-l3"><a class="reference internal" href="method/db.version.html">db.version()</a></li><li class="toctree-l3"><a class="reference internal" href="method/fuzzFile.html">fuzzFile()</a></li><li class="toctree-l3"><a class="reference internal" href="method/getHostName.html">getHostName()</a></li><li class="toctree-l3"><a class="reference internal" href="method/getMemInfo.html">getMemInfo</a></li><li class="toctree-l3"><a class="reference internal" href="method/hostname.html">hostname()</a></li><li class="toctree-l3"><a class="reference internal" href="method/isWindows.html">_isWindows()</a></li><li class="toctree-l3"><a class="reference internal" href="method/listFiles.html">listFiles()</a></li><li class="toctree-l3"><a class="reference internal" href="method/load.html">load()</a></li><li class="toctree-l3"><a class="reference internal" href="method/ls.html">ls()</a></li><li class="toctree-l3"><a class="reference internal" href="method/md5sumFile.html">md5sumFile()</a></li><li class="toctree-l3"><a class="reference internal" href="method/mkdir.html">mkdir()</a></li><li class="toctree-l3"><a class="reference internal" href="method/pwd.html">pwd()</a></li><li class="toctree-l3"><a class="reference internal" href="method/quit.html">quit()</a></li><li class="toctree-l3"><a class="reference internal" href="method/rand.html">rand()</a></li><li class="toctree-l3"><a class="reference internal" href="method/removeFile.html">removeFile()</a></li><li class="toctree-l3"><a class="reference internal" href="method/resetDbpath.html">resetDbpath()</a></li><li class="toctree-l3"><a class="reference internal" href="method/rs.add.html">rs.add()</a></li><li class="toctree-l3"><a class="reference internal" href="method/rs.addArb.html">rs.addArb()</a></li><li class="toctree-l3"><a class="reference internal" href="method/rs.conf.html">rs.conf()</a></li><li class="toctree-l3"><a class="reference internal" href="method/rs.freeze.html">rs.freeze()</a></li><li class="toctree-l3"><a class="reference internal" href="method/rs.help.html">rs.help()</a></li><li class="toctree-l3"><a class="reference internal" href="method/rs.initiate.html">rs.initiate()</a></li><li class="toctree-l3"><a class="reference internal" href="method/rs.reconfig.html">rs.reconfig()</a></li><li class="toctree-l3"><a class="reference internal" href="method/rs.remove.html">rs.remove()</a></li><li class="toctree-l3"><a class="reference internal" href="method/rs.status.html">rs.status()</a></li><li class="toctree-l3"><a class="reference internal" href="method/rs.stepDown.html">rs.stepDown()</a></li><li class="toctree-l3"><a class="reference internal" href="method/rs.syncFrom.html">rs.syncFrom()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.addShard.html">sh.addShard()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.addShardTag.html">sh.addShardTag()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.addTagRange.html">sh.addTagRange()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.disableBalancing.html">sh.disableBalancing()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.enableBalancing.html">sh.enableBalancing()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.enableSharding.html">sh.enableSharding()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.getBalancerHost.html">sh.getBalancerHost()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.getBalancerState.html">sh.getBalancerState()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.help.html">sh.help()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.isBalancerRunning.html">sh.isBalancerRunning()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.moveChunk.html">sh.moveChunk()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.removeShardTag.html">sh.removeShardTag()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.setBalancerState.html">sh.setBalancerState()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.shardCollection.html">sh.shardCollection()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.splitAt.html">sh.splitAt()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.splitFind.html">sh.splitFind()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.startBalancer.html">sh.startBalancer()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.status.html">sh.status()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.stopBalancer.html">sh.stopBalancer()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.waitForBalancer.html">sh.waitForBalancer()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.waitForBalancerOff.html">sh.waitForBalancerOff()</a></li><li class="toctree-l3"><a class="reference internal" href="method/sh.waitForPingChange.html">sh.waitForPingChange()</a></li><li class="toctree-l3"><a class="reference internal" href="method/srand.html">_srand()</a></li><li class="toctree-l3"><a class="reference internal" href="method/version.html">version()</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="sql-comparison.html">SQL to MongoDB Mapping Chart</a></li><li class="toctree-l2"><a class="reference internal" href="sql-aggregation-comparison.html">SQL to Aggregation Mapping Chart</a></li><li class="toctree-l2"><a class="reference internal" href="operators.html">Query, Update, and Projection Operators Quick Reference</a></li><li class="toctree-l2"><a class="reference internal" href="meta-query-operators.html">Meta Query Operator Quick Reference</a></li><li class="toctree-l2"><a class="reference internal" href="commands.html">Database Commands Quick Reference</a></li><li class="toctree-l2"><a class="reference internal" href="javascript.html"><code class="docutils literal"><span class="pre">mongo</span></code> Shell JavaScript Quick Reference</a></li><li class="toctree-l2"><a class="reference internal" href="components.html">MongoDB Package Components</a><ul><li class="toctree-l3"><a class="reference internal" href="mongod.html"><code class="docutils literal"><span class="pre">mongod</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="mongos.html"><code class="docutils literal"><span class="pre">mongos</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="mongo.html"><code class="docutils literal"><span class="pre">mongo</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="mongod.exe.html"><code class="docutils literal"><span class="pre">mongod.exe</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="mongos.exe.html"><code class="docutils literal"><span class="pre">mongos.exe</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="mongodump.html"><code class="docutils literal"><span class="pre">mongodump</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="mongorestore.html"><code class="docutils literal"><span class="pre">mongorestore</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="bsondump.html"><code class="docutils literal"><span class="pre">bsondump</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="mongooplog.html"><code class="docutils literal"><span class="pre">mongooplog</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="mongoimport.html"><code class="docutils literal"><span class="pre">mongoimport</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="mongoexport.html"><code class="docutils literal"><span class="pre">mongoexport</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="mongostat.html"><code class="docutils literal"><span class="pre">mongostat</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="mongotop.html"><code class="docutils literal"><span class="pre">mongotop</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="mongosniff.html"><code class="docutils literal"><span class="pre">mongosniff</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="mongoperf.html"><code class="docutils literal"><span class="pre">mongoperf</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="mongofiles.html"><code class="docutils literal"><span class="pre">mongofiles</span></code></a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="configuration-options.html">Configuration File Options</a></li><li class="toctree-l2"><a class="reference internal" href="connection-string.html">Connection String URI Format</a></li><li class="toctree-l2"><a class="reference internal" href="server-status-index.html">Server Status Output Index</a></li><li class="toctree-l2"><a class="reference internal" href="server-status.html">Server Status Reference</a></li><li class="toctree-l2"><a class="reference internal" href="database-statistics.html">Database Statistics Reference</a></li><li class="toctree-l2"><a class="reference internal" href="collection-statistics.html">Collection Statistics Reference</a></li><li class="toctree-l2"><a class="reference internal" href="collection-validation.html">Collection Validation Data</a></li><li class="toctree-l2"><a class="reference internal" href="connection-pool-stats.html">Connection Pool Statistics Reference</a></li><li class="toctree-l2"><a class="reference internal" href="replica-status.html">Replica Set Status Reference</a></li><li class="toctree-l2"><a class="reference internal" href="replica-configuration.html">Replica Set Configuration</a></li><li class="toctree-l2"><a class="reference internal" href="replication-info.html">Replication Info Reference</a></li><li class="toctree-l2"><a class="reference internal" href="current-op.html">Current Operation Reporting</a></li><li class="toctree-l2"><a class="reference internal" href="database-profiler.html">Database Profiler Output</a></li><li class="toctree-l2"><a class="reference internal" href="explain.html">Explain Output</a></li><li class="toctree-l2"><a class="reference internal" href="exit-codes.html">Exit Codes and Statuses</a></li><li class="toctree-l2"><a class="reference internal" href="config-database.html">Config Database Contents</a></li><li class="toctree-l2"><a class="reference internal" href="local-database.html">The <code class="docutils literal"><span class="pre">local</span></code> Database</a></li><li class="toctree-l2"><a class="reference internal" href="system-collections.html">System Collections</a></li><li class="toctree-l2"><a class="reference internal" href="limits.html">MongoDB Limits and Thresholds</a></li><li class="toctree-l2"><a class="reference internal" href="mongodb-extended-json.html">MongoDB Extended JSON</a></li><li class="toctree-l2"><a class="reference internal" href="glossary.html">Glossary</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/2.2.html">Release Notes for MongoDB 2.2</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/2.0.html">Release Notes for MongoDB 2.0</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/1.8.html">Release Notes for MongoDB 1.8</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/1.6.html">Release Notes for MongoDB 1.6</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/1.4.html">Release Notes for MongoDB 1.4</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/1.2.html">Release Notes for MongoDB 1.2.x</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/drivers-write-concern.html">Default Write Concern Change</a></li></ul></li></ul>


    </div>
  </div>
           
         </aside>

   </div>

    <div id="main-column" class="main-column">

    <span id="showNav" class="showNav">Navigation</span>

      
            <div class="alert alert-warning">
              <span class="alert-message">This version of the documentation is archived and no longer supported.</span>
            </div>
      
        <div class="document">
            <div class="documentwrapper"><div class="bodywrapper">
              <div class="body" data-pagename="reference/sharding-commands">
                   <a class="edit-link" href="https://github.com/mongodb/docs/blob/v2.2/source/reference/sharding-commands.txt" target="_blank" title="Edit reference/sharding-commands.txt on GitHub">
    
      <span class="icon-edit"></span>
    
  </a>
                

                
  <div class="bc">
    
      <ul>
          <li><a href="../sharding.html">Sharding</a><span class="bcpoint"> &gt; </span></li>
            <li>Sharding Commands</li> 
      </ul>
    
    
  </div>
                
                  <div class="section" id="sharding-commands">
<span id="id1"></span><h1>Sharding Commands<a class="headerlink" href="#sharding-commands" title="Permalink to this headline">&para;</a></h1>
<div class="contents singlecol local topic" id="on-this-page">
<p class="topic-title first">On this page</p>
<ul class="simple">
<li><a class="reference internal" href="#javascript-methods" id="id21">JavaScript Methods</a></li>
<li><a class="reference internal" href="#database-commands" id="id22">Database Commands</a></li>
</ul>
</div>
<div class="section" id="javascript-methods">
<h2>JavaScript Methods<a class="headerlink" href="#javascript-methods" title="Permalink to this headline">&para;</a></h2>
<dl class="method">
<dt id="sh.addShard">
<code class="descclassname">sh.</code><code class="descname">addShard</code><span class="sig-paren">(</span><em>host</em><span class="sig-paren">)</span><a class="dashingAutolink" name="autolink-3603"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#sh.addShard" title="Permalink to this definition">&para;</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name"/>
<col class="field-body"/>
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> (<em>string</em>) &ndash; Specify the hostname of a database instance or a
replica set configuration.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Use this method to add a database instance or replica set to a
<a class="reference internal" href="glossary.html#term-sharded-cluster"><span class="xref std std-term">sharded cluster</span></a>. This method must be run on a
<a class="reference internal" href="mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instance. The <code class="docutils literal"><span class="pre">host</span></code> parameter can be in any
of the following forms:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-none"><div class="highlight"><pre><span></span>[hostname]
[hostname]:[port]
[set]/[hostname]
[set]/[hostname],[hostname]:port
</pre></div>
</div>
</div>
<p>You can specify shards using the hostname, or a hostname and port
combination if the shard is running on a non-standard port.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Do not use <code class="docutils literal"><span class="pre">localhost</span></code> for the hostname unless your
<a class="reference internal" href="glossary.html#term-config-database"><span class="xref std std-term">configuration server</span></a>
is also running on <code class="docutils literal"><span class="pre">localhost</span></code>.</p>
</div>
<p>The optimal configuration is to deploy shards across
<a class="reference internal" href="glossary.html#term-replica-set"><span class="xref std std-term">replica sets</span></a>.
To add a shard on a replica set you must specify the name of the
replica set and the hostname of at least one member of the replica
set. You must specify at least one member of the set, but can
specify all members in the set or another subset if
desired. <a class="reference internal" href="#sh.addShard" title="sh.addShard()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addShard()</span></code></a> takes the following form:</p>
<p>If you specify additional hostnames, all must be members of the
same replica set.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">sh</span><span class="p">.</span><span class="nx">addShard</span><span class="p">(</span><span class="s2">&#34;set-name/seed-hostname&#34;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<div class="last button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">sh</span><span class="p">.</span><span class="nx">addShard</span><span class="p">(</span><span class="s2">&#34;repl0/mongodb3.example.net:27327&#34;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The <a class="reference internal" href="#sh.addShard" title="sh.addShard()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addShard()</span></code></a> method is a helper for the
<a class="reference internal" href="#dbcmd.addShard" title="addShard"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">addShard</span></code></a> command.
The <a class="reference internal" href="#dbcmd.addShard" title="addShard"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">addShard</span></code></a> command has additional options which are
not available with this helper.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="#dbcmd.addShard" title="addShard"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">addShard</span></code></a></li>
<li><a class="reference internal" href="../administration/sharded-clusters.html"><span class="doc">Sharded Cluster Administration</span></a></li>
<li><a class="reference internal" href="../tutorial/add-shards-to-shard-cluster.html"><span class="doc">Add Shards to a Cluster</span></a></li>
<li><a class="reference internal" href="../tutorial/remove-shards-from-cluster.html"><span class="doc">Remove Shards from an Existing Sharded Cluster</span></a></li>
</ul>
</div>
</dd></dl>

<dl class="method">
<dt id="sh.enableSharding">
<code class="descclassname">sh.</code><code class="descname">enableSharding</code><span class="sig-paren">(</span><em>database</em><span class="sig-paren">)</span><a class="dashingAutolink" name="autolink-3604"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#sh.enableSharding" title="Permalink to this definition">&para;</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name"/>
<col class="field-body"/>
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>database</strong> (<em>string</em>) &ndash; Specify a database name to shard.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Enables sharding on the specified database. This does not
automatically shard any collections, but makes it possible to begin
sharding collections using <a class="reference internal" href="#sh.shardCollection" title="sh.shardCollection()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.shardCollection()</span></code></a>.</p>
</dd></dl>

<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#sh.shardCollection" title="sh.shardCollection()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.shardCollection()</span></code></a></p>
</div>
<dl class="method">
<dt id="sh.shardCollection">
<code class="descclassname">sh.</code><code class="descname">shardCollection</code><span class="sig-paren">(</span><em>namespace</em>, <em>key</em>, <em>unique</em><span class="sig-paren">)</span><a class="dashingAutolink" name="autolink-3605"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#sh.shardCollection" title="Permalink to this definition">&para;</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name"/>
<col class="field-body"/>
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>namespace</strong> (<em>string</em>) &ndash; The <a class="reference internal" href="glossary.html#term-namespace"><span class="xref std std-term">namespace</span></a> of the collection to shard.</li>
<li><strong>key</strong> (<em>document</em>) &ndash; A <a class="reference internal" href="glossary.html#term-document"><span class="xref std std-term">document</span></a> containing a <a class="reference internal" href="glossary.html#term-shard-key"><span class="xref std std-term">shard key</span></a>
that the sharding system uses to
<a class="reference internal" href="glossary.html#term-partition"><span class="xref std std-term">partition</span></a> and distribute objects among
the shards.</li>
<li><strong>unique</strong> (<em>boolean</em>) &ndash; When true, the <code class="docutils literal"><span class="pre">unique</span></code> option ensures
that the underlying index enforces
uniqueness so long as the unique index is a
prefix of the shard key.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Shards the named collection, according to the specified
<a class="reference internal" href="glossary.html#term-shard-key"><span class="xref std std-term">shard key</span></a>. Specify shard keys in the form of a <a class="reference internal" href="glossary.html#term-document"><span class="xref std std-term">document</span></a>.
Shard keys may refer to a single document field, or more typically
several document fields to form a &ldquo;compound shard key.&rdquo;</p>
<div class="admonition-see admonition">
<p class="first admonition-title">See</p>
<p class="last"><code class="xref mongodb mongodb-limit docutils literal"><span class="pre">Size</span> <span class="pre">of</span> <span class="pre">Sharded</span> <span class="pre">Collection</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sh.splitFind">
<code class="descclassname">sh.</code><code class="descname">splitFind</code><span class="sig-paren">(</span><em>namespace</em>, <em>query</em><span class="sig-paren">)</span><a class="dashingAutolink" name="autolink-3606"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#sh.splitFind" title="Permalink to this definition">&para;</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name"/>
<col class="field-body"/>
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>namespace</strong> (<em>string</em>) &ndash; Specify the namespace
(i.e. &ldquo;<code class="docutils literal"><span class="pre">&lt;database&gt;.&lt;collection&gt;</span></code>&rdquo;) of
the sharded collection that contains the
chunk to split.</li>
<li><strong>query</strong> &ndash; Specify a query to identify a document in a specific
chunk. Typically specify the <a class="reference internal" href="glossary.html#term-shard-key"><span class="xref std std-term">shard key</span></a> for a
document as the query.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Splits the chunk containing the document specified by the <code class="docutils literal"><span class="pre">query</span></code>
at its median point, creating two roughly equal chunks. Use
<a class="reference internal" href="#sh.splitAt" title="sh.splitAt()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.splitAt()</span></code></a> to split a collection in a specific point.</p>
<p>In most circumstances, you should leave chunk splitting to the
automated processes. However, when initially deploying a
<a class="reference internal" href="glossary.html#term-sharded-cluster"><span class="xref std std-term">sharded cluster</span></a> it is necessary to perform some measure of
<a class="reference internal" href="glossary.html#term-pre-splitting"><span class="xref std std-term">pre-splitting</span></a> using manual methods including
<a class="reference internal" href="#sh.splitFind" title="sh.splitFind()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.splitFind()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="sh.splitAt">
<code class="descclassname">sh.</code><code class="descname">splitAt</code><span class="sig-paren">(</span><em>namespace</em>, <em>query</em><span class="sig-paren">)</span><a class="dashingAutolink" name="autolink-3607"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#sh.splitAt" title="Permalink to this definition">&para;</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name"/>
<col class="field-body"/>
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>namespace</strong> (<em>string</em>) &ndash; Specify the namespace
(i.e. &ldquo;<code class="docutils literal"><span class="pre">&lt;database&gt;.&lt;collection&gt;</span></code>&rdquo;) of
the sharded collection that contains the
chunk to split.</li>
<li><strong>query</strong> (<em>document</em>) &ndash; Specify a query to identify a document in a
specific chunk. Typically specify the
<a class="reference internal" href="glossary.html#term-shard-key"><span class="xref std std-term">shard key</span></a> for a document as the
query.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Splits the chunk containing the document specified by the <code class="docutils literal"><span class="pre">query</span></code>
as if that document were at the &ldquo;middle&rdquo; of the collection, even if
the specified document is not the actual median of the
collection. Use this command to manually split chunks unevenly. Use
the &ldquo;<a class="reference internal" href="#sh.splitFind" title="sh.splitFind()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.splitFind()</span></code></a>&rdquo; function to split a chunk at the
actual median.</p>
<p>In most circumstances, you should leave chunk splitting to the
automated processes within MongoDB. However, when initially
deploying a <a class="reference internal" href="glossary.html#term-sharded-cluster"><span class="xref std std-term">sharded cluster</span></a> it is necessary to perform some
measure of <a class="reference internal" href="glossary.html#term-pre-splitting"><span class="xref std std-term">pre-splitting</span></a> using manual methods including
<a class="reference internal" href="#sh.splitAt" title="sh.splitAt()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.splitAt()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="sh.moveChunk">
<code class="descclassname">sh.</code><code class="descname">moveChunk</code><span class="sig-paren">(</span><em>collection</em>, <em>query</em>, <em>destination</em><span class="sig-paren">)</span><a class="dashingAutolink" name="autolink-3608"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#sh.moveChunk" title="Permalink to this definition">&para;</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name"/>
<col class="field-body"/>
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>collection</strong> (<em>string</em>) &ndash; Specify the sharded collection containing
the chunk to migrate.</li>
<li><strong>query</strong> &ndash; Specify a query to identify documents in a specific
chunk. Typically specify the <a class="reference internal" href="glossary.html#term-shard-key"><span class="xref std std-term">shard key</span></a> for a
document as the query.</li>
<li><strong>destination</strong> (<em>string</em>) &ndash; Specify the name of the shard that you
wish to move the designated chunk to.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Moves the chunk containing the documents specified by the <code class="docutils literal"><span class="pre">query</span></code>
to the shard described by <code class="docutils literal"><span class="pre">destination</span></code>.</p>
<p>This function provides a wrapper around the
<a class="reference internal" href="command/moveChunk.html#dbcmd.moveChunk" title="moveChunk"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">moveChunk</span></code></a>. In most circumstances, allow the
<a class="reference internal" href="glossary.html#term-balancer"><span class="xref std std-term">balancer</span></a> to automatically migrate <a class="reference internal" href="glossary.html#term-chunk"><span class="xref std std-term">chunks</span></a>,
and avoid calling <a class="reference internal" href="#sh.moveChunk" title="sh.moveChunk()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.moveChunk()</span></code></a> directly.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">&ldquo;<a class="reference internal" href="command/moveChunk.html#dbcmd.moveChunk" title="moveChunk"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">moveChunk</span></code></a>&rdquo; and &ldquo;<a class="reference internal" href="../sharding.html"><span class="doc">Sharding</span></a>&rdquo; for
more information.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="sh.setBalancerState">
<code class="descclassname">sh.</code><code class="descname">setBalancerState</code><span class="sig-paren">(</span><em>state</em><span class="sig-paren">)</span><a class="dashingAutolink" name="autolink-3609"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#sh.setBalancerState" title="Permalink to this definition">&para;</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name"/>
<col class="field-body"/>
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>state</strong> (<em>boolean</em>) &ndash; <code class="docutils literal"><span class="pre">true</span></code> enables the balancer if disabled,
and <code class="docutils literal"><span class="pre">false</span></code> disables the balancer.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Enables or disables the <a class="reference internal" href="glossary.html#term-balancer"><span class="xref std std-term">balancer</span></a>. Use
<a class="reference internal" href="method/sh.getBalancerState.html#sh.getBalancerState" title="sh.getBalancerState()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.getBalancerState()</span></code></a> to determine if the balancer is
currently enabled or disabled and <a class="reference internal" href="#sh.isBalancerRunning" title="sh.isBalancerRunning()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.isBalancerRunning()</span></code></a>
to check its current state.</p>
</dd></dl>

<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="method/sh.enableBalancing.html#sh.enableBalancing" title="sh.enableBalancing()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.enableBalancing()</span></code></a></li>
<li><a class="reference internal" href="method/sh.disableBalancing.html#sh.disableBalancing" title="sh.disableBalancing()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.disableBalancing()</span></code></a></li>
<li><a class="reference internal" href="method/sh.getBalancerHost.html#sh.getBalancerHost" title="sh.getBalancerHost()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.getBalancerHost()</span></code></a></li>
<li><a class="reference internal" href="method/sh.getBalancerState.html#sh.getBalancerState" title="sh.getBalancerState()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.getBalancerState()</span></code></a></li>
<li><a class="reference internal" href="#sh.isBalancerRunning" title="sh.isBalancerRunning()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.isBalancerRunning()</span></code></a></li>
<li><a class="reference internal" href="method/sh.startBalancer.html#sh.startBalancer" title="sh.startBalancer()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.startBalancer()</span></code></a></li>
<li><a class="reference internal" href="method/sh.stopBalancer.html#sh.stopBalancer" title="sh.stopBalancer()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.stopBalancer()</span></code></a></li>
<li><a class="reference internal" href="method/sh.waitForBalancer.html#sh.waitForBalancer" title="sh.waitForBalancer()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.waitForBalancer()</span></code></a></li>
<li><a class="reference internal" href="method/sh.waitForBalancerOff.html#sh.waitForBalancerOff" title="sh.waitForBalancerOff()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.waitForBalancerOff()</span></code></a></li>
</ul>
</div>
<dl class="method">
<dt id="sh.isBalancerRunning">
<code class="descclassname">sh.</code><code class="descname">isBalancerRunning</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="dashingAutolink" name="autolink-3610"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#sh.isBalancerRunning" title="Permalink to this definition">&para;</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name"/>
<col class="field-body"/>
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">boolean</td>
</tr>
</tbody>
</table>
<p>Returns true if the <a class="reference internal" href="glossary.html#term-balancer"><span class="xref std std-term">balancer</span></a> process is currently running
and migrating chunks and false if the balancer process is not
running. Use <a class="reference internal" href="method/sh.getBalancerState.html#sh.getBalancerState" title="sh.getBalancerState()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.getBalancerState()</span></code></a> to determine if the
balancer is enabled or disabled.</p>
</dd></dl>

<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="method/sh.enableBalancing.html#sh.enableBalancing" title="sh.enableBalancing()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.enableBalancing()</span></code></a></li>
<li><a class="reference internal" href="method/sh.disableBalancing.html#sh.disableBalancing" title="sh.disableBalancing()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.disableBalancing()</span></code></a></li>
<li><a class="reference internal" href="method/sh.getBalancerHost.html#sh.getBalancerHost" title="sh.getBalancerHost()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.getBalancerHost()</span></code></a></li>
<li><a class="reference internal" href="method/sh.getBalancerState.html#sh.getBalancerState" title="sh.getBalancerState()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.getBalancerState()</span></code></a></li>
<li><a class="reference internal" href="#sh.setBalancerState" title="sh.setBalancerState()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.setBalancerState()</span></code></a></li>
<li><a class="reference internal" href="method/sh.startBalancer.html#sh.startBalancer" title="sh.startBalancer()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.startBalancer()</span></code></a></li>
<li><a class="reference internal" href="method/sh.stopBalancer.html#sh.stopBalancer" title="sh.stopBalancer()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.stopBalancer()</span></code></a></li>
<li><a class="reference internal" href="method/sh.waitForBalancer.html#sh.waitForBalancer" title="sh.waitForBalancer()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.waitForBalancer()</span></code></a></li>
<li><a class="reference internal" href="method/sh.waitForBalancerOff.html#sh.waitForBalancerOff" title="sh.waitForBalancerOff()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.waitForBalancerOff()</span></code></a></li>
</ul>
</div>
<dl class="method">
<dt id="sh.status">
<code class="descclassname">sh.</code><code class="descname">status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="dashingAutolink" name="autolink-3611"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#sh.status" title="Permalink to this definition">&para;</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name"/>
<col class="field-body"/>
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A formatted report of the status of the <a class="reference internal" href="glossary.html#term-sharded-cluster"><span class="xref std std-term">sharded cluster</span></a>,
including data regarding the distribution of chunks.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sh.addShardTag">
<code class="descclassname">sh.</code><code class="descname">addShardTag</code><span class="sig-paren">(</span><em>shard</em>, <em>tag</em><span class="sig-paren">)</span><a class="dashingAutolink" name="autolink-3612"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#sh.addShardTag" title="Permalink to this definition">&para;</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 2.2.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name"/>
<col class="field-body"/>
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>shard</strong> (<em>string</em>) &ndash; Specifies the name of the shard that you want to give
a specific tag.</li>
<li><strong>tag</strong> (<em>string</em>) &ndash; Specifies the name of the tag that you want to add to
the shard.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="#sh.addShardTag" title="sh.addShardTag()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addShardTag()</span></code></a> associates a shard with a tag or
identifier.
MongoDB uses these identifiers to direct <a class="reference internal" href="glossary.html#term-chunk"><span class="xref std std-term">chunks</span></a>
that fall within a tagged range to specific shards.</p>
<p><a class="reference internal" href="#sh.addTagRange" title="sh.addTagRange()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addTagRange()</span></code></a> associates chunk ranges with tag
ranges.</p>
<p>Always issue <a class="reference internal" href="#sh.addShardTag" title="sh.addShardTag()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addShardTag()</span></code></a> when connected to a
<a class="reference internal" href="mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instance.</p>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<p>The following example adds three tags, <code class="docutils literal"><span class="pre">NYC</span></code>, <code class="docutils literal"><span class="pre">LAX</span></code>, and
<code class="docutils literal"><span class="pre">NRT</span></code>, to three shards:</p>
<div class="last button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">sh</span><span class="p">.</span><span class="nx">addShardTag</span><span class="p">(</span><span class="s2">&#34;shard0000&#34;</span><span class="p">,</span> <span class="s2">&#34;NYC&#34;</span><span class="p">)</span>
<span class="nx">sh</span><span class="p">.</span><span class="nx">addShardTag</span><span class="p">(</span><span class="s2">&#34;shard0001&#34;</span><span class="p">,</span> <span class="s2">&#34;LAX&#34;</span><span class="p">)</span>
<span class="nx">sh</span><span class="p">.</span><span class="nx">addShardTag</span><span class="p">(</span><span class="s2">&#34;shard0002&#34;</span><span class="p">,</span> <span class="s2">&#34;NRT&#34;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="#sh.addTagRange" title="sh.addTagRange()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addTagRange()</span></code></a> and</li>
<li><a class="reference internal" href="#sh.removeShardTag" title="sh.removeShardTag()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.removeShardTag()</span></code></a></li>
</ul>
</div>
</dd></dl>

<dl class="method">
<dt id="sh.addTagRange">
<code class="descclassname">sh.</code><code class="descname">addTagRange</code><span class="sig-paren">(</span><em>namespace</em>, <em>minimum</em>, <em>maximum</em>, <em>tag</em><span class="sig-paren">)</span><a class="dashingAutolink" name="autolink-3613"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#sh.addTagRange" title="Permalink to this definition">&para;</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 2.2.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name"/>
<col class="field-body"/>
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>namespace</strong> (<em>string</em>) &ndash; Specifies the namespace, in the form of
<code class="docutils literal"><span class="pre">&lt;database&gt;.&lt;collection&gt;</span></code> of the sharded
collection that you would like to tag.</li>
<li><strong>minimum</strong> (<em>document</em>) &ndash; Specifies the minimum value of the
<a class="reference internal" href="glossary.html#term-shard-key"><span class="xref std std-term">shard key</span></a> range to include in the tag.
Specify the minimum value in the form of
<code class="docutils literal"><span class="pre">&lt;fieldname&gt;:&lt;value&gt;</span></code>.
This value must be of the same BSON type or types
as the shard key.</li>
<li><strong>maximum</strong> (<em>document</em>) &ndash; Specifies the maximum value of the shard key range
to include in the tag.  Specify the maximum value
in the form of <code class="docutils literal"><span class="pre">&lt;fieldname&gt;:&lt;value&gt;</span></code>.
This value must be of the same BSON type or types
as the shard key.</li>
<li><strong>tag</strong> (<em>string</em>) &ndash; Specifies the name of the tag to attach the range
specified by the <code class="docutils literal"><span class="pre">minimum</span></code> and <code class="docutils literal"><span class="pre">maximum</span></code>
arguments to.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="#sh.addTagRange" title="sh.addTagRange()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addTagRange()</span></code></a> attaches a range of values of the shard
key to a shard tag created using the <a class="reference internal" href="#sh.addShardTag" title="sh.addShardTag()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addShardTag()</span></code></a>
method. Use this operation to ensure that the documents that exist
within the specified range exist on shards that have a matching
tag.</p>
<p>Always issue <a class="reference internal" href="#sh.addTagRange" title="sh.addTagRange()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addTagRange()</span></code></a> when connected to a
<a class="reference internal" href="mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instance.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you add a tag range to a collection using
<a class="reference internal" href="#sh.addTagRange" title="sh.addTagRange()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addTagRange()</span></code></a>, and then later drop the collection
or its database, MongoDB does not remove tag association. If you
later create a new collection with the same name, the old tag
association will apply to the new collection.</p>
</div>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<p>Given a shard key of <code class="docutils literal"><span class="pre">{STATE:1,ZIP:1}</span></code>, create a tag range covering
ZIP codes in New York State:</p>
<div class="last button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">sh</span><span class="p">.</span><span class="nx">addTagRange</span><span class="p">(</span> <span class="s2">&#34;exampledb.collection&#34;</span><span class="p">,</span>
        <span class="p">{</span> <span class="nx">STATE</span><span class="o">:</span> <span class="s2">&#34;NY&#34;</span><span class="p">,</span> <span class="nx">ZIP</span><span class="o">:</span> <span class="nx">MinKey</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nx">STATE</span><span class="o">:</span><span class="s2">&#34;NY&#34;</span><span class="p">,</span> <span class="nx">ZIP</span><span class="o">:</span> <span class="nx">MaxKey</span> <span class="p">},</span>
        <span class="s2">&#34;NY&#34;</span>
        <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#sh.addShardTag" title="sh.addShardTag()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addShardTag()</span></code></a>,
<a class="reference internal" href="#sh.removeShardTag" title="sh.removeShardTag()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.removeShardTag()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sh.removeShardTag">
<code class="descclassname">sh.</code><code class="descname">removeShardTag</code><span class="sig-paren">(</span><em>shard</em>, <em>tag</em><span class="sig-paren">)</span><a class="dashingAutolink" name="autolink-3614"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#sh.removeShardTag" title="Permalink to this definition">&para;</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 2.2.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name"/>
<col class="field-body"/>
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>shard</strong> (<em>string</em>) &ndash; Specifies the name of the shard that you want
to remove a tag from.</li>
<li><strong>tag</strong> (<em>string</em>) &ndash; Specifies the name of the tag that you want to remove
from the shard.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Removes the association between a tag and a shard.</p>
<p>Always issue <a class="reference internal" href="#sh.removeShardTag" title="sh.removeShardTag()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.removeShardTag()</span></code></a> when connected to a
<a class="reference internal" href="mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instance.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#sh.addShardTag" title="sh.addShardTag()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addShardTag()</span></code></a>,
<a class="reference internal" href="#sh.addTagRange" title="sh.addTagRange()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addTagRange()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sh.help">
<code class="descclassname">sh.</code><code class="descname">help</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="dashingAutolink" name="autolink-3615"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#sh.help" title="Permalink to this definition">&para;</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name"/>
<col class="field-body"/>
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a basic help text for all sharding related shell
functions.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="database-commands">
<h2>Database Commands<a class="headerlink" href="#database-commands" title="Permalink to this headline">&para;</a></h2>
<p>The following database commands support <a class="reference internal" href="glossary.html#term-sharded-cluster"><span class="xref std std-term">sharded clusters</span></a>.</p>
<dl class="dbcommand">
<dt id="dbcmd.addShard">
<code class="descname">addShard</code><a class="dashingAutolink" name="autolink-3616"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#dbcmd.addShard" title="Permalink to this definition">&para;</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name"/>
<col class="field-body"/>
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>hostname</strong> (<em>string</em>) &ndash; a hostname or replica-set/hostname string.</li>
<li><strong>name</strong> (<em>string</em>) &ndash; Optional. Unless specified, a name will be
automatically provided to uniquely identify
the shard.</li>
<li><strong>maxSize</strong> (<em>integer</em>) &ndash; Optional, megabytes. Limits the maximum size
of a shard.
If <code class="docutils literal"><span class="pre">maxSize</span></code> is <code class="docutils literal"><span class="pre">0</span></code> then MongoDB will not
limit the size of the shard.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Use the <a class="reference internal" href="#dbcmd.addShard" title="addShard"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">addShard</span></code></a> command to add a database instance
or replica set to a <a class="reference internal" href="glossary.html#term-sharded-cluster"><span class="xref std std-term">sharded cluster</span></a>.
You must run this command when connected a <a class="reference internal" href="mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instance.</p>
<p>The command takes the following form:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">addShard</span><span class="o">:</span> <span class="s2">&#34;&lt;hostname&gt;&lt;:port&gt;&#34;</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<div class="last button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">runCommand</span><span class="p">({</span><span class="nx">addShard</span><span class="o">:</span> <span class="s2">&#34;mongodb0.example.net:27027&#34;</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<p>Replace <code class="docutils literal"><span class="pre">&lt;hostname&gt;&lt;:port&gt;</span></code> with the hostname and port of the
database instance you want to add as a shard.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Do not use <code class="docutils literal"><span class="pre">localhost</span></code> for the hostname unless your
<a class="reference internal" href="glossary.html#term-config-database"><span class="xref std std-term">configuration server</span></a>
is also running on <code class="docutils literal"><span class="pre">localhost</span></code>.</p>
</div>
<p>The optimal configuration is to deploy shards across
<a class="reference internal" href="glossary.html#term-replica-set"><span class="xref std std-term">replica sets</span></a>.
To add a shard on a replica set you must specify the name of the
replica set and the hostname of at least one member of the replica
set. You must specify at least one member of the set, but can
specify all members in the set or another subset if
desired. <a class="reference internal" href="#dbcmd.addShard" title="addShard"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">addShard</span></code></a> takes the following form:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">addShard</span><span class="o">:</span> <span class="s2">&#34;replica-set/hostname:port&#34;</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<div class="last button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">runCommand</span><span class="p">(</span> <span class="p">{</span> <span class="nx">addShard</span><span class="o">:</span> <span class="s2">&#34;repl0/mongodb3.example.net:27327&#34;</span><span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>If you specify additional hostnames, all must be members of the same
replica set.</p>
<p>Send this command to only one <a class="reference internal" href="mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instance, it will
store shard configuration information in the <a class="reference internal" href="glossary.html#term-config-database"><span class="xref std std-term">config database</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Specify a <code class="docutils literal"><span class="pre">maxSize</span></code> when you have machines with different disk
capacities, or if you want to limit the amount of data on some
shards.</p>
<p class="last">The <code class="docutils literal"><span class="pre">maxSize</span></code> constraint prevents the <a class="reference internal" href="glossary.html#term-balancer"><span class="xref std std-term">balancer</span></a> from
migrating chunks to the shard when the value of
<a class="reference internal" href="server-status.html#serverStatus.mem.mapped" title="serverStatus.mem.mapped"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">mem.mapped</span></code></a> exceeds the value of <code class="docutils literal"><span class="pre">maxSize</span></code>.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="#sh.addShard" title="sh.addShard()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addShard()</span></code></a></li>
<li><a class="reference internal" href="../administration/sharded-clusters.html"><span class="doc">Sharded Cluster Administration</span></a></li>
<li><a class="reference internal" href="../tutorial/add-shards-to-shard-cluster.html"><span class="doc">Add Shards to a Cluster</span></a></li>
<li><a class="reference internal" href="../tutorial/remove-shards-from-cluster.html"><span class="doc">Remove Shards from an Existing Sharded Cluster</span></a></li>
</ul>
</div>
</dd></dl>

<dl class="dbcommand">
<dt id="dbcmd.listShards">
<code class="descname">listShards</code><a class="dashingAutolink" name="autolink-3617"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#dbcmd.listShards" title="Permalink to this definition">&para;</a></dt>
<dd><p>Use the <a class="reference internal" href="#dbcmd.listShards" title="listShards"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">listShards</span></code></a> command to return a list of
configured shards. The command takes the following form:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">listShards</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="dbcommand">
<dt id="dbcmd.enableSharding">
<code class="descname">enableSharding</code><a class="dashingAutolink" name="autolink-3618"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#dbcmd.enableSharding" title="Permalink to this definition">&para;</a></dt>
<dd><p>The <a class="reference internal" href="#dbcmd.enableSharding" title="enableSharding"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">enableSharding</span></code></a> command enables sharding on a per-database
level. Use the following command form:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">enableSharding</span><span class="o">:</span> <span class="s2">&#34;&lt;database name&gt;&#34;</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p>Once you&rsquo;ve enabled sharding in a database, you can use the <a class="reference internal" href="#dbcmd.shardCollection" title="shardCollection"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardCollection</span></code></a>
command to begin the process of distributing data among the shards.</p>
</dd></dl>

<dl class="dbcommand">
<dt id="dbcmd.shardCollection">
<code class="descname">shardCollection</code><a class="dashingAutolink" name="autolink-3619"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#dbcmd.shardCollection" title="Permalink to this definition">&para;</a></dt>
<dd><p>The <a class="reference internal" href="#dbcmd.shardCollection" title="shardCollection"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardCollection</span></code></a> command marks a collection for sharding and
will allow data to begin distributing among shards. You must run
<a class="reference internal" href="#dbcmd.enableSharding" title="enableSharding"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">enableSharding</span></code></a> on a database before running the
<a class="reference internal" href="#dbcmd.shardCollection" title="shardCollection"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardCollection</span></code></a> command.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">shardCollection</span><span class="o">:</span> <span class="s2">&#34;&lt;db&gt;.&lt;collection&gt;&#34;</span><span class="p">,</span> <span class="nx">key</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">shardkey</span><span class="o">&gt;</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p>This enables sharding for the collection specified by
<code class="docutils literal"><span class="pre">&lt;collection&gt;</span></code> in the database named <code class="docutils literal"><span class="pre">&lt;db&gt;</span></code>, using the key
<code class="docutils literal"><span class="pre">&lt;shardkey&gt;</span></code> to distribute documents among the
shard. <code class="docutils literal"><span class="pre">&lt;shardkey&gt;</span></code> is a document, and takes the same form as an
<a class="reference internal" href="../core/document.html#document-index-specification"><span class="std std-ref">index specification document</span></a>.</p>
<p>Choosing the right shard key to effectively distribute load among
your shards requires some planning.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../sharding.html"><span class="doc">Sharding</span></a> for more information related to
sharding. Also consider the section on <a class="reference internal" href="../core/sharded-clusters.html#sharding-shard-key"><span class="std std-ref">Shard Key Selection</span></a>
for documentation regarding shard keys.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">There&rsquo;s no easy way to disable sharding after running <a class="reference internal" href="#dbcmd.shardCollection" title="shardCollection"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardCollection</span></code></a>. In addition,
you cannot change shard keys once set. If you must convert a sharded cluster to a <a class="reference internal" href="glossary.html#term-standalone"><span class="xref std std-term">standalone</span></a>
node or <a class="reference internal" href="glossary.html#term-replica-set"><span class="xref std std-term">replica set</span></a>, you must make a single backup of the entire cluster
and then restore the backup to the standalone <a class="reference internal" href="mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a>
or the replica set..</p>
</div>
</dd></dl>

<dl class="dbcommand">
<dt id="dbcmd.shardingState">
<code class="descname">shardingState</code><a class="dashingAutolink" name="autolink-3620"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#dbcmd.shardingState" title="Permalink to this definition">&para;</a></dt>
<dd><p><a class="reference internal" href="#dbcmd.shardingState" title="shardingState"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardingState</span></code></a> is an admin command that reports if
<a class="reference internal" href="mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> is a member of a <a class="reference internal" href="glossary.html#term-sharded-cluster"><span class="xref std std-term">sharded cluster</span></a>.
<a class="reference internal" href="#dbcmd.shardingState" title="shardingState"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardingState</span></code></a> has the following prototype form:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">shardingState</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p>For <a class="reference internal" href="#dbcmd.shardingState" title="shardingState"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardingState</span></code></a> to detect that a <a class="reference internal" href="mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a>
is a member of a sharded cluster, the <a class="reference internal" href="mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> must
satisfy the following conditions:</p>
<ol class="arabic simple">
<li>the <a class="reference internal" href="mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> is a primary member of a replica set, and</li>
<li>the <a class="reference internal" href="mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> instance is a member of a sharded
cluster.</li>
</ol>
<p>If <a class="reference internal" href="#dbcmd.shardingState" title="shardingState"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardingState</span></code></a> detects that a <a class="reference internal" href="mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> is a
member of a sharded cluster, <a class="reference internal" href="#dbcmd.shardingState" title="shardingState"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardingState</span></code></a> returns a
document that resembles the following prototype:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&#34;enabled&#34;</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&#34;configServer&#34;</span> <span class="o">:</span> <span class="s2">&#34;&lt;configdb-string&gt;&#34;</span><span class="p">,</span>
  <span class="s2">&#34;shardName&#34;</span> <span class="o">:</span> <span class="s2">&#34;&lt;string&gt;&#34;</span><span class="p">,</span>
  <span class="s2">&#34;shardHost&#34;</span> <span class="o">:</span> <span class="s2">&#34;string:&#34;</span><span class="p">,</span>
  <span class="s2">&#34;versions&#34;</span> <span class="o">:</span> <span class="p">{</span>
       <span class="s2">&#34;&lt;database&gt;.&lt;collection&gt;&#34;</span> <span class="o">:</span> <span class="nx">Timestamp</span><span class="p">(</span><span class="o">&lt;</span><span class="p">...</span><span class="o">&gt;</span><span class="p">),</span>
       <span class="s2">&#34;&lt;database&gt;.&lt;collection&gt;&#34;</span> <span class="o">:</span> <span class="nx">Timestamp</span><span class="p">(</span><span class="o">&lt;</span><span class="p">...</span><span class="o">&gt;</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="s2">&#34;ok&#34;</span> <span class="o">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Otherwise, <a class="reference internal" href="#dbcmd.shardingState" title="shardingState"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardingState</span></code></a> will return the following
document:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">&#34;note&#34;</span> <span class="o">:</span> <span class="s2">&#34;from execCommand&#34;</span><span class="p">,</span> <span class="s2">&#34;ok&#34;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&#34;errmsg&#34;</span> <span class="o">:</span> <span class="s2">&#34;not master&#34;</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p>The response from <a class="reference internal" href="#dbcmd.shardingState" title="shardingState"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardingState</span></code></a> when used with a
<a class="reference internal" href="glossary.html#term-config-database"><span class="xref std std-term">config server</span></a> is:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">&#34;enabled&#34;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="s2">&#34;ok&#34;</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instances do not provide the
<a class="reference internal" href="#dbcmd.shardingState" title="shardingState"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardingState</span></code></a>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This command obtains a write lock on the affected database and
will block other operations until it has completed; however, the
operation is typically short lived.</p>
</div>
</dd></dl>

<dl class="dbcommand">
<dt id="dbcmd.removeShard">
<code class="descname">removeShard</code><a class="dashingAutolink" name="autolink-3621"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/%C2%B6"></a><a class="headerlink" href="#dbcmd.removeShard" title="Permalink to this definition">&para;</a></dt>
<dd><p>Starts the process of removing a shard from a <a class="reference internal" href="glossary.html#term-sharded-cluster"><span class="xref std std-term">cluster</span></a>. This
is a multi-stage process. Begin by issuing the following command:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">removeShard</span> <span class="o">:</span> <span class="s2">&#34;[shardName]&#34;</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p>The balancer will then migrate chunks from the shard specified by
<code class="docutils literal"><span class="pre">[shardName]</span></code>. This process happens slowly to avoid placing
undue load on the overall cluster.</p>
<p>The command returns immediately, with the following message:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">msg</span> <span class="o">:</span> <span class="s2">&#34;draining started successfully&#34;</span> <span class="p">,</span> <span class="nx">state</span><span class="o">:</span> <span class="s2">&#34;started&#34;</span> <span class="p">,</span> <span class="nx">shard</span><span class="o">:</span> <span class="s2">&#34;shardName&#34;</span> <span class="p">,</span> <span class="nx">ok</span> <span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p>If you run the command again, you&rsquo;ll see the following progress
output:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">msg</span><span class="o">:</span> <span class="s2">&#34;draining ongoing&#34;</span> <span class="p">,</span> <span class="nx">state</span><span class="o">:</span> <span class="s2">&#34;ongoing&#34;</span> <span class="p">,</span> <span class="nx">remaining</span><span class="o">:</span> <span class="p">{</span> <span class="nx">chunks</span><span class="o">:</span> <span class="mi">23</span> <span class="p">,</span> <span class="nx">dbs</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="nx">ok</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p>The <code class="docutils literal"><span class="pre">remaining</span></code> <a class="reference internal" href="glossary.html#term-document"><span class="xref std std-term">document</span></a> specifies how many chunks and
databases remain on the shard. Use <a class="reference internal" href="method/db.printShardingStatus.html#db.printShardingStatus" title="db.printShardingStatus()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.printShardingStatus()</span></code></a>
to list the databases that you must move from the shard.</p>
<p>Each database in a sharded cluster has a primary shard. If the
shard you want to remove is also the primary of one of the cluster&rsquo;s
databases, then you must manually move the database to a new
shard. This can be only after the shard is empty. See the
<a class="reference internal" href="command/movePrimary.html#dbcmd.movePrimary" title="movePrimary"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">movePrimary</span></code></a> command for details.</p>
<p>After removing all chunks and databases from the shard, you
may issue the command again, to return:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">msg</span><span class="o">:</span> <span class="s2">&#34;remove shard completed successfully&#34;</span><span class="p">,</span> <span class="nx">state</span><span class="o">:</span> <span class="s2">&#34;completed&#34;</span><span class="p">,</span> <span class="nx">host</span><span class="o">:</span> <span class="s2">&#34;shardName&#34;</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</dd></dl>

</div>
</div>

                
    <div id="btnv">
      <span class="btn-arrow-left">&larr; &nbsp;</span>
      <a class="btn-prev-text" href="../tutorial/convert-replica-set-to-replicated-shard-cluster.html" title="Previous Section: Convert a Replica Set to a Replicated Sharded Cluster"><span>Convert a Replica Set to a Replicated Sharded Cluster</span></a>
      <a class="btn-next-text" href="../applications.html" title="Next Section: Application Development"><span>Application Development</span></a>
      <span class="btn-arrow-right">&nbsp;&rarr;</span>
    </div>
                  <div class="footer">
                    <div class="copyright">
                      <p>&copy; MongoDB, Inc 2008-present. MongoDB, Mongo, and the leaf logo are registered trademarks of MongoDB, Inc.</p>
                    </div>
                  </div>
              </div></div>
            </div>
        </div>
    </div>
    <div class="right-column">
      <div class="wrapper"> <div id="mongodb-docs-1">
   <script type="text/javascript">
      googletag.cmd.push(function() { googletag.display('mongodb-docs-1'); });
   </script>
</div>
            <div class="social">
               <a class="slack-icon" href="https://slackpass.io/mongo-db?jmp=docs" title="https://slackpass.io/mongo-db?jmp=docs"><i class="fab fa-slack" aria-hidden="true"></i></a>
               <a class="twitter-icon" href="https://twitter.com/MongoDB" title="https://twitter.com/MongoDB"><i class="fab fa-twitter-square"></i></a>
               <a class="youtube-icon" href="https://www.youtube.com/user/MongoDB" title="https://www.youtube.com/user/MongoDB"><i class="fab fa-youtube-square"></i></a>
               <a class="facebook-icon" href="https://www.facebook.com/mongodb" title="https://www.facebook.com/mongodb"><i class="fab fa-facebook-square"></i></a>
               <a class="stack-overflow-icon" href="https://stackoverflow.com/tags/mongodb/info" title="https://stackoverflow.com/tags/mongodb/info"><i class="fab fa-stack-overflow" aria-hidden="true"></i></a>
            </div>
        

      </div>
    </div>
    
      <div id="rating-panel"></div>
    
    <div class="clearfix"></div>
  </div>
<div id="navbar" data-navprops="{&#34;links&#34;: [{&#34;url&#34;: &#34;https://www.mongodb.com/docs/manual/&#34;,&#34;text&#34;: &#34;Server&#34;,&#34;active&#34;: true},{&#34;url&#34;: &#34;https://www.mongodb.com/docs/drivers/&#34;,&#34;text&#34;: &#34;Drivers&#34;},{&#34;url&#34;: &#34;https://www.mongodb.com/docs/cloud/&#34;,&#34;text&#34;: &#34;Cloud&#34;},{&#34;url&#34;: &#34;https://www.mongodb.com/docs/tools/&#34;,&#34;text&#34;: &#34;Tools&#34;},{&#34;url&#34;: &#34;https://www.mongodb.com/docs/guides/&#34;,&#34;text&#34;: &#34;Guides&#34;}], &#34;baseUrl&#34;: &#34;https://www.mongodb.com/docs&#34;}"></div>

  

  

  <script type="text/javascript">
  // Bootstrap array of links that should trigger a full page reload
  window.docsExcludedNav = [];
  </script>
</body></html>