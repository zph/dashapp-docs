<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
  <link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css' /><title>Sharded Cluster Administration &mdash; MongoDB Manual</title><link rel="shortcut icon" href="https://www.mongodb.com/docs/assets/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <link rel="canonical" href="https://www.mongodb.com/docs/manual/administration/sharded-clusters/" /><meta name="robots" content="index" />
  <meta name="release" content="2.2.7"/>
  <meta name="version" content="2.2"/>
  <meta name="DC.Source" content="https://github.com/mongodb/docs/blob/v2.2/source/administration/sharded-clusters.txt"/>
  <meta property="og:image" content="http://s3.amazonaws.com/info-mongodb-com/_com_assets/cms/mongodb-for-giant-ideas-bbab5c3cf8.png">
  <meta property="og:image:secure_url" content="https://webassets.mongodb.com/_com_assets/cms/mongodb-for-giant-ideas-bbab5c3cf8.png">
  
   <link rel="stylesheet" href="../_static/mongodb-docs.css" type="text/css" />
   <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
   <link rel="stylesheet" href="../_static/css/navbar.min.css?t=nocache" type="text/css" />
    
    <script type="text/javascript" src="../_static/lib/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/lib/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/lib/jquery.cookie.js"></script>
    <script type="text/javascript" src="../_static/controller.js"></script>
      <link rel="search" type="application/opensearchdescription+xml" href="https://www.mongodb.com/docs/osd.xml" title="MongoDB Help"/>
<link rel="author" title="About these documents" href="../about.html" />
<!-- <link rel="index" title="Index" href="../genindex.html" /> -->
<link rel="search" title="Search" href="../search.html" />
<link rel="top" title="MongoDB Manual" href="../index.html" />
<link rel="up" title="Sharding" href="../sharding.html" />
<link rel="next" title="Sharded Cluster Architectures" href="sharded-cluster-architectures.html" />
<link rel="prev" title="Sharded Cluster Overview" href="../core/sharded-clusters.html" /><script type='text/javascript'>
   var gptadslots=[];
   var googletag = googletag || {};
   googletag.cmd = googletag.cmd || [];
   (function(){ var gads = document.createElement('script');
      gads.async = true; gads.type = 'text/javascript';
      var useSSL = 'https:' == document.location.protocol;
      gads.src = (useSSL ? 'https:' : 'http:') + '//www.googletagservices.com/tag/js/gpt.js';
      var node = document.getElementsByTagName('script')[0];
      node.parentNode.insertBefore(gads, node);
   })();
</script>

<script type="text/javascript">
   googletag.cmd.push(function() {

      var pathname = location.href;
      
      if ( (pathname.indexOf("auth") >= 0) || (pathname.indexOf("security") >= 0) ) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/security', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if ( (pathname.indexOf("crud") >= 0) ||  (pathname.indexOf("query") >= 0) || (pathname.indexOf("insert") >= 0) || (pathname.indexOf("update") >= 0) || (pathname.indexOf("remove") >= 0) || (pathname.indexOf("delete") >= 0) || (pathname.indexOf("aggregation") >= 0) ) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/crud', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("shard") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/sharding', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("replica") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/replication', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("model") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/data-modeling', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("administration") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/support', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("install-mongodb-on-windows") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/install-mongodb-on-windows', [160, 600], 'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("tutorial/getting-started") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/docs_server_gettingstarted', [160, 600], 'mongodb-docs-1').addService(googletag.pubads());
      } else {
         //Adslot 1 declaration
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      }
      googletag.pubads().enableSingleRequest();
      googletag.pubads().enableAsyncRendering();
      googletag.enableServices();
   });
</script></head>
<body data-project="manual" data-project-title="MongoDB Manual" data-branch="v2.2" data-enable-marian=1 data-eol="True">
  <!-- Google Tag Manager -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-GDFN"
                    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
  {'gtm.start':new Date().getTime(),event:'gtm.js'}
  );var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-GDFN');
  </script>
  <!-- End Google Tag Manager -->
      <script>
        window.googleSearchCx = "017213726194841070573:WMX6838984"
	window.googleSearchPlaceholder = "Search Documentation"
        window.googleSearchResultsUrl = "https://www.mongodb.com/docs/manual/search/"
      </script><div class="content" style="margin-top: 0;">

   <div id="left-column">
         <aside id="sidebar" class="sidebar">
             
  <div class="sphinxsidebar" id="sphinxsidebar">
    <div id="sphinxsidebarwrapper" class="sphinxsidebarwrapper"><a href="javascript:void(0)" class="closeNav" id="closeNav">Close &times;</a>


<h3>
  <a class="index-link" href="../index.html">MongoDB Manual</a>
</h3>


    <div class="btn-group version-sidebar">
      
        <button type="button" class="version-button dropdown-toggle" data-toggle="dropdown" disabled aria-disabled="disabled">
          
          
          Version 2.2
        </button>
        <a href="https://www.mongodb.com/docs/legacy">&larr; Return to Documentation</a>
      
    </div>


<ul class="current"><li class="toctree-l1"><a class="reference internal" href="../installation.html">Installing MongoDB</a><ul><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-red-hat-centos-or-fedora-linux.html">Install MongoDB on Red Hat Enterprise, CentOS, or Fedora</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-ubuntu.html">Install MongoDB on Ubuntu</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-debian.html">Install MongoDB on Debian</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-linux.html">Install MongoDB on Linux Systems</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-os-x.html">Install MongoDB on OS X</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/install-mongodb-on-windows.html">Install MongoDB on Windows</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/getting-started.html">Getting Started with MongoDB Development</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../administration.html">Administration</a><ul><li class="toctree-l2"><a class="reference internal" href="configuration.html">Run-time Database Configuration</a></li><li class="toctree-l2"><a class="reference internal" href="operational-segregation.html">Operational Segregation in MongoDB Operations and Deployments</a></li><li class="toctree-l2"><a class="reference internal" href="journaling.html">Journaling</a></li><li class="toctree-l2"><a class="reference internal" href="ssl.html">Use MongoDB with SSL Connections</a></li><li class="toctree-l2"><a class="reference internal" href="snmp.html">Use MongoDB with SNMP Monitoring</a></li><li class="toctree-l2"><a class="reference internal" href="monitoring.html">Monitoring Database Systems</a></li><li class="toctree-l2"><a class="reference internal" href="import-export.html">Importing and Exporting MongoDB Data</a></li><li class="toctree-l2"><a class="reference internal" href="backups.html">Backup Strategies for MongoDB Systems</a></li><li class="toctree-l2"><a class="reference internal" href="ulimit.html">UNIX <code class="docutils literal"><span class="pre">ulimit</span></code> Settings</a></li><li class="toctree-l2"><a class="reference internal" href="production-notes.html">Production Notes</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a><ul><li class="toctree-l2"><a class="reference internal" href="security.html">Security Practices and Management</a></li><li class="toctree-l2"><a class="reference internal" href="vulnerability-notification.html">Vulnerability Notification</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/configure-linux-iptables-firewall.html">Configure Linux <code class="docutils literal"><span class="pre">iptables</span></code> Firewall for MongoDB</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/configure-windows-netsh-firewall.html">Configure Windows <code class="docutils literal"><span class="pre">netsh</span></code> Firewall for MongoDB</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/control-access-to-mongodb-with-authentication.html">Control Access to MongoDB Instances with Authentication</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../crud.html">Core MongoDB Operations (CRUD)</a><ul><li class="toctree-l2"><a class="reference internal" href="../core/read-operations.html">Read Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../core/write-operations.html">Write Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../core/data-modeling.html">Data Modeling Considerations for MongoDB Applications</a></li><li class="toctree-l2"><a class="reference internal" href="../core/document.html">BSON Documents</a></li><li class="toctree-l2"><a class="reference internal" href="../core/object-id.html">ObjectId</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/database-references.html">Database References</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/gridfs.html">GridFS</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/create.html">Create</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/read.html">Read</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/update.html">Update</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/delete.html">Delete</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-embedded-one-to-one-relationships-between-documents.html">Model Embedded One-to-One Relationships Between Documents</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-embedded-one-to-many-relationships-between-documents.html">Model Embedded One-to-Many Relationships Between Documents</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-referenced-one-to-many-relationships-between-documents.html">Model Referenced One-to-Many Relationships Between Documents</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-data-for-atomic-operations.html">Model Data for Atomic Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-tree-structures-with-parent-references.html">Model Tree Structures with Parent References</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-tree-structures-with-child-references.html">Model Tree Structures with Child References</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-tree-structures-with-ancestors-array.html">Model Tree Structures with an Array of Ancestors</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-tree-structures-with-materialized-paths.html">Model Tree Structures with Materialized Paths</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-tree-structures-with-nested-sets.html">Model Tree Structures with Nested Sets</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/model-data-for-keyword-search.html">Model Data to Support Keyword Search</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../aggregation.html">Aggregation</a><ul><li class="toctree-l2"><a class="reference internal" href="../applications/aggregation.html">Aggregation Framework</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/aggregation-examples.html">Aggregation Framework Examples</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/aggregation.html">Aggregation Framework Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/map-reduce.html">Map-Reduce</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/simple-aggregation.html">Simple Aggregation Methods and Commands</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../indexes.html">Indexes</a><ul><li class="toctree-l2"><a class="reference internal" href="../core/indexes.html">Indexing Overview</a></li><li class="toctree-l2"><a class="reference internal" href="indexes.html">Indexing Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/indexes.html">Indexing Strategies</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/geospatial-indexes.html">Geospatial Queries with <code class="docutils literal"><span class="pre">2d</span></code> Indexes</a></li><li class="toctree-l2"><a class="reference internal" href="../core/geospatial-indexes.html"><code class="docutils literal"><span class="pre">2d</span></code> Geospatial Indexes</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../replication.html">Replication</a><ul><li class="toctree-l2"><a class="reference internal" href="../core/replication.html">Replica Set Fundamental Concepts</a></li><li class="toctree-l2"><a class="reference internal" href="replica-sets.html">Replica Set Operation and Management</a></li><li class="toctree-l2"><a class="reference internal" href="replica-set-architectures.html">Replica Set Architectures and Deployment Patterns</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/replication.html">Replica Set Considerations and Behaviors for Applications and Development</a></li><li class="toctree-l2"><a class="reference internal" href="../core/replication-internals.html">Replica Set Internals and Behaviors</a></li><li class="toctree-l2"><a class="reference internal" href="master-slave.html">Master Slave Replication</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/deploy-replica-set.html">Deploy a Replica Set</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/convert-standalone-to-replica-set.html">Convert a Standalone to a Replica Set</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/expand-replica-set.html">Add Members to a Replica Set</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/deploy-geographically-distributed-replica-set.html">Deploy a Geographically Distributed Replica Set</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/change-oplog-size.html">Change the Size of the Oplog</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/force-member-to-be-primary.html">Force a Member to Become Primary</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/change-hostnames-in-a-replica-set.html">Change Hostnames in a Replica Set</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/convert-secondary-into-arbiter.html">Convert a Secondary to an Arbiter</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/reconfigure-replica-set-with-unavailable-members.html">Reconfigure a Replica Set with Unavailable Members</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/recover-data-following-unexpected-shutdown.html">Recover MongoDB Data following Unexpected Shutdown</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/replica-commands.html">Replica Set Commands</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/replica-set-features.html">Replica Set Features and Version Compatibility</a></li></ul></li><li class="toctree-l1 current"><a class="reference internal" href="../sharding.html">Sharding</a><ul class="current"><li class="toctree-l2"><a class="reference internal" href="../core/sharded-clusters.html">Sharded Cluster Overview</a></li><li class="toctree-l2 current"><a class="reference internal current" href="">Sharded Cluster Administration</a></li><li class="toctree-l2"><a class="reference internal" href="sharded-cluster-architectures.html">Sharded Cluster Architectures</a></li><li class="toctree-l2"><a class="reference internal" href="../core/sharded-cluster-internals.html">Sharded Cluster Internals and Behaviors</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/deploy-shard-cluster.html">Deploy a Sharded Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/add-shards-to-shard-cluster.html">Add Shards to a Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/view-sharded-cluster-configuration.html">View Cluster Configuration</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/manage-sharded-cluster-config-server.html">Manage the Config Servers</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/manage-chunks-in-sharded-cluster.html">Manage Chunks in a Sharded Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/configure-sharded-cluster-balancer.html">Configure Behavior of Balancer Process in Sharded Clusters</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/manage-sharded-cluster-balancer.html">Manage Sharded Cluster Balancer</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/remove-shards-from-cluster.html">Remove Shards from an Existing Sharded Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/backup-small-sharded-cluster-with-mongodump.html">Backup a Small Sharded Cluster with <code class="docutils literal"><span class="pre">mongodump</span></code></a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/backup-sharded-cluster-with-filesystem-snapshots.html">Create Backup of a Sharded Cluster with Filesystem Snapshots</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/backup-sharded-cluster-with-database-dumps.html">Create Backup of a Sharded Cluster with Database Dumps</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/restore-single-shard.html">Restore a Single Shard</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/restore-sharded-cluster.html">Restore Sharded Clusters</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/schedule-backup-window-for-sharded-clusters.html">Schedule Backup Window for Sharded Clusters</a></li><li class="toctree-l2"><a class="reference internal" href="tag-aware-sharding.html">Tag Aware Sharding</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/enforce-unique-keys-for-sharded-collections.html">Enforce Unique Keys for Sharded Collections</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/convert-replica-set-to-replicated-shard-cluster.html">Convert a Replica Set to a Replicated Sharded Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/sharding-commands.html">Sharding Commands</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../applications.html">Application Development</a><ul><li class="toctree-l2"><a class="reference internal" href="../applications/drivers.html">MongoDB Drivers and Client Libraries</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/optimization.html">Optimization Strategies for MongoDB Applications</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/server-side-javascript.html">Server-side JavaScript</a></li><li class="toctree-l2"><a class="reference internal" href="../core/capped-collections.html">Capped Collections</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/perform-two-phase-commits.html">Perform Two Phase Commits</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/create-tailable-cursor.html">Create Tailable Cursor</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/isolate-sequence-of-operations.html">Isolate Sequence of Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/create-an-auto-incrementing-field.html">Create an Auto-Incrementing Sequence Field</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/expire-data.html">Expire Data from Collections by Setting TTL</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../mongo.html">Using the <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a><ul><li class="toctree-l2"><a class="reference internal" href="../tutorial/getting-started-with-the-mongo-shell.html">Getting Started with the <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a></li><li class="toctree-l2"><a class="reference internal" href="../core/shell-types.html">Data Types in the <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/access-mongo-shell-help.html">Access the <code class="docutils literal"><span class="pre">mongo</span></code> Shell Help Information</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/write-scripts-for-the-mongo-shell.html">Write Scripts for the <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/mongo-shell.html"><code class="docutils literal"><span class="pre">mongo</span></code> Shell Quick Reference</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../tutorial.html">MongoDB Tutorials</a><ul><li class="toctree-l2"><a class="reference internal" href="../tutorial/use-database-commands.html">Use Database Commands</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/recover-data-following-unexpected-shutdown.html">Recover MongoDB Data following Unexpected Shutdown</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/manage-mongodb-processes.html">Manage <code class="docutils literal"><span class="pre">mongod</span></code> Processes</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/convert-replica-set-to-replicated-shard-cluster.html">Convert a Replica Set to a Replicated Sharded Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/copy-databases-between-instances.html">Copy Databases Between Instances</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/backup-databases-with-binary-database-dumps.html">Use <code class="docutils literal"><span class="pre">mongodump</span></code> and <code class="docutils literal"><span class="pre">mongorestore</span></code> to Backup and Restore MongoDB Databases</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/backup-databases-with-filesystem-snapshots.html">Use Filesystem Snapshots to Backup and Restore MongoDB Databases</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/manage-the-database-profiler.html">Analyze Performance of Database Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/rotate-log-files.html">Rotate Log Files</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/roll-back-to-v1.8-index.html">Build Old Style Indexes</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a><ul><li class="toctree-l2"><a class="reference internal" href="../faq/fundamentals.html">FAQ: MongoDB Fundamentals</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/developers.html">FAQ: MongoDB for Application Developers</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/mongo.html">FAQ: The <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/concurrency.html">FAQ: Concurrency</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/sharding.html">FAQ: Sharding with MongoDB</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/replica-sets.html">FAQ: Replica Sets and Replication in MongoDB</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/storage.html">FAQ: MongoDB Storage</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/indexes.html">FAQ: Indexes</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/diagnostics.html">FAQ: MongoDB Diagnostics</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a><ul><li class="toctree-l2"><a class="reference internal" href="../reference/operator.html">Query, Update, Projection, and Aggregation Operators</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/all.html">$all</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/and.html">$and</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/box.html">$box</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/center.html">$center</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/centerSphere.html">$centerSphere</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/elemMatch.html">$elemMatch (query)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/exists.html">$exists</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/gt.html">$gt</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/gte.html">$gte</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/in.html">$in</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/lt.html">$lt</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/lte.html">$lte</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/maxDistance.html">$maxDistance</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/mod.html">$mod</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/ne.html">$ne</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/near.html">$near</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/nearSphere.html">$nearSphere</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/nin.html">$nin</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/nor.html">$nor</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/not.html">$not</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/or.html">$or</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/polygon.html">$polygon</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/regex.html">$regex</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/size.html">$size</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/type.html">$type</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/uniqueDocs.html">$uniqueDocs</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/where.html">$where</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query/within.html">$within</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/addToSet.html">$addToSet</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/bit.html">$bit</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/each.html">$each</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/inc.html">$inc</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/isolated.html">$isolated</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/pop.html">$pop</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/positional.html">$ (update)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/pull.html">$pull</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/pullAll.html">$pullAll</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/push.html">$push</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/pushAll.html">$pushAll</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/rename.html">$rename</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/set.html">$set</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update/unset.html">$unset</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/projection/elemMatch.html">$elemMatch (projection)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/projection/positional.html">$ (projection)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/projection/slice.html">$slice (projection)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/comment.html">$comment</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/explain.html">$explain</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/hint.html">$hint</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/max.html">$max</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/maxScan.html">$maxScan</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/min.html">$min</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/natural.html">$natural</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/orderby.html">$orderby</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/query.html">$query</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/returnKey.html">$returnKey</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/showDiskLoc.html">$showDiskLoc</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/meta/snapshot.html">$snapshot</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/add.html">$add (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/addToSet.html">$addToSet (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/and.html">$and (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/avg.html">$avg (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/cmp.html">$cmp (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/cond.html">$cond (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/dayOfMonth.html">$dayOfMonth (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/dayOfWeek.html">$dayOfWeek (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/dayOfYear.html">$dayOfYear (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/divide.html">$divide (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/eq.html">$eq (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/first.html">$first (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/group.html">$group (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/gt.html">$gt (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/gte.html">$gte (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/hour.html">$hour (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/ifNull.html">$ifNull (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/last.html">$last (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/limit.html">$limit (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/lt.html">$lt (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/lte.html">$lte (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/match.html">$match (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/max.html">$max (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/min.html">$min (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/minute.html">$minute (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/mod.html">$mod (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/month.html">$month (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/multiply.html">$multiply (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/ne.html">$ne (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/not.html">$not (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/or.html">$or (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/project.html">$project (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/push.html">$push (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/second.html">$second (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/skip.html">$skip (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/sort.html">$sort (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/strcasecmp.html">$strcasecmp (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/substr.html">$substr (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/subtract.html">$subtract (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/sum.html">$sum (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/toLower.html">$toLower (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/toUpper.html">$toUpper (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/unwind.html">$unwind (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/week.html">$week (aggregation)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/year.html">$year (aggregation)</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/command.html">Database Commands</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/command/addShard.html">addShard</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/aggregate.html">aggregate</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/applyOps.html">applyOps (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/authenticate.html">authenticate</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/availableQueryOptions.html">availableQueryOptions (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/buildInfo.html">buildInfo</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/checkShardingIndex.html">checkShardingIndex (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/clean.html">clean (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/clone.html">clone</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/cloneCollection.html">cloneCollection</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/cloneCollectionAsCapped.html">cloneCollectionAsCapped</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/closeAllDatabases.html">closeAllDatabases (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/collMod.html">collMod</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/collStats.html">collStats</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/compact.html">compact</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/connPoolStats.html">connPoolStats</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/connPoolSync.html">connPoolSync (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/convertToCapped.html">convertToCapped</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/copydb.html">copydb</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/copydbgetnonce.html">copydbgetnonce (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/count.html">count</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/create.html">create</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/cursorInfo.html">cursorInfo</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/dataSize.html">dataSize</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/dbHash.html">dbHash (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/dbStats.html">dbStats</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/diagLogging.html">diagLogging (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/distinct.html">distinct</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/driverOIDTest.html">driverOIDTest (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/drop.html">drop</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/dropDatabase.html">dropDatabase</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/dropIndexes.html">dropIndexes</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/enableSharding.html">enableSharding</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/eval.html">eval</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/features.html">features (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/filemd5.html">filemd5</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/findAndModify.html">findAndModify</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/flushRouterConfig.html">flushRouterConfig</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/fsync.html">fsync</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/geoNear.html">geoNear</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/geoSearch.html">geoSearch</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/geoWalk.html">geoWalk</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getCmdLineOpts.html">getCmdLineOpts</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getLastError.html">getLastError</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getLog.html">getLog</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getParameter.html">getParameter</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getPrevError.html">getPrevError</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getShardMap.html">getShardMap (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getShardVersion.html">getShardVersion (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getnonce.html">getnonce (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/getoptime.html">getoptime (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/group.html">group</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/isMaster.html">isMaster</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/isSelf.html">isSelf (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/isdbgrid.html">isdbgrid</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/listCommands.html">listCommands</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/listDatabases.html">listDatabases</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/listShards.html">listShards</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/logRotate.html">logRotate</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/logout.html">logout</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/mapReduce.html">mapReduce</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/medianKey.html">medianKey (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/moveChunk.html">moveChunk</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/movePrimary.html">movePrimary</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/netstat.html">netstat (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/ping.html">ping</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/profile.html">profile</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/reIndex.html">reIndex</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/removeShard.html">removeShard</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/renameCollection.html">renameCollection</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/repairDatabase.html">repairDatabase</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/replSetFreeze.html">replSetFreeze</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/replSetGetStatus.html">replSetGetStatus</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/replSetInitiate.html">replSetInitiate</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/replSetMaintenance.html">replSetMaintenance</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/replSetReconfig.html">replSetReconfig</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/replSetStepDown.html">replSetStepDown</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/replSetSyncFrom.html">replSetSyncFrom</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/resetError.html">resetError</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/resync.html">resync</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/serverStatus.html">serverStatus</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/setParameter.html">setParameter</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/setShardVersion.html">setShardVersion</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/shardCollection.html">shardCollection</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/shardingState.html">shardingState</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/shutdown.html">shutdown</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/split.html">split</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/splitChunk.html">splitChunk</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/splitVector.html">splitVector</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/top.html">top</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/touch.html">touch</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/unsetSharding.html">unsetSharding (internal)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/validate.html">validate</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/whatsmyuri.html">whatsmyuri (internal)</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/method.html">JavaScript Methods</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/method/Date.html">Date()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/Mongo.html">Mongo()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/Mongo.getDB.html">Mongo.getDB()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/ObjectId.getTimestamp.html">ObjectId.getTimestamp()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/ObjectId.toString.html">ObjectId.toString()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/ObjectId.valueOf.html">ObjectId.valueOf()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cat.html">cat()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cd.html">cd()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/connect.html">connect()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/copyDbpath.html">copyDbpath()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.addOption.html">cursor.addOption()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.batchSize.html">cursor.batchSize()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.count.html">cursor.count()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.explain.html">cursor.explain()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.forEach.html">cursor.forEach()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.hasNext.html">cursor.hasNext()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.hint.html">cursor.hint()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.limit.html">cursor.limit()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.map.html">cursor.map()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.max.html">cursor.max()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.min.html">cursor.min()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.next.html">cursor.next()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.objsLeftInBatch.html">cursor.objsLeftInBatch()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.readPref.html">cursor.readPref()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.showDiskLoc.html">cursor.showDiskLoc()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.size.html">cursor.size()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.skip.html">cursor.skip()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.snapshot.html">cursor.snapshot()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.sort.html">cursor.sort()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/cursor.toArray.html">cursor.toArray()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.addUser.html">db.addUser()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.auth.html">db.auth()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.cloneCollection.html">db.cloneCollection()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.cloneDatabase.html">db.cloneDatabase()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.aggregate.html">db.collection.aggregate()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.copyTo.html">db.collection.copyTo()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.count.html">db.collection.count()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.createIndex.html">db.collection.createIndex()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.dataSize.html">db.collection.dataSize()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.distinct.html">db.collection.distinct()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.drop.html">db.collection.drop()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.dropIndex.html">db.collection.dropIndex()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.dropIndexes.html">db.collection.dropIndexes()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.ensureIndex.html">db.collection.ensureIndex()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.find.html">db.collection.find()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.findAndModify.html">db.collection.findAndModify()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.findOne.html">db.collection.findOne()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.getIndexes.html">db.collection.getIndexes()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.getShardDistribution.html">db.collection.getShardDistribution()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.getShardVersion.html">db.collection.getShardVersion()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.group.html">db.collection.group()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.insert.html">db.collection.insert()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.isCapped.html">db.collection.isCapped()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.mapReduce.html">db.collection.mapReduce()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.reIndex.html">db.collection.reIndex()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.remove.html">db.collection.remove()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.renameCollection.html">db.collection.renameCollection()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.save.html">db.collection.save()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.stats.html">db.collection.stats()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.storageSize.html">db.collection.storageSize()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.totalIndexSize.html">db.collection.totalIndexSize()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.totalSize.html">db.collection.totalSize()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.update.html">db.collection.update()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.collection.validate.html">db.collection.validate()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.commandHelp.html">db.commandHelp()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.copyDatabase.html">db.copyDatabase()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.createCollection.html">db.createCollection()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.currentOp.html">db.currentOp()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.dropDatabase.html">db.dropDatabase()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.eval.html">db.eval()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.fsyncLock.html">db.fsyncLock()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.fsyncUnlock.html">db.fsyncUnlock()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getCollection.html">db.getCollection()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getCollectionNames.html">db.getCollectionNames()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getLastError.html">db.getLastError()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getLastErrorObj.html">db.getLastErrorObj()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getMongo.html">db.getMongo()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getName.html">db.getName()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getPrevError.html">db.getPrevError()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getProfilingLevel.html">db.getProfilingLevel()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getProfilingStatus.html">db.getProfilingStatus()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getReplicationInfo.html">db.getReplicationInfo()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.getSiblingDB.html">db.getSiblingDB()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.help.html">db.help()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.isMaster.html">db.isMaster()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.killOp.html">db.killOp()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.listCommands.html">db.listCommands()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.loadServerScripts.html">db.loadServerScripts()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.logout.html">db.logout()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.printCollectionStats.html">db.printCollectionStats()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.printReplicationInfo.html">db.printReplicationInfo()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.printShardingStatus.html">db.printShardingStatus()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.printSlaveReplicationInfo.html">db.printSlaveReplicationInfo()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.removeUser.html">db.removeUser()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.repairDatabase.html">db.repairDatabase()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.resetError.html">db.resetError()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.runCommand.html">db.runCommand()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.serverBuildInfo.html">db.serverBuildInfo()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.serverStatus.html">db.serverStatus()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.setProfilingLevel.html">db.setProfilingLevel()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.shutdownServer.html">db.shutdownServer()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.stats.html">db.stats()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/db.version.html">db.version()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/fuzzFile.html">fuzzFile()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/getHostName.html">getHostName()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/getMemInfo.html">getMemInfo</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/hostname.html">hostname()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/isWindows.html">_isWindows()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/listFiles.html">listFiles()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/load.html">load()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/ls.html">ls()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/md5sumFile.html">md5sumFile()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/mkdir.html">mkdir()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/pwd.html">pwd()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/quit.html">quit()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rand.html">rand()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/removeFile.html">removeFile()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/resetDbpath.html">resetDbpath()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.add.html">rs.add()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.addArb.html">rs.addArb()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.conf.html">rs.conf()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.freeze.html">rs.freeze()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.help.html">rs.help()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.initiate.html">rs.initiate()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.reconfig.html">rs.reconfig()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.remove.html">rs.remove()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.status.html">rs.status()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.stepDown.html">rs.stepDown()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/rs.syncFrom.html">rs.syncFrom()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.addShard.html">sh.addShard()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.addShardTag.html">sh.addShardTag()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.addTagRange.html">sh.addTagRange()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.disableBalancing.html">sh.disableBalancing()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.enableBalancing.html">sh.enableBalancing()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.enableSharding.html">sh.enableSharding()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.getBalancerHost.html">sh.getBalancerHost()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.getBalancerState.html">sh.getBalancerState()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.help.html">sh.help()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.isBalancerRunning.html">sh.isBalancerRunning()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.moveChunk.html">sh.moveChunk()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.removeShardTag.html">sh.removeShardTag()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.setBalancerState.html">sh.setBalancerState()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.shardCollection.html">sh.shardCollection()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.splitAt.html">sh.splitAt()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.splitFind.html">sh.splitFind()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.startBalancer.html">sh.startBalancer()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.status.html">sh.status()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.stopBalancer.html">sh.stopBalancer()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.waitForBalancer.html">sh.waitForBalancer()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.waitForBalancerOff.html">sh.waitForBalancerOff()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/sh.waitForPingChange.html">sh.waitForPingChange()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/srand.html">_srand()</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/version.html">version()</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/sql-comparison.html">SQL to MongoDB Mapping Chart</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/sql-aggregation-comparison.html">SQL to Aggregation Mapping Chart</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/operators.html">Query, Update, and Projection Operators Quick Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/meta-query-operators.html">Meta Query Operator Quick Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/commands.html">Database Commands Quick Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/javascript.html"><code class="docutils literal"><span class="pre">mongo</span></code> Shell JavaScript Quick Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/components.html">MongoDB Package Components</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/mongod.html"><code class="docutils literal"><span class="pre">mongod</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongos.html"><code class="docutils literal"><span class="pre">mongos</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongo.html"><code class="docutils literal"><span class="pre">mongo</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongod.exe.html"><code class="docutils literal"><span class="pre">mongod.exe</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongos.exe.html"><code class="docutils literal"><span class="pre">mongos.exe</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongodump.html"><code class="docutils literal"><span class="pre">mongodump</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongorestore.html"><code class="docutils literal"><span class="pre">mongorestore</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/bsondump.html"><code class="docutils literal"><span class="pre">bsondump</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongooplog.html"><code class="docutils literal"><span class="pre">mongooplog</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongoimport.html"><code class="docutils literal"><span class="pre">mongoimport</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongoexport.html"><code class="docutils literal"><span class="pre">mongoexport</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongostat.html"><code class="docutils literal"><span class="pre">mongostat</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongotop.html"><code class="docutils literal"><span class="pre">mongotop</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongosniff.html"><code class="docutils literal"><span class="pre">mongosniff</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongoperf.html"><code class="docutils literal"><span class="pre">mongoperf</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongofiles.html"><code class="docutils literal"><span class="pre">mongofiles</span></code></a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/configuration-options.html">Configuration File Options</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/connection-string.html">Connection String URI Format</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/server-status-index.html">Server Status Output Index</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/server-status.html">Server Status Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/database-statistics.html">Database Statistics Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/collection-statistics.html">Collection Statistics Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/collection-validation.html">Collection Validation Data</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/connection-pool-stats.html">Connection Pool Statistics Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/replica-status.html">Replica Set Status Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/replica-configuration.html">Replica Set Configuration</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/replication-info.html">Replication Info Reference</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/current-op.html">Current Operation Reporting</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/database-profiler.html">Database Profiler Output</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/explain.html">Explain Output</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/exit-codes.html">Exit Codes and Statuses</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/config-database.html">Config Database Contents</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/local-database.html">The <code class="docutils literal"><span class="pre">local</span></code> Database</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/system-collections.html">System Collections</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/limits.html">MongoDB Limits and Thresholds</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/mongodb-extended-json.html">MongoDB Extended JSON</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/glossary.html">Glossary</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/2.2.html">Release Notes for MongoDB 2.2</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/2.0.html">Release Notes for MongoDB 2.0</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/1.8.html">Release Notes for MongoDB 1.8</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/1.6.html">Release Notes for MongoDB 1.6</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/1.4.html">Release Notes for MongoDB 1.4</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/1.2.html">Release Notes for MongoDB 1.2.x</a></li><li class="toctree-l2"><a class="reference internal" href="../release-notes/drivers-write-concern.html">Default Write Concern Change</a></li></ul></li></ul>


    </div>
  </div>
           
         </aside>

   </div>

    <div id="main-column" class="main-column">

    <span id="showNav" class="showNav">Navigation</span>

      
            <div class="alert alert-warning">
              <span class="alert-message">This version of the documentation is archived and no longer supported.</span>
            </div>
      
        <div class="document">
            <div class="documentwrapper"><div class="bodywrapper">
              <div class="body" data-pagename="administration/sharded-clusters">
                   <a class="edit-link" href="https://github.com/mongodb/docs/blob/v2.2/source/administration/sharded-clusters.txt" target="_blank" title="Edit administration/sharded-clusters.txt on GitHub">
    
      <span class="icon-edit"></span>
    
  </a>
                

                
  <div class="bc">
    
      <ul>
          <li><a href="../sharding.html">Sharding</a><span class="bcpoint"> > </span></li>
            <li>Sharded Cluster Administration</li> 
      </ul>
    
    
  </div>
                
                  <div class="section" id="sharded-cluster-administration">
<span id="sharding-sharded-cluster"></span><span id="index-0"></span><h1>Sharded Cluster Administration<a class="headerlink" href="#sharded-cluster-administration" title="Permalink to this headline">¶</a></h1>
<div class="contents singlecol local topic" id="on-this-page">
<p class="topic-title first">On this page</p>
<ul class="simple">
<li><a class="reference internal" href="#shards" id="id3">Shards</a></li>
<li><a class="reference internal" href="#config-servers" id="id4">Config Servers</a></li>
<li><a class="reference internal" href="#sharded-cluster-operations-and-mongos-instances" id="id5">Sharded Cluster Operations and <code class="docutils literal"><span class="pre">mongos</span></code> Instances</a></li>
<li><a class="reference internal" href="#sharded-cluster-security-considerations" id="id6">Sharded Cluster Security Considerations</a></li>
</ul>
</div>
<p>Sharding occurs within a <a class="reference internal" href="../reference/glossary.html#term-sharded-cluster"><span class="xref std std-term">sharded cluster</span></a>. A sharded cluster
consists of the following components:</p>
<ul class="simple">
<li><a class="reference internal" href="#sharding-shards"><span class="std std-ref">Shards</span></a>. Each shard is a separate
<a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> instance or <a class="reference internal" href="../reference/glossary.html#term-replica-set"><span class="xref std std-term">replica set</span></a> that holds a portion
of the database collections.</li>
<li><a class="reference internal" href="#sharding-config-server"><span class="std std-ref">Config servers</span></a>. Each config server is
a <a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> instance that holds metadata about the cluster.
The metadata maps <a class="reference internal" href="../reference/glossary.html#term-chunk"><span class="xref std std-term">chunks</span></a> to shards.</li>
<li><a class="reference internal" href="#sharding-mongos"><span class="std std-ref">mongos instances</span></a>. The <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a>
instances route the reads and writes to the shards.</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li>For specific configurations, see <a class="reference internal" href="sharded-cluster-architectures.html#sharding-architecture"><span class="std std-ref">Sharded Cluster Architectures</span></a>.</li>
<li>To set up sharded clusters, see <a class="reference internal" href="../tutorial/deploy-shard-cluster.html#sharding-procedure-setup"><span class="std std-ref">Deploy a Sharded Cluster</span></a>.</li>
</ul>
</div>
<span class="target" id="index-1"></span><div class="section" id="shards">
<span id="sharding-shards"></span><span id="index-2"></span><h2>Shards<a class="headerlink" href="#shards" title="Permalink to this headline">¶</a></h2>
<p>A shard is a container that holds a subset of a collection’s data. Each
shard is either a single <a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> instance or a <a class="reference internal" href="../reference/glossary.html#term-replica-set"><span class="xref std std-term">replica
set</span></a>. In production, all shards should be replica sets.</p>
<p>Applications do not access the shards directly. Instead, the
<a class="reference internal" href="#sharding-mongos"><span class="std std-ref">mongos instances</span></a> routes reads and writes from
applications to the shards.</p>
<span class="target" id="index-3"></span></div>
<div class="section" id="config-servers">
<span id="sharding-config-server"></span><span id="index-4"></span><h2>Config Servers<a class="headerlink" href="#config-servers" title="Permalink to this headline">¶</a></h2>
<p>Config servers maintain the shard metadata in a config database. The
<a class="reference internal" href="../reference/glossary.html#term-config-database"><span class="xref std std-term">config database</span></a> stores the relationship between <a class="reference internal" href="../reference/glossary.html#term-chunk"><span class="xref std std-term">chunks</span></a> and where they reside within a <a class="reference internal" href="../reference/glossary.html#term-sharded-cluster"><span class="xref std std-term">sharded cluster</span></a>. Without
a config database, the <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instances would be unable to
route queries or write operations within the cluster.</p>
<p>Config servers <em>do not</em> run as replica sets. Instead, a <a class="reference internal" href="../reference/glossary.html#term-sharded-cluster"><span class="xref std std-term">cluster</span></a> operates with a group of <em>three</em> config servers that use a
two-phase commit process that ensures immediate consistency and
reliability.</p>
<p>For testing purposes you may deploy a cluster with a single
config server, but this is not recommended for production.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>If your cluster has a single config server, this
<a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> is a single point of failure.  If the instance is
inaccessible the cluster is not accessible. If you cannot recover
the data on a config server, the cluster will be inoperable.</p>
<p class="last"><strong>Always</strong> use three config servers for production deployments.</p>
</div>
<p>The actual load on configuration servers is small because each
<a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instance maintains a cached copy of the configuration
database. MongoDB only writes data to the config server to:</p>
<ul class="simple">
<li>create splits in existing chunks, which happens as data in
existing chunks exceeds the maximum chunk size.</li>
<li>migrate a chunk between shards.</li>
</ul>
<p>Additionally, all config servers must be available on initial setup
of a sharded cluster, each <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instance must be able
to write to the <code class="docutils literal"><span class="pre">config.version</span></code> collection.</p>
<p>If one or two configuration instances become unavailable, the
cluster’s metadata becomes <em>read only</em>. It is still possible to read
and write data from the shards, but no chunk migrations or splits will
occur until all three servers are accessible. At the same time, config
server data is only read in the following situations:</p>
<ul class="simple">
<li>A new <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> starts for the first time, or an existing
<a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> restarts.</li>
<li>After a chunk migration, the <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instances update
themselves with the new cluster metadata.</li>
</ul>
<p>If all three config servers are inaccessible, you can continue to use
the cluster as long as you don’t restart the <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a>
instances until after config servers are accessible again. If you
restart the <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instances and there are no accessible
config servers, the <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> would be unable to direct
queries or write operations to the cluster.</p>
<p>Because the configuration data is small relative to the amount of data
stored in a cluster, the amount of activity is relatively low, and 100%
up time is not required for a functioning sharded cluster. As a result,
backing up the config servers is not difficult. Backups of config
servers are critical as clusters become totally inoperable when
you lose all configuration instances and data. Precautions to ensure
that the config servers remain available and intact are critical.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Configuration servers store metadata for a single sharded cluster.
You must have a separate configuration server or servers for each
cluster you administer.</p>
</div>
</div>
<div class="section" id="sharded-cluster-operations-and-mongos-instances">
<span id="sharding-read-operations"></span><span id="sharding-mongos"></span><span id="index-5"></span><h2>Sharded Cluster Operations and <code class="docutils literal"><span class="pre">mongos</span></code> Instances<a class="headerlink" href="#sharded-cluster-operations-and-mongos-instances" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> program provides a single unified interface to a sharded
cluster for applications using MongoDB. Except for the selection of a
<a class="reference internal" href="../reference/glossary.html#term-shard-key"><span class="xref std std-term">shard key</span></a>, application developers and administrators need not
consider any of the <a class="reference internal" href="../core/sharded-cluster-internals.html#sharding-internals"><span class="std std-ref">internal details of sharding</span></a>.</p>
<p><a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> caches data from the <a class="reference internal" href="#sharding-config-server"><span class="std std-ref">config server</span></a>, and uses this to route operations from
applications and clients to the <a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> instances.
<a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> have no <em>persistent</em> state and consume
minimal system resources.</p>
<p>The most common practice is to run <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instances on the
same systems as your application servers, but you can maintain
<a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instances on the shards or on other dedicated
resources.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.1.</span></p>
</div>
<p class="last">Some aggregation operations using the <a class="reference internal" href="../reference/command/aggregate.html#dbcmd.aggregate" title="aggregate"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">aggregate</span></code></a>
command (i.e. <a class="reference internal" href="../reference/method/db.collection.aggregate.html#db.collection.aggregate" title="db.collection.aggregate()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.aggregate()</span></code></a>,) will cause
<a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instances to require more CPU resources than in
previous versions. This modified performance profile may dictate
alternate architecture decisions if you use the <a class="reference internal" href="../reference/glossary.html#term-aggregation-framework"><span class="xref std std-term">aggregation
framework</span></a> extensively in a sharded environment.</p>
</div>
<div class="section" id="automatic-operation-and-query-routing-with-mongos">
<span id="sharding-query-routing"></span><h3>Automatic Operation and Query Routing with <code class="docutils literal"><span class="pre">mongos</span></code><a class="headerlink" href="#automatic-operation-and-query-routing-with-mongos" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> uses information from <a class="reference internal" href="#sharding-config-server"><span class="std std-ref">config servers</span></a> to route operations to the cluster as
efficiently as possible. In general, operations in a sharded
environment are either:</p>
<ol class="arabic simple">
<li>Targeted at a single shard or a limited group of shards based on
the shard key.</li>
<li>Broadcast to all shards in the cluster that hold documents in a
collection.</li>
</ol>
<p>When possible you should design your operations to be as targeted as
possible. Operations have the following targeting characteristics:</p>
<ul>
<li><p class="first">Query operations broadcast to all shards <a class="footnote-reference" href="#namespace-exception" id="id1">[1]</a>
<strong>unless</strong> the <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> can determine which shard or shard
stores this data.</p>
<p>For queries that include the shard key, <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> can target
the query at a specific shard or set of shards, if the portion
of the shard key included in the query is a <em>prefix</em> of the shard
key. For example, if the shard key is:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">a</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">c</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p>The <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> program <em>can</em> route queries that include the full
shard key or either of the following shard key prefixes at a
specific shard or set of shards:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">a</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
<span class="p">{</span> <span class="nx">a</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p>Depending on the distribution of data in the cluster and the
selectivity of the query, <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> may still have to
contact multiple shards <a class="footnote-reference" href="#possible-all" id="id2">[2]</a> to fulfill these queries.</p>
</li>
<li><p class="first">All <a class="reference internal" href="../reference/method/db.collection.insert.html#db.collection.insert" title="db.collection.insert()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">insert()</span></code></a> operations target to
one shard.</p>
</li>
<li><p class="first">All single <a class="reference internal" href="../reference/method/db.collection.update.html#db.collection.update" title="db.collection.update()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></code></a> operations
target to one shard. This includes <a class="reference internal" href="../reference/glossary.html#term-upsert"><span class="xref std std-term">upsert</span></a> operations.</p>
</li>
<li><p class="first">The <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> broadcasts multi-update operations to every
shard.</p>
</li>
<li><p class="first">The <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> broadcasts <a class="reference internal" href="../reference/method/db.collection.remove.html#db.collection.remove" title="db.collection.remove()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">remove()</span></code></a> operations to every shard unless the
operation specifies the shard key in full.</p>
</li>
</ul>
<p>While some operations must broadcast to all shards, you can improve
performance by using as many targeted operations as possible by
ensuring that your operations include the shard key.</p>
<table class="docutils footnote" frame="void" id="namespace-exception" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>If a shard does not store chunks from a
given collection, queries for documents in that collection are not
broadcast to that shard.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="possible-all" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td><a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> will route some queries, even
some that include the shard key, to all shards, if needed.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="sharded-query-response-process">
<h3>Sharded Query Response Process<a class="headerlink" href="#sharded-query-response-process" title="Permalink to this headline">¶</a></h3>
<p>To route a query to a <a class="reference internal" href="../reference/glossary.html#term-sharded-cluster"><span class="xref std std-term">cluster</span></a>,
<a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> uses the following process:</p>
<ol class="arabic">
<li><p class="first">Determine the list of <a class="reference internal" href="../reference/glossary.html#term-shard"><span class="xref std std-term">shards</span></a> that must receive the query.</p>
<p>In some cases, when the <a class="reference internal" href="../reference/glossary.html#term-shard-key"><span class="xref std std-term">shard key</span></a> or a prefix of the shard
key is a part of the query, the <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> can route the
query to a subset of the shards. Otherwise, the <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a>
must direct the query to <em>all</em> shards that hold documents for that
collection.</p>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<p>Given the following shard key:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">zipcode</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">u_id</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">c_date</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p>Depending on the distribution of chunks in the cluster, the
<a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> may be able to target the query at a subset of
shards, if the query contains the following fields:</p>
<div class="last button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">zipcode</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
<span class="p">{</span> <span class="nx">zipcode</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">u_id</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
<span class="p">{</span> <span class="nx">zipcode</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">u_id</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">c_date</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</li>
<li><p class="first">Establish a cursor on all targeted shards.</p>
<p>When the first batch of results returns from the cursors:</p>
<ol class="loweralpha">
<li><p class="first">For query with sorted results (i.e. using
<a class="reference internal" href="../reference/method/cursor.sort.html#cursor.sort" title="cursor.sort()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">cursor.sort()</span></code></a>) the <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instance performs a merge
sort of all queries.</p>
</li>
<li><p class="first">For a query with unsorted results, the <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instance returns
a result cursor that “round robins” results from all cursors on
the shards.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.0.5: </span>Before 2.0.5, the <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> exhausted each cursor,
one by one.</p>
</div>
</li>
</ol>
</li>
</ol>
</div>
</div>
<div class="section" id="sharded-cluster-security-considerations">
<span id="sharding-security"></span><h2>Sharded Cluster Security Considerations<a class="headerlink" href="#sharded-cluster-security-considerations" title="Permalink to this headline">¶</a></h2>
<p>MongoDB controls access to <a class="reference internal" href="../reference/glossary.html#term-sharded-cluster"><span class="xref std std-term">sharded clusters</span></a>
with key files that store authentication credentials. The components
of sharded clusters use the secret stored in the key files when
authenticating to each other. Create key files and then point your
<a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> and <a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> instances to the files, as
described later in this section.</p>
<p>Beyond the <a class="reference internal" href="../reference/configuration-options.html#auth" title="auth"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">auth</span></code></a> mechanisms described in this section,
always run your sharded clusters in trusted networking environments
that limit access to the cluster with network rules. Your networking
environments should enforce restrictions that ensure only known
traffic reaches your <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> and <a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a>
instances.</p>
<p>This section describes authentication specific to sharded
clusters. For information on authentication across MongoDB, see
<a class="reference internal" href="security.html#security-authentication"><span class="std std-ref">Authentication</span></a>.</p>
<div class="section" id="access-control-privileges-in-sharded-clusters">
<h3>Access Control Privileges in Sharded Clusters<a class="headerlink" href="#access-control-privileges-in-sharded-clusters" title="Permalink to this headline">¶</a></h3>
<p>In sharded clusters, MongoDB provides separate administrative
privileges for the sharded cluster and for each shard. Beyond these
administration privileges, privileges for sharded cluster deployments
are functionally the same as any other MongoDB deployment. See,
<a class="reference internal" href="security.html#security-authentication"><span class="std std-ref">Authentication</span></a> for more information.</p>
<p>For sharded clusters, MongoDB provides these separate administrative
privileges:</p>
<ul>
<li><p class="first">Administrative privileges for the sharded cluster. These privileges
provide read-and-write access to the config servers’ ‘<a class="reference internal" href="../reference/glossary.html#term-admin-database"><span class="xref std std-term">admin</span></a>. These users can run all administrative commands.
Administrative privileges also give the user read-and-write access
to all the cluster’s databases.</p>
<p>The credentials for administrative privileges on the cluster reside on
the config servers. To receive admin access to the cluster, you must
authenticate a session while connected to a <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instance
using the admin database.</p>
</li>
<li><p class="first">Administrative privileges for the <a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> instance, or
<a class="reference internal" href="../reference/glossary.html#term-replica-set"><span class="xref std std-term">replica set</span></a>, that provides each individual shard. Each shard
has its own admin database that stores administrative credentials
and access for that shard only. These credentials are <em>completely</em>
distinct from the cluster-wide administrative credentials.</p>
<p>As with all <a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> instances, MongoDB provides two types
of administrative privileges for a shard:</p>
<ul class="simple">
<li>Normal administrative privileges, which provide read-and-write
access to the admin database and access to all administrative
commands, and which provide read-and-write access to all other
databases on that shard.</li>
<li>Read-only administrative privileges, which provide read-only access
to the admin database and to all other databases on that shard.</li>
</ul>
</li>
</ul>
<p>Also, as with all <a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> instances, a MongoDB sharded cluster
provides the following non-administrative user privileges:</p>
<ul class="simple">
<li>Normal privileges, which provide read-and-write access to a specific
database. Users with normal privilege can add users to the database.</li>
<li>Read-only privileges, which provide read-only access to a specific
database.</li>
</ul>
<p>For more information on privileges, see <a class="reference internal" href="security.html#security-authentication"><span class="std std-ref">Authentication</span></a>.</p>
</div>
<div class="section" id="enable-authentication-in-a-sharded-cluster">
<h3>Enable Authentication in a Sharded Cluster<a class="headerlink" href="#enable-authentication-in-a-sharded-cluster" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0: </span>Support for authentication with sharded clusters.</p>
</div>
<p>To control access to a sharded cluster, create key files and then set
the <a class="reference internal" href="../reference/configuration-options.html#keyFile" title="keyFile"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">keyFile</span></code></a> option on <em>all</em> components of the sharded
cluster, including all <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instances, all config server
<a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> instances, and all shard <a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a>
instances. The content of the key file is arbitrary but must be the
same on all cluster members.</p>
<p>To enable authentication, do the following:</p>
<ol class="arabic">
<li><p class="first">Generate a key file to store authentication information, as described
in the <a class="reference internal" href="../tutorial/control-access-to-mongodb-with-authentication.html#generate-key-file"><span class="std std-ref">Generate a Key File</span></a> section.</p>
</li>
<li><p class="first">On each component in the sharded cluster, enable authentication by
doing one of the following:</p>
<ul>
<li><p class="first">In the configuration file, set the <a class="reference internal" href="../reference/configuration-options.html#keyFile" title="keyFile"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">keyFile</span></code></a> option to the
key file’s path and then start the component, as in the following
example:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-cfg"><div class="highlight"><pre><span></span><span class="na">keyFile</span> <span class="o">=</span> <span class="s">/srv/mongodb/keyfile</span>
</pre></div>
</div>
</div>
</li>
<li><p class="first">When starting the component, set <a class="reference internal" href="../reference/mongos.html#cmdoption-mongos-keyfile"><code class="xref std std-option docutils literal"><span class="pre">--keyFile</span></code></a> option,
which is an option for both <a class="reference internal" href="../reference/mongos.html#bin.mongos" title="bin.mongos"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code></a> instances and
<a class="reference internal" href="../reference/mongod.html#bin.mongod" title="bin.mongod"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code></a> instances. Set the <a class="reference internal" href="../reference/mongos.html#cmdoption-mongos-keyfile"><code class="xref std std-option docutils literal"><span class="pre">--keyFile</span></code></a>
to the key file’s path.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference internal" href="../reference/configuration-options.html#keyFile" title="keyFile"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">keyFile</span></code></a> setting implies <a class="reference internal" href="../reference/configuration-options.html#auth" title="auth"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">auth</span></code></a>, which
means in most cases you do not need to set <a class="reference internal" href="../reference/configuration-options.html#auth" title="auth"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">auth</span></code></a>
explicitly.</p>
</div>
</li>
<li><p class="first">Add the first administrative user and then add subsequent users. See
<a class="reference internal" href="../tutorial/control-access-to-mongodb-with-authentication.html#control-access-add-users"><span class="std std-ref">Add Users</span></a>.</p>
</li>
</ol>
</div>
<div class="section" id="access-a-sharded-cluster-with-authentication">
<h3>Access a Sharded Cluster with Authentication<a class="headerlink" href="#access-a-sharded-cluster-with-authentication" title="Permalink to this headline">¶</a></h3>
<p>To access a sharded cluster as an authenticated admin user, see
<a class="reference internal" href="../tutorial/control-access-to-mongodb-with-authentication.html#control-access-admin-access"><span class="std std-ref">Administrative Access in MongoDB</span></a>.</p>
<p>To access a sharded cluster as an authenticated, non-admin user, see
either of the following:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/command/authenticate.html#dbcmd.authenticate" title="authenticate"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">authenticate</span></code></a></li>
<li><a class="reference internal" href="../reference/method/db.auth.html#db.auth" title="db.auth()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.auth()</span></code></a></li>
</ul>
<p>To terminate an authenticated session, see the <a class="reference internal" href="../reference/command/logout.html#dbcmd.logout" title="logout"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">logout</span></code></a>
command.</p>
</div>
</div>
</div>

                
    <div id="btnv">
      <span class="btn-arrow-left">&larr; &nbsp;</span>
      <a class="btn-prev-text" href="../core/sharded-clusters.html" title="Previous Section: Sharded Cluster Overview"><span>Sharded Cluster Overview</span></a>
      <a class="btn-next-text" href="sharded-cluster-architectures.html" title="Next Section: Sharded Cluster Architectures"><span>Sharded Cluster Architectures</span></a>
      <span class="btn-arrow-right">&nbsp;&rarr;</span>
    </div>
                  <div class="footer">
                    <div class="copyright">
                      <p>&copy; MongoDB, Inc 2008-present. MongoDB, Mongo, and the leaf logo are registered trademarks of MongoDB, Inc.</p>
                    </div>
                  </div>
              </div></div>
            </div>
        </div>
    </div>
    <div class="right-column">
      <div class="wrapper"> <div id='mongodb-docs-1'>
   <script type='text/javascript'>
      googletag.cmd.push(function() { googletag.display('mongodb-docs-1'); });
   </script>
</div>
            <div class="social">
               <a class="slack-icon" href="https://slackpass.io/mongo-db?jmp=docs" title="https://slackpass.io/mongo-db?jmp=docs"><i class="fab fa-slack" aria-hidden="true"></i></a>
               <a class="twitter-icon" href="https://twitter.com/MongoDB" title="https://twitter.com/MongoDB"><i class="fab fa-twitter-square"></i></a>
               <a class="youtube-icon" href="https://www.youtube.com/user/MongoDB" title="https://www.youtube.com/user/MongoDB"><i class="fab fa-youtube-square"></i></a>
               <a class="facebook-icon" href="https://www.facebook.com/mongodb" title="https://www.facebook.com/mongodb"><i class="fab fa-facebook-square"></i></a>
               <a class="stack-overflow-icon" href="https://stackoverflow.com/tags/mongodb/info" title="https://stackoverflow.com/tags/mongodb/info"><i class="fab fa-stack-overflow" aria-hidden="true"></i></a>
            </div>
        

      </div>
    </div>
    
      <div id="rating-panel"></div>
    
    <div class="clearfix"></div>
  </div>
<div id="navbar" data-navprops='{"links": [{"url": "https://www.mongodb.com/docs/manual/","text": "Server","active": true},{"url": "https://www.mongodb.com/docs/drivers/","text": "Drivers"},{"url": "https://www.mongodb.com/docs/cloud/","text": "Cloud"},{"url": "https://www.mongodb.com/docs/tools/","text": "Tools"},{"url": "https://www.mongodb.com/docs/guides/","text": "Guides"}], "baseUrl": "https://www.mongodb.com/docs"}'></div>

  

  

  <script type="text/javascript">
  // Bootstrap array of links that should trigger a full page reload
  window.docsExcludedNav = [];
  </script></body>
</html>